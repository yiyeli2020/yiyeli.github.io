---
title: 139. å•è¯æ‹†åˆ†

date: 2020-05-28 23:39:12

categories: 2020å¹´5æœˆ

tags: [LeetCode,Dynamic Programming]

---

ç»™å®šä¸€ä¸ªéç©ºå­—ç¬¦ä¸² s å’Œä¸€ä¸ªåŒ…å«éç©ºå•è¯åˆ—è¡¨çš„å­—å…¸ wordDictï¼Œåˆ¤å®šÂ s æ˜¯å¦å¯ä»¥è¢«ç©ºæ ¼æ‹†åˆ†ä¸ºä¸€ä¸ªæˆ–å¤šä¸ªåœ¨å­—å…¸ä¸­å‡ºç°çš„å•è¯

<!-- more -->


# ğŸ“–é¢˜ç›®æè¿°ï¼š
ç»™å®šä¸€ä¸ªéç©ºå­—ç¬¦ä¸² s å’Œä¸€ä¸ªåŒ…å«éç©ºå•è¯åˆ—è¡¨çš„å­—å…¸ wordDictï¼Œåˆ¤å®šÂ s æ˜¯å¦å¯ä»¥è¢«ç©ºæ ¼æ‹†åˆ†ä¸ºä¸€ä¸ªæˆ–å¤šä¸ªåœ¨å­—å…¸ä¸­å‡ºç°çš„å•è¯ã€‚

è¯´æ˜ï¼š

æ‹†åˆ†æ—¶å¯ä»¥é‡å¤ä½¿ç”¨å­—å…¸ä¸­çš„å•è¯ã€‚
ä½ å¯ä»¥å‡è®¾å­—å…¸ä¸­æ²¡æœ‰é‡å¤çš„å•è¯ã€‚
ç¤ºä¾‹ 1ï¼š
    
    è¾“å…¥: s = "leetcode", wordDict = ["leet", "code"]
    è¾“å‡º: true
    è§£é‡Š: è¿”å› true å› ä¸º "leetcode" å¯ä»¥è¢«æ‹†åˆ†æˆ "leet code"ã€‚
ç¤ºä¾‹ 2ï¼š
    
    è¾“å…¥: s = "applepenapple", wordDict = ["apple", "pen"]
    è¾“å‡º: true
    è§£é‡Š: è¿”å› true å› ä¸º "applepenapple" å¯ä»¥è¢«æ‹†åˆ†æˆ "apple pen apple"ã€‚
    Â     æ³¨æ„ä½ å¯ä»¥é‡å¤ä½¿ç”¨å­—å…¸ä¸­çš„å•è¯ã€‚
ç¤ºä¾‹ 3ï¼š
    
    è¾“å…¥: s = "catsandog", wordDict = ["cats", "dog", "sand", "and", "cat"]
    è¾“å‡º: false

# ğŸ“–æ–¹æ³•ä¸€ï¼šæš´åŠ›æ±‚è§£

**ç®—æ³•**

æœ€ç®€å•çš„å®ç°æ–¹æ³•æ˜¯ç”¨é€’å½’å’Œå›æº¯ã€‚ä¸ºäº†æ‰¾åˆ°è§£ï¼Œæˆ‘ä»¬å¯ä»¥æ£€æŸ¥å­—å…¸å•è¯ä¸­æ¯ä¸€ä¸ªå•è¯çš„å¯èƒ½å‰ç¼€ï¼Œå¦‚æœåœ¨å­—å…¸ä¸­å‡ºç°è¿‡ï¼Œé‚£ä¹ˆå»æ‰è¿™ä¸ªå‰ç¼€åå‰©ä½™éƒ¨åˆ†å›å½’è°ƒç”¨ã€‚åŒæ—¶ï¼Œå¦‚æœæŸæ¬¡å‡½æ•°è°ƒç”¨ä¸­å‘ç°æ•´ä¸ªå­—ç¬¦ä¸²éƒ½å·²ç»è¢«æ‹†åˆ†ä¸”åœ¨å­—å…¸ä¸­å‡ºç°è¿‡äº†ï¼Œå‡½æ•°å°±è¿”å› `true` ã€‚

```Java []
public class Solution {
    public boolean wordBreak(String s, List<String> wordDict) {
        return word_Break(s, new HashSet(wordDict), 0);
    }
    public boolean word_Break(String s, Set<String> wordDict, int start) {
        if (start == s.length()) {
            return true;
        }
        for (int end = start + 1; end <= s.length(); end++) {
            if (wordDict.contains(s.substring(start, end)) && word_Break(s, wordDict, end)) {
                return true;
            }
        }
        return false;
    }
}
```

**å¤æ‚åº¦åˆ†æ**

* æ—¶é—´å¤æ‚åº¦ï¼š*O(n^n)* ã€‚è€ƒè™‘æœ€åæƒ…å†µ *s* = aaaaaaa ã€‚æ¯ä¸€ä¸ªå‰ç¼€éƒ½åœ¨å­—å…¸ä¸­ï¼Œæ­¤æ—¶å›æº¯æ ‘çš„å¤æ‚åº¦ä¼šè¾¾åˆ° *n^n* ã€‚
* ç©ºé—´å¤æ‚åº¦ï¼š*O(n)* ã€‚å›æº¯æ ‘çš„æ·±åº¦æœ€æ·±è¾¾åˆ° *n* ã€‚

# ğŸ“–æ–¹æ³•äºŒï¼šè®°å¿†åŒ–å›æº¯

**ç®—æ³•**

åœ¨å…ˆå‰çš„æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°è®¸å¤šå‡½æ•°è°ƒç”¨éƒ½æ˜¯å†—ä½™çš„ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¼šå¯¹ç›¸åŒçš„å­—ç¬¦ä¸²è°ƒç”¨å¤šæ¬¡å›æº¯å‡½æ•°ã€‚ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è®°å¿†åŒ–çš„æ–¹æ³•ï¼Œå…¶ä¸­ä¸€ä¸ª *memo* æ•°ç»„ä¼šè¢«ç”¨æ¥ä¿å­˜å­é—®é¢˜çš„ç»“æœã€‚æ¯å½“è®¿é—®åˆ°å·²ç»è®¿é—®è¿‡çš„åç¼€ä¸²ï¼Œç›´æ¥ç”¨ *memo* æ•°ç»„ä¸­çš„å€¼è¿”å›è€Œä¸éœ€è¦ç»§ç»­è°ƒç”¨å‡½æ•°ã€‚

é€šè¿‡è®°å¿†åŒ–ï¼Œè®¸å¤šå†—ä½™çš„å­é—®é¢˜å¯ä»¥æå¤§è¢«ä¼˜åŒ–ï¼Œå›æº¯æ ‘å¾—åˆ°äº†å‰ªæï¼Œå› æ­¤æå¤§å‡å°äº†æ—¶é—´å¤æ‚åº¦ã€‚

```Java []
public class Solution {
    public boolean wordBreak(String s, List<String> wordDict) {
        return word_Break(s, new HashSet(wordDict), 0, new Boolean[s.length()]);
    }
    public boolean word_Break(String s, Set<String> wordDict, int start, Boolean[] memo) {
        if (start == s.length()) {
            return true;
        }
        if (memo[start] != null) {
            return memo[start];
        }
        for (int end = start + 1; end <= s.length(); end++) {
            if (wordDict.contains(s.substring(start, end)) && word_Break(s, wordDict, end, memo)) {
                return memo[start] = true;
            }
        }
        return memo[start] = false;
    }
}
```

**å¤æ‚åº¦åˆ†æ**

* æ—¶é—´å¤æ‚åº¦ï¼š*O(n^2)* ã€‚å›æº¯æ ‘çš„å¤§å°æœ€å¤šè¾¾åˆ° *n^2* ã€‚

* ç©ºé—´å¤æ‚åº¦ï¼š*O(n)* ã€‚å›æº¯æ ‘çš„æ·±åº¦å¯ä»¥è¾¾åˆ° *n* çº§åˆ«ã€‚

# ğŸ“–æ–¹æ³• 3ï¼šä½¿ç”¨å®½åº¦ä¼˜å…ˆæœç´¢

**ç®—æ³•**

å¦ä¸€ä¸ªæ–¹æ³•æ˜¯ä½¿ç”¨å®½åº¦ä¼˜å…ˆæœç´¢ã€‚å°†å­—ç¬¦ä¸²å¯è§†åŒ–æˆä¸€æ£µæ ‘ï¼Œæ¯ä¸€ä¸ªèŠ‚ç‚¹æ˜¯ç”¨ *end* ä¸ºç»“å°¾çš„å‰ç¼€å­—ç¬¦ä¸²ã€‚å½“ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´çš„æ‰€æœ‰èŠ‚ç‚¹éƒ½å¯¹åº”äº†å­—å…¸ä¸­ä¸€ä¸ªæœ‰æ•ˆå­—ç¬¦ä¸²æ—¶ï¼Œä¸¤ä¸ªèŠ‚ç‚¹å¯ä»¥è¢«è¿æ¥ã€‚

ä¸ºäº†å½¢æˆè¿™æ ·çš„ä¸€æ£µæ ‘ï¼Œæˆ‘ä»¬ä»ç»™å®šå­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå­—ç¬¦å¼€å§‹ï¼ˆæ¯”æ–¹è¯´ *s* ï¼‰ï¼Œå°†å®ƒä½œä¸ºæ ‘çš„æ ¹éƒ¨ï¼Œå¼€å§‹æ‰¾æ‰€æœ‰å¯è¡Œçš„ä»¥è¯¥å­—ç¬¦ä¸ºé¦–å­—ç¬¦çš„å¯è¡Œå­ä¸²ã€‚è¿›ä¸€æ­¥çš„ï¼Œå°†æ¯ä¸€ä¸ªå­å­—ç¬¦ä¸²çš„ç»“æŸå­—ç¬¦çš„ä¸‹æ ‡ï¼ˆæ¯”æ–¹è¯´ *i*ï¼‰æ”¾åœ¨é˜Ÿåˆ—çš„å°¾éƒ¨ä¾›å®½æœåç»­ä½¿ç”¨ã€‚

æ¯æ¬¡æˆ‘ä»¬ä»é˜Ÿåˆ—æœ€å‰é¢å¼¹å‡ºä¸€ä¸ªå…ƒç´ ï¼Œå¹¶è€ƒè™‘å­—ç¬¦ä¸² *s(i+1,end)* ä½œä¸ºåŸå§‹å­—ç¬¦ä¸²ï¼Œå¹¶å°†å½“å‰èŠ‚ç‚¹ä½œä¸ºæ ‘çš„æ ¹ã€‚è¿™ä¸ªè¿‡ç¨‹ä¼šä¸€ç›´é‡å¤ï¼Œç›´åˆ°é˜Ÿåˆ—ä¸­æ²¡æœ‰å…ƒç´ ã€‚å¦‚æœå­—ç¬¦ä¸²æœ€åçš„å…ƒç´ å¯ä»¥ä½œä¸ºæ ‘çš„ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¿™æ„å‘³ç€åˆå§‹å­—ç¬¦ä¸²å¯ä»¥è¢«æ‹†åˆ†æˆå¤šä¸ªç»™å®šå­—å…¸ä¸­çš„å­å­—ç¬¦ä¸²ã€‚

æ ‘çš„ç”Ÿæˆè¿‡ç¨‹å¯ä»¥å‚è€ƒè¿™ä¸ªä¾‹å­ï¼š

  [1](https://pic.leetcode-cn.com/b874378afb2d9bc171a396e778cfeb25a6ee1368a374124de3d9990b820e80e6-image.png)  [2](https://pic.leetcode-cn.com/3bcb1c59ef2489c034310c76c86b2cfd707beed96f629d8be51e2ae96287d2c5-image.png)  [3](https://pic.leetcode-cn.com/cb9b4a35d26b71346da25f9f6cab1926dfb7cb9d3cb8171a750f8d012f081fff-image.png)  [4](https://pic.leetcode-cn.com/bd128522a7fc7b3426c1411cbc4c729018b53f814f74eb97fc25003bfe282eb4-image.png)  [5](https://pic.leetcode-cn.com/89989e53118ece2da9f0fd79c56b1beff07a6bdabd8ee9c1b0492f93d8eec000-image.png)  [6](https://pic.leetcode-cn.com/7e338635849ebb3ee872bcf8ddc14a56ece8bc2d4486cef984980fa8d53b7571-image.png)  [7](https://pic.leetcode-cn.com/13748edb1a2cab3f7636a0af409de256aa1048ff976dff44627c118b9f9b5fbb-image.png) 

```Java []
public class Solution {
    public boolean wordBreak(String s, List<String> wordDict) {
        Set<String> wordDictSet=new HashSet(wordDict);
        Queue<Integer> queue = new LinkedList<>();
        int[] visited = new int[s.length()];
        queue.add(0);
        while (!queue.isEmpty()) {
            int start = queue.remove();
            if (visited[start] == 0) {
                for (int end = start + 1; end <= s.length(); end++) {
                    if (wordDictSet.contains(s.substring(start, end))) {
                        queue.add(end);
                        if (end == s.length()) {
                            return true;
                        }
                    }
                }
                visited[start] = 1;
            }
        }
        return false;
    }
}
```

**å¤æ‚åº¦åˆ†æ**

* æ—¶é—´å¤æ‚åº¦ï¼š*O(n^2)* ã€‚å¯¹äºæ¯ä¸ªå¼€å§‹çš„ä½ç½®ï¼Œæœç´¢ä¼šç›´åˆ°ç»™å®šå­—ç¬¦ä¸²çš„å°¾éƒ¨ç»“æŸã€‚

* ç©ºé—´å¤æ‚åº¦ï¼š*O(n)* ã€‚é˜Ÿåˆ—çš„å¤§å°æœ€å¤š *n* ã€‚

# ğŸ“–æ–¹æ³• 4ï¼šä½¿ç”¨åŠ¨æ€è§„åˆ’

**ç®—æ³•**

è¿™ä¸ªæ–¹æ³•çš„æƒ³æ³•æ˜¯å¯¹äºç»™å®šçš„å­—ç¬¦ä¸²ï¼ˆ*s*ï¼‰å¯ä»¥è¢«æ‹†åˆ†æˆå­é—®é¢˜ *s1* å’Œ *s2* ã€‚å¦‚æœè¿™äº›å­é—®é¢˜éƒ½å¯ä»¥ç‹¬ç«‹åœ°è¢«æ‹†åˆ†æˆç¬¦åˆè¦æ±‚çš„å­é—®é¢˜ï¼Œé‚£ä¹ˆæ•´ä¸ªé—®é¢˜ *s* ä¹Ÿå¯ä»¥æ»¡è¶³ã€‚ä¹Ÿå°±æ˜¯ï¼Œå¦‚æœ "catsanddog" å¯ä»¥æ‹†åˆ†æˆä¸¤ä¸ªå­å­—ç¬¦ä¸² "catsand" å’Œ "dog" ã€‚å­é—®é¢˜ "catsand" å¯ä»¥è¿›ä¸€æ­¥æ‹†åˆ†æˆ "cats" å’Œ "and" ï¼Œè¿™ä¸¤ä¸ªç‹¬ç«‹çš„éƒ¨åˆ†éƒ½æ˜¯å­—å…¸çš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥ "catsand" æ»¡è¶³é¢˜æ„æ¡ä»¶ï¼Œå†å¾€å‰ï¼Œ "catsand" å’Œ "dog" ä¹Ÿåˆ†åˆ«æ»¡è¶³æ¡ä»¶ï¼Œæ‰€ä»¥æ•´ä¸ªå­—ç¬¦ä¸² "catsanddog" ä¹Ÿæ»¡è¶³æ¡ä»¶ã€‚

ç°åœ¨ï¼Œæˆ‘ä»¬è€ƒè™‘ dp æ•°ç»„æ±‚è§£çš„è¿‡ç¨‹ã€‚æˆ‘ä»¬ä½¿ç”¨ *n+1* å¤§å°æ•°ç»„çš„dp ï¼Œå…¶ä¸­ *n* æ˜¯ç»™å®šå­—ç¬¦ä¸²çš„é•¿åº¦ã€‚æˆ‘ä»¬ä¹Ÿä½¿ç”¨ 2 ä¸ªä¸‹æ ‡æŒ‡é’ˆ *i* å’Œ *j* ï¼Œå…¶ä¸­ *i* æ˜¯å½“å‰å­—ç¬¦ä¸²ä»å¤´å¼€å§‹çš„å­å­—ç¬¦ä¸²ï¼ˆ*s'*ï¼‰çš„é•¿åº¦ï¼Œ *j* æ˜¯å½“å‰å­å­—ç¬¦ä¸²ï¼ˆ*s'*ï¼‰çš„æ‹†åˆ†ä½ç½®ï¼Œæ‹†åˆ†æˆ *s'(0,j)* å’Œ *s'(j+1,i)* ã€‚

ä¸ºäº†æ±‚å‡º dp æ•°ç»„ï¼Œæˆ‘ä»¬åˆå§‹åŒ–dp[0] ä¸º true  ï¼Œè¿™æ˜¯å› ä¸ºç©ºå­—ç¬¦ä¸²æ€»æ˜¯å­—å…¸çš„ä¸€éƒ¨åˆ†ã€‚ dpæ•°ç»„å‰©ä½™çš„å…ƒç´ éƒ½åˆå§‹åŒ–ä¸ºfalseã€‚

æˆ‘ä»¬ç”¨ä¸‹æ ‡ *i* æ¥è€ƒè™‘æ‰€æœ‰ä»å½“å‰å­—ç¬¦ä¸²å¼€å§‹çš„å¯èƒ½çš„å­å­—ç¬¦ä¸²ã€‚å¯¹äºæ¯ä¸€ä¸ªå­å­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬é€šè¿‡ä¸‹æ ‡ *j* å°†å®ƒæ‹†åˆ†æˆ *s1'* å’Œ *s2'* ï¼ˆæ³¨æ„ *i* ç°åœ¨æŒ‡å‘ *s2'* çš„ç»“å°¾ï¼‰ã€‚ä¸ºäº†å°†dp[i]æ•°ç»„æ±‚å‡ºæ¥ï¼Œæˆ‘ä»¬ä¾æ¬¡æ£€æŸ¥æ¯ä¸ªdp[j]æ˜¯å¦ä¸º true ï¼Œä¹Ÿå°±æ˜¯å­å­—ç¬¦ä¸² *s1'* æ˜¯å¦æ»¡è¶³é¢˜ç›®è¦æ±‚ã€‚å¦‚æœæ»¡è¶³ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥æ£€æŸ¥ *s2'* æ˜¯å¦åœ¨å­—å…¸ä¸­ã€‚å¦‚æœåŒ…å«ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥æ£€æŸ¥ *s2'* æ˜¯å¦åœ¨å­—å…¸ä¸­ï¼Œå¦‚æœä¸¤ä¸ªå­—ç¬¦ä¸²éƒ½æ»¡è¶³è¦æ±‚ï¼Œæˆ‘ä»¬è®© true ä¸ºtrueï¼Œå¦åˆ™ä»¤å…¶ä¸ºfalseã€‚

```Java []
public class Solution {
    public boolean wordBreak(String s, List<String> wordDict) {
        Set<String> wordDictSet=new HashSet(wordDict);
        boolean[] dp = new boolean[s.length() + 1];
        dp[0] = true;
        for (int i = 1; i <= s.length(); i++) {
            for (int j = 0; j < i; j++) {
                if (dp[j] && wordDictSet.contains(s.substring(j, i))) {
                    dp[i] = true;
                    break;
                }
            }
        }
        return dp[s.length()];
    }
}
```

**å¤æ‚åº¦åˆ†æ**

* æ—¶é—´å¤æ‚åº¦ï¼š*O(n^2)* ã€‚æ±‚å‡º dp æ•°ç»„éœ€è¦ä¸¤é‡å¾ªç¯ã€‚

* ç©ºé—´å¤æ‚åº¦ï¼š*O(n)* ã€‚ *dp* æ•°ç»„çš„é•¿åº¦æ˜¯ *n+1* ã€‚

# å‚è€ƒèµ„æ–™ï¼š
ã€1ã€‘https://leetcode-cn.com/problems/word-break/solution/dan-ci-chai-fen-by-leetcode/

