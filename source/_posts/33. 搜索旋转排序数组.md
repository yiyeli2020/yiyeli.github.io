title: 33. æœç´¢æ—‹è½¬æ’åºæ•°ç»„

date: 2020-11-11 16:43:12

categories: 2020å¹´11æœˆ

tags: [Leetcode, Array, Binary Search]

---

ç»™ä½ ä¸€ä¸ªå‡åºæ’åˆ—çš„æ•´æ•°æ•°ç»„ nums ï¼Œå’Œä¸€ä¸ªæ•´æ•° target ã€‚

å‡è®¾æŒ‰ç…§å‡åºæ’åºçš„æ•°ç»„åœ¨é¢„å…ˆæœªçŸ¥çš„æŸä¸ªç‚¹ä¸Šè¿›è¡Œäº†æ—‹è½¬ã€‚ï¼ˆä¾‹å¦‚ï¼Œæ•°ç»„ [0,1,2,4,5,6,7] å¯èƒ½å˜ä¸º [4,5,6,7,0,1,2] ï¼‰ã€‚

è¯·ä½ åœ¨æ•°ç»„ä¸­æœç´¢ target ï¼Œå¦‚æœæ•°ç»„ä¸­å­˜åœ¨è¿™ä¸ªç›®æ ‡å€¼ï¼Œåˆ™è¿”å›å®ƒçš„ç´¢å¼•ï¼Œå¦åˆ™è¿”å› -1 ã€‚

<!-- more -->


 
ç¤ºä¾‹ 1ï¼š

    è¾“å…¥ï¼šnums = [4,5,6,7,0,1,2], target = 0
    è¾“å‡ºï¼š4
ç¤ºä¾‹ 2ï¼š

    è¾“å…¥ï¼šnums = [4,5,6,7,0,1,2], target = 3
    è¾“å‡ºï¼š-1
ç¤ºä¾‹ 3ï¼š

    è¾“å…¥ï¼šnums = [1], target = 0
    è¾“å‡ºï¼š-1
 

æç¤ºï¼š
    
    1 <= nums.length <= 5000
    -10^4 <= nums[i] <= 10^4
    nums ä¸­çš„æ¯ä¸ªå€¼éƒ½ ç‹¬ä¸€æ— äºŒ
    nums è‚¯å®šä¼šåœ¨æŸä¸ªç‚¹ä¸Šæ—‹è½¬
    -10^4 <= target <= 10^4
    
# ğŸ“– æ–‡å­—é¢˜è§£
æˆ‘é¦–å…ˆç”¨äºŒåˆ†æœç´¢é‡åˆ°çš„é—®é¢˜æ˜¯ä»¥ä¸‹å‡ ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼š
```
    æµ‹è¯•ç”¨ä¾‹:[1,0]
	0
	æœŸæœ›ç»“æœ:1
	
	æµ‹è¯•ç”¨ä¾‹:[0]
	0
	æœŸæœ›ç»“æœ:0
	
	æµ‹è¯•ç”¨ä¾‹:[1,3,5]
	3
	æœŸæœ›ç»“æœ:1
```

æ‰€ä»¥ç”¨ä»¥ä¸‹æ–¹æ³•æ¥è§£

<details>
    <summary>äºŒåˆ†æœç´¢Java</summary>

```
class Solution {
    public int search(int[] nums, int target) {
        int index = -1;
        int i = 0, j = nums.length - 1;

        while (i < j) {
            int mid = (i + j) / 2;
            if (nums[mid] < nums[i]) {
                j = mid;
            } else {
                i = mid+1;
            }
            if (nums[i] == target) {
                index = i;
            }
        }
        if (index == -1) {
            for (int k = 0; k < nums.length; k++) {
                if (nums[k] == target) {
                    return k;
                }
            }
        }
        return index;
    }
}
```
</details>

ä½†è¿™ç§ç®—æ³•æœ€åè¦éå†ä¸€éï¼Œæ‰€ä»¥å¤æ‚åº¦ä¸ºO(n)

## äºŒåˆ†æœç´¢

**æ€è·¯å’Œç®—æ³•**

é¢˜ç›®è¦æ±‚ç®—æ³•æ—¶é—´å¤æ‚åº¦å¿…é¡»æ˜¯O(logn)   çš„çº§åˆ«ï¼Œè¿™æç¤ºæˆ‘ä»¬å¯ä»¥ä½¿ç”¨äºŒåˆ†æœç´¢çš„æ–¹æ³•ã€‚

ä½†æ˜¯æ•°ç»„æœ¬èº«ä¸æ˜¯æœ‰åºçš„ï¼Œè¿›è¡Œæ—‹è½¬ååªä¿è¯äº†æ•°ç»„çš„å±€éƒ¨æ˜¯æœ‰åºçš„ï¼Œè¿™è¿˜èƒ½è¿›è¡ŒäºŒåˆ†æœç´¢å—ï¼Ÿç­”æ¡ˆæ˜¯å¯ä»¥çš„ã€‚

å¯ä»¥å‘ç°çš„æ˜¯ï¼Œæˆ‘ä»¬å°†æ•°ç»„ä»ä¸­é—´åˆ†å¼€æˆå·¦å³ä¸¤éƒ¨åˆ†çš„æ—¶å€™ï¼Œä¸€å®šæœ‰ä¸€éƒ¨åˆ†çš„æ•°ç»„æ˜¯æœ‰åºçš„ã€‚æ‹¿ç¤ºä¾‹æ¥çœ‹ï¼Œæˆ‘ä»¬ä» `6` è¿™ä¸ªä½ç½®åˆ†å¼€ä»¥åæ•°ç»„å˜æˆäº† `[4, 5, 6]` å’Œ `[7, 0, 1, 2]` ä¸¤ä¸ªéƒ¨åˆ†ï¼Œå…¶ä¸­å·¦è¾¹ `[4, 5, 6]` è¿™ä¸ªéƒ¨åˆ†çš„æ•°ç»„æ˜¯æœ‰åºçš„ï¼Œå…¶ä»–ä¹Ÿæ˜¯å¦‚æ­¤ã€‚

è¿™å¯ç¤ºæˆ‘ä»¬å¯ä»¥åœ¨å¸¸è§„äºŒåˆ†æœç´¢çš„æ—¶å€™æŸ¥çœ‹å½“å‰ `mid` ä¸ºåˆ†å‰²ä½ç½®åˆ†å‰²å‡ºæ¥çš„ä¸¤ä¸ªéƒ¨åˆ† `[l, mid]` å’Œ `[mid + 1, r]` å“ªä¸ªéƒ¨åˆ†æ˜¯æœ‰åºçš„ï¼Œå¹¶æ ¹æ®æœ‰åºçš„é‚£ä¸ªéƒ¨åˆ†ç¡®å®šæˆ‘ä»¬è¯¥å¦‚ä½•æ”¹å˜äºŒåˆ†æœç´¢çš„ä¸Šä¸‹ç•Œï¼Œå› ä¸ºæˆ‘ä»¬èƒ½å¤Ÿæ ¹æ®æœ‰åºçš„é‚£éƒ¨åˆ†åˆ¤æ–­å‡º `target` åœ¨ä¸åœ¨è¿™ä¸ªéƒ¨åˆ†ï¼š

- å¦‚æœ `[l, mid - 1]` æ˜¯æœ‰åºæ•°ç»„ï¼Œä¸” `target` çš„å¤§å°æ»¡è¶³[nums[l],nums[mid])ï¼Œåˆ™æˆ‘ä»¬åº”è¯¥å°†æœç´¢èŒƒå›´ç¼©å°è‡³ `[l, mid - 1]`ï¼Œå¦åˆ™åœ¨ `[mid + 1, r]` ä¸­å¯»æ‰¾ã€‚
- å¦‚æœ `[mid, r]` æ˜¯æœ‰åºæ•°ç»„ï¼Œä¸” `target` çš„å¤§å°æ»¡è¶³(nums[mid+1],nums[r]] ï¼Œåˆ™æˆ‘ä»¬åº”è¯¥å°†æœç´¢èŒƒå›´ç¼©å°è‡³ `[mid + 1, r]`ï¼Œå¦åˆ™åœ¨ `[l, mid - 1]` ä¸­å¯»æ‰¾ã€‚

[fig1](https://assets.leetcode-cn.com/solution-static/33/33_fig1.png)

éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒäºŒåˆ†çš„å†™æ³•æœ‰å¾ˆå¤šç§ï¼Œæ‰€ä»¥åœ¨åˆ¤æ–­ `target` å¤§å°ä¸æœ‰åºéƒ¨åˆ†çš„å…³ç³»çš„æ—¶å€™å¯èƒ½ä¼šå‡ºç°ç»†èŠ‚ä¸Šçš„å·®åˆ«ã€‚
<details>
    <summary>äºŒåˆ†æœç´¢C++</summary>


```C++ [solution1-C++]
class Solution {
public:
    int search(vector<int>& nums, int target) {
        int n = (int)nums.size();
        if (!n) {
            return -1;
        }
        if (n == 1) {
            return nums[0] == target ? 0 : -1;
        }
        int l = 0, r = n - 1;
        while (l <= r) {
            int mid = (l + r) / 2;
            if (nums[mid] == target) return mid;
            if (nums[0] <= nums[mid]) {
                if (nums[0] <= target && target < nums[mid]) {
                    r = mid - 1;
                } else {
                    l = mid + 1;
                }
            } else {
                if (nums[mid] < target && target <= nums[n - 1]) {
                    l = mid + 1;
                } else {
                    r = mid - 1;
                }
            }
        }
        return -1;
    }
};
```
</details>
<details>
    <summary>äºŒåˆ†æœç´¢Java</summary>



```Java [solution1-Java]
class Solution {
    public int search(int[] nums, int target) {
        int n = nums.length;
        if (n == 0) {
            return -1;
        }
        if (n == 1) {
            return nums[0] == target ? 0 : -1;
        }
        int l = 0, r = n - 1;
        while (l <= r) {
            int mid = (l + r) / 2;
            if (nums[mid] == target) {
                return mid;
            }
            if (nums[0] <= nums[mid]) {
                if (nums[0] <= target && target < nums[mid]) {
                    r = mid - 1;
                } else {
                    l = mid + 1;
                }
            } else {
                if (nums[mid] < target && target <= nums[n - 1]) {
                    l = mid + 1;
                } else {
                    r = mid - 1;
                }
            }
        }
        return -1;
    }
}
```
</details>
<details>
    <summary>äºŒåˆ†æœç´¢Python</summary>


```Python [solution1-Python3]
class Solution:
    def search(self, nums: List[int], target: int) -> int:
        if not nums:
            return -1
        l, r = 0, len(nums) - 1
        while l <= r:
            mid = (l + r) // 2
            if nums[mid] == target:
                return mid
            if nums[0] <= nums[mid]:
                if nums[0] <= target < nums[mid]:
                    r = mid - 1
                else:
                    l = mid + 1
            else:
                if nums[mid] < target <= nums[len(nums) - 1]:
                    l = mid + 1
                else:
                    r = mid - 1
        return -1
```
</details>

**å¤æ‚åº¦åˆ†æ**

* æ—¶é—´å¤æ‚åº¦ï¼š O(logn) ï¼Œå…¶ä¸­ *n* ä¸º nums æ•°ç»„çš„å¤§å°ã€‚æ•´ä¸ªç®—æ³•æ—¶é—´å¤æ‚åº¦å³ä¸ºäºŒåˆ†æœç´¢çš„æ—¶é—´å¤æ‚åº¦ O(logn)ã€‚

* ç©ºé—´å¤æ‚åº¦ï¼š *O(1)* ã€‚æˆ‘ä»¬åªéœ€è¦å¸¸æ•°çº§åˆ«çš„ç©ºé—´å­˜æ”¾å˜é‡ã€‚