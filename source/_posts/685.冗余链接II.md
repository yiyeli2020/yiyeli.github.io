---
title: 685.å†—ä½™é“¾æ¥II

date: 2020-05-26 20:26:12

categories: 2020å¹´5æœˆ

tags: [LeetCode,Depth-first Search,Union Find,Tree,Graph]

---

ä½¿ç”¨å¹¶æŸ¥é›†æ‰¾åˆ°ä¸€æ¡å¯ä»¥åˆ å»çš„è¾¹ã€‚

<!-- more -->

# ğŸ“–é¢˜ç›®æè¿°ï¼š

åœ¨æœ¬é—®é¢˜ä¸­ï¼Œæœ‰æ ¹æ ‘æŒ‡æ»¡è¶³ä»¥ä¸‹æ¡ä»¶çš„æœ‰å‘å›¾ã€‚è¯¥æ ‘åªæœ‰ä¸€ä¸ªæ ¹èŠ‚ç‚¹ï¼Œæ‰€æœ‰å…¶ä»–èŠ‚ç‚¹éƒ½æ˜¯è¯¥æ ¹èŠ‚ç‚¹çš„åç»§ã€‚æ¯ä¸€ä¸ªèŠ‚ç‚¹åªæœ‰ä¸€ä¸ªçˆ¶èŠ‚ç‚¹ï¼Œé™¤äº†æ ¹èŠ‚ç‚¹æ²¡æœ‰çˆ¶èŠ‚ç‚¹ã€‚

è¾“å…¥ä¸€ä¸ªæœ‰å‘å›¾ï¼Œè¯¥å›¾ç”±ä¸€ä¸ªæœ‰ç€Nä¸ªèŠ‚ç‚¹ (èŠ‚ç‚¹å€¼ä¸é‡å¤1, 2, ..., N) çš„æ ‘åŠä¸€æ¡é™„åŠ çš„è¾¹æ„æˆã€‚é™„åŠ çš„è¾¹çš„ä¸¤ä¸ªé¡¶ç‚¹åŒ…å«åœ¨1åˆ°Nä¸­é—´ï¼Œè¿™æ¡é™„åŠ çš„è¾¹ä¸å±äºæ ‘ä¸­å·²å­˜åœ¨çš„è¾¹ã€‚

ç»“æœå›¾æ˜¯ä¸€ä¸ªä»¥è¾¹ç»„æˆçš„äºŒç»´æ•°ç»„ã€‚ æ¯ä¸€ä¸ªè¾¹ çš„å…ƒç´ æ˜¯ä¸€å¯¹ [u, v]ï¼Œç”¨ä»¥è¡¨ç¤ºæœ‰å‘å›¾ä¸­è¿æ¥é¡¶ç‚¹ u and vå’Œé¡¶ç‚¹çš„è¾¹ï¼Œå…¶ä¸­çˆ¶èŠ‚ç‚¹uæ˜¯å­èŠ‚ç‚¹vçš„ä¸€ä¸ªçˆ¶èŠ‚ç‚¹ã€‚

è¿”å›ä¸€æ¡èƒ½åˆ é™¤çš„è¾¹ï¼Œä½¿å¾—å‰©ä¸‹çš„å›¾æ˜¯æœ‰Nä¸ªèŠ‚ç‚¹çš„æœ‰æ ¹æ ‘ã€‚è‹¥æœ‰å¤šä¸ªç­”æ¡ˆï¼Œè¿”å›æœ€åå‡ºç°åœ¨ç»™å®šäºŒç»´æ•°ç»„çš„ç­”æ¡ˆã€‚

ç¤ºä¾‹Â 1:
    
    è¾“å…¥: [[1,2], [1,3], [2,3]]
    è¾“å‡º: [2,3]
    è§£é‡Š: ç»™å®šçš„æœ‰å‘å›¾å¦‚ä¸‹:
      1
     / \
    v   v
    2-->3
ç¤ºä¾‹ 2:
    
    è¾“å…¥: [[1,2], [2,3], [3,4], [4,1], [1,5]]
    è¾“å‡º: [4,1]
    è§£é‡Š: ç»™å®šçš„æœ‰å‘å›¾å¦‚ä¸‹:
    5 <- 1 -> 2
         ^    |
         |    v
         4 <- 3
æ³¨æ„:
    
    äºŒç»´æ•°ç»„å¤§å°çš„åœ¨3åˆ°1000èŒƒå›´å†…ã€‚
    äºŒç»´æ•°ç»„ä¸­çš„æ¯ä¸ªæ•´æ•°åœ¨1åˆ°Nä¹‹é—´ï¼Œå…¶ä¸­ N æ˜¯äºŒç»´æ•°ç»„çš„å¤§å°ã€‚


# ğŸ“–è§£é¢˜æ€è·¯ï¼š
é€šè¿‡åˆ†æƒ…å†µè®¨è®ºï¼ŒæŠŠhardé¢˜åˆ†ä¸º3ä¸ªmediumé¢˜æ¥åšã€‚
1. æƒ…å†µ1æ˜¯å¤šå‡ºçš„è¾¹æŒ‡å‘æŸä¸ªérootçš„ç»“ç‚¹ï¼Œè¯¥ç»“ç‚¹è®°ä¸ºendï¼Œå®ƒçš„å…¥åº¦ä¸º2ï¼Œå‡ºåº¦ä¸ä¸º0ï¼Œæ­¤æ—¶ç­”æ¡ˆåªå¯èƒ½ä¸ºæŒ‡å‘endçš„ä¸¤æ¡è¾¹ä¹‹ä¸€ï¼Œæ³¨æ„è¿™æ—¶å€™ç­”æ¡ˆå”¯ä¸€ï¼Œåˆ é”™è¾¹å¯èƒ½å¯¼è‡´å›¾ä¸è”é€šï¼Œæ— æ³•æ„æˆæ ‘:
```
    2 -> 1
    ^  / ^
    | v  |
    4    3
```
2. æƒ…å†µ2ä¸æƒ…å†µ1ç±»ä¼¼ï¼Œå­˜åœ¨å…¥åº¦ä¸º2ä½†å‡ºåº¦ä¸º0çš„endç»“ç‚¹ï¼Œæ­¤æ—¶ç­”æ¡ˆä¸å”¯ä¸€ï¼Œåˆ æ‰æŒ‡å‘endçš„å“ªæ¡è¾¹éƒ½èƒ½ä½¿å¾—å›¾å˜æˆæ ‘ï¼ŒæŒ‰ç…§é¢˜ç›®è¦æ±‚è¿”å›æœ€åç¯å†…æœ€åå‡ºç°çš„è¾¹å³å¯:
```
5 <- 1 -> 2
     |    |
     v    v
     4 <- 3
```
3. æƒ…å†µ3æ˜¯å¤šå‡ºçš„è¾¹æŒ‡å‘rootï¼Œæ‰€æœ‰ç»“ç‚¹çš„å…¥åº¦éƒ½æ˜¯1ï¼Œæ­¤æ—¶ç­”æ¡ˆä¸å”¯ä¸€ï¼Œåˆ é™¤ç¯å†…ä»»æ„è¾¹éƒ½å¯ä»¥ï¼ŒæŒ‰ç…§é¢˜ç›®è¦æ±‚è¿”å›æœ€åç¯å†…æœ€åå‡ºç°çš„è¾¹å³å¯ï¼š
```
5 <- 1 -> 2
     ^    |
     |    v
     4 <- 3
```

# ç»“è®º
æ ¹æ®ä»¥ä¸Šåˆ†æï¼Œä»£ç å¯ä»¥é€šè¿‡åˆ†æƒ…å†µè®¨è®ºï¼ŒæŠŠè¿™é“hardé¢˜åˆ†ä¸ºå¤šä¸ªmediumé¢˜æ¥åšã€‚ï¼ˆè¿™é‡Œå‡è®¾ä½ å·²ç»æ‡‚äº†å¹¶æŸ¥é›†ï¼Œè‹¥ä¸æ‡‚ï¼Œå¯ä»¥å…ˆåšä¸€ä¸‹è¿™é¢˜[684.å†—ä½™é“¾æ¥I](https://leetcode-cn.com/problems/redundant-connection/)ï¼ŒæŠŠå¹¶æŸ¥é›†å­¦ä¸€ä¸‹ï¼‰
- æƒ…å†µ1å’Œ2å¯ä»¥åˆå¹¶å¤„ç†ï¼Œå¹¶æŸ¥é›†åˆå¹¶æ‰€æœ‰è¾¹ï¼Œå¯¹äºæŒ‡å‘endçš„è¾¹åªåˆå¹¶ç¬¬ä¸€æ¡ï¼Œè‹¥æœ€åè”é€šåˆ†é‡åˆå¹¶ä¸º1ï¼Œåˆ™å¯ä»¥æŠŠæŒ‡å‘endçš„ç¬¬äºŒæ¡è¾¹åˆ é™¤ï¼Œå¦åˆ™åªèƒ½åˆ é™¤ç¬¬ä¸€æ¡è¾¹ã€‚
- æƒ…å†µ3æ—¶,è¿™æ—¶å€™é¢˜ç›®é€€åŒ–ä¸º[684.å†—ä½™é“¾æ¥I](https://leetcode-cn.com/problems/redundant-connection/)ï¼Œè§£æ³•ç›¸åŒï¼Œå³ç”¨å¹¶æŸ¥é›†ä¸æ–­åˆå¹¶ç»“ç‚¹ï¼Œç›´åˆ°å°†è¦åˆå¹¶çš„é¡¶ç‚¹å·²ç»è”é€šäº†ï¼Œåˆ™å½“å‰è¾¹æ˜¯å¤šä½™çš„ï¼Œå¯åˆ æ‰ã€‚


```cpp
// test case:
// [[1,2],[1,3],[2,3]]
// [[1,2], [2,3], [3,4], [4,1], [1,5]]
// [[2,1],[3,1],[4,2],[1,4]]
class Solution {
public:
    vector<int> parents;
    int count;
    int MyFind(int a){
        while(a != parents[a]){
            parents[a] = parents[parents[a]];// ç¨å¾®å‹ç¼©ä¸€ä¸‹è·¯å¾„
            a = parents[a];
        }
        return a;
    }
    bool IsConnect(int a, int b){
        int p1 = MyFind(a);
        int p2 = MyFind(b);
        return p1 == p2;
    }
    void MyUnion(int a, int b){
        int p1 = MyFind(a);
        int p2 = MyFind(b);
        if(p1 == p2) return;
        parents[p1] = p2;
        count--;
        return;
    }
    vector<int> findRedundantDirectedConnection(vector<vector<int>>& edges) {
        // ç»Ÿè®¡å¤§å®¶å‡ºå…¥åº¦ï¼Œå¹¶æ‰¾åˆ°å…¥åº¦ä¸º2çš„ç»ˆç‚¹ï¼ˆè‹¥æœ‰çš„è¯ï¼‰
        int n = edges.size(); // nä¸ªé¡¶ç‚¹ï¼Œæ³¨æ„é¡¶ç‚¹ä»1å¼€å§‹
        vector<int> inDegree(n); // å…¥åº¦
        int end = -1;
        for(auto &e : edges){
            inDegree[e[1]-1]++; // å…¥åº¦+1
            if(inDegree[e[1]-1] > 1) end = e[1];
        }

        // å¹¶æŸ¥é›†åˆå§‹åŒ–
        count = edges.size();
        parents.resize(count);
        for(int i = 0; i<count; ++i){
            parents[i] = i;
        }
        // è‹¥æœ‰endï¼Œåˆ™ä¸ºæƒ…å†µ1ã€2ï¼Œç­”æ¡ˆä¸ºæŒ‡å‘endçš„ä¸¤æ¡è¾¹ä¹‹ä¸€
        if(-1 != end){
            bool is_first = true;
            vector<int> edge_first;
            vector<int> edge_second;
            for(auto &e : edges){
                // å¯¹äºæŒ‡å‘endçš„ä¸¤æ¡è¾¹ï¼Œåªåˆå¹¶ç¬¬ä¸€æ¡ï¼Œçœ‹æœ€åæ˜¯å¦èƒ½è”é€š
                if(e[1] == end){
                    if(is_first){
                        is_first = false;
                        MyUnion(e[0]-1, e[1]-1);
                        edge_first = e;
                    }
                    else{
                        edge_second = e;
                    }
                }
                else{
                    MyUnion(e[0]-1, e[1]-1);
                }
            }

            // æœ‰å¯èƒ½åˆ æ‰ä»»æ„è¾¹éƒ½è¡Œï¼Œè¿™æ—¶ä¼˜å…ˆè¿”å›é åçš„è¾¹ï¼Œå³second
            if(1 == count) return edge_second;
            else return edge_first;
        }
        // è‹¥æ— endï¼Œåˆ™åˆ é™¤ç¯è·¯ä¸­ä»»æ„ä¸€æ¡è¾¹éƒ½è¡Œï¼ŒæŒ‰ç…§é¢˜æ„ï¼Œåˆ é™¤ç¯è·¯ä¸­æœ€åå‡ºç°çš„é‚£æ¡è¾¹
        else{
            for(auto &e : edges){
                // è‹¥å°†æ·»åŠ çš„è¾¹å·²ç»æœ‰è¿æ¥äº†ï¼Œåˆ™è¯¥è¾¹å¯åˆ é™¤
                if(IsConnect(e[0]-1, e[1]-1)){
                    return e;
                }
                MyUnion(e[0]-1, e[1]-1);
            }
        }
        // ä¸ä¼šè¿è¡Œåˆ°è¿™é‡Œ
        return vector<int>();
    }
};
```

# å‚è€ƒèµ„æ–™ï¼š
ã€1ã€‘https://leetcode-cn.com/problems/redundant-connection-ii
