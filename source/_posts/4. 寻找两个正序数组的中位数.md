---

title: 4. å¯»æ‰¾ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ä¸­ä½æ•°

date: 2020-12-02 18:26:12

categories: 2020å¹´12æœˆ

tags: [LeetCode, Array, Binary Search, Divide and Conquer]


---
 
ç»™å®šä¸¤ä¸ªå¤§å°ä¸º m å’Œ n çš„æ­£åºï¼ˆä»å°åˆ°å¤§ï¼‰æ•°ç»„nums1å’Œnums2ã€‚è¯·ä½ æ‰¾å‡ºå¹¶è¿”å›è¿™ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ä¸­ä½æ•°ã€‚

è¿›é˜¶ï¼šä½ èƒ½è®¾è®¡ä¸€ä¸ªæ—¶é—´å¤æ‚åº¦ä¸º O(log (m+n)) çš„ç®—æ³•è§£å†³æ­¤é—®é¢˜å—ï¼Ÿ


<!-- more -->



ç¤ºä¾‹ 1ï¼š
    
    è¾“å…¥ï¼šnums1 = [1,3], nums2 = [2]
    è¾“å‡ºï¼š2.00000
    è§£é‡Šï¼šåˆå¹¶æ•°ç»„ = [1,2,3] ï¼Œä¸­ä½æ•° 2
ç¤ºä¾‹ 2ï¼š
    
    è¾“å…¥ï¼šnums1 = [1,2], nums2 = [3,4]
    è¾“å‡ºï¼š2.50000
    è§£é‡Šï¼šåˆå¹¶æ•°ç»„ = [1,2,3,4] ï¼Œä¸­ä½æ•° (2 + 3) / 2 = 2.5
ç¤ºä¾‹ 3ï¼š
    
    è¾“å…¥ï¼šnums1 = [0,0], nums2 = [0,0]
    è¾“å‡ºï¼š0.00000
ç¤ºä¾‹ 4ï¼š

    è¾“å…¥ï¼šnums1 = [], nums2 = [1]
    è¾“å‡ºï¼š1.00000
ç¤ºä¾‹ 5ï¼š

    è¾“å…¥ï¼šnums1 = [2], nums2 = []
    è¾“å‡ºï¼š2.00000


æç¤ºï¼š
    
    nums1.length == m
    nums2.length == n
    0 <= m <= 1000
    0 <= n <= 1000
    1 <= m + n <= 2000
    -106 <= nums1[i], nums2[i] <= 106

# ğŸ“ºè§†é¢‘é¢˜è§£  
[ç¬¬å››é¢˜.mp4](8d2c6208-6af1-452d-91f9-6e80670fd6d9)

# ğŸ“–æ–‡å­—é¢˜è§£

## æ–¹æ³•ä¸€ï¼šäºŒåˆ†æŸ¥æ‰¾

ç»™å®šä¸¤ä¸ªæœ‰åºæ•°ç»„ï¼Œè¦æ±‚æ‰¾åˆ°ä¸¤ä¸ªæœ‰åºæ•°ç»„çš„ä¸­ä½æ•°ï¼Œæœ€ç›´è§‚çš„æ€è·¯æœ‰ä»¥ä¸‹ä¸¤ç§ï¼š

- ä½¿ç”¨å½’å¹¶çš„æ–¹å¼ï¼Œåˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„ï¼Œå¾—åˆ°ä¸€ä¸ªå¤§çš„æœ‰åºæ•°ç»„ã€‚å¤§çš„æœ‰åºæ•°ç»„çš„ä¸­é—´ä½ç½®çš„å…ƒç´ ï¼Œå³ä¸ºä¸­ä½æ•°ã€‚

- ä¸éœ€è¦åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„ï¼Œåªè¦æ‰¾åˆ°ä¸­ä½æ•°çš„ä½ç½®å³å¯ã€‚ç”±äºä¸¤ä¸ªæ•°ç»„çš„é•¿åº¦å·²çŸ¥ï¼Œå› æ­¤ä¸­ä½æ•°å¯¹åº”çš„ä¸¤ä¸ªæ•°ç»„çš„ä¸‹æ ‡ä¹‹å’Œä¹Ÿæ˜¯å·²çŸ¥çš„ã€‚ç»´æŠ¤ä¸¤ä¸ªæŒ‡é’ˆï¼Œåˆå§‹æ—¶åˆ†åˆ«æŒ‡å‘ä¸¤ä¸ªæ•°ç»„çš„ä¸‹æ ‡ *0* çš„ä½ç½®ï¼Œæ¯æ¬¡å°†æŒ‡å‘è¾ƒå°å€¼çš„æŒ‡é’ˆåç§»ä¸€ä½ï¼ˆå¦‚æœä¸€ä¸ªæŒ‡é’ˆå·²ç»åˆ°è¾¾æ•°ç»„æœ«å°¾ï¼Œåˆ™åªéœ€è¦ç§»åŠ¨å¦ä¸€ä¸ªæ•°ç»„çš„æŒ‡é’ˆï¼‰ï¼Œç›´åˆ°åˆ°è¾¾ä¸­ä½æ•°çš„ä½ç½®ã€‚

å‡è®¾ä¸¤ä¸ªæœ‰åºæ•°ç»„çš„é•¿åº¦åˆ†åˆ«ä¸º *m* å’Œ *n*ï¼Œä¸Šè¿°ä¸¤ç§æ€è·¯çš„å¤æ‚åº¦å¦‚ä½•ï¼Ÿ

ç¬¬ä¸€ç§æ€è·¯çš„æ—¶é—´å¤æ‚åº¦æ˜¯ *O(m+n)*ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯ *O(m+n)*ã€‚ç¬¬äºŒç§æ€è·¯è™½ç„¶å¯ä»¥å°†ç©ºé—´å¤æ‚åº¦é™åˆ° *O(1)*ï¼Œä½†æ˜¯æ—¶é—´å¤æ‚åº¦ä»æ˜¯ *O(m+n)*ã€‚é¢˜ç›®è¦æ±‚æ—¶é—´å¤æ‚åº¦æ˜¯  O(log (m+n))  ï¼Œå› æ­¤ä¸Šè¿°ä¸¤ç§æ€è·¯éƒ½ä¸æ»¡è¶³é¢˜ç›®è¦æ±‚çš„æ—¶é—´å¤æ‚åº¦ã€‚

å¦‚ä½•æŠŠæ—¶é—´å¤æ‚åº¦é™ä½åˆ°  O(log (m+n))  å‘¢ï¼Ÿå¦‚æœå¯¹æ—¶é—´å¤æ‚åº¦çš„è¦æ±‚æœ‰ logï¼Œé€šå¸¸éƒ½éœ€è¦ç”¨åˆ°äºŒåˆ†æŸ¥æ‰¾ï¼Œè¿™é“é¢˜ä¹Ÿå¯ä»¥é€šè¿‡äºŒåˆ†æŸ¥æ‰¾å®ç°ã€‚

æ ¹æ®ä¸­ä½æ•°çš„å®šä¹‰ï¼Œå½“ *m+n* æ˜¯å¥‡æ•°æ—¶ï¼Œä¸­ä½æ•°æ˜¯ä¸¤ä¸ªæœ‰åºæ•°ç»„ä¸­çš„ç¬¬ *(m+n)/2* ä¸ªå…ƒç´ ï¼Œå½“ *m+n* æ˜¯å¶æ•°æ—¶ï¼Œä¸­ä½æ•°æ˜¯ä¸¤ä¸ªæœ‰åºæ•°ç»„ä¸­çš„ç¬¬ *(m+n)/2* ä¸ªå…ƒç´ å’Œç¬¬ *(m+n)/2+1* ä¸ªå…ƒç´ çš„å¹³å‡å€¼ã€‚å› æ­¤ï¼Œè¿™é“é¢˜å¯ä»¥è½¬åŒ–æˆå¯»æ‰¾ä¸¤ä¸ªæœ‰åºæ•°ç»„ä¸­çš„ç¬¬ *k* å°çš„æ•°ï¼Œå…¶ä¸­ *k* ä¸º *(m+n)/2* æˆ– *(m+n)/2+1*ã€‚

å‡è®¾ä¸¤ä¸ªæœ‰åºæ•°ç»„åˆ†åˆ«æ˜¯A å’Œ Bã€‚è¦æ‰¾åˆ°ç¬¬ *k* ä¸ªå…ƒç´ ï¼Œæˆ‘ä»¬å¯ä»¥æ¯”è¾ƒ A[k/2-1]å’Œ B[k/2-1]ï¼Œå…¶ä¸­ */* è¡¨ç¤ºæ•´æ•°é™¤æ³•ã€‚ç”±äº  A[k/2-1]å’Œ B[k/2-1] çš„å‰é¢åˆ†åˆ«æœ‰  A[k/2-2]å’Œ B[k/2-2]ï¼Œå³ *k/2-1* ä¸ªå…ƒç´ ï¼Œå¯¹äº A[k/2-1]å’Œ B[k/2-1]  ä¸­çš„è¾ƒå°å€¼ï¼Œæœ€å¤šåªä¼šæœ‰ (k/2-1)+(k/2-1)<=k-2 ä¸ªå…ƒç´ æ¯”å®ƒå°ï¼Œé‚£ä¹ˆå®ƒå°±ä¸èƒ½æ˜¯ç¬¬ *k* å°çš„æ•°äº†ã€‚

å› æ­¤æˆ‘ä»¬å¯ä»¥å½’çº³å‡ºä¸‰ç§æƒ…å†µï¼š

- å¦‚æœ A[k/2-1]< B[k/2-1] ï¼Œåˆ™æ¯”  A[k/2-1] å°çš„æ•°æœ€å¤šåªæœ‰ A çš„å‰ *k/2-1* ä¸ªæ•°å’ŒB çš„å‰ *k/2-1* ä¸ªæ•°ï¼Œå³æ¯” A[k/2-1] å°çš„æ•°æœ€å¤šåªæœ‰ *k-2* ä¸ªï¼Œå› æ­¤ A[k/2-1]  ä¸å¯èƒ½æ˜¯ç¬¬ *k* ä¸ªæ•°ï¼ŒA[0] åˆ° A[k/2-1] ä¹Ÿéƒ½ä¸å¯èƒ½æ˜¯ç¬¬ *k* ä¸ªæ•°ï¼Œå¯ä»¥å…¨éƒ¨æ’é™¤ã€‚

- å¦‚æœ A[k/2-1]> B[k/2-1]ï¼Œåˆ™å¯ä»¥æ’é™¤ B[0]  åˆ° B[k/2-1] ã€‚

- å¦‚æœ A[k/2-1]= B[k/2-1] ï¼Œåˆ™å¯ä»¥å½’å…¥ç¬¬ä¸€ç§æƒ…å†µå¤„ç†ã€‚

[fig1](https://assets.leetcode-cn.com/solution-static/4/4_fig1.png)

å¯ä»¥çœ‹åˆ°ï¼Œæ¯”è¾ƒ A[k/2-1] å’Œ B[k/2-1]  ä¹‹åï¼Œå¯ä»¥æ’é™¤ *k/2* ä¸ªä¸å¯èƒ½æ˜¯ç¬¬ *k* å°çš„æ•°ï¼ŒæŸ¥æ‰¾èŒƒå›´ç¼©å°äº†ä¸€åŠã€‚åŒæ—¶ï¼Œæˆ‘ä»¬å°†åœ¨æ’é™¤åçš„æ–°æ•°ç»„ä¸Šç»§ç»­è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ï¼Œå¹¶ä¸”æ ¹æ®æˆ‘ä»¬æ’é™¤æ•°çš„ä¸ªæ•°ï¼Œå‡å°‘ *k* çš„å€¼ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬æ’é™¤çš„æ•°éƒ½ä¸å¤§äºç¬¬ *k* å°çš„æ•°ã€‚

æœ‰ä»¥ä¸‹ä¸‰ç§æƒ…å†µéœ€è¦ç‰¹æ®Šå¤„ç†ï¼š

- å¦‚æœ A[k/2-1]  æˆ–è€… B[k/2-1]  è¶Šç•Œï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥é€‰å–å¯¹åº”æ•°ç»„ä¸­çš„æœ€åä¸€ä¸ªå…ƒç´ ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬**å¿…é¡»æ ¹æ®æ’é™¤æ•°çš„ä¸ªæ•°å‡å°‘ *k* çš„å€¼**ï¼Œè€Œä¸èƒ½ç›´æ¥å°† *k* å‡å» *k/2*ã€‚

- å¦‚æœä¸€ä¸ªæ•°ç»„ä¸ºç©ºï¼Œè¯´æ˜è¯¥æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ éƒ½è¢«æ’é™¤ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è¿”å›å¦ä¸€ä¸ªæ•°ç»„ä¸­ç¬¬ *k* å°çš„å…ƒç´ ã€‚

- å¦‚æœ *k=1*ï¼Œæˆ‘ä»¬åªè¦è¿”å›ä¸¤ä¸ªæ•°ç»„é¦–å…ƒç´ çš„æœ€å°å€¼å³å¯ã€‚

æ›´å¤šè¯¦è§[^1]

<details>
    <summary>äºŒåˆ†æŸ¥æ‰¾Java</summary>

```Java [sol1-Java]
class Solution {
    public double findMedianSortedArrays(int[] nums1, int[] nums2) {
        int length1 = nums1.length, length2 = nums2.length;
        int totalLength = length1 + length2;
        if (totalLength % 2 == 1) {
            int midIndex = totalLength / 2;
            double median = getKthElement(nums1, nums2, midIndex + 1);
            return median;
        } else {
            int midIndex1 = totalLength / 2 - 1, midIndex2 = totalLength / 2;
            double median = (getKthElement(nums1, nums2, midIndex1 + 1) + getKthElement(nums1, nums2, midIndex2 + 1)) / 2.0;
            return median;
        }
    }

    public int getKthElement(int[] nums1, int[] nums2, int k) {
        /* ä¸»è¦æ€è·¯ï¼šè¦æ‰¾åˆ°ç¬¬ k (k>1) å°çš„å…ƒç´ ï¼Œé‚£ä¹ˆå°±å– pivot1 = nums1[k/2-1] å’Œ pivot2 = nums2[k/2-1] è¿›è¡Œæ¯”è¾ƒ
         * è¿™é‡Œçš„ "/" è¡¨ç¤ºæ•´é™¤
         * nums1 ä¸­å°äºç­‰äº pivot1 çš„å…ƒç´ æœ‰ nums1[0 .. k/2-2] å…±è®¡ k/2-1 ä¸ª
         * nums2 ä¸­å°äºç­‰äº pivot2 çš„å…ƒç´ æœ‰ nums2[0 .. k/2-2] å…±è®¡ k/2-1 ä¸ª
         * å– pivot = min(pivot1, pivot2)ï¼Œä¸¤ä¸ªæ•°ç»„ä¸­å°äºç­‰äº pivot çš„å…ƒç´ å…±è®¡ä¸ä¼šè¶…è¿‡ (k/2-1) + (k/2-1) <= k-2 ä¸ª
         * è¿™æ · pivot æœ¬èº«æœ€å¤§ä¹Ÿåªèƒ½æ˜¯ç¬¬ k-1 å°çš„å…ƒç´ 
         * å¦‚æœ pivot = pivot1ï¼Œé‚£ä¹ˆ nums1[0 .. k/2-1] éƒ½ä¸å¯èƒ½æ˜¯ç¬¬ k å°çš„å…ƒç´ ã€‚æŠŠè¿™äº›å…ƒç´ å…¨éƒ¨ "åˆ é™¤"ï¼Œå‰©ä¸‹çš„ä½œä¸ºæ–°çš„ nums1 æ•°ç»„
         * å¦‚æœ pivot = pivot2ï¼Œé‚£ä¹ˆ nums2[0 .. k/2-1] éƒ½ä¸å¯èƒ½æ˜¯ç¬¬ k å°çš„å…ƒç´ ã€‚æŠŠè¿™äº›å…ƒç´ å…¨éƒ¨ "åˆ é™¤"ï¼Œå‰©ä¸‹çš„ä½œä¸ºæ–°çš„ nums2 æ•°ç»„
         * ç”±äºæˆ‘ä»¬ "åˆ é™¤" äº†ä¸€äº›å…ƒç´ ï¼ˆè¿™äº›å…ƒç´ éƒ½æ¯”ç¬¬ k å°çš„å…ƒç´ è¦å°ï¼‰ï¼Œå› æ­¤éœ€è¦ä¿®æ”¹ k çš„å€¼ï¼Œå‡å»åˆ é™¤çš„æ•°çš„ä¸ªæ•°
         */

        int length1 = nums1.length, length2 = nums2.length;
        int index1 = 0, index2 = 0;
        int kthElement = 0;

        while (true) {
            // è¾¹ç•Œæƒ…å†µ
            if (index1 == length1) {
                return nums2[index2 + k - 1];
            }
            if (index2 == length2) {
                return nums1[index1 + k - 1];
            }
            if (k == 1) {
                return Math.min(nums1[index1], nums2[index2]);
            }
            
            // æ­£å¸¸æƒ…å†µ
            int half = k / 2;
            int newIndex1 = Math.min(index1 + half, length1) - 1;
            int newIndex2 = Math.min(index2 + half, length2) - 1;
            int pivot1 = nums1[newIndex1], pivot2 = nums2[newIndex2];
            if (pivot1 <= pivot2) {
                k -= (newIndex1 - index1 + 1);
                index1 = newIndex1 + 1;
            } else {
                k -= (newIndex2 - index2 + 1);
                index2 = newIndex2 + 1;
            }
        }
    }
}
```

</details>
<details>
    <summary>äºŒåˆ†æŸ¥æ‰¾C++</summary>

```C++ [sol1-C++]
class Solution {
public:
    int getKthElement(const vector<int>& nums1, const vector<int>& nums2, int k) {
        /* ä¸»è¦æ€è·¯ï¼šè¦æ‰¾åˆ°ç¬¬ k (k>1) å°çš„å…ƒç´ ï¼Œé‚£ä¹ˆå°±å– pivot1 = nums1[k/2-1] å’Œ pivot2 = nums2[k/2-1] è¿›è¡Œæ¯”è¾ƒ
         * è¿™é‡Œçš„ "/" è¡¨ç¤ºæ•´é™¤
         * nums1 ä¸­å°äºç­‰äº pivot1 çš„å…ƒç´ æœ‰ nums1[0 .. k/2-2] å…±è®¡ k/2-1 ä¸ª
         * nums2 ä¸­å°äºç­‰äº pivot2 çš„å…ƒç´ æœ‰ nums2[0 .. k/2-2] å…±è®¡ k/2-1 ä¸ª
         * å– pivot = min(pivot1, pivot2)ï¼Œä¸¤ä¸ªæ•°ç»„ä¸­å°äºç­‰äº pivot çš„å…ƒç´ å…±è®¡ä¸ä¼šè¶…è¿‡ (k/2-1) + (k/2-1) <= k-2 ä¸ª
         * è¿™æ · pivot æœ¬èº«æœ€å¤§ä¹Ÿåªèƒ½æ˜¯ç¬¬ k-1 å°çš„å…ƒç´ 
         * å¦‚æœ pivot = pivot1ï¼Œé‚£ä¹ˆ nums1[0 .. k/2-1] éƒ½ä¸å¯èƒ½æ˜¯ç¬¬ k å°çš„å…ƒç´ ã€‚æŠŠè¿™äº›å…ƒç´ å…¨éƒ¨ "åˆ é™¤"ï¼Œå‰©ä¸‹çš„ä½œä¸ºæ–°çš„ nums1 æ•°ç»„
         * å¦‚æœ pivot = pivot2ï¼Œé‚£ä¹ˆ nums2[0 .. k/2-1] éƒ½ä¸å¯èƒ½æ˜¯ç¬¬ k å°çš„å…ƒç´ ã€‚æŠŠè¿™äº›å…ƒç´ å…¨éƒ¨ "åˆ é™¤"ï¼Œå‰©ä¸‹çš„ä½œä¸ºæ–°çš„ nums2 æ•°ç»„
         * ç”±äºæˆ‘ä»¬ "åˆ é™¤" äº†ä¸€äº›å…ƒç´ ï¼ˆè¿™äº›å…ƒç´ éƒ½æ¯”ç¬¬ k å°çš„å…ƒç´ è¦å°ï¼‰ï¼Œå› æ­¤éœ€è¦ä¿®æ”¹ k çš„å€¼ï¼Œå‡å»åˆ é™¤çš„æ•°çš„ä¸ªæ•°
         */

        int m = nums1.size();
        int n = nums2.size();
        int index1 = 0, index2 = 0;

        while (true) {
            // è¾¹ç•Œæƒ…å†µ
            if (index1 == m) {
                return nums2[index2 + k - 1];
            }
            if (index2 == n) {
                return nums1[index1 + k - 1];
            }
            if (k == 1) {
                return min(nums1[index1], nums2[index2]);
            }

            // æ­£å¸¸æƒ…å†µ
            int newIndex1 = min(index1 + k / 2 - 1, m - 1);
            int newIndex2 = min(index2 + k / 2 - 1, n - 1);
            int pivot1 = nums1[newIndex1];
            int pivot2 = nums2[newIndex2];
            if (pivot1 <= pivot2) {
                k -= newIndex1 - index1 + 1;
                index1 = newIndex1 + 1;
            }
            else {
                k -= newIndex2 - index2 + 1;
                index2 = newIndex2 + 1;
            }
        }
    }

    double findMedianSortedArrays(vector<int>& nums1, vector<int>& nums2) {
        int totalLength = nums1.size() + nums2.size();
        if (totalLength % 2 == 1) {
            return getKthElement(nums1, nums2, (totalLength + 1) / 2);
        }
        else {
            return (getKthElement(nums1, nums2, totalLength / 2) + getKthElement(nums1, nums2, totalLength / 2 + 1)) / 2.0;
        }
    }
};
```

</details>
<details>
    <summary>äºŒåˆ†æŸ¥æ‰¾Python3</summary>
    
    
```Python [sol1-Python3]
class Solution:
    def findMedianSortedArrays(self, nums1: List[int], nums2: List[int]) -> float:
        def getKthElement(k):
            """
            - ä¸»è¦æ€è·¯ï¼šè¦æ‰¾åˆ°ç¬¬ k (k>1) å°çš„å…ƒç´ ï¼Œé‚£ä¹ˆå°±å– pivot1 = nums1[k/2-1] å’Œ pivot2 = nums2[k/2-1] è¿›è¡Œæ¯”è¾ƒ
            - è¿™é‡Œçš„ "/" è¡¨ç¤ºæ•´é™¤
            - nums1 ä¸­å°äºç­‰äº pivot1 çš„å…ƒç´ æœ‰ nums1[0 .. k/2-2] å…±è®¡ k/2-1 ä¸ª
            - nums2 ä¸­å°äºç­‰äº pivot2 çš„å…ƒç´ æœ‰ nums2[0 .. k/2-2] å…±è®¡ k/2-1 ä¸ª
            - å– pivot = min(pivot1, pivot2)ï¼Œä¸¤ä¸ªæ•°ç»„ä¸­å°äºç­‰äº pivot çš„å…ƒç´ å…±è®¡ä¸ä¼šè¶…è¿‡ (k/2-1) + (k/2-1) <= k-2 ä¸ª
            - è¿™æ · pivot æœ¬èº«æœ€å¤§ä¹Ÿåªèƒ½æ˜¯ç¬¬ k-1 å°çš„å…ƒç´ 
            - å¦‚æœ pivot = pivot1ï¼Œé‚£ä¹ˆ nums1[0 .. k/2-1] éƒ½ä¸å¯èƒ½æ˜¯ç¬¬ k å°çš„å…ƒç´ ã€‚æŠŠè¿™äº›å…ƒç´ å…¨éƒ¨ "åˆ é™¤"ï¼Œå‰©ä¸‹çš„ä½œä¸ºæ–°çš„ nums1 æ•°ç»„
            - å¦‚æœ pivot = pivot2ï¼Œé‚£ä¹ˆ nums2[0 .. k/2-1] éƒ½ä¸å¯èƒ½æ˜¯ç¬¬ k å°çš„å…ƒç´ ã€‚æŠŠè¿™äº›å…ƒç´ å…¨éƒ¨ "åˆ é™¤"ï¼Œå‰©ä¸‹çš„ä½œä¸ºæ–°çš„ nums2 æ•°ç»„
            - ç”±äºæˆ‘ä»¬ "åˆ é™¤" äº†ä¸€äº›å…ƒç´ ï¼ˆè¿™äº›å…ƒç´ éƒ½æ¯”ç¬¬ k å°çš„å…ƒç´ è¦å°ï¼‰ï¼Œå› æ­¤éœ€è¦ä¿®æ”¹ k çš„å€¼ï¼Œå‡å»åˆ é™¤çš„æ•°çš„ä¸ªæ•°
            """
            
            index1, index2 = 0, 0
            while True:
                # ç‰¹æ®Šæƒ…å†µ
                if index1 == m:
                    return nums2[index2 + k - 1]
                if index2 == n:
                    return nums1[index1 + k - 1]
                if k == 1:
                    return min(nums1[index1], nums2[index2])

                # æ­£å¸¸æƒ…å†µ
                newIndex1 = min(index1 + k // 2 - 1, m - 1)
                newIndex2 = min(index2 + k // 2 - 1, n - 1)
                pivot1, pivot2 = nums1[newIndex1], nums2[newIndex2]
                if pivot1 <= pivot2:
                    k -= newIndex1 - index1 + 1
                    index1 = newIndex1 + 1
                else:
                    k -= newIndex2 - index2 + 1
                    index2 = newIndex2 + 1
        
        m, n = len(nums1), len(nums2)
        totalLength = m + n
        if totalLength % 2 == 1:
            return getKthElement((totalLength + 1) // 2)
        else:
            return (getKthElement(totalLength // 2) + getKthElement(totalLength // 2 + 1)) / 2

```

</details>
<details>
    <summary>äºŒåˆ†æŸ¥æ‰¾Golang</summary>
    
```golang [sol1-Golang]
func findMedianSortedArrays(nums1 []int, nums2 []int) float64 {
    totalLength := len(nums1) + len(nums2)
    if totalLength%2 == 1 {
        midIndex := totalLength/2
        return float64(getKthElement(nums1, nums2, midIndex + 1))
    } else {
        midIndex1, midIndex2 := totalLength/2 - 1, totalLength/2
        return float64(getKthElement(nums1, nums2, midIndex1 + 1) + getKthElement(nums1, nums2, midIndex2 + 1)) / 2.0
    }
    return 0
}

func getKthElement(nums1, nums2 []int, k int) int {
    index1, index2 := 0, 0
    for {
        if index1 == len(nums1) {
            return nums2[index2 + k - 1]
        }
        if index2 == len(nums2) {
            return nums1[index1 + k - 1]
        }
        if k == 1 {
            return min(nums1[index1], nums2[index2])
        }
        half := k/2
        newIndex1 := min(index1 + half, len(nums1)) - 1
        newIndex2 := min(index2 + half, len(nums2)) - 1
        pivot1, pivot2 := nums1[newIndex1], nums2[newIndex2]
        if pivot1 <= pivot2 {
            k -= (newIndex1 - index1 + 1)
            index1 = newIndex1 + 1
        } else {
            k -= (newIndex2 - index2 + 1)
            index2 = newIndex2 + 1
        }
    }
    return 0
}

func min(x, y int) int {
    if x < y {
        return x
    }
    return y
}
```

</details>

**å¤æ‚åº¦åˆ†æ**

è§[^1]


* ç©ºé—´å¤æ‚åº¦ï¼š*O(1)*ã€‚

## æ–¹æ³•äºŒï¼šåˆ’åˆ†æ•°ç»„

**è¯´æ˜**

æ–¹æ³•ä¸€çš„æ—¶é—´å¤æ‚åº¦å·²ç»å¾ˆä¼˜ç§€äº†ï¼Œä½†æœ¬é¢˜å­˜åœ¨æ—¶é—´å¤æ‚åº¦æ›´ä½çš„ä¸€ç§æ–¹æ³•ã€‚è¿™é‡Œç»™å‡ºæ¨å¯¼è¿‡ç¨‹ï¼Œå‹‡äºæŒ‘æˆ˜è‡ªå·±çš„è¯»è€…å¯ä»¥è¿›è¡Œå°è¯•ã€‚

**æ€è·¯ä¸ç®—æ³•**

ä¸ºäº†ä½¿ç”¨åˆ’åˆ†çš„æ–¹æ³•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œéœ€è¦ç†è§£ã€Œä¸­ä½æ•°çš„ä½œç”¨æ˜¯ä»€ä¹ˆã€ã€‚åœ¨ç»Ÿè®¡ä¸­ï¼Œä¸­ä½æ•°è¢«ç”¨æ¥ï¼š

> å°†ä¸€ä¸ªé›†åˆåˆ’åˆ†ä¸ºä¸¤ä¸ªé•¿åº¦ç›¸ç­‰çš„å­é›†ï¼Œå…¶ä¸­ä¸€ä¸ªå­é›†ä¸­çš„å…ƒç´ æ€»æ˜¯å¤§äºå¦ä¸€ä¸ªå­é›†ä¸­çš„å…ƒç´ ã€‚

å¦‚æœç†è§£äº†ä¸­ä½æ•°çš„åˆ’åˆ†ä½œç”¨ï¼Œå°±å¾ˆæ¥è¿‘ç­”æ¡ˆäº†ã€‚
è§[^1]



<details>
    <summary>åˆ’åˆ†æ•°ç»„Java</summary>
    
```Java [sol2-Java]
class Solution {
    public double findMedianSortedArrays(int[] nums1, int[] nums2) {
        if (nums1.length > nums2.length) {
            return findMedianSortedArrays(nums2, nums1);
        }

        int m = nums1.length;
        int n = nums2.length;
        int left = 0, right = m;
        // median1ï¼šå‰ä¸€éƒ¨åˆ†çš„æœ€å¤§å€¼
        // median2ï¼šåä¸€éƒ¨åˆ†çš„æœ€å°å€¼
        int median1 = 0, median2 = 0;

        while (left <= right) {
            // å‰ä¸€éƒ¨åˆ†åŒ…å« nums1[0 .. i-1] å’Œ nums2[0 .. j-1]
            // åä¸€éƒ¨åˆ†åŒ…å« nums1[i .. m-1] å’Œ nums2[j .. n-1]
            int i = (left + right) / 2;
            int j = (m + n + 1) / 2 - i;

            // nums_im1, nums_i, nums_jm1, nums_j åˆ†åˆ«è¡¨ç¤º nums1[i-1], nums1[i], nums2[j-1], nums2[j]
            int nums_im1 = (i == 0 ? Integer.MIN_VALUE : nums1[i - 1]);
            int nums_i = (i == m ? Integer.MAX_VALUE : nums1[i]);
            int nums_jm1 = (j == 0 ? Integer.MIN_VALUE : nums2[j - 1]);
            int nums_j = (j == n ? Integer.MAX_VALUE : nums2[j]);

            if (nums_im1 <= nums_j) {
                median1 = Math.max(nums_im1, nums_jm1);
                median2 = Math.min(nums_i, nums_j);
                left = i + 1;
            } else {
                right = i - 1;
            }
        }

        return (m + n) % 2 == 0 ? (median1 + median2) / 2.0 : median1;
    }
}
```


</details>
<details>
    <summary>åˆ’åˆ†æ•°ç»„C++</summary>
    
```C++ [sol2-C++]
class Solution {
public:
    double findMedianSortedArrays(vector<int>& nums1, vector<int>& nums2) {
        if (nums1.size() > nums2.size()) {
            return findMedianSortedArrays(nums2, nums1);
        }
        
        int m = nums1.size();
        int n = nums2.size();
        int left = 0, right = m;
        // median1ï¼šå‰ä¸€éƒ¨åˆ†çš„æœ€å¤§å€¼
        // median2ï¼šåä¸€éƒ¨åˆ†çš„æœ€å°å€¼
        int median1 = 0, median2 = 0;

        while (left <= right) {
            // å‰ä¸€éƒ¨åˆ†åŒ…å« nums1[0 .. i-1] å’Œ nums2[0 .. j-1]
            // åä¸€éƒ¨åˆ†åŒ…å« nums1[i .. m-1] å’Œ nums2[j .. n-1]
            int i = (left + right) / 2;
            int j = (m + n + 1) / 2 - i;

            // nums_im1, nums_i, nums_jm1, nums_j åˆ†åˆ«è¡¨ç¤º nums1[i-1], nums1[i], nums2[j-1], nums2[j]
            int nums_im1 = (i == 0 ? INT_MIN : nums1[i - 1]);
            int nums_i = (i == m ? INT_MAX : nums1[i]);
            int nums_jm1 = (j == 0 ? INT_MIN : nums2[j - 1]);
            int nums_j = (j == n ? INT_MAX : nums2[j]);

            if (nums_im1 <= nums_j) {
                median1 = max(nums_im1, nums_jm1);
                median2 = min(nums_i, nums_j);
                left = i + 1;
            } else {
                right = i - 1;
            }
        }

        return (m + n) % 2 == 0 ? (median1 + median2) / 2.0 : median1;
    }
};
```


</details>
<details>
    <summary>åˆ’åˆ†æ•°ç»„Python3</summary>
    
```Python [sol2-Python3]
class Solution:
    def findMedianSortedArrays(self, nums1: List[int], nums2: List[int]) -> float:
        if len(nums1) > len(nums2):
            return self.findMedianSortedArrays(nums2, nums1)

        infinty = 2**40
        m, n = len(nums1), len(nums2)
        left, right = 0, m
        # median1ï¼šå‰ä¸€éƒ¨åˆ†çš„æœ€å¤§å€¼
        # median2ï¼šåä¸€éƒ¨åˆ†çš„æœ€å°å€¼
        median1, median2 = 0, 0

        while left <= right:
            # å‰ä¸€éƒ¨åˆ†åŒ…å« nums1[0 .. i-1] å’Œ nums2[0 .. j-1]
            # // åä¸€éƒ¨åˆ†åŒ…å« nums1[i .. m-1] å’Œ nums2[j .. n-1]
            i = (left + right) // 2
            j = (m + n + 1) // 2 - i

            # nums_im1, nums_i, nums_jm1, nums_j åˆ†åˆ«è¡¨ç¤º nums1[i-1], nums1[i], nums2[j-1], nums2[j]
            nums_im1 = (-infinty if i == 0 else nums1[i - 1])
            nums_i = (infinty if i == m else nums1[i])
            nums_jm1 = (-infinty if j == 0 else nums2[j - 1])
            nums_j = (infinty if j == n else nums2[j])

            if nums_im1 <= nums_j:
                median1, median2 = max(nums_im1, nums_jm1), min(nums_i, nums_j)
                left = i + 1
            else:
                right = i - 1

        return (median1 + median2) / 2 if (m + n) % 2 == 0 else median1
```


</details>
<details>
    <summary>åˆ’åˆ†æ•°ç»„Golang</summary>
    
```golang [sol2-Golang]
func findMedianSortedArrays(nums1 []int, nums2 []int) float64 {
    if len(nums1) > len(nums2) {
        return findMedianSortedArrays(nums2, nums1)
    }
    m, n := len(nums1), len(nums2)
    left, right := 0, m
    median1, median2 := 0, 0
    for left <= right {
        i := (left + right) / 2
        j := (m + n + 1) / 2 - i
        nums_im1 := math.MinInt32
        if i != 0 {
            nums_im1 = nums1[i-1]
        }
        nums_i := math.MaxInt32
        if i != m {
            nums_i = nums1[i]
        }
        nums_jm1 := math.MinInt32
        if j != 0 {
            nums_jm1 = nums2[j-1]
        }
        nums_j := math.MaxInt32
        if j != n {
            nums_j = nums2[j]
        }
        if nums_im1 <= nums_j {
            median1 = max(nums_im1, nums_jm1)
            median2 = min(nums_i, nums_j)
            left = i + 1
        } else {
            right = i - 1
        }
    }
    if (m + n) % 2 == 0 {
        return float64(median1 + median2) / 2.0
    }
    return  float64(median1)
}

func max(x, y int) int {
    if x > y {
        return x
    }
    return y
}

func min(x, y int) int {
    if x < y {
        return x
    }
    return y
}
```


</details>

**å¤æ‚åº¦åˆ†æ**
è§[^1]


[^1]:https://leetcode-cn.com/problems/median-of-two-sorted-arrays/solution/xun-zhao-liang-ge-you-xu-shu-zu-de-zhong-wei-s-114/