---
title: 131. åˆ†å‰²å›æ–‡ä¸²

date: 2020-05-28 00:12:12

categories: 2020å¹´5æœˆ

tags: [LeetCode,Backtracking]

---

åˆ†å‰²æˆä¸€äº›å­ä¸²ï¼Œä½¿æ¯ä¸ªå­ä¸²éƒ½æ˜¯å›æ–‡ä¸²ã€‚è¿”å› s æ‰€æœ‰å¯èƒ½çš„åˆ†å‰²æ–¹æ¡ˆ

<!-- more -->


# ğŸ“–é¢˜ç›®æè¿°ï¼š
ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² sï¼Œå°† s åˆ†å‰²æˆä¸€äº›å­ä¸²ï¼Œä½¿æ¯ä¸ªå­ä¸²éƒ½æ˜¯å›æ–‡ä¸²ã€‚

è¿”å› s æ‰€æœ‰å¯èƒ½çš„åˆ†å‰²æ–¹æ¡ˆã€‚

ç¤ºä¾‹:
    
    è¾“å…¥:Â "aab"
    è¾“å‡º:
    [
      ["aa","b"],
      ["a","a","b"]
    ]


# ğŸ“–è§£é¢˜æ€è·¯

æœç´¢é—®é¢˜ä¸»è¦ä½¿ç”¨å›æº¯æ³•ã€‚

å›æº¯æ³•æ€è€ƒçš„æ­¥éª¤ï¼š

1ã€ç”»é€’å½’æ ‘ï¼›

2ã€æ ¹æ®è‡ªå·±ç”»çš„é€’å½’æ ‘ç¼–ç ã€‚

 [é€’å½’æ ‘](https://pic.leetcode-cn.com/298a80282ac3505fec3710abdc1e656c591cf7acaa3ba976151480729244b649-image.png)

æ€è€ƒå¦‚ä½•æ ¹æ®è¿™æ£µé€’å½’æ ‘ç¼–ç ï¼š

1ã€æ¯ä¸€ä¸ªç»“ç‚¹è¡¨ç¤ºå‰©ä½™æ²¡æœ‰æ‰«æåˆ°çš„å­—ç¬¦ä¸²ï¼Œäº§ç”Ÿåˆ†æ”¯æ˜¯æˆªå–äº†å‰©ä½™å­—ç¬¦ä¸²çš„å‰ç¼€ï¼›

2ã€äº§ç”Ÿå‰ç¼€å­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œåˆ¤æ–­å‰ç¼€å­—ç¬¦ä¸²æ˜¯å¦æ˜¯å›æ–‡ã€‚

+ å¦‚æœå‰ç¼€å­—ç¬¦ä¸²æ˜¯å›æ–‡ï¼Œåˆ™å¯ä»¥äº§ç”Ÿåˆ†æ”¯å’Œç»“ç‚¹ï¼›
+ å¦‚æœå‰ç¼€å­—ç¬¦ä¸²ä¸æ˜¯å›æ–‡ï¼Œåˆ™ä¸äº§ç”Ÿåˆ†æ”¯å’Œç»“ç‚¹ï¼Œè¿™ä¸€æ­¥æ˜¯å‰ªææ“ä½œã€‚

3ã€åœ¨å¶å­ç»“ç‚¹æ˜¯ç©ºå­—ç¬¦ä¸²çš„æ—¶å€™ç»“ç®—ï¼Œæ­¤æ—¶**ä»æ ¹ç»“ç‚¹åˆ°å¶å­ç»“ç‚¹çš„è·¯å¾„ï¼Œå°±æ˜¯ç»“æœé›†é‡Œçš„ä¸€ä¸ªç»“æœï¼Œä½¿ç”¨æ·±åº¦ä¼˜å…ˆéå†ï¼Œè®°å½•ä¸‹æ‰€æœ‰å¯èƒ½çš„ç»“æœ**ã€‚

+ é‡‡ç”¨ä¸€ä¸ªè·¯å¾„å˜é‡ `path` æœç´¢ï¼Œ`path` å…¨å±€ä½¿ç”¨ä¸€ä¸ªï¼ˆæ³¨æ„ç»“ç®—çš„æ—¶å€™ï¼Œéœ€è¦ç”Ÿæˆä¸€ä¸ªæ‹·è´ï¼‰ï¼Œå› æ­¤åœ¨é€’å½’æ‰§è¡Œæ–¹æ³•ç»“æŸä»¥åéœ€è¦å›æº¯ï¼Œå³å°†é€’å½’ä¹‹å‰æ·»åŠ è¿›æ¥çš„å…ƒç´ æ‹¿å‡ºå»ï¼›
+ `path` çš„æ“ä½œåªåœ¨åˆ—è¡¨çš„æœ«ç«¯ï¼Œå› æ­¤åˆé€‚çš„æ•°æ®ç»“æ„æ˜¯æ ˆã€‚

# ğŸ“–æ–¹æ³•ä¸€ï¼šå›æº¯


**å‚è€ƒä»£ç  1**ï¼š

```Java []
import java.util.ArrayDeque;
import java.util.ArrayList;
import java.util.Deque;
import java.util.List;

public class Solution {

    public List<List<String>> partition(String s) {
        int len = s.length();
        List<List<String>> res = new ArrayList<>();
        if (len == 0) {
            return res;
        }

        // Stack è¿™ä¸ªç±» Java çš„æ–‡æ¡£é‡Œæ¨èå†™æˆ Deque<Integer> stack = new ArrayDeque<Integer>();
        // æ³¨æ„ï¼šåªä½¿ç”¨ stack ç›¸å…³çš„æ¥å£
        Deque<String> stack = new ArrayDeque<>();
        backtracking(s, 0, len, stack, res);
        return res;
    }

    /**
     * @param s
     * @param start èµ·å§‹å­—ç¬¦çš„ç´¢å¼•
     * @param len   å­—ç¬¦ä¸² s çš„é•¿åº¦ï¼Œå¯ä»¥è®¾ç½®ä¸ºå…¨å±€å˜é‡
     * @param path  è®°å½•ä»æ ¹ç»“ç‚¹åˆ°å¶å­ç»“ç‚¹çš„è·¯å¾„
     * @param res   è®°å½•æ‰€æœ‰çš„ç»“æœ
     */
    private void backtracking(String s, int start, int len, Deque<String> path, List<List<String>> res) {
        if (start == len) {
            res.add(new ArrayList<>(path));
            return;
        }

        for (int i = start; i < len; i++) {

            // å› ä¸ºæˆªå–å­—ç¬¦ä¸²æ˜¯æ¶ˆè€—æ€§èƒ½çš„ï¼Œå› æ­¤ï¼Œé‡‡ç”¨ä¼ å­ä¸²ç´¢å¼•çš„æ–¹å¼åˆ¤æ–­ä¸€ä¸ªå­ä¸²æ˜¯å¦æ˜¯å›æ–‡å­ä¸²
            // ä¸æ˜¯çš„è¯ï¼Œå‰ªæ
            if (!checkPalindrome(s, start, i)) {
                continue;
            }

            path.addLast(s.substring(start, i + 1));
            backtracking(s, i + 1, len, path, res);
            path.removeLast();
        }
    }

    /**
     * è¿™ä¸€æ­¥çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(N)ï¼Œå› æ­¤ï¼Œå¯ä»¥é‡‡ç”¨åŠ¨æ€è§„åˆ’å…ˆæŠŠå›æ–‡å­ä¸²çš„ç»“æœè®°å½•åœ¨ä¸€ä¸ªè¡¨æ ¼é‡Œ
     *
     * @param str
     * @param left  å­ä¸²çš„å·¦è¾¹ç•Œï¼Œå¯ä»¥å–åˆ°
     * @param right å­ä¸²çš„å³è¾¹ç•Œï¼Œå¯ä»¥å–åˆ°
     * @return
     */
    private boolean checkPalindrome(String str, int left, int right) {
        // ä¸¥æ ¼å°äºå³å¯
        while (left < right) {
            if (str.charAt(left) != str.charAt(right)) {
                return false;
            }
            left++;
            right--;
        }
        return true;
    }
}
```

# ğŸ“–æ–¹æ³•äºŒï¼šå›æº¯çš„ä¼˜åŒ–ï¼ˆåŠ äº†åŠ¨æ€è§„åˆ’ï¼‰

åœ¨ä¸Šä¸€æ­¥ï¼ŒéªŒè¯å›æ–‡ä¸²é‚£é‡Œï¼Œæ¯ä¸€æ¬¡éƒ½å¾—ä½¿ç”¨â€œä¸¤è¾¹å¤¹â€çš„æ–¹å¼éªŒè¯å­ä¸²æ˜¯å¦æ˜¯å›æ–‡å­ä¸²ã€‚äºæ˜¯â€œç”¨ç©ºé—´æ¢æ—¶é—´â€ï¼Œåˆ©ç”¨ã€ŒåŠ›æ‰£ã€ç¬¬ 5 é¢˜ï¼š[æœ€é•¿å›æ–‡å­ä¸²](https://leetcode-cn.com/problems/longest-palindromic-substring) çš„æ€è·¯ï¼Œåˆ©ç”¨åŠ¨æ€è§„åˆ’æŠŠç»“æœå…ˆç®—å‡ºæ¥ï¼Œè¿™æ ·å°±å¯ä»¥ä»¥ *O(1)* çš„æ—¶é—´å¤æ‚åº¦ç›´æ¥å¾—åˆ°ä¸€ä¸ªå­ä¸²æ˜¯å¦æ˜¯å›æ–‡ã€‚

**å‚è€ƒä»£ç  2**ï¼š

```Java []
import java.util.ArrayDeque;
import java.util.ArrayList;
import java.util.Deque;
import java.util.List;
import java.util.Stack;

public class Solution {

    public List<List<String>> partition(String s) {
        int len = s.length();
        List<List<String>> res = new ArrayList<>();
        if (len == 0) {
            return res;
        }

        // é¢„å¤„ç†
        // çŠ¶æ€ï¼šdp[i][j] è¡¨ç¤º s[i][j] æ˜¯å¦æ˜¯å›æ–‡
        boolean[][] dp = new boolean[len][len];
        // çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼šåœ¨ s[i] == s[j] çš„æ—¶å€™ï¼Œdp[i][j] å‚è€ƒ dp[i + 1][j - 1]
        for (int right = 0; right < len; right++) {
            // æ³¨æ„ï¼šleft <= right å–ç­‰å·è¡¨ç¤º 1 ä¸ªå­—ç¬¦çš„æ—¶å€™ä¹Ÿéœ€è¦åˆ¤æ–­
            for (int left = 0; left <= right; left++) {
                if (s.charAt(left) == s.charAt(right) && (right - left <= 2 || dp[left + 1][right - 1])) {
                    dp[left][right] = true;
                }
            }
        }

        Deque<String> stack = new ArrayDeque<>();
        backtracking(s, 0, len, dp, stack, res);
        return res;
    }

    private void backtracking(String s,
                              int start,
                              int len,
                              boolean[][] dp,
                              Deque<String> path,
                              List<List<String>> res) {
        if (start == len) {
            res.add(new ArrayList<>(path));
            return;
        }

        for (int i = start; i < len; i++) {
            // å‰ªæ
            if (!dp[start][i]) {
                continue;
            }
            path.addLast(s.substring(start, i + 1));
            backtracking(s, i + 1, len, dp, path, res);
            path.removeLast();
        }
    }
}
```


# å‚è€ƒèµ„æ–™ï¼š
ã€1ã€‘https://leetcode-cn.com/problems/palindrome-partitioning/solution/hui-su-you-hua-jia-liao-dong-tai-gui-hua-by-liweiw/
