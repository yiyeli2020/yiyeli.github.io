<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Yiye Li</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2021-11-03T03:11:38.688Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>Yiye Li</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>224. åŸºæœ¬è®¡ç®—å™¨</title>
    <link href="http://yoursite.com/2021/11/02/224.%20%E5%9F%BA%E6%9C%AC%E8%AE%A1%E7%AE%97%E5%99%A8/"/>
    <id>http://yoursite.com/2021/11/02/224. åŸºæœ¬è®¡ç®—å™¨/</id>
    <published>2021-11-02T09:12:12.000Z</published>
    <updated>2021-11-03T03:11:38.688Z</updated>
    
    <content type="html"><![CDATA[<p>ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸²è¡¨è¾¾å¼sï¼Œè¯·ä½ å®ç°ä¸€ä¸ªåŸºæœ¬è®¡ç®—å™¨æ¥è®¡ç®—å¹¶è¿”å›å®ƒçš„å€¼ã€‚</p><a id="more"></a><p>[TOC]</p><p>ç¤ºä¾‹ 1ï¼š</p><pre><code>è¾“å…¥ï¼šs = &quot;1 + 1&quot;è¾“å‡ºï¼š2</code></pre><p>ç¤ºä¾‹ 2ï¼š</p><pre><code>è¾“å…¥ï¼šs = &quot; 2-1 + 2 &quot;è¾“å‡ºï¼š3</code></pre><p>ç¤ºä¾‹ 3ï¼š</p><pre><code>è¾“å…¥ï¼šs = &quot;(1+(4+5+2)-3)+(6+8)&quot;è¾“å‡ºï¼š23</code></pre><p>æç¤ºï¼š</p><pre><code>1 &lt;= s.length &lt;= 3 * 105s ç”±æ•°å­—ã€&apos;+&apos;ã€&apos;-&apos;ã€&apos;(&apos;ã€&apos;)&apos;ã€å’Œ &apos; &apos; ç»„æˆs è¡¨ç¤ºä¸€ä¸ªæœ‰æ•ˆçš„è¡¨è¾¾å¼</code></pre><h1 id="æ–¹æ³•ä¸€ï¼šæ‹¬å·å±•å¼€-æ ˆ"><a href="#æ–¹æ³•ä¸€ï¼šæ‹¬å·å±•å¼€-æ ˆ" class="headerlink" title="æ–¹æ³•ä¸€ï¼šæ‹¬å·å±•å¼€ + æ ˆ"></a>æ–¹æ³•ä¸€ï¼šæ‹¬å·å±•å¼€ + æ ˆ</h1><p>ç”±äºå­—ç¬¦ä¸²é™¤äº†æ•°å­—ä¸æ‹¬å·å¤–ï¼Œåªæœ‰åŠ å·å’Œå‡å·ä¸¤ç§è¿ç®—ç¬¦ã€‚å› æ­¤ï¼Œå¦‚æœå±•å¼€è¡¨è¾¾å¼ä¸­æ‰€æœ‰çš„æ‹¬å·ï¼Œåˆ™å¾—åˆ°çš„æ–°è¡¨è¾¾å¼ä¸­ï¼Œæ•°å­—æœ¬èº«ä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼Œåªæ˜¯æ¯ä¸ªæ•°å­—å‰é¢çš„ç¬¦å·ä¼šå‘ç”Ÿå˜åŒ–ã€‚<a href="https://leetcode-cn.com/problems/basic-calculator/solution/ji-ben-ji-suan-qi-by-leetcode-solution-jvir/" target="_blank" rel="noopener">^1</a></p><details>    <summary>C++</summary><figure class="highlight c++"><figcaption><span>[sol1-C++]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">calculate</span><span class="params">(<span class="built_in">string</span> s)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">stack</span>&lt;<span class="keyword">int</span>&gt; ops;</span><br><span class="line">        ops.push(<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">int</span> sign = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> ret = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> n = s.length();</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (i &lt; n) &#123;</span><br><span class="line">            <span class="keyword">if</span> (s[i] == <span class="string">' '</span>) &#123;</span><br><span class="line">                i++;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s[i] == <span class="string">'+'</span>) &#123;</span><br><span class="line">                sign = ops.top();</span><br><span class="line">                i++;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s[i] == <span class="string">'-'</span>) &#123;</span><br><span class="line">                sign = -ops.top();</span><br><span class="line">                i++;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s[i] == <span class="string">'('</span>) &#123;</span><br><span class="line">                ops.push(sign);</span><br><span class="line">                i++;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s[i] == <span class="string">')'</span>) &#123;</span><br><span class="line">                ops.pop();</span><br><span class="line">                i++;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">long</span> num = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">while</span> (i &lt; n &amp;&amp; s[i] &gt;= <span class="string">'0'</span> &amp;&amp; s[i] &lt;= <span class="string">'9'</span>) &#123;</span><br><span class="line">                    num = num * <span class="number">10</span> + s[i] - <span class="string">'0'</span>;</span><br><span class="line">                    i++;</span><br><span class="line">                &#125;</span><br><span class="line">                ret += sign * num;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></details><details>    <summary>Java</summary><figure class="highlight java"><figcaption><span>[sol1-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">calculate</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        Deque&lt;Integer&gt; ops = <span class="keyword">new</span> LinkedList&lt;Integer&gt;();</span><br><span class="line">        ops.push(<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">int</span> sign = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> ret = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> n = s.length();</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (i &lt; n) &#123;</span><br><span class="line">            <span class="keyword">if</span> (s.charAt(i) == <span class="string">' '</span>) &#123;</span><br><span class="line">                i++;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s.charAt(i) == <span class="string">'+'</span>) &#123;</span><br><span class="line">                sign = ops.peek();</span><br><span class="line">                i++;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s.charAt(i) == <span class="string">'-'</span>) &#123;</span><br><span class="line">                sign = -ops.peek();</span><br><span class="line">                i++;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s.charAt(i) == <span class="string">'('</span>) &#123;</span><br><span class="line">                ops.push(sign);</span><br><span class="line">                i++;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s.charAt(i) == <span class="string">')'</span>) &#123;</span><br><span class="line">                ops.pop();</span><br><span class="line">                i++;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">long</span> num = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">while</span> (i &lt; n &amp;&amp; Character.isDigit(s.charAt(i))) &#123;</span><br><span class="line">                    num = num * <span class="number">10</span> + s.charAt(i) - <span class="string">'0'</span>;</span><br><span class="line">                    i++;</span><br><span class="line">                &#125;</span><br><span class="line">                ret += sign * num;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>JavaScript</summary><figure class="highlight javascript"><figcaption><span>[sol1-JavaScript]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> calculate = <span class="function"><span class="keyword">function</span>(<span class="params">s</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> ops = [<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">let</span> sign = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> ret = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">const</span> n = s.length;</span><br><span class="line">    <span class="keyword">let</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (i &lt; n) &#123;</span><br><span class="line">        <span class="keyword">if</span> (s[i] === <span class="string">' '</span>) &#123;</span><br><span class="line">            i++;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s[i] === <span class="string">'+'</span>) &#123;</span><br><span class="line">            sign = ops[ops.length - <span class="number">1</span>];</span><br><span class="line">            i++;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s[i] === <span class="string">'-'</span>) &#123;</span><br><span class="line">            sign = -ops[ops.length - <span class="number">1</span>];</span><br><span class="line">            i++;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s[i] === <span class="string">'('</span>) &#123;</span><br><span class="line">            ops.push(sign);</span><br><span class="line">            i++;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s[i] === <span class="string">')'</span>) &#123;</span><br><span class="line">            ops.pop();</span><br><span class="line">            i++;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> num = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span> (i &lt; n &amp;&amp; !(<span class="built_in">isNaN</span>(<span class="built_in">Number</span>(s[i]))) &amp;&amp; s[i] !== <span class="string">' '</span>) &#123;</span><br><span class="line">                num = num * <span class="number">10</span> + s[i].charCodeAt() - <span class="string">'0'</span>.charCodeAt();</span><br><span class="line">                i++;</span><br><span class="line">            &#125;</span><br><span class="line">            ret += sign * num;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></details><details>    <summary>Golang</summary><figure class="highlight go"><figcaption><span>[sol1-Golang]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">calculate</span><span class="params">(s <span class="keyword">string</span>)</span> <span class="params">(ans <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    ops := []<span class="keyword">int</span>&#123;<span class="number">1</span>&#125;</span><br><span class="line">    sign := <span class="number">1</span></span><br><span class="line">    n := <span class="built_in">len</span>(s)</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; n; &#123;</span><br><span class="line">        <span class="keyword">switch</span> s[i] &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">' '</span>:</span><br><span class="line">            i++</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'+'</span>:</span><br><span class="line">            sign = ops[<span class="built_in">len</span>(ops)<span class="number">-1</span>]</span><br><span class="line">            i++</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'-'</span>:</span><br><span class="line">            sign = -ops[<span class="built_in">len</span>(ops)<span class="number">-1</span>]</span><br><span class="line">            i++</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'('</span>:</span><br><span class="line">            ops = <span class="built_in">append</span>(ops, sign)</span><br><span class="line">            i++</span><br><span class="line">        <span class="keyword">case</span> <span class="string">')'</span>:</span><br><span class="line">            ops = ops[:<span class="built_in">len</span>(ops)<span class="number">-1</span>]</span><br><span class="line">            i++</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            num := <span class="number">0</span></span><br><span class="line">            <span class="keyword">for</span> ; i &lt; n &amp;&amp; <span class="string">'0'</span> &lt;= s[i] &amp;&amp; s[i] &lt;= <span class="string">'9'</span>; i++ &#123;</span><br><span class="line">                num = num*<span class="number">10</span> + <span class="keyword">int</span>(s[i]-<span class="string">'0'</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            ans += sign * num</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>C</summary><figure class="highlight c"><figcaption><span>[sol1-C]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">calculate</span><span class="params">(<span class="keyword">char</span>* s)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = <span class="built_in">strlen</span>(s);</span><br><span class="line">    <span class="keyword">int</span> ops[n], top = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> sign = <span class="number">1</span>;</span><br><span class="line">    ops[top++] = sign;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> ret = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (i &lt; n) &#123;</span><br><span class="line">        <span class="keyword">if</span> (s[i] == <span class="string">' '</span>) &#123;</span><br><span class="line">            i++;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s[i] == <span class="string">'+'</span>) &#123;</span><br><span class="line">            sign = ops[top - <span class="number">1</span>];</span><br><span class="line">            i++;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s[i] == <span class="string">'-'</span>) &#123;</span><br><span class="line">            sign = -ops[top - <span class="number">1</span>];</span><br><span class="line">            i++;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s[i] == <span class="string">'('</span>) &#123;</span><br><span class="line">            ops[top++] = sign;</span><br><span class="line">            i++;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s[i] == <span class="string">')'</span>) &#123;</span><br><span class="line">            top--;</span><br><span class="line">            i++;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">long</span> num = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span> (i &lt; n &amp;&amp; s[i] &gt;= <span class="string">'0'</span> &amp;&amp; s[i] &lt;= <span class="string">'9'</span>) &#123;</span><br><span class="line">                num = num * <span class="number">10</span> + s[i] - <span class="string">'0'</span>;</span><br><span class="line">                i++;</span><br><span class="line">            &#125;</span><br><span class="line">            ret += sign * num;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>Python3</summary><figure class="highlight python"><figcaption><span>[sol1-Python3]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">calculate</span><span class="params">(self, s: str)</span> -&gt; int:</span></span><br><span class="line">        ops = [<span class="number">1</span>]</span><br><span class="line">        sign = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        ret = <span class="number">0</span></span><br><span class="line">        n = len(s)</span><br><span class="line">        i = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> i &lt; n:</span><br><span class="line">            <span class="keyword">if</span> s[i] == <span class="string">' '</span>:</span><br><span class="line">                i += <span class="number">1</span></span><br><span class="line">            <span class="keyword">elif</span> s[i] == <span class="string">'+'</span>:</span><br><span class="line">                sign = ops[<span class="number">-1</span>]</span><br><span class="line">                i += <span class="number">1</span></span><br><span class="line">            <span class="keyword">elif</span> s[i] == <span class="string">'-'</span>:</span><br><span class="line">                sign = -ops[<span class="number">-1</span>]</span><br><span class="line">                i += <span class="number">1</span></span><br><span class="line">            <span class="keyword">elif</span> s[i] == <span class="string">'('</span>:</span><br><span class="line">                ops.append(sign)</span><br><span class="line">                i += <span class="number">1</span></span><br><span class="line">            <span class="keyword">elif</span> s[i] == <span class="string">')'</span>:</span><br><span class="line">                ops.pop()</span><br><span class="line">                i += <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                num = <span class="number">0</span></span><br><span class="line">                <span class="keyword">while</span> i &lt; n <span class="keyword">and</span> s[i].isdigit():</span><br><span class="line">                    num = num * <span class="number">10</span> + ord(s[i]) - ord(<span class="string">'0'</span>)</span><br><span class="line">                    i += <span class="number">1</span></span><br><span class="line">                ret += num * sign</span><br><span class="line">        <span class="keyword">return</span> ret</span><br></pre></td></tr></table></figure></details><p><strong>å¤æ‚åº¦åˆ†æ</strong></p><ul><li><p>æ—¶é—´å¤æ‚åº¦ï¼š<em>O(n)*ï¼Œå…¶ä¸­ *n</em> ä¸ºå­—ç¬¦ä¸² <em>s</em> çš„é•¿åº¦ã€‚éœ€è¦éå†å­—ç¬¦ä¸² <em>s</em> ä¸€æ¬¡ï¼Œè®¡ç®—è¡¨è¾¾å¼çš„å€¼ã€‚</p></li><li><p>ç©ºé—´å¤æ‚åº¦ï¼š<em>O(n)*ï¼Œå…¶ä¸­ *n</em> ä¸ºå­—ç¬¦ä¸² <em>s</em> çš„é•¿åº¦ã€‚ç©ºé—´å¤æ‚åº¦ä¸»è¦å–å†³äºæ ˆçš„ç©ºé—´ï¼Œæ ˆä¸­çš„å…ƒç´ æ•°é‡ä¸è¶…è¿‡ <em>n</em>ã€‚</p></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸²è¡¨è¾¾å¼sï¼Œè¯·ä½ å®ç°ä¸€ä¸ªåŸºæœ¬è®¡ç®—å™¨æ¥è®¡ç®—å¹¶è¿”å›å®ƒçš„å€¼ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="2021å¹´11æœˆ" scheme="http://yoursite.com/categories/2021%E5%B9%B411%E6%9C%88/"/>
    
    
      <category term="Leetcode" scheme="http://yoursite.com/tags/Leetcode/"/>
    
      <category term="String" scheme="http://yoursite.com/tags/String/"/>
    
  </entry>
  
  <entry>
    <title>227.åŸºæœ¬è®¡ç®—å™¨ II</title>
    <link href="http://yoursite.com/2021/11/02/227.%20%E5%9F%BA%E6%9C%AC%E8%AE%A1%E7%AE%97%E5%99%A8%20II/"/>
    <id>http://yoursite.com/2021/11/02/227. åŸºæœ¬è®¡ç®—å™¨ II/</id>
    <published>2021-11-02T03:12:12.000Z</published>
    <updated>2021-11-02T10:04:31.752Z</updated>
    
    <content type="html"><![CDATA[<p>å®ç°ä¸€ä¸ªåŸºæœ¬çš„è®¡ç®—å™¨æ¥è®¡ç®—ä¸€ä¸ªç®€å•çš„å­—ç¬¦ä¸²è¡¨è¾¾å¼çš„å€¼ã€‚</p><p>å­—ç¬¦ä¸²è¡¨è¾¾å¼ä»…åŒ…å«éè´Ÿæ•´æ•°ï¼Œ+ï¼Œ - ï¼Œ*ï¼Œ/ å››ç§è¿ç®—ç¬¦å’Œç©ºæ ¼  ã€‚ æ•´æ•°é™¤æ³•ä»…ä¿ç•™æ•´æ•°éƒ¨åˆ†ã€‚</p><a id="more"></a><p>[TOC]</p><p>ç¤ºä¾‹ 1:</p><pre><code>è¾“å…¥: &quot;3+2*2&quot;è¾“å‡º: 7</code></pre><p>ç¤ºä¾‹ 2:</p><pre><code>è¾“å…¥: &quot; 3/2 &quot;è¾“å‡º: 1</code></pre><p>ç¤ºä¾‹ 3:</p><pre><code>è¾“å…¥: &quot; 3+5 / 2 &quot;è¾“å‡º: 5</code></pre><p>è¯´æ˜ï¼š</p><p>ä½ å¯ä»¥å‡è®¾æ‰€ç»™å®šçš„è¡¨è¾¾å¼éƒ½æ˜¯æœ‰æ•ˆçš„ã€‚<br>è¯·ä¸è¦ä½¿ç”¨å†…ç½®çš„åº“å‡½æ•° evalã€‚</p><h1 id="è§£æ³•ä¸€ï¼šå•æ ˆçš„ç»å…¸åº”ç”¨"><a href="#è§£æ³•ä¸€ï¼šå•æ ˆçš„ç»å…¸åº”ç”¨" class="headerlink" title="è§£æ³•ä¸€ï¼šå•æ ˆçš„ç»å…¸åº”ç”¨"></a>è§£æ³•ä¸€ï¼šå•æ ˆçš„ç»å…¸åº”ç”¨</h1><p>æ­¤ç®—æ³•çš„æ€è·¯å¾ˆç®€å•ï¼Œå…ˆæŠŠä¹˜é™¤æ³•çš„å€¼è®¡ç®—å‡ºæ¥ï¼Œæœ€ç»ˆå°†æ‰€æœ‰çš„è¿ç®—ç®€åŒ–æˆåªæœ‰åŠ æ³•ã€‚</p><ol><li>å…ˆè·³è¿‡ç©ºæ ¼</li><li>å‡ºç°äº†æ•°å­—åˆ™è®°å½•æ•´ä¸ªæ•°å­—æ˜¯å¤šå°‘ï¼Œç„¶åæ ¹æ®ä¹‹å‰çš„è¿ç®—ç¬¦å†³å®šä¸‹ä¸€æ­¥ï¼š</li></ol><ul><li>å¦‚æœæ˜¯åŠ å·â€™+â€™ï¼Œè¯´æ˜å‰é¢çš„è¿ç®—ç‹¬ç«‹äºä»¥åçš„è¿ç®—ï¼Œå¯ä»¥å°†ç»“æœæš‚æ—¶æ”¾å…¥æ ˆï¼›</li><li>å¦‚æœæ˜¯å‡å·â€™-â€˜ï¼Œå¯ä»¥çœ‹æˆ<code>-1 * tempNum</code>ï¼Œç„¶åå°†<code>-tempNum</code>å…¥æ ˆï¼›</li><li>å¦‚æœæ˜¯ä¹˜å·â€™*â€™æˆ–è€…é™¤å·â€™/â€˜ï¼Œç”±äºå‰é¢çš„è¿ç®—ç‹¬ç«‹äºæ­¤ï¼Œå¯ä»¥å…ˆè®¡ç®—<code>lastNum</code>å’Œ<code>tempNum</code>ç§¯ï¼Œç„¶åç»“æœå…¥æ ˆã€‚</li></ul><ol start="3"><li>æœ€åå°†æ ˆä¸­çš„æ‰€æœ‰å…ƒç´ ç›¸åŠ å°±æ˜¯ç­”æ¡ˆã€‚</li></ol><p>æ³¨æ„çš„ç‚¹ï¼Œåœ¨å†™ä»£ç çš„æ—¶å€™æ³¨æ„åˆ°popè¦å’Œpushæˆå¯¹ä½¿ç”¨ï¼Œä¹‹å‰æ··ç”¨äº†offerå’Œpollï¼Œä½†å¯¹å…¶å®é™…ç”¨æ³•å¹¶æ²¡æœ‰è¯¦ç»†äº†è§£ã€‚ç»“æœå¯¼è‡´å‡ºç°äº†æ„æ–™ä¹‹å¤–çš„ç»“æœã€‚</p><details>    <summary>æ ˆçš„ç»å…¸åº”ç”¨</summary><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">    public int calculate(String s) &#123;</span><br><span class="line">        Stack&lt;Integer&gt; numStack = new Stack&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        char lastOp = &apos;+&apos;;</span><br><span class="line">        char[] arr = s.toCharArray();</span><br><span class="line">        for(int i = 0; i &lt; arr.length; i ++)&#123;</span><br><span class="line">            if(arr[i] == &apos; &apos;) continue;</span><br><span class="line"></span><br><span class="line">            if(Character.isDigit(arr[i]))&#123;</span><br><span class="line">                int tempNum = arr[i] - &apos;0&apos;;</span><br><span class="line">                while(++i &lt; arr.length &amp;&amp; Character.isDigit(arr[i]))&#123;</span><br><span class="line">                    tempNum = tempNum * 10 + (arr[i] - &apos;0&apos;);</span><br><span class="line">                &#125; i--;</span><br><span class="line"></span><br><span class="line">                if(lastOp == &apos;+&apos;) numStack.push(tempNum);</span><br><span class="line">                else if(lastOp == &apos;-&apos;) numStack.push(-tempNum);</span><br><span class="line">                else numStack.push(res(lastOp, numStack.pop(), tempNum));</span><br><span class="line">            &#125; else lastOp = arr[i];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        int ans = 0;</span><br><span class="line">        for(int num : numStack) ans += num;</span><br><span class="line">        return ans;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private int res(char op, int a, int b)&#123;</span><br><span class="line">        if(op == &apos;*&apos;) return a * b;</span><br><span class="line">        else if(op == &apos;/&apos;) return a / b;</span><br><span class="line">        else if(op == &apos;+&apos;) return a + b; //å…¶å®åŠ å‡è¿ç®—å¯ä»¥å¿½ç•¥</span><br><span class="line">        else return a - b;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details> <h1 id="è§£æ³•äºŒï¼šåŒæ ˆç®—æ³•"><a href="#è§£æ³•äºŒï¼šåŒæ ˆç®—æ³•" class="headerlink" title="è§£æ³•äºŒï¼šåŒæ ˆç®—æ³•"></a>è§£æ³•äºŒï¼šåŒæ ˆç®—æ³•</h1><p>è¿™ä¸ªç®—æ³•æœ‰ä¸ªä¸“é—¨çš„åç§°Shunting-yard algorithm</p><p>æ ˆoprandså­˜å‚¨è¡¨è¾¾å¼ä¸­çš„æ•´æ•°ã€‚<br>æ ˆoporså­˜å‚¨è¡¨è¾¾å¼ä¸­çš„è¿ç®—ç¬¦ã€‚</p><p>ä»å·¦å‘å³éå†å­—ç¬¦ä¸²ï¼Œ</p><p>å½“s[i] ä¸ºç©ºæ ¼æ—¶ï¼Œè¿‡æ»¤æ‰ç©ºæ ¼ï¼›</p><p>å½“s[i] ä¸ºæ•°å­—æ•°ï¼Œæå–è¿ç»­çš„æ•´æ•°ã€‚å­˜å…¥oprandsã€‚</p><p>å½“s[i] ä¸ºè¿ç®—ç¬¦æ—¶ï¼Œå¦‚æœs[i]çš„ä¼˜å…ˆçº§æ¯”oporsæ ˆé¡¶è¿ç®—ç¬¦é«˜ï¼Œé‚£ä¹ˆs[i]å…¥oporsæ ˆã€‚</p><p>å¦‚æœä¸æ˜¯ï¼Œé‚£ä¹ˆå¼¹å‡ºoporsæ ˆé¡¶è¿ç®—ç¬¦ï¼Œå’Œoprandsæ ˆé¡¶çš„ä¸¤ä¸ªæ•´æ•°ï¼Œè®¡ç®—ï¼Œç»“æœå­˜å…¥oprandsæ ˆã€‚</p><p>æœ€ç»ˆçš„è§£åœ¨oprandsä¸­ã€‚</p><details>    <summary>åŒæ ˆç®—æ³•</summary><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">class Solution &#123;</span><br><span class="line">    static Stack&lt;Integer&gt; num = new Stack&lt;Integer&gt;();</span><br><span class="line">    static Stack&lt;Character&gt; op = new Stack&lt;Character&gt;();</span><br><span class="line">    static HashMap&lt;Character, Integer&gt; map = new HashMap&lt;Character, Integer&gt;();</span><br><span class="line">    static void eval()</span><br><span class="line">    &#123;</span><br><span class="line">        int b = num.pop();</span><br><span class="line">        int a = num.pop();</span><br><span class="line">        char c = op.pop();</span><br><span class="line">        int r = 0;</span><br><span class="line">        if(c == &apos;+&apos;) r = a + b;</span><br><span class="line">        else if(c == &apos;-&apos;) r = a - b;</span><br><span class="line">        else if(c == &apos;*&apos;) r = a * b;</span><br><span class="line">        else r = a / b;</span><br><span class="line">        num.add(r); </span><br><span class="line">    &#125;</span><br><span class="line">    public int calculate(String s) &#123;</span><br><span class="line">        s = &apos;0&apos; + s; // å¯¹å¼€å¤´æ˜¯è´Ÿæ•°çš„å¤„ç† </span><br><span class="line">        map.put(&apos;+&apos;, 1);   //å®šä¹‰è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§</span><br><span class="line">        map.put(&apos;-&apos;, 1);</span><br><span class="line">        map.put(&apos;*&apos;, 2);</span><br><span class="line">        map.put(&apos;/&apos;, 2);</span><br><span class="line">        for(int i = 0; i &lt; s.length();i ++)</span><br><span class="line">        &#123;</span><br><span class="line">            char c = s.charAt(i);</span><br><span class="line">            if(c == &apos; &apos;) continue;  //è·³è¿‡ç©ºæ ¼</span><br><span class="line">            if(c &gt;= &apos;0&apos; &amp;&amp; c &lt;= &apos;9&apos;)  //cæ˜¯æ•°å­—,è¯»å–ä¸€ä¸ªè¿ç»­çš„æ•°å­—</span><br><span class="line">            &#123;</span><br><span class="line">                int x = 0, j = i;</span><br><span class="line">                while(j &lt; s.length() &amp;&amp; s.charAt(j) &gt;= &apos;0&apos; &amp;&amp; s.charAt(j) &lt;= &apos;9&apos;)</span><br><span class="line">                &#123;</span><br><span class="line">                    x = x * 10 + s.charAt(j) - &apos;0&apos;;</span><br><span class="line">                    j ++;</span><br><span class="line">                &#125;</span><br><span class="line">                i = j - 1;</span><br><span class="line">                num.add(x);</span><br><span class="line">            &#125;</span><br><span class="line">            else  //cæ˜¯æ“ä½œç¬¦ </span><br><span class="line">            &#123;     //opæ ˆéç©ºå¹¶ä¸”æ ˆé¡¶æ“ä½œç¬¦ä¼˜å…ˆçº§å¤§äºç­‰äºå½“å‰æ“ä½œç¬¦cçš„ä¼˜å…ˆçº§ï¼Œè¿›è¡Œeval()è®¡ç®—</span><br><span class="line">                while(!op.isEmpty() &amp;&amp; map.get(op.peek()) &gt;= map.get(c)) eval();</span><br><span class="line">                op.add(c); </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        while(!op.isEmpty()) eval();</span><br><span class="line">        return num.pop();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details> <h1 id="è§£æ³•ä¸‰ï¼šä¸ç”¨æ ˆ"><a href="#è§£æ³•ä¸‰ï¼šä¸ç”¨æ ˆ" class="headerlink" title="è§£æ³•ä¸‰ï¼šä¸ç”¨æ ˆ"></a>è§£æ³•ä¸‰ï¼šä¸ç”¨æ ˆ</h1><details>    <summary>Java</summary><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">public int calculate(String s) &#123;</span><br><span class="line">        int res = 0, tmp = 0, curNum = 0, n = s.length();</span><br><span class="line">        //reså­˜ç»“æœï¼Œtmpå­˜å½“å‰é«˜ä¼˜å…ˆçº§è¿ç®—ç»“æœï¼ŒcurNumå­˜å½“å‰å­—æ¯æ®µæ‰€ä»£è¡¨çš„æ•°å€¼</span><br><span class="line">        char op = &apos;+&apos;;</span><br><span class="line">        for (int i = 0; i &lt; n; i++) &#123;</span><br><span class="line">            char c = s.charAt(i);</span><br><span class="line">            if (Character.isDigit(c)) &#123;</span><br><span class="line">                curNum = curNum * 10 + c - &apos;0&apos;;</span><br><span class="line">            &#125;</span><br><span class="line">            if (c == &apos;+&apos; || c == &apos;-&apos; || c == &apos;*&apos; || c == &apos;/&apos; || i == n - 1) &#123;</span><br><span class="line">                switch (op) &#123;</span><br><span class="line">                    case &apos;+&apos;:tmp+=curNum;break;</span><br><span class="line">                    case &apos;-&apos;:tmp-=curNum;break;</span><br><span class="line">                    case &apos;*&apos;:tmp*=curNum;break;</span><br><span class="line">                    case &apos;/&apos;:tmp/=curNum;break;</span><br><span class="line">                &#125;</span><br><span class="line">                //å•ç‹¬åˆ¤æ–­è¿ä¹˜ã€è¿é™¤ç»“æŸ æˆ– è¾¾åˆ°æœ€åä¸€ä¸ªå­—ç¬¦ï¼Œä¾‹å¦‚ï¼š3 + 2 * 2</span><br><span class="line">                //å¦‚æœæ²¡æœ‰ä¸‹é¢è¿™ä¸ªifåˆ™ä¼šå‡ºé”™</span><br><span class="line">                if (c == &apos;+&apos; || c == &apos;-&apos; || i == n - 1) &#123;</span><br><span class="line">                    res += tmp;</span><br><span class="line">                    tmp = 0;</span><br><span class="line">                &#125;</span><br><span class="line">                op = c;//æ›´æ–°æ“ä½œç¬¦</span><br><span class="line">                curNum = 0;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return res;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></details> ]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å®ç°ä¸€ä¸ªåŸºæœ¬çš„è®¡ç®—å™¨æ¥è®¡ç®—ä¸€ä¸ªç®€å•çš„å­—ç¬¦ä¸²è¡¨è¾¾å¼çš„å€¼ã€‚&lt;/p&gt;
&lt;p&gt;å­—ç¬¦ä¸²è¡¨è¾¾å¼ä»…åŒ…å«éè´Ÿæ•´æ•°ï¼Œ+ï¼Œ - ï¼Œ*ï¼Œ/ å››ç§è¿ç®—ç¬¦å’Œç©ºæ ¼  ã€‚ æ•´æ•°é™¤æ³•ä»…ä¿ç•™æ•´æ•°éƒ¨åˆ†ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="2021å¹´11æœˆ" scheme="http://yoursite.com/categories/2021%E5%B9%B411%E6%9C%88/"/>
    
    
      <category term="Leetcode" scheme="http://yoursite.com/tags/Leetcode/"/>
    
      <category term="String" scheme="http://yoursite.com/tags/String/"/>
    
  </entry>
  
  <entry>
    <title>560. å’Œä¸º K çš„å­æ•°ç»„</title>
    <link href="http://yoursite.com/2021/10/31/560.%20%E5%92%8C%E4%B8%BA%20K%20%E7%9A%84%E5%AD%90%E6%95%B0%E7%BB%84/"/>
    <id>http://yoursite.com/2021/10/31/560. å’Œä¸º K çš„å­æ•°ç»„/</id>
    <published>2021-10-31T08:12:12.000Z</published>
    <updated>2021-10-31T13:55:37.873Z</updated>
    
    <content type="html"><![CDATA[<p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•° k ï¼Œè¯·ä½ ç»Ÿè®¡å¹¶è¿”å›è¯¥æ•°ç»„ä¸­å’Œä¸º k çš„è¿ç»­å­æ•°ç»„çš„ä¸ªæ•°ã€‚</p><a id="more"></a><p>[TOC]</p><p>ç¤ºä¾‹ 1ï¼š</p><pre><code>è¾“å…¥ï¼šnums = [1,1,1], k = 2è¾“å‡ºï¼š2</code></pre><p>ç¤ºä¾‹ 2ï¼š</p><pre><code>è¾“å…¥ï¼šnums = [1,2,3], k = 3è¾“å‡ºï¼š2</code></pre><p>æç¤ºï¼š</p><pre><code>1 &lt;= nums.length &lt;= 2 * 104-1000 &lt;= nums[i] &lt;= 1000-107 &lt;= k &lt;= 107</code></pre><h1 id="ğŸ“–-æ–‡å­—é¢˜è§£"><a href="#ğŸ“–-æ–‡å­—é¢˜è§£" class="headerlink" title="ğŸ“– æ–‡å­—é¢˜è§£"></a>ğŸ“– æ–‡å­—é¢˜è§£</h1><p>ä¸€å¼€å§‹æƒ³ç”¨713é¢˜ä¸­çš„æ»‘åŠ¨çª—å£åŒæŒ‡é’ˆæ¥åšï¼Œä½†å‘ç°ç”±äºæ•°ç»„ä¸­æœ‰å¯èƒ½æœ‰è´Ÿæ•°ï¼Œè¿™ç§æ–¹æ³•ä¸é€‚ç”¨ã€‚</p><h2 id="æ–¹æ³•ä¸€ï¼šæšä¸¾"><a href="#æ–¹æ³•ä¸€ï¼šæšä¸¾" class="headerlink" title="æ–¹æ³•ä¸€ï¼šæšä¸¾"></a>æ–¹æ³•ä¸€ï¼šæšä¸¾</h2><p><strong>æ€è·¯å’Œç®—æ³•</strong><a href="https://leetcode-cn.com/problems/subarray-sum-equals-k/solution/he-wei-kde-zi-shu-zu-by-leetcode-solution/" target="_blank" rel="noopener">^1</a></p><p>è€ƒè™‘ä»¥ <em>i</em> ç»“å°¾å’Œä¸º <em>k</em> çš„è¿ç»­å­æ•°ç»„ä¸ªæ•°ï¼Œæˆ‘ä»¬éœ€è¦ç»Ÿè®¡ç¬¦åˆæ¡ä»¶çš„ä¸‹æ ‡ <em>j</em> çš„ä¸ªæ•°ï¼Œå…¶ä¸­0&lt;=j&lt;=i ä¸” <em>[j..i]</em> è¿™ä¸ªå­æ•°ç»„çš„å’Œæ°å¥½ä¸º <em>k</em> ã€‚</p><p>æˆ‘ä»¬å¯ä»¥æšä¸¾ <em>[0..i]</em> é‡Œæ‰€æœ‰çš„ä¸‹æ ‡ <em>j</em> æ¥åˆ¤æ–­æ˜¯å¦ç¬¦åˆæ¡ä»¶ï¼Œå¯èƒ½æœ‰è¯»è€…ä¼šè®¤ä¸ºå‡å®šæˆ‘ä»¬ç¡®å®šäº†å­æ•°ç»„çš„å¼€å¤´å’Œç»“å°¾ï¼Œè¿˜éœ€è¦ <em>O(n)</em> çš„æ—¶é—´å¤æ‚åº¦éå†å­æ•°ç»„æ¥æ±‚å’Œï¼Œé‚£æ ·å¤æ‚åº¦å°±å°†è¾¾åˆ° <em>O(n^3)</em> ä»è€Œæ— æ³•é€šè¿‡æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹ã€‚ä½†æ˜¯å¦‚æœæˆ‘ä»¬çŸ¥é“ <em>[j,i]</em> å­æ•°ç»„çš„å’Œï¼Œå°±èƒ½ <em>O(1)</em> æ¨å‡º <em>[j-1,i]</em> çš„å’Œï¼Œå› æ­¤è¿™éƒ¨åˆ†çš„éå†æ±‚å’Œæ˜¯ä¸éœ€è¦çš„ï¼Œæˆ‘ä»¬åœ¨æšä¸¾ä¸‹æ ‡ <em>j</em> çš„æ—¶å€™å·²ç»èƒ½ <em>O(1)</em> æ±‚å‡º <em>[j,i]</em> çš„å­æ•°ç»„ä¹‹å’Œã€‚</p><details>    <summary>Java</summary><figure class="highlight java"><figcaption><span>[sol1-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">subarraySum</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> start = <span class="number">0</span>; start &lt; nums.length; ++start) &#123;</span><br><span class="line">            <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> end = start; end &gt;= <span class="number">0</span>; --end) &#123;</span><br><span class="line">                sum += nums[end];</span><br><span class="line">                <span class="keyword">if</span> (sum == k) &#123;</span><br><span class="line">                    count++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>C++</summary><figure class="highlight c++"><figcaption><span>[sol1-C++]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">subarraySum</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> start = <span class="number">0</span>; start &lt; nums.size(); ++start) &#123;</span><br><span class="line">            <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> end = start; end &gt;= <span class="number">0</span>; --end) &#123;</span><br><span class="line">                sum += nums[end];</span><br><span class="line">                <span class="keyword">if</span> (sum == k) &#123;</span><br><span class="line">                    count++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></details><details>    <summary>JavaScript</summary><figure class="highlight javascript"><figcaption><span>[sol1-JavaScript]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> subarraySum = <span class="function"><span class="keyword">function</span>(<span class="params">nums, k</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> start = <span class="number">0</span>; start &lt; nums.length; ++start) &#123;</span><br><span class="line">        <span class="keyword">let</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> end = start; end &gt;= <span class="number">0</span>; --end) &#123;</span><br><span class="line">            sum += nums[end];</span><br><span class="line">            <span class="keyword">if</span> (sum == k) &#123;</span><br><span class="line">                count++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> count;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></details><details>    <summary>Golang</summary><figure class="highlight golang"><figcaption><span>[sol1-Golang]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">subarraySum</span><span class="params">(nums []<span class="keyword">int</span>, k <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    count := <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> start := <span class="number">0</span>; start &lt; <span class="built_in">len</span>(nums); start++ &#123;</span><br><span class="line">        sum := <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> end := start; end &gt;= <span class="number">0</span>; end-- &#123;</span><br><span class="line">            sum += nums[end]</span><br><span class="line">            <span class="keyword">if</span> sum == k &#123;</span><br><span class="line">                count++</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> count</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><p><strong>å¤æ‚åº¦åˆ†æ</strong></p><ul><li><p>æ—¶é—´å¤æ‚åº¦ï¼š<em>O(n^2)*ï¼Œå…¶ä¸­ *n</em> ä¸ºæ•°ç»„çš„é•¿åº¦ã€‚æšä¸¾å­æ•°ç»„å¼€å¤´å’Œç»“å°¾éœ€è¦ <em>O(n^2)</em> çš„æ—¶é—´ï¼Œå…¶ä¸­æ±‚å’Œéœ€è¦ <em>O(1)</em> çš„æ—¶é—´å¤æ‚åº¦ï¼Œå› æ­¤æ€»æ—¶é—´å¤æ‚åº¦ä¸º <em>O(n^2)</em>ã€‚</p></li><li><p>ç©ºé—´å¤æ‚åº¦ï¼š<em>O(1)</em>ã€‚åªéœ€è¦å¸¸æ•°ç©ºé—´å­˜æ”¾è‹¥å¹²å˜é‡ã€‚</p></li></ul><h2 id="æ–¹æ³•äºŒï¼šå‰ç¼€å’Œ-å“ˆå¸Œè¡¨ä¼˜åŒ–"><a href="#æ–¹æ³•äºŒï¼šå‰ç¼€å’Œ-å“ˆå¸Œè¡¨ä¼˜åŒ–" class="headerlink" title="æ–¹æ³•äºŒï¼šå‰ç¼€å’Œ + å“ˆå¸Œè¡¨ä¼˜åŒ–"></a>æ–¹æ³•äºŒï¼šå‰ç¼€å’Œ + å“ˆå¸Œè¡¨ä¼˜åŒ–</h2><p><strong>æ€è·¯å’Œç®—æ³•</strong></p><p>æˆ‘ä»¬å¯ä»¥åŸºäºæ–¹æ³•ä¸€åˆ©ç”¨æ•°æ®ç»“æ„è¿›è¡Œè¿›ä¸€æ­¥çš„ä¼˜åŒ–ï¼Œæˆ‘ä»¬çŸ¥é“æ–¹æ³•ä¸€çš„ç“¶é¢ˆåœ¨äºå¯¹æ¯ä¸ª <em>i</em>ï¼Œæˆ‘ä»¬éœ€è¦æšä¸¾æ‰€æœ‰çš„ <em>j</em> æ¥åˆ¤æ–­æ˜¯å¦ç¬¦åˆæ¡ä»¶ï¼Œè¿™ä¸€æ­¥æ˜¯å¦å¯ä»¥ä¼˜åŒ–å‘¢ï¼Ÿç­”æ¡ˆæ˜¯å¯ä»¥çš„ã€‚ </p><details>    <summary>Java</summary><figure class="highlight java"><figcaption><span>[sol2-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">subarraySum</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">0</span>, pre = <span class="number">0</span>;</span><br><span class="line">        HashMap &lt; Integer, Integer &gt; mp = <span class="keyword">new</span> HashMap &lt; &gt; ();</span><br><span class="line">        mp.put(<span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">            pre += nums[i];</span><br><span class="line">            <span class="keyword">if</span> (mp.containsKey(pre - k)) &#123;</span><br><span class="line">                count += mp.get(pre - k);</span><br><span class="line">            &#125;</span><br><span class="line">            mp.put(pre, mp.getOrDefault(pre, <span class="number">0</span>) + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>C++</summary><figure class="highlight c++"><figcaption><span>[sol2-C++]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">subarraySum</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">unordered_map</span>&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; mp;</span><br><span class="line">        mp[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">0</span>, pre = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span>&amp; x:nums) &#123;</span><br><span class="line">            pre += x;</span><br><span class="line">            <span class="keyword">if</span> (mp.find(pre - k) != mp.end()) &#123;</span><br><span class="line">                count += mp[pre - k];</span><br><span class="line">            &#125;</span><br><span class="line">            mp[pre]++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></details><details>    <summary>JavaScript</summary><figure class="highlight javascript"><figcaption><span>[sol2-JavaScript]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> subarraySum = <span class="function"><span class="keyword">function</span>(<span class="params">nums, k</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> mp = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">    mp.set(<span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">let</span> count = <span class="number">0</span>, pre = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> x <span class="keyword">of</span> nums) &#123;</span><br><span class="line">        pre += x;</span><br><span class="line">        <span class="keyword">if</span> (mp.has(pre - k)) &#123;</span><br><span class="line">            count += mp.get(pre - k);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (mp.has(pre)) &#123;</span><br><span class="line">            mp.set(pre, mp.get(pre) + <span class="number">1</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            mp.set(pre, <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> count;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></details><details>    <summary>Golang</summary><figure class="highlight golang"><figcaption><span>[sol2-Golang]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">subarraySum</span><span class="params">(nums []<span class="keyword">int</span>, k <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    count, pre := <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">    m := <span class="keyword">map</span>[<span class="keyword">int</span>]<span class="keyword">int</span>&#123;&#125;</span><br><span class="line">    m[<span class="number">0</span>] = <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(nums); i++ &#123;</span><br><span class="line">        pre += nums[i]</span><br><span class="line">        <span class="keyword">if</span> _, ok := m[pre - k]; ok &#123;</span><br><span class="line">            count += m[pre - k]</span><br><span class="line">        &#125;</span><br><span class="line">        m[pre] += <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> count</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><p><strong>å¤æ‚åº¦åˆ†æ</strong></p><ul><li><p>æ—¶é—´å¤æ‚åº¦ï¼š<em>O(n)*ï¼Œå…¶ä¸­ *n</em> ä¸ºæ•°ç»„çš„é•¿åº¦ã€‚æˆ‘ä»¬éå†æ•°ç»„çš„æ—¶é—´å¤æ‚åº¦ä¸º <em>O(n)</em>ï¼Œä¸­é—´åˆ©ç”¨å“ˆå¸Œè¡¨æŸ¥è¯¢åˆ é™¤çš„å¤æ‚åº¦å‡ä¸º <em>O(1)</em>ï¼Œå› æ­¤æ€»æ—¶é—´å¤æ‚åº¦ä¸º <em>O(n)</em>ã€‚</p></li><li><p>ç©ºé—´å¤æ‚åº¦ï¼š<em>O(n)*ï¼Œå…¶ä¸­ *n</em> ä¸ºæ•°ç»„çš„é•¿åº¦ã€‚å“ˆå¸Œè¡¨åœ¨æœ€åæƒ…å†µä¸‹å¯èƒ½æœ‰ <em>n</em> ä¸ªä¸åŒçš„é”®å€¼ï¼Œå› æ­¤éœ€è¦ <em>O(n)</em> çš„ç©ºé—´å¤æ‚åº¦ã€‚</p></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•° k ï¼Œè¯·ä½ ç»Ÿè®¡å¹¶è¿”å›è¯¥æ•°ç»„ä¸­å’Œä¸º k çš„è¿ç»­å­æ•°ç»„çš„ä¸ªæ•°ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="2021å¹´10æœˆ" scheme="http://yoursite.com/categories/2021%E5%B9%B410%E6%9C%88/"/>
    
    
      <category term="LeetCode" scheme="http://yoursite.com/tags/LeetCode/"/>
    
      <category term="Array" scheme="http://yoursite.com/tags/Array/"/>
    
      <category term="Hash Table" scheme="http://yoursite.com/tags/Hash-Table/"/>
    
      <category term="Prefix Sum" scheme="http://yoursite.com/tags/Prefix-Sum/"/>
    
  </entry>
  
  <entry>
    <title>MySQLé¢è¯•é«˜é¢‘20é—®</title>
    <link href="http://yoursite.com/2021/10/31/MySQL%E9%9D%A2%E8%AF%95%E9%AB%98%E9%A2%9120%E9%97%AE/"/>
    <id>http://yoursite.com/2021/10/31/MySQLé¢è¯•é«˜é¢‘20é—®/</id>
    <published>2021-10-31T06:12:12.000Z</published>
    <updated>2021-10-31T08:20:36.687Z</updated>
    
    <content type="html"><![CDATA[<p>MySQLé¢è¯•é«˜é¢‘20é—®</p><a id="more"></a><p>[TOC]</p><h1 id="æ•°æ®åº“"><a href="#æ•°æ®åº“" class="headerlink" title="æ•°æ®åº“"></a>æ•°æ®åº“</h1><p>20é“MySQLé¢è¯•é¢˜<a href="http://coderleixiaoshuai.gitee.io/java-eight-part/#/" target="_blank" rel="noopener">^1</a>   </p><h2 id="è¯´è¯´MySQL-çš„åŸºç¡€æ¶æ„å›¾"><a href="#è¯´è¯´MySQL-çš„åŸºç¡€æ¶æ„å›¾" class="headerlink" title="è¯´è¯´MySQL çš„åŸºç¡€æ¶æ„å›¾"></a>è¯´è¯´MySQL çš„åŸºç¡€æ¶æ„å›¾</h2><p><a href="https://blog.csdn.net/GrayGo/article/details/118885029#:~:text=Mysql%20%E7%9A%84%20%E5%9F%BA%E7%A1%80%E6%9E%B6%E6%9E%84,MySql%20%E5%9C%A8%E6%9E%B6%E6%9E%84%E4%B8%8A%E6%80%BB%E4%BD%93%E4%B8%8A%E5%8F%AF%E4%BB%A5%E5%88%86%E4%B8%BA%E4%B8%A4%E4%B8%AA%E9%83%A8%E5%88%86%EF%BC%8C%E5%88%86%E5%88%AB%E6%98%AFserver%E5%B1%82%E5%92%8C%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E%E5%B1%82%E3%80%82%201.server%E5%B1%82%E7%BB%93%E6%9E%84%20Server%E5%B1%82%E5%8C%85%E6%8B%AC%E8%BF%9E%E6%8E%A5%E5%99%A8%EF%BC%8C%E6%9F%A5%E8%AF%A2%E5%99%A8%EF%BC%8C%E5%88%86%E6%9E%90%E5%99%A8%EF%BC%8C%E4%BC%98%E5%8C%96%E5%99%A8%EF%BC%8C%E6%89%A7%E8%A1%8C%E5%99%A8%E3%80%82" target="_blank" rel="noopener">https://blog.csdn.net/GrayGo/article/details/118885029#:~:text=Mysql%20%E7%9A%84%20%E5%9F%BA%E7%A1%80%E6%9E%B6%E6%9E%84,MySql%20%E5%9C%A8%E6%9E%B6%E6%9E%84%E4%B8%8A%E6%80%BB%E4%BD%93%E4%B8%8A%E5%8F%AF%E4%BB%A5%E5%88%86%E4%B8%BA%E4%B8%A4%E4%B8%AA%E9%83%A8%E5%88%86%EF%BC%8C%E5%88%86%E5%88%AB%E6%98%AFserver%E5%B1%82%E5%92%8C%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E%E5%B1%82%E3%80%82%201.server%E5%B1%82%E7%BB%93%E6%9E%84%20Server%E5%B1%82%E5%8C%85%E6%8B%AC%E8%BF%9E%E6%8E%A5%E5%99%A8%EF%BC%8C%E6%9F%A5%E8%AF%A2%E5%99%A8%EF%BC%8C%E5%88%86%E6%9E%90%E5%99%A8%EF%BC%8C%E4%BC%98%E5%8C%96%E5%99%A8%EF%BC%8C%E6%89%A7%E8%A1%8C%E5%99%A8%E3%80%82</a></p><p>Mysqlé€»è¾‘æ¶æ„å›¾ä¸»è¦åˆ†ä¸‰å±‚ï¼š ï¼ˆ1ï¼‰ç¬¬ä¸€å±‚è´Ÿè´£è¿æ¥å¤„ç†ï¼Œæˆæƒè®¤è¯ï¼Œå®‰å…¨ç­‰ç­‰ ï¼ˆ2ï¼‰ç¬¬äºŒå±‚è´Ÿè´£ç¼–è¯‘å¹¶ä¼˜åŒ–SQL<br>ï¼ˆ3ï¼‰ç¬¬ä¸‰å±‚æ˜¯å­˜å‚¨å¼•æ“<br><a href="https://zhuanlan.zhihu.com/p/391596282" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/391596282</a></p><h2 id="ä¸€æ¡SQLæŸ¥è¯¢è¯­å¥åœ¨MySQLä¸­å¦‚ä½•æ‰§è¡Œçš„ï¼Ÿ"><a href="#ä¸€æ¡SQLæŸ¥è¯¢è¯­å¥åœ¨MySQLä¸­å¦‚ä½•æ‰§è¡Œçš„ï¼Ÿ" class="headerlink" title="ä¸€æ¡SQLæŸ¥è¯¢è¯­å¥åœ¨MySQLä¸­å¦‚ä½•æ‰§è¡Œçš„ï¼Ÿ"></a>ä¸€æ¡SQLæŸ¥è¯¢è¯­å¥åœ¨MySQLä¸­å¦‚ä½•æ‰§è¡Œçš„ï¼Ÿ</h2><p>å…ˆæ£€æŸ¥è¯¥è¯­å¥æ˜¯å¦æœ‰æƒé™ï¼Œå¦‚æœæ²¡æœ‰æƒé™ï¼Œç›´æ¥è¿”å›é”™è¯¯ä¿¡æ¯ï¼Œå¦‚æœæœ‰æƒé™ä¼šå…ˆæŸ¥è¯¢ç¼“å­˜(MySQL8.0 ç‰ˆæœ¬ä»¥å‰)ã€‚</p><p>å¦‚æœæ²¡æœ‰ç¼“å­˜ï¼Œåˆ†æå™¨è¿›è¡Œè¯æ³•åˆ†æï¼Œæå– sql è¯­å¥ä¸­ select ç­‰å…³é”®å…ƒç´ ï¼Œç„¶ååˆ¤æ–­ sql è¯­å¥æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯ï¼Œæ¯”å¦‚å…³é”®è¯æ˜¯å¦æ­£ç¡®ç­‰ç­‰ã€‚</p><p>æœ€åä¼˜åŒ–å™¨ç¡®å®šæ‰§è¡Œæ–¹æ¡ˆè¿›è¡Œæƒé™æ ¡éªŒï¼Œå¦‚æœæ²¡æœ‰æƒé™å°±ç›´æ¥è¿”å›é”™è¯¯ä¿¡æ¯ï¼Œå¦‚æœæœ‰æƒé™å°±ä¼šè°ƒç”¨æ•°æ®åº“å¼•æ“æ¥å£ï¼Œè¿”å›æ‰§è¡Œç»“æœã€‚</p><h2 id="æ—¥å¸¸å·¥ä½œä¸­ä½ æ˜¯æ€ä¹ˆä¼˜åŒ–SQLçš„ï¼Ÿ"><a href="#æ—¥å¸¸å·¥ä½œä¸­ä½ æ˜¯æ€ä¹ˆä¼˜åŒ–SQLçš„ï¼Ÿ" class="headerlink" title="æ—¥å¸¸å·¥ä½œä¸­ä½ æ˜¯æ€ä¹ˆä¼˜åŒ–SQLçš„ï¼Ÿ"></a>æ—¥å¸¸å·¥ä½œä¸­ä½ æ˜¯æ€ä¹ˆä¼˜åŒ–SQLçš„ï¼Ÿ</h2><p>1 ä¼˜åŒ–è¡¨ç»“æ„</p><p>ï¼ˆ1ï¼‰å°½é‡ä½¿ç”¨æ•°å­—å‹å­—æ®µ</p><p>è‹¥åªå«æ•°å€¼ä¿¡æ¯çš„å­—æ®µå°½é‡ä¸è¦è®¾è®¡ä¸ºå­—ç¬¦å‹ï¼Œè¿™ä¼šé™ä½æŸ¥è¯¢å’Œè¿æ¥çš„æ€§èƒ½ï¼Œå¹¶ä¼šå¢åŠ å­˜å‚¨å¼€é”€ã€‚ è¿™æ˜¯å› ä¸ºå¼•æ“åœ¨å¤„ç†æŸ¥è¯¢å’Œè¿æ¥æ—¶ä¼šé€ä¸ªæ¯”è¾ƒå­—ç¬¦ä¸²ä¸­æ¯ä¸€ä¸ªå­—ç¬¦ï¼Œè€Œå¯¹äºæ•°å­—å‹è€Œè¨€åªéœ€è¦æ¯”è¾ƒä¸€æ¬¡å°±å¤Ÿäº†ã€‚</p><p>ï¼ˆ2ï¼‰å°½å¯èƒ½çš„ä½¿ç”¨ varchar ä»£æ›¿ char</p><p>å˜é•¿å­—æ®µå­˜å‚¨ç©ºé—´å°ï¼Œå¯ä»¥èŠ‚çœå­˜å‚¨ç©ºé—´ã€‚</p><p>ï¼ˆ3ï¼‰å½“ç´¢å¼•åˆ—å¤§é‡é‡å¤æ•°æ®æ—¶ï¼Œå¯ä»¥æŠŠç´¢å¼•åˆ é™¤æ‰</p><p>æ¯”å¦‚æœ‰ä¸€åˆ—æ˜¯æ€§åˆ«ï¼Œå‡ ä¹åªæœ‰ç”·ã€å¥³ã€æœªçŸ¥ï¼Œè¿™æ ·çš„ç´¢å¼•æ˜¯æ— æ•ˆçš„ã€‚</p><p>2 ä¼˜åŒ–æŸ¥è¯¢</p><ul><li>åº”å°½é‡é¿å…åœ¨ where å­å¥ä¸­ä½¿ç”¨!=æˆ–&lt;&gt;æ“ä½œç¬¦</li><li>åº”å°½é‡é¿å…åœ¨ where å­å¥ä¸­ä½¿ç”¨ or æ¥è¿æ¥æ¡ä»¶</li><li>ä»»ä½•æŸ¥è¯¢ä¹Ÿä¸è¦å‡ºç°select *</li><li>é¿å…åœ¨ where å­å¥ä¸­å¯¹å­—æ®µè¿›è¡Œ null å€¼åˆ¤æ–­</li></ul><p>3 ç´¢å¼•ä¼˜åŒ–</p><p>å¯¹ä½œä¸ºæŸ¥è¯¢æ¡ä»¶å’Œ order byçš„å­—æ®µå»ºç«‹ç´¢å¼•<br>é¿å…å»ºç«‹è¿‡å¤šçš„ç´¢å¼•ï¼Œå¤šä½¿ç”¨ç»„åˆç´¢å¼•</p><p>ç´¢å¼•ä¼˜åŒ–çš„ä¸€äº›è¦ç‚¹ï¼š<br> ä½¿ç”¨ç´¢å¼•æ—¶ï¼Œæœ‰ä¸€äº›æŠ€å·§ï¼š</p><pre><code>1.ç´¢å¼•ä¸ä¼šåŒ…å«æœ‰NULLçš„åˆ—   åªè¦åˆ—ä¸­åŒ…å«æœ‰NULLå€¼ï¼Œéƒ½å°†ä¸ä¼šè¢«åŒ…å«åœ¨ç´¢å¼•ä¸­ï¼Œå¤åˆç´¢å¼•ä¸­åªè¦æœ‰ä¸€åˆ—å«æœ‰NULLå€¼ï¼Œé‚£ä¹ˆè¿™ä¸€åˆ—å¯¹äºæ­¤ç¬¦åˆç´¢å¼•å°±æ˜¯æ— æ•ˆçš„ã€‚2.ä½¿ç”¨çŸ­ç´¢å¼•   å¯¹ä¸²åˆ—è¿›è¡Œç´¢å¼•ï¼Œå¦‚æœå¯ä»¥å°±åº”è¯¥æŒ‡å®šä¸€ä¸ªå‰ç¼€é•¿åº¦ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæœ‰ä¸€ä¸ªcharï¼ˆ255ï¼‰çš„åˆ—ï¼Œå¦‚æœåœ¨å‰10ä¸ªæˆ–20ä¸ªå­—ç¬¦å†…ï¼Œå¤šæ•°å€¼æ˜¯å”¯ä¸€çš„ï¼Œé‚£ä¹ˆå°±ä¸è¦å¯¹æ•´ä¸ªåˆ—è¿›è¡Œç´¢å¼•ã€‚çŸ­ç´¢å¼•ä¸ä»…å¯ä»¥æé«˜æŸ¥è¯¢é€Ÿåº¦è€Œä¸”å¯ä»¥èŠ‚çœç£ç›˜ç©ºé—´å’ŒI/Oæ“ä½œã€‚3.ç´¢å¼•åˆ—æ’åº   mysqlæŸ¥è¯¢åªä½¿ç”¨ä¸€ä¸ªç´¢å¼•ï¼Œå› æ­¤å¦‚æœwhereå­å¥ä¸­å·²ç»ä½¿ç”¨äº†ç´¢å¼•çš„è¯ï¼Œé‚£ä¹ˆorder byä¸­çš„åˆ—æ˜¯ä¸ä¼šä½¿ç”¨ç´¢å¼•çš„ã€‚å› æ­¤æ•°æ®åº“é»˜è®¤æ’åºå¯ä»¥ç¬¦åˆè¦æ±‚çš„æƒ…å†µä¸‹ä¸è¦ä½¿ç”¨æ’åºæ“ä½œï¼Œå°½é‡ä¸è¦åŒ…å«å¤šä¸ªåˆ—çš„æ’åºï¼Œå¦‚æœéœ€è¦æœ€å¥½ç»™è¿™äº›åˆ—å»ºå¤åˆç´¢å¼•ã€‚4.likeè¯­å¥æ“ä½œ  ä¸€èˆ¬æƒ…å†µä¸‹ä¸é¼“åŠ±ä½¿ç”¨likeæ“ä½œï¼Œå¦‚æœéä½¿ç”¨ä¸å¯ï¼Œæ³¨æ„æ­£ç¡®çš„ä½¿ç”¨æ–¹å¼ã€‚like â€˜%aaa%â€™ä¸ä¼šä½¿ç”¨ç´¢å¼•ï¼Œè€Œlike â€˜aaa%â€™å¯ä»¥ä½¿ç”¨ç´¢å¼•ã€‚5.ä¸è¦åœ¨åˆ—ä¸Šè¿›è¡Œè¿ç®—6.ä¸ä½¿ç”¨NOT IN ã€&lt;&gt;ã€ï¼=æ“ä½œï¼Œä½†&lt;,&lt;=ï¼Œ=ï¼Œ&gt;,&gt;=,BETWEEN,INæ˜¯å¯ä»¥ç”¨åˆ°ç´¢å¼•çš„7.ç´¢å¼•è¦å»ºç«‹åœ¨ç»å¸¸è¿›è¡Œselectæ“ä½œçš„å­—æ®µä¸Šã€‚   è¿™æ˜¯å› ä¸ºï¼Œå¦‚æœè¿™äº›åˆ—å¾ˆå°‘ç”¨åˆ°ï¼Œé‚£ä¹ˆæœ‰æ— ç´¢å¼•å¹¶ä¸èƒ½æ˜æ˜¾æ”¹å˜æŸ¥è¯¢é€Ÿåº¦ã€‚ç›¸åï¼Œç”±äºå¢åŠ äº†ç´¢å¼•ï¼Œåè€Œé™ä½äº†ç³»ç»Ÿçš„ç»´æŠ¤é€Ÿåº¦å’Œå¢å¤§äº†ç©ºé—´éœ€æ±‚ã€‚8.ç´¢å¼•è¦å»ºç«‹åœ¨å€¼æ¯”è¾ƒå”¯ä¸€çš„å­—æ®µä¸Šã€‚9.å¯¹äºé‚£äº›å®šä¹‰ä¸ºtextã€imageå’Œbitæ•°æ®ç±»å‹çš„åˆ—ä¸åº”è¯¥å¢åŠ ç´¢å¼•ã€‚å› ä¸ºè¿™äº›åˆ—çš„æ•°æ®é‡è¦ä¹ˆç›¸å½“å¤§ï¼Œè¦ä¹ˆå–å€¼å¾ˆå°‘ã€‚10.åœ¨whereå’Œjoinä¸­å‡ºç°çš„åˆ—éœ€è¦å»ºç«‹ç´¢å¼•ã€‚11.whereçš„æŸ¥è¯¢æ¡ä»¶é‡Œæœ‰ä¸ç­‰å·(where column != â€¦),mysqlå°†æ— æ³•ä½¿ç”¨ç´¢å¼•ã€‚12.å¦‚æœwhereå­—å¥çš„æŸ¥è¯¢æ¡ä»¶é‡Œä½¿ç”¨äº†å‡½æ•°(å¦‚ï¼šwhere DAY(column)=â€¦),mysqlå°†æ— æ³•ä½¿ç”¨ç´¢å¼•ã€‚13.åœ¨joinæ“ä½œä¸­(éœ€è¦ä»å¤šä¸ªæ•°æ®è¡¨æå–æ•°æ®æ—¶)ï¼Œmysqlåªæœ‰åœ¨ä¸»é”®å’Œå¤–é”®çš„æ•°æ®ç±»å‹ç›¸åŒæ—¶æ‰èƒ½ä½¿ç”¨ç´¢å¼•ï¼Œå¦åˆ™åŠæ—¶å»ºç«‹äº†ç´¢å¼•ä¹Ÿä¸ä¼šä½¿ç”¨ã€‚ç´¢å¼•çš„åˆ›å»ºåŸåˆ™ç´¢å¼•å¹¶éè¶Šå¤šè¶Šå¥½ï¼Œä¸€ä¸ªè¡¨ä¸­å¦‚æœæœ‰å¤§é‡çš„ç´¢å¼•ï¼Œä¸ä»…å ç”¨ç£ç›˜ç©ºé—´ï¼Œè€Œä¸”ä¼šå½±å“INSERTã€DELETEã€UPDATEç­‰è¯­å¥çš„æ€§èƒ½ï¼Œå› ä¸ºåœ¨è¡¨ä¸­çš„æ•°æ®æ›´æ”¹çš„åŒæ—¶ï¼Œç´¢å¼•ä¹Ÿä¼šè¿›è¡Œè°ƒæ•´å’Œæ›´æ–°é¿å…å¯¹ç»å¸¸æ›´æ–°çš„è¡¨è¿›è¡Œè¿‡å¤šçš„ç´¢å¼•ï¼Œå¹¶ä¸”ç´¢å¼•ä¸­çš„åˆ—å°½å¯èƒ½å°‘ã€‚è€Œå¯¹ç»å¸¸ç”¨äºæŸ¥è¯¢çš„å­—æ®µåº”è¯¥åˆ›å»ºç´¢å¼•ï¼Œä½†è¦é¿å…æ·»åŠ ä¸å¿…è¦çš„å­—æ®µã€‚æ•°æ®é‡å°çš„è¡¨æœ€å¥½ä¸è¦ä½¿ç”¨ç´¢å¼•ï¼Œç”±äºæ•°æ®è¾ƒå°‘ï¼ŒæŸ¥è¯¢èŠ±è´¹çš„æ—¶é—´å¯èƒ½æ¯”éå†ç´¢å¼•çš„æ—¶é—´è¿˜è¦çŸ­ï¼Œç´¢å¼•å¯èƒ½ä¸ä¼šäº§ç”Ÿä¼˜åŒ–æ•ˆæœã€‚åœ¨æ¡ä»¶è¡¨è¾¾å¼ä¸­ç»å¸¸ç”¨åˆ°çš„ä¸åŒå€¼è¾ƒå¤šçš„åˆ—ä¸Šå»ºç«‹ç´¢å¼•ï¼Œåœ¨ä¸åŒå€¼å¾ˆå°‘çš„åˆ—ä¸Šä¸è¦å»ºç«‹ç´¢å¼•ã€‚æ¯”å¦‚åœ¨å­¦ç”Ÿè¡¨çš„â€œæ€§åˆ«â€å­—æ®µä¸Šåªæœ‰â€œç”·â€ä¸â€œå¥³â€ä¸¤ä¸ªä¸åŒå€¼ï¼Œå› æ­¤å°±æ— é¡»å»ºç«‹ç´¢å¼•ã€‚å¦‚æœå»ºç«‹ç´¢å¼•ï¼Œä¸ä½†ä¸ä¼šæé«˜æŸ¥è¯¢æ•ˆç‡ï¼Œåè€Œä¼šä¸¥é‡é™ä½æ•°æ®æ›´æ–°é€Ÿåº¦ã€‚å½“å”¯ä¸€æ€§æ˜¯æŸç§æ•°æ®æœ¬èº«çš„ç‰¹å¾æ—¶ï¼ŒæŒ‡å®šå”¯ä¸€ç´¢å¼•ã€‚ä½¿ç”¨å”¯ä¸€ç´¢å¼•éœ€èƒ½ç¡®ä¿å®šä¹‰çš„åˆ—çš„æ•°æ®å®Œæ•´æ€§ï¼Œä»¥æé«˜æŸ¥è¯¢é€Ÿåº¦ã€‚åœ¨é¢‘ç¹è¿›è¡Œæ’åºæˆ–åˆ†ç»„ï¼ˆå³è¿›è¡Œgroup byæˆ–order byæ“ä½œï¼‰çš„åˆ—ä¸Šå»ºç«‹ç´¢å¼•ï¼Œå¦‚æœå¾…æ’åºçš„åˆ—æœ‰å¤šä¸ªï¼Œå¯ä»¥åœ¨è¿™äº›åˆ—ä¸Šå»ºç«‹ç»„åˆç´¢å¼•ã€‚æœç´¢çš„ç´¢å¼•åˆ—ï¼Œä¸ä¸€å®šæ˜¯æ‰€è¦é€‰æ‹©çš„åˆ—ã€‚æ¢å¥è¯è¯´ï¼Œæœ€é€‚åˆç´¢å¼•çš„åˆ—æ˜¯å‡ºç°åœ¨WHEREå­å¥ä¸­çš„åˆ—ï¼Œæˆ–è¿æ¥å­å¥ä¸­æŒ‡å®šçš„åˆ—ï¼Œè€Œä¸æ˜¯å‡ºç°åœ¨SELECTå…³é”®å­—åçš„é€‰æ‹©åˆ—è¡¨ä¸­çš„åˆ—ã€‚ä½¿ç”¨çŸ­ç´¢å¼•ã€‚å¦‚æœå¯¹å­—ç¬¦ä¸²åˆ—è¿›è¡Œç´¢å¼•ï¼Œåº”è¯¥æŒ‡å®šä¸€ä¸ªå‰ç¼€é•¿åº¦ï¼Œåªè¦æœ‰å¯èƒ½å°±åº”è¯¥è¿™æ ·åšã€‚ä¾‹å¦‚ï¼Œæœ‰ä¸€ä¸ªCHAR(200)åˆ—ï¼Œå¦‚æœåœ¨å‰10ä¸ªæˆ–20ä¸ªå­—ç¬¦å†…ï¼Œå¤šæ•°å€¼æ˜¯å”¯ä¸€çš„ï¼Œé‚£ä¹ˆå°±ä¸è¦å¯¹æ•´ä¸ªåˆ—è¿›è¡Œç´¢å¼•ã€‚å¯¹å‰10ä¸ªæˆ–20ä¸ªå­—ç¬¦è¿›è¡Œç´¢å¼•èƒ½å¤ŸèŠ‚çœå¤§é‡ç´¢å¼•ç©ºé—´ï¼Œä¹Ÿå¯èƒ½ä¼šä½¿æŸ¥è¯¢æ›´å¿«ã€‚è¾ƒå°çš„ç´¢å¼•æ¶‰åŠçš„ç£ç›˜ IO è¾ƒå°‘ï¼Œè¾ƒçŸ­çš„å€¼æ¯”è¾ƒèµ·æ¥æ›´å¿«ã€‚æ›´ä¸ºé‡è¦çš„æ˜¯ï¼Œå¯¹äºè¾ƒçŸ­çš„é”®å€¼ï¼Œç´¢å¼•é«˜é€Ÿç¼“å­˜ä¸­çš„å—èƒ½å®¹çº³æ›´å¤šçš„é”®å€¼ï¼Œå› æ­¤ï¼ŒMySQL ä¹Ÿå¯ä»¥åœ¨å†…å­˜ä¸­å®¹çº³æ›´å¤šçš„å€¼ã€‚è¿™æ ·å°±å¢åŠ äº†æ‰¾åˆ°è¡Œè€Œä¸ç”¨è¯»å–ç´¢å¼•ä¸­è¾ƒå¤šå—çš„å¯èƒ½æ€§ã€‚åˆ©ç”¨æœ€å·¦å‰ç¼€ã€‚åœ¨åˆ›å»ºä¸€ä¸ªnåˆ—çš„ç´¢å¼•æ—¶ï¼Œå®é™…æ˜¯åˆ›å»ºäº†MySQLå¯åˆ©ç”¨çš„nä¸ªç´¢å¼•ã€‚å¤šåˆ—ç´¢å¼•å¯èµ·å‡ ä¸ªç´¢å¼•çš„ä½œç”¨ï¼Œå› ä¸ºå¯åˆ©ç”¨ç´¢å¼•ä¸­æœ€å·¦è¾¹çš„åˆ—é›†æ¥åŒ¹é…è¡Œã€‚è¿™æ ·çš„åˆ—é›†ç§°ä¸ºæœ€å·¦å‰ç¼€ã€‚å¯¹äºInnoDBå­˜å‚¨å¼•æ“çš„è¡¨ï¼Œè®°å½•é»˜è®¤ä¼šæŒ‰ç…§ä¸€å®šçš„é¡ºåºä¿å­˜ï¼Œå¦‚æœæœ‰æ˜ç¡®å®šä¹‰çš„ä¸»é”®ï¼Œåˆ™æŒ‰ç…§ä¸»é”®é¡ºåºä¿å­˜ã€‚å¦‚æœæ²¡æœ‰ä¸»é”®ï¼Œä½†æ˜¯æœ‰å”¯ä¸€ç´¢å¼•ï¼Œé‚£ä¹ˆå°±æ˜¯æŒ‰ç…§å”¯ä¸€ç´¢å¼•çš„é¡ºåºä¿å­˜ã€‚å¦‚æœæ—¢æ²¡æœ‰ä¸»é”®åˆæ²¡æœ‰å”¯ä¸€ç´¢å¼•ï¼Œé‚£ä¹ˆè¡¨ä¸­ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªå†…éƒ¨åˆ—ï¼ŒæŒ‰ç…§è¿™ä¸ªåˆ—çš„é¡ºåºä¿å­˜ã€‚æŒ‰ç…§ä¸»é”®æˆ–è€…å†…éƒ¨åˆ—è¿›è¡Œçš„è®¿é—®æ˜¯æœ€å¿«çš„ï¼Œæ‰€ä»¥InnoDBè¡¨å°½é‡è‡ªå·±æŒ‡å®šä¸»é”®ï¼Œå½“è¡¨ä¸­åŒæ—¶æœ‰å‡ ä¸ªåˆ—éƒ½æ˜¯å”¯ä¸€çš„ï¼Œéƒ½å¯ä»¥ä½œä¸ºä¸»é”®çš„æ—¶å€™ï¼Œè¦é€‰æ‹©æœ€å¸¸ä½œä¸ºè®¿é—®æ¡ä»¶çš„åˆ—ä½œä¸ºä¸»é”®ï¼Œæé«˜æŸ¥è¯¢çš„æ•ˆç‡ã€‚å¦å¤–ï¼Œè¿˜éœ€è¦æ³¨æ„ï¼ŒInnoDB è¡¨çš„æ™®é€šç´¢å¼•éƒ½ä¼šä¿å­˜ä¸»é”®çš„é”®å€¼ï¼Œæ‰€ä»¥ä¸»é”®è¦å°½å¯èƒ½é€‰æ‹©è¾ƒçŸ­çš„æ•°æ®ç±»å‹ï¼Œå¯ä»¥æœ‰æ•ˆåœ°å‡å°‘ç´¢å¼•çš„ç£ç›˜å ç”¨ï¼Œæé«˜ç´¢å¼•çš„ç¼“å­˜æ•ˆæœ</code></pre><h2 id="æ€ä¹ˆçœ‹æ‰§è¡Œè®¡åˆ’ï¼ˆexplainï¼‰ï¼Œå¦‚ä½•ç†è§£å…¶ä¸­å„ä¸ªå­—æ®µçš„å«ä¹‰ï¼Ÿ"><a href="#æ€ä¹ˆçœ‹æ‰§è¡Œè®¡åˆ’ï¼ˆexplainï¼‰ï¼Œå¦‚ä½•ç†è§£å…¶ä¸­å„ä¸ªå­—æ®µçš„å«ä¹‰ï¼Ÿ" class="headerlink" title="æ€ä¹ˆçœ‹æ‰§è¡Œè®¡åˆ’ï¼ˆexplainï¼‰ï¼Œå¦‚ä½•ç†è§£å…¶ä¸­å„ä¸ªå­—æ®µçš„å«ä¹‰ï¼Ÿ"></a>æ€ä¹ˆçœ‹æ‰§è¡Œè®¡åˆ’ï¼ˆexplainï¼‰ï¼Œå¦‚ä½•ç†è§£å…¶ä¸­å„ä¸ªå­—æ®µçš„å«ä¹‰ï¼Ÿ</h2><p>åœ¨ select è¯­å¥ä¹‹å‰å¢åŠ explainå…³é”®å­—ï¼Œä¼šè¿”å›æ‰§è¡Œè®¡åˆ’çš„ä¿¡æ¯ã€‚</p><h2 id="å…³å¿ƒè¿‡ä¸šåŠ¡ç³»ç»Ÿé‡Œé¢çš„sqlè€—æ—¶å—ï¼Ÿç»Ÿè®¡è¿‡æ…¢æŸ¥è¯¢å—ï¼Ÿå¯¹æ…¢æŸ¥è¯¢éƒ½æ€ä¹ˆä¼˜åŒ–è¿‡ï¼Ÿ"><a href="#å…³å¿ƒè¿‡ä¸šåŠ¡ç³»ç»Ÿé‡Œé¢çš„sqlè€—æ—¶å—ï¼Ÿç»Ÿè®¡è¿‡æ…¢æŸ¥è¯¢å—ï¼Ÿå¯¹æ…¢æŸ¥è¯¢éƒ½æ€ä¹ˆä¼˜åŒ–è¿‡ï¼Ÿ" class="headerlink" title="å…³å¿ƒè¿‡ä¸šåŠ¡ç³»ç»Ÿé‡Œé¢çš„sqlè€—æ—¶å—ï¼Ÿç»Ÿè®¡è¿‡æ…¢æŸ¥è¯¢å—ï¼Ÿå¯¹æ…¢æŸ¥è¯¢éƒ½æ€ä¹ˆä¼˜åŒ–è¿‡ï¼Ÿ"></a>å…³å¿ƒè¿‡ä¸šåŠ¡ç³»ç»Ÿé‡Œé¢çš„sqlè€—æ—¶å—ï¼Ÿç»Ÿè®¡è¿‡æ…¢æŸ¥è¯¢å—ï¼Ÿå¯¹æ…¢æŸ¥è¯¢éƒ½æ€ä¹ˆä¼˜åŒ–è¿‡ï¼Ÿ</h2><p>åˆ†æè¯­å¥ï¼Œæ˜¯å¦åŠ è½½äº†ä¸å¿…è¦çš„å­—æ®µ/æ•°æ®<br>åˆ†æ SQL æ‰§è¡Œå¥ï¼Œæ˜¯å¦å‘½ä¸­ç´¢å¼•ç­‰<br>å¦‚æœ SQL å¾ˆå¤æ‚ï¼Œä¼˜åŒ– SQL ç»“æ„<br>å¦‚æœè¡¨æ•°æ®é‡å¤ªå¤§ï¼Œè€ƒè™‘åˆ†è¡¨</p><p><a href="https://www.cnblogs.com/zsql/p/13854191.html" target="_blank" rel="noopener">https://www.cnblogs.com/zsql/p/13854191.html</a></p><h2 id="èšé›†ç´¢å¼•ä¸éèšé›†ç´¢å¼•çš„åŒºåˆ«"><a href="#èšé›†ç´¢å¼•ä¸éèšé›†ç´¢å¼•çš„åŒºåˆ«" class="headerlink" title="èšé›†ç´¢å¼•ä¸éèšé›†ç´¢å¼•çš„åŒºåˆ«"></a>èšé›†ç´¢å¼•ä¸éèšé›†ç´¢å¼•çš„åŒºåˆ«</h2><p>Primary Keyï¼ˆèšé›†ç´¢å¼•ï¼‰ï¼šInnoDBå­˜å‚¨å¼•æ“çš„è¡¨ä¼šå­˜åœ¨ä¸»é”®ï¼ˆå”¯ä¸€énullï¼‰ï¼Œå¦‚æœå»ºè¡¨çš„æ—¶å€™æ²¡æœ‰æŒ‡å®šä¸»é”®ï¼Œåˆ™ä¼šä½¿ç”¨ç¬¬ä¸€éç©ºçš„å”¯ä¸€ç´¢å¼•ä½œä¸ºèšé›†ç´¢å¼•ï¼Œå¦åˆ™InnoDBä¼šè‡ªåŠ¨å¸®ä½ åˆ›å»ºä¸€ä¸ªä¸å¯è§çš„ã€é•¿åº¦ä¸º6å­—èŠ‚çš„row_idç”¨æ¥ä½œä¸ºèšé›†ç´¢å¼•ã€‚</p><p>å¯ä»¥æŒ‰ä»¥ä¸‹å››ä¸ªç»´åº¦å›ç­”ï¼š</p><p>ï¼ˆ1ï¼‰ä¸€ä¸ªè¡¨ä¸­åªèƒ½æ‹¥æœ‰ä¸€ä¸ªèšé›†ç´¢å¼•ï¼Œè€Œéèšé›†ç´¢å¼•ä¸€ä¸ªè¡¨å¯ä»¥å­˜åœ¨å¤šä¸ªã€‚</p><p>ï¼ˆ2ï¼‰èšé›†ç´¢å¼•ï¼Œç´¢å¼•ä¸­é”®å€¼çš„é€»è¾‘é¡ºåºå†³å®šäº†è¡¨ä¸­ç›¸åº”è¡Œçš„ç‰©ç†é¡ºåºï¼›éèšé›†ç´¢å¼•ï¼Œç´¢å¼•ä¸­ç´¢å¼•çš„é€»è¾‘é¡ºåºä¸ç£ç›˜ä¸Šè¡Œçš„ç‰©ç†å­˜å‚¨é¡ºåºä¸åŒã€‚</p><p><strong>æ­¤å¤„æœ‰å¼‚è®®ï¼šèšé›†ç´¢å¼•çš„å­˜å‚¨å¹¶ä¸æ˜¯ç‰©ç†ä¸Šè¿ç»­çš„ï¼Œè€Œæ˜¯é€»è¾‘ä¸Šè¿ç»­çš„</strong></p><p>a. InnoDBå­˜å‚¨å¼•æ“è¡¨æ˜¯ç´¢å¼•ç»„ç»‡è¡¨ï¼Œå³è¡¨ä¸­æ•°æ®æŒ‰ç…§ä¸»é”®é¡ºåºå­˜æ”¾ã€‚è€Œèšé›†ç´¢å¼•ï¼ˆclustered indexï¼‰å°±æ˜¯æŒ‰ç…§æ¯å¼ è¡¨çš„ä¸»é”®æ„é€ ä¸€æ£µB+æ ‘ï¼ŒåŒæ—¶å¶å­èŠ‚ç‚¹ä¸­å­˜æ”¾çš„å³ä¸ºæ•´å¼ è¡¨çš„è¡Œè®°å½•æ•°æ®ï¼Œä¹Ÿå°†èšé›†ç´¢å¼•çš„å¶å­èŠ‚ç‚¹ç§°ä¸ºæ•°æ®é¡µã€‚èšé›†ç´¢å¼•çš„è¿™ä¸ªç‰¹æ€§å†³å®šäº†ç´¢å¼•ç»„ç»‡è¡¨ä¸­æ•°æ®ä¹Ÿæ˜¯ç´¢å¼•çš„ä¸€éƒ¨åˆ†ã€‚åŒB+æ ‘æ•°æ®ç»“æ„ä¸€æ ·ï¼Œæ¯ä¸ªæ•°æ®é¡µéƒ½é€šè¿‡ä¸€ä¸ªåŒå‘é“¾è¡¨æ¥è¿›è¡Œé“¾æ¥ã€‚</p><p>ç”±äºå®é™…çš„æ•°æ®é¡µåªèƒ½æŒ‰ç…§ä¸€æ£µB+æ ‘è¿›è¡Œæ’åºï¼Œå› æ­¤æ¯å¼ è¡¨åªèƒ½æ‹¥æœ‰ä¸€ä¸ªèšé›†ç´¢å¼•ã€‚ç”±äºå®šä¹‰äº†æ•°æ®çš„é€»è¾‘é¡ºåºï¼Œèšé›†ç´¢å¼•èƒ½å¤Ÿç‰¹åˆ«å¿«åœ°è®¿é—®é’ˆå¯¹èŒƒå›´å€¼çš„æŸ¥è¯¢ã€‚æŸ¥è¯¢ä¼˜åŒ–å™¨èƒ½å¤Ÿå¿«é€Ÿå‘ç°æŸä¸€æ®µèŒƒå›´çš„æ•°æ®é¡µéœ€è¦æ‰«æã€‚</p><p>èšé›†ç´¢å¼•çš„å­˜å‚¨å¹¶ä¸æ˜¯ç‰©ç†ä¸Šè¿ç»­çš„ï¼Œè€Œæ˜¯é€»è¾‘ä¸Šè¿ç»­çš„ã€‚è¿™å…¶ä¸­æœ‰ä¸¤ç‚¹ï¼šä¸€æ˜¯å‰é¢è¯´è¿‡çš„é¡µé€šè¿‡åŒå‘é“¾è¡¨é“¾æ¥ï¼Œé¡µæŒ‰ç…§ä¸»é”®çš„é¡ºåºæ’åºï¼›å¦ä¸€ç‚¹æ˜¯æ¯ä¸ªé¡µä¸­çš„è®°å½•ä¹Ÿæ˜¯é€šè¿‡åŒå‘é“¾è¡¨è¿›è¡Œç»´æŠ¤çš„ï¼Œç‰©ç†å­˜å‚¨ä¸Šå¯ä»¥åŒæ ·ä¸æŒ‰ç…§ä¸»é”®å­˜å‚¨ã€‚</p><p>b. æœ‰äº›åšå®¢å¯èƒ½ä¼šå‘Šè¯‰æˆ‘ä»¬ï¼šèšé›†ç´¢å¼•æŒ‰ç…§é¡ºåºç‰©ç†åœ°å€å­˜å‚¨æ•°æ®ã€‚å…¶å®ä¸ç„¶ï¼Œèšé›†ç´¢å¼•çš„å­˜å‚¨å¹¶ä¸æ˜¯ç‰©ç†ä¸Šçš„è¿ç»­ï¼Œå› ä¸ºè¿™æ ·çš„ç»´æŠ¤æˆæœ¬ä¼šå¾ˆé«˜ï¼Œè€Œæ˜¯é€»è¾‘ä¸Šçš„è¿ç»­ï¼å…¶ä¸­æœ‰ä¸¤ç‚¹ï¼š<br>1ï¼‰æ‰€æœ‰çš„å¶å­ç»“ç‚¹éƒ½æ˜¯é€šè¿‡åŒå‘é“¾è¡¨è¿æ¥çš„<br>2ï¼‰æ¯ä¸€ä¸ªå¶å­ç»“ç‚¹ä¸­çš„è¡Œè®°å½•ä¹Ÿæ˜¯é€šè¿‡åŒå‘é“¾è¡¨è¿æ¥çš„</p><p>ï¼ˆ3ï¼‰ç´¢å¼•æ˜¯é€šè¿‡äºŒå‰æ ‘çš„æ•°æ®ç»“æ„æ¥æè¿°çš„ï¼Œæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆç†è§£èšç°‡ç´¢å¼•ï¼šç´¢å¼•çš„å¶èŠ‚ç‚¹å°±æ˜¯æ•°æ®èŠ‚ç‚¹ã€‚è€Œéèšç°‡ç´¢å¼•çš„å¶èŠ‚ç‚¹ä»ç„¶æ˜¯ç´¢å¼•èŠ‚ç‚¹ï¼Œåªä¸è¿‡æœ‰ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘å¯¹åº”çš„æ•°æ®å—ã€‚</p><p>ï¼ˆ4ï¼‰èšé›†ç´¢å¼•ï¼šç‰©ç†å­˜å‚¨æŒ‰ç…§ç´¢å¼•æ’åºï¼›éèšé›†ç´¢å¼•ï¼šç‰©ç†å­˜å‚¨ä¸æŒ‰ç…§ç´¢å¼•æ’åºï¼›</p><h3 id="èšé›†ç´¢å¼•-VS-éèšé›†ç´¢å¼•"><a href="#èšé›†ç´¢å¼•-VS-éèšé›†ç´¢å¼•" class="headerlink" title="èšé›†ç´¢å¼• VS éèšé›†ç´¢å¼•"></a>èšé›†ç´¢å¼• VS éèšé›†ç´¢å¼•</h3><p>é‚£ä»€ä¹ˆæ˜¯èšé›†ç´¢å¼•å‘¢ï¼Ÿåœ¨ MySQL ä¸­ï¼ŒB+ æ ‘ç´¢å¼•æŒ‰ç…§å­˜å‚¨æ–¹å¼çš„ä¸åŒåˆ†ä¸ºèšé›†ç´¢å¼•å’Œéèšé›†ç´¢å¼•ã€‚</p><p>è¿™é‡Œæˆ‘ä»¬ç€é‡ä»‹ç» InnoDB ä¸­çš„èšé›†ç´¢å¼•å’Œéèšé›†ç´¢å¼•ï¼š</p><p>â‘ èšé›†ç´¢å¼•ï¼ˆèšç°‡ç´¢å¼•ï¼‰ï¼šä»¥ InnoDB ä½œä¸ºå­˜å‚¨å¼•æ“çš„è¡¨ï¼Œè¡¨ä¸­çš„æ•°æ®éƒ½ä¼šæœ‰ä¸€ä¸ªä¸»é”®ï¼Œå³ä½¿ä½ ä¸åˆ›å»ºä¸»é”®ï¼Œç³»ç»Ÿä¹Ÿä¼šå¸®ä½ åˆ›å»ºä¸€ä¸ªéšå¼çš„ä¸»é”®ã€‚</p><p>è¿™æ˜¯å› ä¸º InnoDB æ˜¯æŠŠæ•°æ®å­˜æ”¾åœ¨ B+ æ ‘ä¸­çš„ï¼Œè€Œ B+ æ ‘çš„é”®å€¼å°±æ˜¯ä¸»é”®ï¼Œåœ¨ B+ æ ‘çš„å¶å­èŠ‚ç‚¹ä¸­ï¼Œå­˜å‚¨äº†è¡¨ä¸­æ‰€æœ‰çš„æ•°æ®ã€‚</p><p>è¿™ç§ä»¥ä¸»é”®ä½œä¸º B+ æ ‘ç´¢å¼•çš„é”®å€¼è€Œæ„å»ºçš„ B+ æ ‘ç´¢å¼•ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºèšé›†ç´¢å¼•ã€‚</p><p>â‘¡éèšé›†ç´¢å¼•ï¼ˆéèšç°‡ç´¢å¼•ï¼‰ï¼šä»¥ä¸»é”®ä»¥å¤–çš„åˆ—å€¼ä½œä¸ºé”®å€¼æ„å»ºçš„ B+ æ ‘ç´¢å¼•ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºéèšé›†ç´¢å¼•ã€‚</p><p>éèšé›†ç´¢å¼•ä¸èšé›†ç´¢å¼•çš„åŒºåˆ«åœ¨äºéèšé›†ç´¢å¼•çš„å¶å­èŠ‚ç‚¹ä¸å­˜å‚¨è¡¨ä¸­çš„æ•°æ®ï¼Œè€Œæ˜¯å­˜å‚¨è¯¥åˆ—å¯¹åº”çš„ä¸»é”®ï¼Œæƒ³è¦æŸ¥æ‰¾æ•°æ®æˆ‘ä»¬è¿˜éœ€è¦æ ¹æ®ä¸»é”®å†å»èšé›†ç´¢å¼•ä¸­è¿›è¡ŒæŸ¥æ‰¾ï¼Œè¿™ä¸ªå†æ ¹æ®èšé›†ç´¢å¼•æŸ¥æ‰¾æ•°æ®çš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬ç§°ä¸ºå›è¡¨ã€‚</p><p><a href="https://www.cnblogs.com/cangqinglang/p/15042752.html" target="_blank" rel="noopener">https://www.cnblogs.com/cangqinglang/p/15042752.html</a></p><h2 id="ä¸ºä»€ä¹ˆè¦ç”¨-B-æ ‘ï¼Œä¸ºä»€ä¹ˆä¸ç”¨æ™®é€šäºŒå‰æ ‘ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦ç”¨-B-æ ‘ï¼Œä¸ºä»€ä¹ˆä¸ç”¨æ™®é€šäºŒå‰æ ‘ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ç”¨ B+ æ ‘ï¼Œä¸ºä»€ä¹ˆä¸ç”¨æ™®é€šäºŒå‰æ ‘ï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦ç”¨ B+ æ ‘ï¼Œä¸ºä»€ä¹ˆä¸ç”¨æ™®é€šäºŒå‰æ ‘ï¼Ÿ</h2><p>å¯ä»¥ä»å‡ ä¸ªç»´åº¦å»çœ‹è¿™ä¸ªé—®é¢˜ï¼ŒæŸ¥è¯¢æ˜¯å¦å¤Ÿå¿«ï¼Œæ•ˆç‡æ˜¯å¦ç¨³å®šï¼Œå­˜å‚¨æ•°æ®å¤šå°‘ï¼Œä»¥åŠæŸ¥æ‰¾ç£ç›˜æ¬¡æ•°ï¼Œä¸ºä»€ä¹ˆä¸æ˜¯æ™®é€šäºŒå‰æ ‘ï¼Œä¸ºä»€ä¹ˆä¸æ˜¯å¹³è¡¡äºŒå‰æ ‘ï¼Œä¸ºä»€ä¹ˆä¸æ˜¯Bæ ‘ï¼Œè€Œååæ˜¯ B+ æ ‘å‘¢ï¼Ÿ</p><p>ï¼ˆ1ï¼‰ä¸ºä»€ä¹ˆä¸æ˜¯æ™®é€šäºŒå‰æ ‘ï¼Ÿ</p><p>å¦‚æœäºŒå‰æ ‘ç‰¹æ®ŠåŒ–ä¸ºä¸€ä¸ªé“¾è¡¨ï¼Œç›¸å½“äºå…¨è¡¨æ‰«æã€‚å¹³è¡¡äºŒå‰æ ‘ç›¸æ¯”äºäºŒå‰æŸ¥æ‰¾æ ‘æ¥è¯´ï¼ŒæŸ¥æ‰¾æ•ˆç‡æ›´ç¨³å®šï¼Œæ€»ä½“çš„æŸ¥æ‰¾é€Ÿåº¦ä¹Ÿæ›´å¿«ã€‚</p><p>ï¼ˆ2ï¼‰ä¸ºä»€ä¹ˆä¸æ˜¯å¹³è¡¡äºŒå‰æ ‘å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨å†…å­˜æ¯”åœ¨ç£ç›˜çš„æ•°æ®ï¼ŒæŸ¥è¯¢æ•ˆç‡å¿«å¾—å¤šã€‚å¦‚æœæ ‘è¿™ç§æ•°æ®ç»“æ„ä½œä¸ºç´¢å¼•ï¼Œé‚£æˆ‘ä»¬æ¯æŸ¥æ‰¾ä¸€æ¬¡æ•°æ®å°±éœ€è¦ä»ç£ç›˜ä¸­è¯»å–ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è¯´çš„ä¸€ä¸ªç£ç›˜å—ï¼Œä½†æ˜¯å¹³è¡¡äºŒå‰æ ‘å¯æ˜¯æ¯ä¸ªèŠ‚ç‚¹åªå­˜å‚¨ä¸€ä¸ªé”®å€¼å’Œæ•°æ®çš„ï¼Œå¦‚æœæ˜¯Bæ ‘ï¼Œå¯ä»¥å­˜å‚¨æ›´å¤šçš„èŠ‚ç‚¹æ•°æ®ï¼Œæ ‘çš„é«˜åº¦ä¹Ÿä¼šé™ä½ï¼Œå› æ­¤è¯»å–ç£ç›˜çš„æ¬¡æ•°å°±é™ä¸‹æ¥å•¦ï¼ŒæŸ¥è¯¢æ•ˆç‡å°±å¿«å•¦ã€‚</p><p>ï¼ˆ3ï¼‰ä¸ºä»€ä¹ˆä¸æ˜¯ B æ ‘è€Œæ˜¯ B+ æ ‘å‘¢ï¼Ÿ</p><p>B+ æ ‘éå¶å­èŠ‚ç‚¹ä¸Šæ˜¯ä¸å­˜å‚¨æ•°æ®çš„ï¼Œä»…å­˜å‚¨é”®å€¼ï¼Œè€ŒBæ ‘èŠ‚ç‚¹ä¸­ä¸ä»…å­˜å‚¨é”®å€¼ï¼Œä¹Ÿä¼šå­˜å‚¨æ•°æ®ã€‚innodbä¸­é¡µçš„é»˜è®¤å¤§å°æ˜¯16KBï¼Œå¦‚æœä¸å­˜å‚¨æ•°æ®ï¼Œé‚£ä¹ˆå°±ä¼šå­˜å‚¨æ›´å¤šçš„é”®å€¼ï¼Œç›¸åº”çš„æ ‘çš„é˜¶æ•°ï¼ˆèŠ‚ç‚¹çš„å­èŠ‚ç‚¹æ ‘ï¼‰å°±ä¼šæ›´å¤§ï¼Œæ ‘å°±ä¼šæ›´çŸ®æ›´èƒ–ï¼Œå¦‚æ­¤ä¸€æ¥æˆ‘ä»¬æŸ¥æ‰¾æ•°æ®è¿›è¡Œç£ç›˜çš„IOæ¬¡æ•°æœ‰ä¼šå†æ¬¡å‡å°‘ï¼Œæ•°æ®æŸ¥è¯¢çš„æ•ˆç‡ä¹Ÿä¼šæ›´å¿«ã€‚</p><p>B+ æ ‘ç´¢å¼•çš„æ‰€æœ‰æ•°æ®å‡å­˜å‚¨åœ¨å¶å­èŠ‚ç‚¹ï¼Œè€Œä¸”æ•°æ®æ˜¯æŒ‰ç…§é¡ºåºæ’åˆ—çš„ï¼Œé“¾è¡¨è¿ç€çš„ã€‚é‚£ä¹ˆ B+ æ ‘ä½¿å¾—èŒƒå›´æŸ¥æ‰¾ï¼Œæ’åºæŸ¥æ‰¾ï¼Œåˆ†ç»„æŸ¥æ‰¾ä»¥åŠå»é‡æŸ¥æ‰¾å˜å¾—å¼‚å¸¸ç®€å•ã€‚</p><h2 id="Hash-ç´¢å¼•å’ŒB-æ ‘ç´¢å¼•åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿä½ åœ¨è®¾è®¡ç´¢å¼•æ˜¯æ€ä¹ˆæŠ‰æ‹©çš„ï¼Ÿ"><a href="#Hash-ç´¢å¼•å’ŒB-æ ‘ç´¢å¼•åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿä½ åœ¨è®¾è®¡ç´¢å¼•æ˜¯æ€ä¹ˆæŠ‰æ‹©çš„ï¼Ÿ" class="headerlink" title="Hash ç´¢å¼•å’ŒB+æ ‘ç´¢å¼•åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿä½ åœ¨è®¾è®¡ç´¢å¼•æ˜¯æ€ä¹ˆæŠ‰æ‹©çš„ï¼Ÿ"></a>Hash ç´¢å¼•å’ŒB+æ ‘ç´¢å¼•åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿä½ åœ¨è®¾è®¡ç´¢å¼•æ˜¯æ€ä¹ˆæŠ‰æ‹©çš„ï¼Ÿ</h2><p>B+ æ ‘å¯ä»¥è¿›è¡ŒèŒƒå›´æŸ¥è¯¢ï¼ŒHash ç´¢å¼•ä¸èƒ½ã€‚<br>B+ æ ‘æ”¯æŒè”åˆç´¢å¼•çš„æœ€å·¦ä¾§åŸåˆ™ï¼ŒHash ç´¢å¼•ä¸æ”¯æŒã€‚<br>B+ æ ‘æ”¯æŒ order by æ’åºï¼ŒHash ç´¢å¼•ä¸æ”¯æŒã€‚<br>Hash ç´¢å¼•åœ¨ç­‰å€¼æŸ¥è¯¢ä¸Šæ¯” B+ æ ‘æ•ˆç‡æ›´é«˜ã€‚<br>B+ æ ‘ä½¿ç”¨ like è¿›è¡Œæ¨¡ç³ŠæŸ¥è¯¢çš„æ—¶å€™ï¼Œlike åé¢ï¼ˆæ¯”å¦‚%å¼€å¤´ï¼‰çš„è¯å¯ä»¥èµ·åˆ°ä¼˜åŒ–çš„ä½œç”¨ï¼ŒHash ç´¢å¼•æ ¹æœ¬æ— æ³•è¿›è¡Œæ¨¡ç³ŠæŸ¥è¯¢ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯æœ€å·¦å‰ç¼€åŸåˆ™ï¼Ÿä»€ä¹ˆæ˜¯æœ€å·¦åŒ¹é…åŸåˆ™ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯æœ€å·¦å‰ç¼€åŸåˆ™ï¼Ÿä»€ä¹ˆæ˜¯æœ€å·¦åŒ¹é…åŸåˆ™ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯æœ€å·¦å‰ç¼€åŸåˆ™ï¼Ÿä»€ä¹ˆæ˜¯æœ€å·¦åŒ¹é…åŸåˆ™ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯æœ€å·¦å‰ç¼€åŸåˆ™ï¼Ÿä»€ä¹ˆæ˜¯æœ€å·¦åŒ¹é…åŸåˆ™ï¼Ÿ</h2><p>æœ€å·¦å‰ç¼€åŸåˆ™ï¼Œå°±æ˜¯æœ€å·¦ä¼˜å…ˆï¼Œåœ¨åˆ›å»ºå¤šåˆ—ç´¢å¼•æ—¶ï¼Œè¦æ ¹æ®ä¸šåŠ¡éœ€æ±‚ï¼Œwhere å­å¥ä¸­ä½¿ç”¨æœ€é¢‘ç¹çš„ä¸€åˆ—æ”¾åœ¨æœ€å·¦è¾¹ã€‚</p><p>å½“æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç»„åˆç´¢å¼•çš„æ—¶å€™ï¼Œå¦‚ (a1,a2,a3)ï¼Œç›¸å½“äºåˆ›å»ºäº†ï¼ˆa1ï¼‰ã€(a1,a2)å’Œ(a1,a2,a3)ä¸‰ä¸ªç´¢å¼•ï¼Œè¿™å°±æ˜¯æœ€å·¦åŒ¹é…åŸåˆ™ã€‚</p><p><a href="https://zhuanlan.zhihu.com/p/142852474" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/142852474</a></p><h2 id="ç´¢å¼•ä¸é€‚åˆå“ªäº›åœºæ™¯"><a href="#ç´¢å¼•ä¸é€‚åˆå“ªäº›åœºæ™¯" class="headerlink" title="ç´¢å¼•ä¸é€‚åˆå“ªäº›åœºæ™¯?"></a>ç´¢å¼•ä¸é€‚åˆå“ªäº›åœºæ™¯?</h2><p>æ•°æ®é‡å°‘çš„ä¸é€‚åˆåŠ ç´¢å¼•<br>æ›´æ–°æ¯”è¾ƒé¢‘ç¹çš„ä¹Ÿä¸é€‚åˆåŠ ç´¢å¼• = åŒºåˆ†åº¦ä½çš„å­—æ®µä¸é€‚åˆåŠ ç´¢å¼•ï¼ˆå¦‚æ€§åˆ«ï¼‰</p><h2 id="ç´¢å¼•æœ‰å“ªäº›ä¼˜ç¼ºç‚¹ï¼Ÿ"><a href="#ç´¢å¼•æœ‰å“ªäº›ä¼˜ç¼ºç‚¹ï¼Ÿ" class="headerlink" title="ç´¢å¼•æœ‰å“ªäº›ä¼˜ç¼ºç‚¹ï¼Ÿ"></a>ç´¢å¼•æœ‰å“ªäº›ä¼˜ç¼ºç‚¹ï¼Ÿ</h2><p>(1) ä¼˜ç‚¹ï¼š</p><p>å”¯ä¸€ç´¢å¼•å¯ä»¥ä¿è¯æ•°æ®åº“è¡¨ä¸­æ¯ä¸€è¡Œçš„æ•°æ®çš„å”¯ä¸€æ€§<br>ç´¢å¼•å¯ä»¥åŠ å¿«æ•°æ®æŸ¥è¯¢é€Ÿåº¦ï¼Œå‡å°‘æŸ¥è¯¢æ—¶é—´</p><p>(2)ç¼ºç‚¹ï¼š</p><p>åˆ›å»ºç´¢å¼•å’Œç»´æŠ¤ç´¢å¼•è¦è€—è´¹æ—¶é—´<br>ç´¢å¼•éœ€è¦å ç‰©ç†ç©ºé—´ï¼Œé™¤äº†æ•°æ®è¡¨å ç”¨æ•°æ®ç©ºé—´ä¹‹å¤–ï¼Œæ¯ä¸€ä¸ªç´¢å¼•è¿˜è¦å ç”¨ä¸€å®šçš„ç‰©ç†ç©ºé—´<br>ä»¥è¡¨ä¸­çš„æ•°æ®è¿›è¡Œå¢ã€åˆ ã€æ”¹çš„æ—¶å€™ï¼Œç´¢å¼•ä¹Ÿè¦åŠ¨æ€çš„ç»´æŠ¤ã€‚</p><h2 id="MySQL-é‡åˆ°è¿‡æ­»é”é—®é¢˜å—ï¼Œä½ æ˜¯å¦‚ä½•è§£å†³çš„ï¼Ÿ"><a href="#MySQL-é‡åˆ°è¿‡æ­»é”é—®é¢˜å—ï¼Œä½ æ˜¯å¦‚ä½•è§£å†³çš„ï¼Ÿ" class="headerlink" title="MySQL é‡åˆ°è¿‡æ­»é”é—®é¢˜å—ï¼Œä½ æ˜¯å¦‚ä½•è§£å†³çš„ï¼Ÿ"></a>MySQL é‡åˆ°è¿‡æ­»é”é—®é¢˜å—ï¼Œä½ æ˜¯å¦‚ä½•è§£å†³çš„ï¼Ÿ</h2><p>ï¼ˆ1ï¼‰æŸ¥çœ‹æ­»é”æ—¥å¿— show engine innodb status; ï¼ˆ2ï¼‰æ‰¾å‡ºæ­»é”Sql<br>ï¼ˆ3ï¼‰åˆ†æsqlåŠ é”æƒ…å†µ<br>ï¼ˆ4ï¼‰æ¨¡æ‹Ÿæ­»é”æ¡ˆå‘<br>ï¼ˆ5ï¼‰åˆ†ææ­»é”æ—¥å¿—<br>ï¼ˆ6ï¼‰åˆ†ææ­»é”ç»“æœ</p><h2 id="è¯´è¯´æ•°æ®åº“çš„ä¹è§‚é”å’Œæ‚²è§‚é”æ˜¯ä»€ä¹ˆä»¥åŠå®ƒä»¬çš„åŒºåˆ«"><a href="#è¯´è¯´æ•°æ®åº“çš„ä¹è§‚é”å’Œæ‚²è§‚é”æ˜¯ä»€ä¹ˆä»¥åŠå®ƒä»¬çš„åŒºåˆ«" class="headerlink" title="è¯´è¯´æ•°æ®åº“çš„ä¹è§‚é”å’Œæ‚²è§‚é”æ˜¯ä»€ä¹ˆä»¥åŠå®ƒä»¬çš„åŒºåˆ«"></a>è¯´è¯´æ•°æ®åº“çš„ä¹è§‚é”å’Œæ‚²è§‚é”æ˜¯ä»€ä¹ˆä»¥åŠå®ƒä»¬çš„åŒºåˆ«</h2><p>ï¼ˆ1ï¼‰æ‚²è§‚é”ï¼š</p><p>æ‚²è§‚é”å¥¹ä¸“ä¸€ä¸”ç¼ºä¹å®‰å…¨æ„Ÿäº†ï¼Œå¥¹çš„å¿ƒåªå±äºå½“å‰äº‹åŠ¡ï¼Œæ¯æ—¶æ¯åˆ»éƒ½æ‹…å¿ƒç€å®ƒå¿ƒçˆ±çš„æ•°æ®å¯èƒ½è¢«åˆ«çš„äº‹åŠ¡ä¿®æ”¹ï¼Œæ‰€ä»¥ä¸€ä¸ªäº‹åŠ¡æ‹¥æœ‰ï¼ˆè·å¾—ï¼‰æ‚²è§‚é”åï¼Œå…¶ä»–ä»»ä½•äº‹åŠ¡éƒ½ä¸èƒ½å¯¹æ•°æ®è¿›è¡Œä¿®æ”¹å•¦ï¼Œåªèƒ½ç­‰å¾…é”è¢«é‡Šæ”¾æ‰å¯ä»¥æ‰§è¡Œã€‚</p><p>ï¼ˆ2ï¼‰ä¹è§‚é”ï¼š</p><p>ä¹è§‚é”çš„â€œä¹è§‚æƒ…ç»ªâ€ä½“ç°åœ¨ï¼Œå®ƒè®¤ä¸ºæ•°æ®çš„å˜åŠ¨ä¸ä¼šå¤ªé¢‘ç¹ã€‚å› æ­¤ï¼Œå®ƒå…è®¸å¤šä¸ªäº‹åŠ¡åŒæ—¶å¯¹æ•°æ®è¿›è¡Œå˜åŠ¨ã€‚</p><p>å®ç°æ–¹å¼ï¼šä¹è§‚é”ä¸€èˆ¬ä¼šä½¿ç”¨ç‰ˆæœ¬å·æœºåˆ¶æˆ–CAS(Compare And Set)ç®—æ³•å®ç°ã€‚</p><h2 id="MVCC-ç†Ÿæ‚‰å—ï¼ŒçŸ¥é“å®ƒçš„åº•å±‚åŸç†"><a href="#MVCC-ç†Ÿæ‚‰å—ï¼ŒçŸ¥é“å®ƒçš„åº•å±‚åŸç†" class="headerlink" title="MVCC ç†Ÿæ‚‰å—ï¼ŒçŸ¥é“å®ƒçš„åº•å±‚åŸç†"></a>MVCC ç†Ÿæ‚‰å—ï¼ŒçŸ¥é“å®ƒçš„åº•å±‚åŸç†</h2><p>MVCC (Multiversion Concurrency Control)ï¼Œå³å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶æŠ€æœ¯ã€‚</p><p>MVCCåœ¨MySQL InnoDBä¸­çš„å®ç°ä¸»è¦æ˜¯ä¸ºäº†æé«˜æ•°æ®åº“å¹¶å‘æ€§èƒ½ï¼Œç”¨æ›´å¥½çš„æ–¹å¼å»å¤„ç†è¯»-å†™å†²çªï¼Œåšåˆ°å³ä½¿æœ‰è¯»å†™å†²çªæ—¶ï¼Œä¹Ÿèƒ½åšåˆ°ä¸åŠ é”ï¼Œéé˜»å¡å¹¶å‘è¯»ã€‚</p><p>MVCCï¼ˆMulti-Version Concurrency Control ï¼Œå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼‰æŒ‡çš„å°±æ˜¯åœ¨ä½¿ç”¨è¯»å·²æäº¤ï¼ˆREAD COMMITTDï¼‰ã€å¯é‡å¤è¯»ï¼ˆREPEATABLE READï¼‰è¿™ä¸¤ç§éš”ç¦»çº§åˆ«çš„äº‹åŠ¡åœ¨æ‰§è¡Œæ™®é€šçš„SELECTæ“ä½œæ—¶è®¿é—®è®°å½•çš„ç‰ˆæœ¬é“¾çš„è¿‡ç¨‹ï¼Œè¿™æ ·å­å¯ä»¥ä½¿ä¸åŒäº‹åŠ¡çš„è¯»-å†™ã€å†™-è¯»æ“ä½œå¹¶å‘æ‰§è¡Œï¼Œä»è€Œæå‡ç³»ç»Ÿæ€§èƒ½ã€‚</p><p>è¿™ä¸¤ä¸ªéš”ç¦»çº§åˆ«çš„ä¸€ä¸ªå¾ˆå¤§ä¸åŒå°±æ˜¯ï¼šç”ŸæˆReadViewçš„æ—¶æœºä¸åŒï¼ŒREAD COMMITTDåœ¨æ¯ä¸€æ¬¡è¿›è¡Œæ™®é€šSELECTæ“ä½œå‰éƒ½ä¼šç”Ÿæˆä¸€ä¸ªReadViewï¼Œè€ŒREPEATABLE READåªåœ¨ç¬¬ä¸€æ¬¡è¿›è¡Œæ™®é€šSELECTæ“ä½œå‰ç”Ÿæˆä¸€ä¸ªReadViewï¼Œæ•°æ®çš„å¯é‡å¤è¯»å…¶å®å°±æ˜¯ReadViewçš„é‡å¤ä½¿ç”¨ã€‚</p><p><a href="https://mp.weixin.qq.com/s/0-YEqTMd0OaIhW99WqavgQ" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/0-YEqTMd0OaIhW99WqavgQ</a></p><h2 id="MySQLäº‹åŠ¡å››å¤§ç‰¹æ€§ä»¥åŠå®ç°åŸç†"><a href="#MySQLäº‹åŠ¡å››å¤§ç‰¹æ€§ä»¥åŠå®ç°åŸç†" class="headerlink" title="MySQLäº‹åŠ¡å››å¤§ç‰¹æ€§ä»¥åŠå®ç°åŸç†"></a>MySQLäº‹åŠ¡å››å¤§ç‰¹æ€§ä»¥åŠå®ç°åŸç†</h2><p>åŸå­æ€§ï¼š äº‹åŠ¡ä½œä¸ºä¸€ä¸ªæ•´ä½“è¢«æ‰§è¡Œï¼ŒåŒ…å«åœ¨å…¶ä¸­çš„å¯¹æ•°æ®åº“çš„æ“ä½œè¦ä¹ˆå…¨éƒ¨è¢«æ‰§è¡Œï¼Œè¦ä¹ˆéƒ½ä¸æ‰§è¡Œã€‚<br>ä¸€è‡´æ€§ï¼š æŒ‡åœ¨äº‹åŠ¡å¼€å§‹ä¹‹å‰å’Œäº‹åŠ¡ç»“æŸä»¥åï¼Œæ•°æ®ä¸ä¼šè¢«ç ´åï¼Œå‡å¦‚Aè´¦æˆ·ç»™Bè´¦æˆ·è½¬10å—é’±ï¼Œä¸ç®¡æˆåŠŸä¸å¦ï¼ŒAå’ŒBçš„æ€»é‡‘é¢æ˜¯ä¸å˜çš„ã€‚<br>éš”ç¦»æ€§ï¼š å¤šä¸ªäº‹åŠ¡å¹¶å‘è®¿é—®æ—¶ï¼Œäº‹åŠ¡ä¹‹é—´æ˜¯ç›¸äº’éš”ç¦»çš„ï¼Œå³ä¸€ä¸ªäº‹åŠ¡ä¸å½±å“å…¶å®ƒäº‹åŠ¡è¿è¡Œæ•ˆæœã€‚ç®€è¨€ä¹‹ï¼Œå°±æ˜¯äº‹åŠ¡ä¹‹é—´æ˜¯è¿›æ°´ä¸çŠ¯æ²³æ°´çš„ã€‚<br>æŒä¹…æ€§ï¼š è¡¨ç¤ºäº‹åŠ¡å®Œæˆä»¥åï¼Œè¯¥äº‹åŠ¡å¯¹æ•°æ®åº“æ‰€ä½œçš„æ“ä½œæ›´æ”¹ï¼Œå°†æŒä¹…åœ°ä¿å­˜åœ¨æ•°æ®åº“ä¹‹ä¸­ã€‚</p><h2 id="äº‹åŠ¡çš„éš”ç¦»çº§åˆ«æœ‰å“ªäº›ï¼ŸMySQLçš„é»˜è®¤éš”ç¦»çº§åˆ«æ˜¯ä»€ä¹ˆ"><a href="#äº‹åŠ¡çš„éš”ç¦»çº§åˆ«æœ‰å“ªäº›ï¼ŸMySQLçš„é»˜è®¤éš”ç¦»çº§åˆ«æ˜¯ä»€ä¹ˆ" class="headerlink" title="äº‹åŠ¡çš„éš”ç¦»çº§åˆ«æœ‰å“ªäº›ï¼ŸMySQLçš„é»˜è®¤éš”ç¦»çº§åˆ«æ˜¯ä»€ä¹ˆ"></a>äº‹åŠ¡çš„éš”ç¦»çº§åˆ«æœ‰å“ªäº›ï¼ŸMySQLçš„é»˜è®¤éš”ç¦»çº§åˆ«æ˜¯ä»€ä¹ˆ</h2><p>è¯»æœªæäº¤ï¼ˆRead Uncommittedï¼‰<br>è¯»å·²æäº¤ï¼ˆRead Committedï¼‰<br>å¯é‡å¤è¯»ï¼ˆRepeatable Readï¼‰<br>ä¸²è¡ŒåŒ–ï¼ˆSerializableï¼‰</p><p>Mysqlé»˜è®¤çš„äº‹åŠ¡éš”ç¦»çº§åˆ«æ˜¯å¯é‡å¤è¯»(Repeatable Read)</p><p><a href="https://developer.aliyun.com/article/743691" target="_blank" rel="noopener">https://developer.aliyun.com/article/743691</a><br><a href="https://mp.weixin.qq.com/s/0-YEqTMd0OaIhW99WqavgQ" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/0-YEqTMd0OaIhW99WqavgQ</a></p><h3 id="å¯é‡å¤è¯»ä¸ºä»€ä¹ˆä¼šå‡ºç°å¹»è¯»"><a href="#å¯é‡å¤è¯»ä¸ºä»€ä¹ˆä¼šå‡ºç°å¹»è¯»" class="headerlink" title="å¯é‡å¤è¯»ä¸ºä»€ä¹ˆä¼šå‡ºç°å¹»è¯»"></a>å¯é‡å¤è¯»ä¸ºä»€ä¹ˆä¼šå‡ºç°å¹»è¯»</h3><p>åœ¨å¯é‡å¤è¯»ä¸­ï¼Œè¯¥sqlç¬¬ä¸€æ¬¡è¯»å–åˆ°æ•°æ®åï¼Œå°±å°†è¿™äº›æ•°æ®åŠ é”ï¼ˆæ‚²è§‚é”ï¼‰ï¼Œå…¶å®ƒäº‹åŠ¡æ— æ³•ä¿®æ”¹è¿™äº›æ•°æ®ï¼Œå°±å¯ä»¥å®ç°å¯é‡å¤è¯»äº†ã€‚ä½†è¿™ç§æ–¹æ³•å´æ— æ³•é”ä½insertçš„æ•°æ®ï¼Œæ‰€ä»¥å½“äº‹åŠ¡Aå…ˆå‰è¯»å–äº†æ•°æ®ï¼Œæˆ–è€…ä¿®æ”¹äº†å…¨éƒ¨æ•°æ®ï¼Œäº‹åŠ¡Bè¿˜æ˜¯å¯ä»¥insertæ•°æ®æäº¤ï¼Œè¿™æ—¶äº‹åŠ¡Aå°±ä¼šå‘ç°è«åå…¶å¦™å¤šäº†ä¸€æ¡ä¹‹å‰æ²¡æœ‰çš„æ•°æ®ï¼Œè¿™å°±æ˜¯å¹»è¯»ï¼Œä¸èƒ½é€šè¿‡è¡Œé”æ¥é¿å…ã€‚éœ€è¦Serializableéš”ç¦»çº§åˆ« ï¼Œè¯»ç”¨è¯»é”ï¼Œå†™ç”¨å†™é”ï¼Œè¯»é”å’Œå†™é”äº’æ–¥ï¼Œè¿™ä¹ˆåšå¯ä»¥æœ‰æ•ˆçš„é¿å…å¹»è¯»ã€ä¸å¯é‡å¤è¯»ã€è„è¯»ç­‰é—®é¢˜ï¼Œä½†ä¼šæå¤§çš„é™ä½æ•°æ®åº“çš„å¹¶å‘èƒ½åŠ›ã€‚</p><p><a href="https://juejin.cn/post/6985751855426977800" target="_blank" rel="noopener">https://juejin.cn/post/6985751855426977800</a></p><p>mysqlæ˜¯è§£å†³äº†å¿«ç…§è¯»çš„å¹»è¯»é—®é¢˜ï¼Œæ²¡è§£å†³å½“å‰è¯»çš„å¹»è¯»é—®é¢˜ï¼Œä½†ä¸ç®¡å®ƒæœ‰æ²¡æœ‰è§£å†³å¹»è¯»é—®é¢˜ï¼Œå®ƒéƒ½æ˜¯ä¸èƒ½æ›¿ä»£ä¸²è¡ŒåŒ–éš”ç¦»çº§åˆ«çš„ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯å¹»è¯»ï¼Œè„è¯»ï¼Œä¸å¯é‡å¤è¯»å‘¢ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯å¹»è¯»ï¼Œè„è¯»ï¼Œä¸å¯é‡å¤è¯»å‘¢ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯å¹»è¯»ï¼Œè„è¯»ï¼Œä¸å¯é‡å¤è¯»å‘¢ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯å¹»è¯»ï¼Œè„è¯»ï¼Œä¸å¯é‡å¤è¯»å‘¢ï¼Ÿ</h2><p>äº‹åŠ¡Aã€Bäº¤æ›¿æ‰§è¡Œï¼Œäº‹åŠ¡Aè¢«äº‹åŠ¡Bå¹²æ‰°åˆ°äº†ï¼Œå› ä¸ºäº‹åŠ¡Aè¯»å–åˆ°äº‹åŠ¡Bæœªæäº¤çš„æ•°æ®ï¼Œè¿™å°±æ˜¯è„è¯»ã€‚</p><p>åœ¨ä¸€ä¸ªäº‹åŠ¡èŒƒå›´å†…ï¼Œä¸¤ä¸ªç›¸åŒçš„æŸ¥è¯¢ï¼Œè¯»å–åŒä¸€æ¡è®°å½•ï¼Œå´è¿”å›äº†ä¸åŒçš„æ•°æ®ï¼Œè¿™å°±æ˜¯ä¸å¯é‡å¤è¯»ã€‚</p><p>äº‹åŠ¡AæŸ¥è¯¢ä¸€ä¸ªèŒƒå›´çš„ç»“æœé›†ï¼Œå¦ä¸€ä¸ªå¹¶å‘äº‹åŠ¡Bå¾€è¿™ä¸ªèŒƒå›´ä¸­æ’å…¥/åˆ é™¤äº†æ•°æ®ï¼Œå¹¶é™æ‚„æ‚„åœ°æäº¤ï¼Œç„¶åäº‹åŠ¡Aå†æ¬¡æŸ¥è¯¢ç›¸åŒçš„èŒƒå›´ï¼Œä¸¤æ¬¡è¯»å–å¾—åˆ°çš„ç»“æœé›†ä¸ä¸€æ ·äº†ï¼Œè¿™å°±æ˜¯å¹»è¯»ã€‚</p><h3 id="â€œä¸å¯é‡å¤è¯»â€å’Œâ€œå¹»è¯»â€çš„åŒºåˆ«"><a href="#â€œä¸å¯é‡å¤è¯»â€å’Œâ€œå¹»è¯»â€çš„åŒºåˆ«" class="headerlink" title="â€œä¸å¯é‡å¤è¯»â€å’Œâ€œå¹»è¯»â€çš„åŒºåˆ«"></a>â€œä¸å¯é‡å¤è¯»â€å’Œâ€œå¹»è¯»â€çš„åŒºåˆ«</h3><p>â€œä¸å¯é‡å¤è¯»â€å…³æ³¨çš„é‡ç‚¹åœ¨äºè®°å½•çš„æ›´æ–°æ“ä½œï¼Œå¯¹åŒæ ·çš„è®°å½•ï¼Œå†æ¬¡è¯»å–åå‘ç°è¿”å›çš„æ•°æ®å€¼ä¸ä¸€æ ·äº†ï¼›â€œå¹»è¯»â€å…³æ³¨çš„é‡ç‚¹åœ¨äºè®°å½•æ–°å¢æˆ–è€…åˆ é™¤æ“ä½œï¼ˆæ•°æ®æ¡æ•°å‘ç”Ÿäº†å˜åŒ–ï¼‰ï¼ŒåŒæ ·çš„æ¡ä»¶ç¬¬ä¸€æ¬¡å’Œç¬¬äºŒæ¬¡æŸ¥è¯¢å‡ºæ¥çš„è®°å½•æ•°ä¸ä¸€æ ·ã€‚</p><h2 id="MySQLæ•°æ®åº“cpué£™å‡çš„è¯ï¼Œè¦æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ"><a href="#MySQLæ•°æ®åº“cpué£™å‡çš„è¯ï¼Œè¦æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ" class="headerlink" title="MySQLæ•°æ®åº“cpué£™å‡çš„è¯ï¼Œè¦æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ"></a>MySQLæ•°æ®åº“cpué£™å‡çš„è¯ï¼Œè¦æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ</h2><p>æ’æŸ¥è¿‡ç¨‹ï¼š</p><p>ï¼ˆ1ï¼‰ä½¿ç”¨top å‘½ä»¤è§‚å¯Ÿï¼Œç¡®å®šæ˜¯mysqlå¯¼è‡´è¿˜æ˜¯å…¶ä»–åŸå› ã€‚<br>ï¼ˆ2ï¼‰å¦‚æœæ˜¯mysqlå¯¼è‡´çš„ï¼Œshow processlistï¼ŒæŸ¥çœ‹sessionæƒ…å†µï¼Œç¡®å®šæ˜¯ä¸æ˜¯æœ‰æ¶ˆè€—èµ„æºçš„sqlåœ¨è¿è¡Œã€‚<br>ï¼ˆ3ï¼‰æ‰¾å‡ºæ¶ˆè€—é«˜çš„ sqlï¼Œçœ‹çœ‹æ‰§è¡Œè®¡åˆ’æ˜¯å¦å‡†ç¡®ï¼Œ ç´¢å¼•æ˜¯å¦ç¼ºå¤±ï¼Œæ•°æ®é‡æ˜¯å¦å¤ªå¤§ã€‚</p><p>å¤„ç†ï¼š</p><p>ï¼ˆ1ï¼‰kill æ‰è¿™äº›çº¿ç¨‹(åŒæ—¶è§‚å¯Ÿ cpu ä½¿ç”¨ç‡æ˜¯å¦ä¸‹é™)ï¼Œ<br>ï¼ˆ2ï¼‰è¿›è¡Œç›¸åº”çš„è°ƒæ•´(æ¯”å¦‚è¯´åŠ ç´¢å¼•ã€æ”¹ sqlã€æ”¹å†…å­˜å‚æ•°)<br>ï¼ˆ3ï¼‰é‡æ–°è·‘è¿™äº› SQLã€‚</p><p>å…¶ä»–æƒ…å†µï¼š</p><p>ä¹Ÿæœ‰å¯èƒ½æ˜¯æ¯ä¸ª sql æ¶ˆè€—èµ„æºå¹¶ä¸å¤šï¼Œä½†æ˜¯çªç„¶ä¹‹é—´ï¼Œæœ‰å¤§é‡çš„ sessionä¼šè¯ è¿è¿›æ¥å¯¼è‡´ cpu é£™å‡ï¼Œè¿™ç§æƒ…å†µå°±éœ€è¦è·Ÿåº”ç”¨ä¸€èµ·æ¥åˆ†æä¸ºä½•è¿æ¥æ•°ä¼šæ¿€å¢ï¼Œå†åšå‡ºç›¸åº”çš„è°ƒæ•´ï¼Œæ¯”å¦‚è¯´é™åˆ¶è¿æ¥æ•°ç­‰</p><h2 id="MYSQLçš„ä¸»ä»å»¶è¿Ÿï¼Œä½ æ€ä¹ˆè§£å†³ï¼Ÿ"><a href="#MYSQLçš„ä¸»ä»å»¶è¿Ÿï¼Œä½ æ€ä¹ˆè§£å†³ï¼Ÿ" class="headerlink" title="MYSQLçš„ä¸»ä»å»¶è¿Ÿï¼Œä½ æ€ä¹ˆè§£å†³ï¼Ÿ"></a>MYSQLçš„ä¸»ä»å»¶è¿Ÿï¼Œä½ æ€ä¹ˆè§£å†³ï¼Ÿ</h2><p>ä¸»ä»å¤åˆ¶åˆ†äº†äº”ä¸ªæ­¥éª¤è¿›è¡Œï¼š</p><p>æ­¥éª¤ä¸€ï¼šä¸»åº“çš„æ›´æ–°äº‹ä»¶(updateã€insertã€delete)è¢«å†™åˆ°binlog<br>æ­¥éª¤äºŒï¼šä»åº“å‘èµ·è¿æ¥ï¼Œè¿æ¥åˆ°ä¸»åº“ã€‚<br>æ­¥éª¤ä¸‰ï¼šæ­¤æ—¶ä¸»åº“åˆ›å»ºä¸€ä¸ªbinlog dump threadï¼ŒæŠŠbinlogçš„å†…å®¹å‘é€åˆ°ä»åº“ã€‚<br>æ­¥éª¤å››ï¼šä»åº“å¯åŠ¨ä¹‹åï¼Œåˆ›å»ºä¸€ä¸ªI/Oçº¿ç¨‹ï¼Œè¯»å–ä¸»åº“ä¼ è¿‡æ¥çš„binlogå†…å®¹å¹¶å†™å…¥åˆ°relay log<br>æ­¥éª¤äº”ï¼šè¿˜ä¼šåˆ›å»ºä¸€ä¸ªSQLçº¿ç¨‹ï¼Œä»relay logé‡Œé¢è¯»å–å†…å®¹ï¼Œä»Exec_Master_Log_Posä½ç½®å¼€å§‹æ‰§è¡Œè¯»å–åˆ°çš„æ›´æ–°äº‹ä»¶ï¼Œå°†æ›´æ–°å†…å®¹å†™å…¥åˆ°slaveçš„db<br>ä¸»ä»åŒæ­¥å»¶è¿Ÿçš„åŸå› </p><p>ä¸€ä¸ªæœåŠ¡å™¨å¼€æ”¾ï¼®ä¸ªé“¾æ¥ç»™å®¢æˆ·ç«¯æ¥è¿æ¥çš„ï¼Œè¿™æ ·æœ‰ä¼šæœ‰å¤§å¹¶å‘çš„æ›´æ–°æ“ä½œ, ä½†æ˜¯ä»æœåŠ¡å™¨çš„é‡Œé¢è¯»å–binlogçš„çº¿ç¨‹ä»…æœ‰ä¸€ä¸ªï¼Œå½“æŸä¸ªSQLåœ¨ä»æœåŠ¡å™¨ä¸Šæ‰§è¡Œçš„æ—¶é—´ç¨é•¿ æˆ–è€…ç”±äºæŸä¸ªSQLè¦è¿›è¡Œé”è¡¨å°±ä¼šå¯¼è‡´ï¼Œä¸»æœåŠ¡å™¨çš„SQLå¤§é‡ç§¯å‹ï¼Œæœªè¢«åŒæ­¥åˆ°ä»æœåŠ¡å™¨é‡Œã€‚è¿™å°±å¯¼è‡´äº†ä¸»ä»ä¸ä¸€è‡´ï¼Œ ä¹Ÿå°±æ˜¯ä¸»ä»å»¶è¿Ÿã€‚</p><p>ä¸»ä»åŒæ­¥å»¶è¿Ÿçš„è§£å†³åŠæ³•</p><p>ä¸»æœåŠ¡å™¨è¦è´Ÿè´£æ›´æ–°æ“ä½œï¼Œå¯¹å®‰å…¨æ€§çš„è¦æ±‚æ¯”ä»æœåŠ¡å™¨è¦é«˜ï¼Œæ‰€ä»¥æœ‰äº›è®¾ç½®å‚æ•°å¯ä»¥ä¿®æ”¹ï¼Œæ¯”å¦‚sync_binlog=1ï¼Œinnodb_flush_log_at_trx_commit = 1 ä¹‹ç±»çš„è®¾ç½®ç­‰ã€‚<br>é€‰æ‹©æ›´å¥½çš„ç¡¬ä»¶è®¾å¤‡ä½œä¸ºslaveã€‚<br>æŠŠä¸€å°ä»æœåŠ¡å™¨å½“åº¦ä½œä¸ºå¤‡ä»½ä½¿ç”¨ï¼Œ è€Œä¸æä¾›æŸ¥è¯¢ï¼Œ é‚£è¾¹ä»–çš„è´Ÿè½½ä¸‹æ¥äº†ï¼Œ æ‰§è¡Œrelay log é‡Œé¢çš„SQLæ•ˆç‡è‡ªç„¶å°±é«˜äº†ã€‚<br>å¢åŠ ä»æœåŠ¡å™¨å–½ï¼Œè¿™ä¸ªç›®çš„è¿˜æ˜¯åˆ†æ•£è¯»çš„å‹åŠ›ï¼Œä»è€Œé™ä½æœåŠ¡å™¨è´Ÿè½½ã€‚</p><h2 id="å¦‚æœè®©ä½ åšåˆ†åº“ä¸åˆ†è¡¨çš„è®¾è®¡ï¼Œç®€å•è¯´è¯´ä½ ä¼šæ€ä¹ˆåšï¼Ÿ"><a href="#å¦‚æœè®©ä½ åšåˆ†åº“ä¸åˆ†è¡¨çš„è®¾è®¡ï¼Œç®€å•è¯´è¯´ä½ ä¼šæ€ä¹ˆåšï¼Ÿ" class="headerlink" title="å¦‚æœè®©ä½ åšåˆ†åº“ä¸åˆ†è¡¨çš„è®¾è®¡ï¼Œç®€å•è¯´è¯´ä½ ä¼šæ€ä¹ˆåšï¼Ÿ"></a>å¦‚æœè®©ä½ åšåˆ†åº“ä¸åˆ†è¡¨çš„è®¾è®¡ï¼Œç®€å•è¯´è¯´ä½ ä¼šæ€ä¹ˆåšï¼Ÿ</h2><p>åˆ†åº“åˆ†è¡¨æ–¹æ¡ˆ:</p><p>æ°´å¹³åˆ†åº“ï¼šä»¥å­—æ®µä¸ºä¾æ®ï¼ŒæŒ‰ç…§ä¸€å®šç­–ç•¥ï¼ˆhashã€rangeç­‰ï¼‰ï¼Œå°†ä¸€ä¸ªåº“ä¸­çš„æ•°æ®æ‹†åˆ†åˆ°å¤šä¸ªåº“ä¸­ã€‚<br>æ°´å¹³åˆ†è¡¨ï¼šä»¥å­—æ®µä¸ºä¾æ®ï¼ŒæŒ‰ç…§ä¸€å®šç­–ç•¥ï¼ˆhashã€rangeç­‰ï¼‰ï¼Œå°†ä¸€ä¸ªè¡¨ä¸­çš„æ•°æ®æ‹†åˆ†åˆ°å¤šä¸ªè¡¨ä¸­ã€‚<br>å‚ç›´åˆ†åº“ï¼šä»¥è¡¨ä¸ºä¾æ®ï¼ŒæŒ‰ç…§ä¸šåŠ¡å½’å±ä¸åŒï¼Œå°†ä¸åŒçš„è¡¨æ‹†åˆ†åˆ°ä¸åŒçš„åº“ä¸­ã€‚<br>å‚ç›´åˆ†è¡¨ï¼šä»¥å­—æ®µä¸ºä¾æ®ï¼ŒæŒ‰ç…§å­—æ®µçš„æ´»è·ƒæ€§ï¼Œå°†è¡¨ä¸­å­—æ®µæ‹†åˆ°ä¸åŒçš„è¡¨ï¼ˆä¸»è¡¨å’Œæ‰©å±•è¡¨ï¼‰ä¸­ã€‚<br>å¸¸ç”¨çš„åˆ†åº“åˆ†è¡¨ä¸­é—´ä»¶ï¼š</p><p>sharding-jdbc<br>Mycat<br>åˆ†åº“åˆ†è¡¨å¯èƒ½é‡åˆ°çš„é—®é¢˜</p><p>äº‹åŠ¡é—®é¢˜ï¼šéœ€è¦ç”¨åˆ†å¸ƒå¼äº‹åŠ¡å•¦<br>è·¨èŠ‚ç‚¹Joinçš„é—®é¢˜ï¼šè§£å†³è¿™ä¸€é—®é¢˜å¯ä»¥åˆ†ä¸¤æ¬¡æŸ¥è¯¢å®ç°<br>è·¨èŠ‚ç‚¹çš„count,order by,group byä»¥åŠèšåˆå‡½æ•°é—®é¢˜ï¼šåˆ†åˆ«åœ¨å„ä¸ªèŠ‚ç‚¹ä¸Šå¾—åˆ°ç»“æœååœ¨åº”ç”¨ç¨‹åºç«¯è¿›è¡Œåˆå¹¶ã€‚<br>æ•°æ®è¿ç§»ï¼Œå®¹é‡è§„åˆ’ï¼Œæ‰©å®¹ç­‰é—®é¢˜<br>IDé—®é¢˜ï¼šæ•°æ®åº“è¢«åˆ‡åˆ†åï¼Œä¸èƒ½å†ä¾èµ–æ•°æ®åº“è‡ªèº«çš„ä¸»é”®ç”Ÿæˆæœºåˆ¶å•¦ï¼Œæœ€ç®€å•å¯ä»¥è€ƒè™‘UUID<br>è·¨åˆ†ç‰‡çš„æ’åºåˆ†é¡µé—®é¢˜</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;MySQLé¢è¯•é«˜é¢‘20é—®&lt;/p&gt;
    
    </summary>
    
      <category term="2021å¹´10æœˆ" scheme="http://yoursite.com/categories/2021%E5%B9%B410%E6%9C%88/"/>
    
    
      <category term="Database" scheme="http://yoursite.com/tags/Database/"/>
    
      <category term="MySQL" scheme="http://yoursite.com/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>713. ä¹˜ç§¯å°äºKçš„å­æ•°ç»„</title>
    <link href="http://yoursite.com/2021/10/28/713.%20%E4%B9%98%E7%A7%AF%E5%B0%8F%E4%BA%8EK%E7%9A%84%E5%AD%90%E6%95%B0%E7%BB%84/"/>
    <id>http://yoursite.com/2021/10/28/713. ä¹˜ç§¯å°äºKçš„å­æ•°ç»„/</id>
    <published>2021-10-28T08:12:12.000Z</published>
    <updated>2021-10-31T01:31:35.684Z</updated>
    
    <content type="html"><![CDATA[<p>ç»™å®šä¸€ä¸ªæ­£æ•´æ•°æ•°ç»„ numså’Œæ•´æ•° k ã€‚</p><p>è¯·æ‰¾å‡ºè¯¥æ•°ç»„å†…ä¹˜ç§¯å°äº k çš„è¿ç»­çš„å­æ•°ç»„çš„ä¸ªæ•°ã€‚</p><a id="more"></a><p>[TOC]</p><p>ç¤ºä¾‹ 1:</p><pre><code>è¾“å…¥: nums = [10,5,2,6], k = 100è¾“å‡º: 8è§£é‡Š: 8ä¸ªä¹˜ç§¯å°äº100çš„å­æ•°ç»„åˆ†åˆ«ä¸º: [10], [5], [2], [6], [10,5], [5,2], [2,6], [5,2,6]ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ [10,5,2] å¹¶ä¸æ˜¯ä¹˜ç§¯å°äº100çš„å­æ•°ç»„ã€‚</code></pre><p>ç¤ºä¾‹ 2:</p><pre><code>è¾“å…¥: nums = [1,2,3], k = 0è¾“å‡º: 0</code></pre><p>æç¤º: </p><p>1 &lt;= nums.length &lt;= 3 * 104<br>1 &lt;= nums[i] &lt;= 1000<br>0 &lt;= k &lt;= 106</p><h1 id="æ–¹æ³•ä¸€ï¼šäºŒåˆ†æŸ¥æ‰¾"><a href="#æ–¹æ³•ä¸€ï¼šäºŒåˆ†æŸ¥æ‰¾" class="headerlink" title="æ–¹æ³•ä¸€ï¼šäºŒåˆ†æŸ¥æ‰¾"></a>æ–¹æ³•ä¸€ï¼šäºŒåˆ†æŸ¥æ‰¾</h1><p><strong>åˆ†æ</strong><a href="https://leetcode-cn.com/problems/subarray-product-less-than-k/solution/cheng-ji-xiao-yu-kde-zi-shu-zu-by-leetcode/" target="_blank" rel="noopener">^1</a></p><p>é¢˜è§£ä¸€ä¸­ ans += lo - i - 1</p><p>å…¶å®æ˜¯ans+=(lo-2) - i + 1ï¼Œä¸ºäº†æ–¹ä¾¿è¿ç®—prefix[0]é»˜è®¤ä¸º0åç§»äº†1ï¼Œå¦å¤–äºŒåˆ†æ³•å¾—åˆ°çš„å€¼loç›¸æ¯”æœ€å¤§çš„ä½ç½®åˆåç§»äº†1</p><details>    <summary>Python</summary><figure class="highlight python"><figcaption><span>[sol1]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">numSubarrayProductLessThanK</span><span class="params">(self, nums, k)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> k == <span class="number">0</span>: <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        k = math.log(k)</span><br><span class="line"></span><br><span class="line">        prefix = [<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">for</span> x <span class="keyword">in</span> nums:</span><br><span class="line">            prefix.append(prefix[<span class="number">-1</span>] + math.log(x))</span><br><span class="line"></span><br><span class="line">        ans = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i, x <span class="keyword">in</span> enumerate(prefix):</span><br><span class="line">            j = bisect.bisect(prefix, x + k - <span class="number">1e-9</span>, i+<span class="number">1</span>)</span><br><span class="line">            ans += j - i - <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure></details><details>    <summary>Java</summary><figure class="highlight java"><figcaption><span>[sol1]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">numSubarrayProductLessThanK</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (k == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">double</span> logk = Math.log(k);</span><br><span class="line">        <span class="keyword">double</span>[] prefix = <span class="keyword">new</span> <span class="keyword">double</span>[nums.length + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">            prefix[i+<span class="number">1</span>] = prefix[i] + Math.log(nums[i]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; prefix.length; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> lo = i + <span class="number">1</span>, hi = prefix.length;</span><br><span class="line">            <span class="keyword">while</span> (lo &lt; hi) &#123;</span><br><span class="line">                <span class="keyword">int</span> mi = lo + (hi - lo) / <span class="number">2</span>;</span><br><span class="line">                <span class="comment">//å¯ä»¥ä¸-1e-9</span></span><br><span class="line">                <span class="keyword">if</span> (prefix[mi] &lt; prefix[i] + logk - <span class="number">1e-9</span>) lo = mi + <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">else</span> hi = mi;</span><br><span class="line">            &#125;</span><br><span class="line">            ans += lo - i - <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><h1 id="æ–¹æ³•äºŒï¼šåŒæŒ‡é’ˆ"><a href="#æ–¹æ³•äºŒï¼šåŒæŒ‡é’ˆ" class="headerlink" title="æ–¹æ³•äºŒï¼šåŒæŒ‡é’ˆ"></a>æ–¹æ³•äºŒï¼šåŒæŒ‡é’ˆ</h1><details>    <summary>Python</summary><figure class="highlight python"><figcaption><span>[sol2]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">numSubarrayProductLessThanK</span><span class="params">(self, nums, k)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> k &lt;= <span class="number">1</span>: <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        prod = <span class="number">1</span></span><br><span class="line">        ans = left = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> right, val <span class="keyword">in</span> enumerate(nums):</span><br><span class="line">            prod *= val</span><br><span class="line">            <span class="keyword">while</span> prod &gt;= k:</span><br><span class="line">                prod /= nums[left]</span><br><span class="line">                left += <span class="number">1</span></span><br><span class="line">            ans += right - left + <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure></details><details>    <summary>Java</summary><figure class="highlight java"><figcaption><span>[sol2]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">numSubarrayProductLessThanK</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (k &lt;= <span class="number">1</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> prod = <span class="number">1</span>, ans = <span class="number">0</span>, left = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> right = <span class="number">0</span>; right &lt; nums.length; right++) &#123;</span><br><span class="line">            prod *= nums[right];</span><br><span class="line">            <span class="keyword">while</span> (prod &gt;= k) prod /= nums[left++];</span><br><span class="line">            ans += right - left + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç»™å®šä¸€ä¸ªæ­£æ•´æ•°æ•°ç»„ numså’Œæ•´æ•° k ã€‚&lt;/p&gt;
&lt;p&gt;è¯·æ‰¾å‡ºè¯¥æ•°ç»„å†…ä¹˜ç§¯å°äº k çš„è¿ç»­çš„å­æ•°ç»„çš„ä¸ªæ•°ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="2021å¹´10æœˆ" scheme="http://yoursite.com/categories/2021%E5%B9%B410%E6%9C%88/"/>
    
    
      <category term="LeetCode" scheme="http://yoursite.com/tags/LeetCode/"/>
    
      <category term="Array" scheme="http://yoursite.com/tags/Array/"/>
    
      <category term="Sliding Window" scheme="http://yoursite.com/tags/Sliding-Window/"/>
    
  </entry>
  
  <entry>
    <title>209. é•¿åº¦æœ€å°çš„å­æ•°ç»„</title>
    <link href="http://yoursite.com/2021/10/28/209.%20%E9%95%BF%E5%BA%A6%E6%9C%80%E5%B0%8F%E7%9A%84%E5%AD%90%E6%95%B0%E7%BB%84/"/>
    <id>http://yoursite.com/2021/10/28/209. é•¿åº¦æœ€å°çš„å­æ•°ç»„/</id>
    <published>2021-10-28T03:12:12.000Z</published>
    <updated>2021-10-28T08:11:31.454Z</updated>
    
    <content type="html"><![CDATA[<p>ç»™å®šä¸€ä¸ªå«æœ‰ n ä¸ªæ­£æ•´æ•°çš„æ•°ç»„å’Œä¸€ä¸ªæ­£æ•´æ•° target ã€‚</p><p>æ‰¾å‡ºè¯¥æ•°ç»„ä¸­æ»¡è¶³å…¶å’Œ â‰¥ target çš„é•¿åº¦æœ€å°çš„ è¿ç»­å­æ•°ç»„ [numsl, numsl+1, â€¦, numsr-1, numsr] ï¼Œå¹¶è¿”å›å…¶é•¿åº¦ã€‚å¦‚æœä¸å­˜åœ¨ç¬¦åˆæ¡ä»¶çš„å­æ•°ç»„ï¼Œè¿”å› 0 ã€‚</p><a id="more"></a><p>[TOC]</p><p>ç¤ºä¾‹ 1ï¼š</p><pre><code>è¾“å…¥ï¼štarget = 7, nums = [2,3,1,2,4,3]è¾“å‡ºï¼š2è§£é‡Šï¼šå­æ•°ç»„ [4,3] æ˜¯è¯¥æ¡ä»¶ä¸‹çš„é•¿åº¦æœ€å°çš„å­æ•°ç»„ã€‚</code></pre><p>ç¤ºä¾‹ 2ï¼š</p><pre><code>è¾“å…¥ï¼štarget = 4, nums = [1,4,4]è¾“å‡ºï¼š1</code></pre><p>ç¤ºä¾‹ 3ï¼š</p><pre><code>è¾“å…¥ï¼štarget = 11, nums = [1,1,1,1,1,1,1,1]è¾“å‡ºï¼š0</code></pre><p>æç¤ºï¼š</p><p>1 &lt;= target &lt;= 109<br>1 &lt;= nums.length &lt;= 105<br>1 &lt;= nums[i] &lt;= 105</p><p>è¿›é˜¶ï¼š</p><p>å¦‚æœä½ å·²ç»å®ç° O(n) æ—¶é—´å¤æ‚åº¦çš„è§£æ³•, è¯·å°è¯•è®¾è®¡ä¸€ä¸ª O(n log(n)) æ—¶é—´å¤æ‚åº¦çš„è§£æ³•ã€‚</p><h1 id="æ–¹æ³•ä¸€ï¼šæš´åŠ›æ³•"><a href="#æ–¹æ³•ä¸€ï¼šæš´åŠ›æ³•" class="headerlink" title="æ–¹æ³•ä¸€ï¼šæš´åŠ›æ³•"></a>æ–¹æ³•ä¸€ï¼šæš´åŠ›æ³•</h1><p><a href="https://leetcode-cn.com/problems/minimum-size-subarray-sum/solution/chang-du-zui-xiao-de-zi-shu-zu-by-leetcode-solutio/" target="_blank" rel="noopener">^1</a>æ³¨æ„ï¼šä½¿ç”¨ <code>Python</code> è¯­è¨€å®ç°æ–¹æ³•ä¸€ä¼šè¶…å‡ºæ—¶é—´é™åˆ¶ã€‚</p><details>    <summary>Java</summary><figure class="highlight java"><figcaption><span>[sol1-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">minSubArrayLen</span><span class="params">(<span class="keyword">int</span> s, <span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = nums.length;</span><br><span class="line">        <span class="keyword">if</span> (n == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> ans = Integer.MAX_VALUE;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = i; j &lt; n; j++) &#123;</span><br><span class="line">                sum += nums[j];</span><br><span class="line">                <span class="keyword">if</span> (sum &gt;= s) &#123;</span><br><span class="line">                    ans = Math.min(ans, j - i + <span class="number">1</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans == Integer.MAX_VALUE ? <span class="number">0</span> : ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>cpp</summary><figure class="highlight c++"><figcaption><span>[sol1-C++]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">minSubArrayLen</span><span class="params">(<span class="keyword">int</span> s, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = nums.size();</span><br><span class="line">        <span class="keyword">if</span> (n == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> ans = INT_MAX;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = i; j &lt; n; j++) &#123;</span><br><span class="line">                sum += nums[j];</span><br><span class="line">                <span class="keyword">if</span> (sum &gt;= s) &#123;</span><br><span class="line">                    ans = min(ans, j - i + <span class="number">1</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans == INT_MAX ? <span class="number">0</span> : ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></details><details>    <summary>C#</summary><figure class="highlight csharp"><figcaption><span>[sol1-C#]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Solution</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">MinSubArrayLen</span>(<span class="params"><span class="keyword">int</span> s, <span class="keyword">int</span>[] nums</span>) </span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = nums.Length;</span><br><span class="line">        <span class="keyword">if</span> (n == <span class="number">0</span>) </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> ans = <span class="keyword">int</span>.MaxValue;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = i; j &lt; n; ++j) </span><br><span class="line">            &#123;</span><br><span class="line">                sum += nums[j];</span><br><span class="line">                <span class="keyword">if</span> (sum &gt;= s)</span><br><span class="line">                &#123;</span><br><span class="line">                    ans = Math.Min(ans, j - i + <span class="number">1</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ans == <span class="keyword">int</span>.MaxValue ? <span class="number">0</span> : ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>Golang</summary><figure class="highlight golang"><figcaption><span>[sol1-Golang]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">minSubArrayLen</span><span class="params">(s <span class="keyword">int</span>, nums []<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    n := <span class="built_in">len</span>(nums)</span><br><span class="line">    <span class="keyword">if</span> n == <span class="number">0</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">    ans := math.MaxInt32</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; n; i++ &#123;</span><br><span class="line">        sum := <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> j := i; j &lt; n; j++ &#123;</span><br><span class="line">            sum += nums[j]</span><br><span class="line">            <span class="keyword">if</span> sum &gt;= s &#123;</span><br><span class="line">                ans = min(ans, j - i + <span class="number">1</span>)</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> ans == math.MaxInt32 &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">min</span><span class="params">(x, y <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> x &lt; y &#123;</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> y</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>Python3</summary><figure class="highlight python"><figcaption><span>[sol1-Python3]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">minSubArrayLen</span><span class="params">(self, s: int, nums: List[int])</span> -&gt; int:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> nums:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        </span><br><span class="line">        n = len(nums)</span><br><span class="line">        ans = n + <span class="number">1</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            total = <span class="number">0</span></span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(i, n):</span><br><span class="line">                total += nums[j]</span><br><span class="line">                <span class="keyword">if</span> total &gt;= s:</span><br><span class="line">                    ans = min(ans, j - i + <span class="number">1</span>)</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span> <span class="keyword">if</span> ans == n + <span class="number">1</span> <span class="keyword">else</span> ans</span><br></pre></td></tr></table></figure></details><details>    <summary>C</summary><figure class="highlight c"><figcaption><span>[sol1-C]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">minSubArrayLen</span><span class="params">(<span class="keyword">int</span> s, <span class="keyword">int</span>* nums, <span class="keyword">int</span> numsSize)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (numsSize == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> ans = INT_MAX;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; numsSize; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = i; j &lt; numsSize; j++) &#123;</span><br><span class="line">            sum += nums[j];</span><br><span class="line">            <span class="keyword">if</span> (sum &gt;= s) &#123;</span><br><span class="line">                ans = fmin(ans, j - i + <span class="number">1</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans == INT_MAX ? <span class="number">0</span> : ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><p><strong>å¤æ‚åº¦åˆ†æ</strong></p><ul><li><p>æ—¶é—´å¤æ‚åº¦ï¼š<em>O(n^2)*ï¼Œå…¶ä¸­ *n</em> æ˜¯æ•°ç»„çš„é•¿åº¦ã€‚éœ€è¦éå†æ¯ä¸ªä¸‹æ ‡ä½œä¸ºå­æ•°ç»„çš„å¼€å§‹ä¸‹æ ‡ï¼Œå¯¹äºæ¯ä¸ªå¼€å§‹ä¸‹æ ‡ï¼Œéœ€è¦éå†å…¶åé¢çš„ä¸‹æ ‡å¾—åˆ°é•¿åº¦æœ€å°çš„å­æ•°ç»„ã€‚</p></li><li><p>ç©ºé—´å¤æ‚åº¦ï¼š<em>O(1)</em>ã€‚</p></li></ul><h1 id="æ–¹æ³•äºŒï¼šå‰ç¼€å’Œ-äºŒåˆ†æŸ¥æ‰¾"><a href="#æ–¹æ³•äºŒï¼šå‰ç¼€å’Œ-äºŒåˆ†æŸ¥æ‰¾" class="headerlink" title="æ–¹æ³•äºŒï¼šå‰ç¼€å’Œ + äºŒåˆ†æŸ¥æ‰¾"></a>æ–¹æ³•äºŒï¼šå‰ç¼€å’Œ + äºŒåˆ†æŸ¥æ‰¾</h1><p>é¢˜è§£äºŒåˆ†æŸ¥æ‰¾ä¸­javaçš„binarySearchæ–¹æ³•è¿”å›æœ‰ä¸¤ç§ï¼š</p><p>ä¸€ç§æ˜¯åˆšå¥½æ‰¾åˆ°ç›®æ ‡å€¼ï¼Œè¿”å›ç›®æ ‡å€¼çš„ä¸‹æ ‡ã€‚</p><p>ä¸€ç§æ˜¯æ‰¾ä¸åˆ°ç›®æ ‡å€¼ï¼Œåˆ™ä¼šè¿”å›æ¯”ç›®æ ‡å€¼å¤§çš„å…ƒç´ çš„ä¸‹æ ‡ï¼Œä¸‹æ ‡å¸¦æœ‰è´Ÿæ•°ï¼Œä¸”ä»1å¼€å§‹æ•°èµ·ã€‚</p><p>ä¾‹å¦‚ä¸€ä¸ªæ•°ç»„æœ‰3ä¸ªå…ƒç´ ï¼Œä½†æ˜¯æŸ¥æ‰¾çš„å…ƒç´ å€¼æ¯”é‚£ä¸‰ä¸ªå…ƒç´ éƒ½å¤§ï¼Œåˆ™ä¼šè¿”å›-4</p><p>æ³¨æ„é¢˜ç›®è¦æ‰¾çš„æ˜¯å¤§äºç­‰äºtargetçš„è¿ç»­å­æ•°ç»„å’Œã€‚</p><details>    <summary>C#</summary><figure class="highlight csharp"><figcaption><span>[lowerbound-C#]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">LowerBound</span>(<span class="params"><span class="keyword">int</span>[] a, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> target</span>) </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> mid = <span class="number">-1</span>, originL = l, originR = r;</span><br><span class="line">    <span class="keyword">while</span> (l &lt; r) </span><br><span class="line">    &#123;</span><br><span class="line">        mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (a[mid] &lt; target) l = mid + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> r = mid;</span><br><span class="line">    &#125; </span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (a[l] &gt;= target) ? l : <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><p>ä¸‹é¢æ˜¯è¿™é“é¢˜çš„ä»£ç ã€‚</p><details>    <summary>Java</summary><figure class="highlight java"><figcaption><span>[sol2-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">minSubArrayLen</span><span class="params">(<span class="keyword">int</span> s, <span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = nums.length;</span><br><span class="line">        <span class="keyword">if</span> (n == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> ans = Integer.MAX_VALUE;</span><br><span class="line">        <span class="keyword">int</span>[] sums = <span class="keyword">new</span> <span class="keyword">int</span>[n + <span class="number">1</span>]; </span><br><span class="line">        <span class="comment">// ä¸ºäº†æ–¹ä¾¿è®¡ç®—ï¼Œä»¤ size = n + 1 </span></span><br><span class="line">        <span class="comment">// sums[0] = 0 æ„å‘³ç€å‰ 0 ä¸ªå…ƒç´ çš„å‰ç¼€å’Œä¸º 0</span></span><br><span class="line">        <span class="comment">// sums[1] = A[0] å‰ 1 ä¸ªå…ƒç´ çš„å‰ç¼€å’Œä¸º A[0]</span></span><br><span class="line">        <span class="comment">// ä»¥æ­¤ç±»æ¨</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            sums[i] = sums[i - <span class="number">1</span>] + nums[i - <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> target = s + sums[i - <span class="number">1</span>];</span><br><span class="line">            <span class="keyword">int</span> bound = Arrays.binarySearch(sums, target);</span><br><span class="line">            <span class="comment">//æ‰¾ä¸åˆ°ç›®æ ‡å€¼ï¼Œåˆ™ä¼šè¿”å›æ¯”ç›®æ ‡å€¼å¤§çš„å…ƒç´ çš„ä¸‹æ ‡ï¼Œä¸‹æ ‡å¸¦æœ‰è´Ÿæ•°ï¼Œä¸”ä»1å¼€å§‹æ•°èµ·</span></span><br><span class="line">            <span class="keyword">if</span> (bound &lt; <span class="number">0</span>) &#123;</span><br><span class="line">                bound = -bound - <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (bound &lt;= n) &#123;</span><br><span class="line">                ans = Math.min(ans, bound - (i - <span class="number">1</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans == Integer.MAX_VALUE ? <span class="number">0</span> : ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>C++</summary><figure class="highlight c++"><figcaption><span>[sol2-C++]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">minSubArrayLen</span><span class="params">(<span class="keyword">int</span> s, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = nums.size();</span><br><span class="line">        <span class="keyword">if</span> (n == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> ans = INT_MAX;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; sums(n + <span class="number">1</span>, <span class="number">0</span>); </span><br><span class="line">        <span class="comment">// ä¸ºäº†æ–¹ä¾¿è®¡ç®—ï¼Œä»¤ size = n + 1 </span></span><br><span class="line">        <span class="comment">// sums[0] = 0 æ„å‘³ç€å‰ 0 ä¸ªå…ƒç´ çš„å‰ç¼€å’Œä¸º 0</span></span><br><span class="line">        <span class="comment">// sums[1] = A[0] å‰ 1 ä¸ªå…ƒç´ çš„å‰ç¼€å’Œä¸º A[0]</span></span><br><span class="line">        <span class="comment">// ä»¥æ­¤ç±»æ¨</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            sums[i] = sums[i - <span class="number">1</span>] + nums[i - <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> target = s + sums[i - <span class="number">1</span>];</span><br><span class="line">            <span class="keyword">auto</span> bound = lower_bound(sums.begin(), sums.end(), target);</span><br><span class="line">            <span class="keyword">if</span> (bound != sums.end()) &#123;</span><br><span class="line">                ans = min(ans, <span class="keyword">static_cast</span>&lt;<span class="keyword">int</span>&gt;((bound - sums.begin()) - (i - <span class="number">1</span>)));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans == INT_MAX ? <span class="number">0</span> : ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></details><details>    <summary>C#</summary><figure class="highlight csharp"><figcaption><span>[sol2-C#]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Solution</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">LowerBound</span>(<span class="params"><span class="keyword">int</span>[] a, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> target</span>) </span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> mid = <span class="number">-1</span>, originL = l, originR = r;</span><br><span class="line">        <span class="keyword">while</span> (l &lt; r) </span><br><span class="line">        &#123;</span><br><span class="line">            mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (a[mid] &lt; target) l = mid + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">else</span> r = mid;</span><br><span class="line">        &#125; </span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> (a[l] &gt;= target) ? l : <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">MinSubArrayLen</span>(<span class="params"><span class="keyword">int</span> s, <span class="keyword">int</span>[] nums</span>) </span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = nums.Length;</span><br><span class="line">        <span class="keyword">if</span> (n == <span class="number">0</span>) </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> ans = <span class="keyword">int</span>.MaxValue;</span><br><span class="line">        <span class="keyword">int</span>[] sums = <span class="keyword">new</span> <span class="keyword">int</span>[n + <span class="number">1</span>]; </span><br><span class="line">        <span class="comment">// ä¸ºäº†æ–¹ä¾¿è®¡ç®—ï¼Œä»¤ size = n + 1 </span></span><br><span class="line">        <span class="comment">// sums[0] = 0 æ„å‘³ç€å‰ 0 ä¸ªå…ƒç´ çš„å‰ç¼€å’Œä¸º 0</span></span><br><span class="line">        <span class="comment">// sums[1] = A[0] å‰ 1 ä¸ªå…ƒç´ çš„å‰ç¼€å’Œä¸º A[0]</span></span><br><span class="line">        <span class="comment">// ä»¥æ­¤ç±»æ¨</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) </span><br><span class="line">        &#123;</span><br><span class="line">            sums[i] = sums[i - <span class="number">1</span>] + nums[i - <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> target = s + sums[i - <span class="number">1</span>];</span><br><span class="line">            <span class="keyword">int</span> bound = LowerBound(sums, i, n, target);</span><br><span class="line">            <span class="keyword">if</span> (bound != <span class="number">-1</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                ans = Math.Min(ans, bound - i + <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ans == <span class="keyword">int</span>.MaxValue ? <span class="number">0</span> : ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>Golang</summary><figure class="highlight golang"><figcaption><span>[sol2-Golang]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">minSubArrayLen</span><span class="params">(s <span class="keyword">int</span>, nums []<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    n := <span class="built_in">len</span>(nums)</span><br><span class="line">    <span class="keyword">if</span> n == <span class="number">0</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">    ans := math.MaxInt32</span><br><span class="line">    sums := <span class="built_in">make</span>([]<span class="keyword">int</span>, n + <span class="number">1</span>)</span><br><span class="line">    <span class="comment">// ä¸ºäº†æ–¹ä¾¿è®¡ç®—ï¼Œä»¤ size = n + 1 </span></span><br><span class="line">    <span class="comment">// sums[0] = 0 æ„å‘³ç€å‰ 0 ä¸ªå…ƒç´ çš„å‰ç¼€å’Œä¸º 0</span></span><br><span class="line">    <span class="comment">// sums[1] = A[0] å‰ 1 ä¸ªå…ƒç´ çš„å‰ç¼€å’Œä¸º A[0]</span></span><br><span class="line">    <span class="comment">// ä»¥æ­¤ç±»æ¨</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= n; i++ &#123;</span><br><span class="line">        sums[i] = sums[i - <span class="number">1</span>] + nums[i - <span class="number">1</span>]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= n; i++ &#123;</span><br><span class="line">        target := s + sums[i<span class="number">-1</span>]</span><br><span class="line">        bound := sort.SearchInts(sums, target)</span><br><span class="line">        <span class="keyword">if</span> bound &lt; <span class="number">0</span> &#123;</span><br><span class="line">            bound = -bound - <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> bound &lt;= n &#123;</span><br><span class="line">            ans = min(ans, bound - (i - <span class="number">1</span>))</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> ans == math.MaxInt32 &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">min</span><span class="params">(x, y <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> x &lt; y &#123;</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> y</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>Python3</summary><figure class="highlight python"><figcaption><span>[sol2-Python3]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">minSubArrayLen</span><span class="params">(self, s: int, nums: List[int])</span> -&gt; int:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> nums:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        </span><br><span class="line">        n = len(nums)</span><br><span class="line">        ans = n + <span class="number">1</span></span><br><span class="line">        sums = [<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            sums.append(sums[<span class="number">-1</span>] + nums[i])</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, n + <span class="number">1</span>):</span><br><span class="line">            target = s + sums[i - <span class="number">1</span>]</span><br><span class="line">            bound = bisect.bisect_left(sums, target)</span><br><span class="line">            <span class="keyword">if</span> bound != len(sums):</span><br><span class="line">                ans = min(ans, bound - (i - <span class="number">1</span>))</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span> <span class="keyword">if</span> ans == n + <span class="number">1</span> <span class="keyword">else</span> ans</span><br></pre></td></tr></table></figure></details><details>    <summary>C</summary><figure class="highlight c"><figcaption><span>[sol2-C]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lower_bound</span><span class="params">(<span class="keyword">int</span> *a, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> q)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (a[r] &lt; q) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">while</span> (l &lt; r) &#123;</span><br><span class="line">        <span class="keyword">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (a[mid] &gt;= q) &#123;</span><br><span class="line">            r = mid;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            l = mid + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> l;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">minSubArrayLen</span><span class="params">(<span class="keyword">int</span> s, <span class="keyword">int</span> *nums, <span class="keyword">int</span> numsSize)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (numsSize == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> ans = INT_MAX;</span><br><span class="line">    <span class="keyword">int</span> *sums = (<span class="keyword">int</span> *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">int</span>) * (numsSize + <span class="number">1</span>));</span><br><span class="line">    <span class="comment">// ä¸ºäº†æ–¹ä¾¿è®¡ç®—ï¼Œä»¤ size = n + 1</span></span><br><span class="line">    <span class="comment">// sums[0] = 0 æ„å‘³ç€å‰ 0 ä¸ªå…ƒç´ çš„å‰ç¼€å’Œä¸º 0</span></span><br><span class="line">    <span class="comment">// sums[1] = A[0] å‰ 1 ä¸ªå…ƒç´ çš„å‰ç¼€å’Œä¸º A[0]</span></span><br><span class="line">    <span class="comment">// ä»¥æ­¤ç±»æ¨</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= numsSize; i++) &#123;</span><br><span class="line">        sums[i] = sums[i - <span class="number">1</span>] + nums[i - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= numsSize; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> target = s + sums[i - <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">int</span> bound = lower_bound(sums, <span class="number">1</span>, numsSize, target);</span><br><span class="line">        <span class="keyword">if</span> (bound != <span class="number">-1</span>) &#123;</span><br><span class="line">            ans = fmin(ans, bound - (i - <span class="number">1</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans == INT_MAX ? <span class="number">0</span> : ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><h1 id="æ–¹æ³•ä¸‰ï¼šæ»‘åŠ¨çª—å£"><a href="#æ–¹æ³•ä¸‰ï¼šæ»‘åŠ¨çª—å£" class="headerlink" title="æ–¹æ³•ä¸‰ï¼šæ»‘åŠ¨çª—å£"></a>æ–¹æ³•ä¸‰ï¼šæ»‘åŠ¨çª—å£</h1><details>    <summary>Java</summary><figure class="highlight java"><figcaption><span>[sol3-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">minSubArrayLen</span><span class="params">(<span class="keyword">int</span> s, <span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = nums.length;</span><br><span class="line">        <span class="keyword">if</span> (n == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> ans = Integer.MAX_VALUE;</span><br><span class="line">        <span class="keyword">int</span> start = <span class="number">0</span>, end = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (end &lt; n) &#123;</span><br><span class="line">            sum += nums[end];</span><br><span class="line">            <span class="keyword">while</span> (sum &gt;= s) &#123;</span><br><span class="line">                ans = Math.min(ans, end - start + <span class="number">1</span>);</span><br><span class="line">                sum -= nums[start];</span><br><span class="line">                start++;</span><br><span class="line">            &#125;</span><br><span class="line">            end++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans == Integer.MAX_VALUE ? <span class="number">0</span> : ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>C++</summary><figure class="highlight c++"><figcaption><span>[sol3-C++]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">minSubArrayLen</span><span class="params">(<span class="keyword">int</span> s, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = nums.size();</span><br><span class="line">        <span class="keyword">if</span> (n == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> ans = INT_MAX;</span><br><span class="line">        <span class="keyword">int</span> start = <span class="number">0</span>, end = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (end &lt; n) &#123;</span><br><span class="line">            sum += nums[end];</span><br><span class="line">            <span class="keyword">while</span> (sum &gt;= s) &#123;</span><br><span class="line">                ans = min(ans, end - start + <span class="number">1</span>);</span><br><span class="line">                sum -= nums[start];</span><br><span class="line">                start++;</span><br><span class="line">            &#125;</span><br><span class="line">            end++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans == INT_MAX ? <span class="number">0</span> : ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></details><details>    <summary>C#</summary><figure class="highlight csharp"><figcaption><span>[sol3-C#]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Solution</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">MinSubArrayLen</span>(<span class="params"><span class="keyword">int</span> s, <span class="keyword">int</span>[] nums</span>) </span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = nums.Length;</span><br><span class="line">        <span class="keyword">if</span> (n == <span class="number">0</span>) </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> ans = <span class="keyword">int</span>.MaxValue;</span><br><span class="line">        <span class="keyword">int</span> start = <span class="number">0</span>, end = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (end &lt; n) </span><br><span class="line">        &#123;</span><br><span class="line">            sum += nums[end];</span><br><span class="line">            <span class="keyword">while</span> (sum &gt;= s) </span><br><span class="line">            &#123;</span><br><span class="line">                ans = Math.Min(ans, end - start + <span class="number">1</span>);</span><br><span class="line">                sum -= nums[start];</span><br><span class="line">                ++start;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            ++end;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ans == <span class="keyword">int</span>.MaxValue ? <span class="number">0</span> : ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>Golang</summary><figure class="highlight golang"><figcaption><span>[sol3-Golang]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">minSubArrayLen</span><span class="params">(s <span class="keyword">int</span>, nums []<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    n := <span class="built_in">len</span>(nums)</span><br><span class="line">    <span class="keyword">if</span> n == <span class="number">0</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">    ans := math.MaxInt32</span><br><span class="line">    start, end := <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">    sum := <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> end &lt; n &#123;</span><br><span class="line">        sum += nums[end]</span><br><span class="line">        <span class="keyword">for</span> sum &gt;= s &#123;</span><br><span class="line">            ans = min(ans, end - start + <span class="number">1</span>)</span><br><span class="line">            sum -= nums[start]</span><br><span class="line">            start++</span><br><span class="line">        &#125;</span><br><span class="line">        end++</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> ans == math.MaxInt32 &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">min</span><span class="params">(x, y <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> x &lt; y &#123;</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> y</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>Python3</summary><figure class="highlight python"><figcaption><span>[sol3-Python3]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">minSubArrayLen</span><span class="params">(self, s: int, nums: List[int])</span> -&gt; int:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> nums:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        </span><br><span class="line">        n = len(nums)</span><br><span class="line">        ans = n + <span class="number">1</span></span><br><span class="line">        start, end = <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">        total = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> end &lt; n:</span><br><span class="line">            total += nums[end]</span><br><span class="line">            <span class="keyword">while</span> total &gt;= s:</span><br><span class="line">                ans = min(ans, end - start + <span class="number">1</span>)</span><br><span class="line">                total -= nums[start]</span><br><span class="line">                start += <span class="number">1</span></span><br><span class="line">            end += <span class="number">1</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span> <span class="keyword">if</span> ans == n + <span class="number">1</span> <span class="keyword">else</span> ans</span><br></pre></td></tr></table></figure></details><details>    <summary>C</summary><figure class="highlight c"><figcaption><span>[sol3-C]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">minSubArrayLen</span><span class="params">(<span class="keyword">int</span> s, <span class="keyword">int</span> *nums, <span class="keyword">int</span> numsSize)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (numsSize == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> ans = INT_MAX;</span><br><span class="line">    <span class="keyword">int</span> start = <span class="number">0</span>, end = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (end &lt; numsSize) &#123;</span><br><span class="line">        sum += nums[end];</span><br><span class="line">        <span class="keyword">while</span> (sum &gt;= s) &#123;</span><br><span class="line">            ans = fmin(ans, end - start + <span class="number">1</span>);</span><br><span class="line">            sum -= nums[start];</span><br><span class="line">            start++;</span><br><span class="line">        &#125;</span><br><span class="line">        end++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans == INT_MAX ? <span class="number">0</span> : ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç»™å®šä¸€ä¸ªå«æœ‰ n ä¸ªæ­£æ•´æ•°çš„æ•°ç»„å’Œä¸€ä¸ªæ­£æ•´æ•° target ã€‚&lt;/p&gt;
&lt;p&gt;æ‰¾å‡ºè¯¥æ•°ç»„ä¸­æ»¡è¶³å…¶å’Œ â‰¥ target çš„é•¿åº¦æœ€å°çš„ è¿ç»­å­æ•°ç»„ [numsl, numsl+1, â€¦, numsr-1, numsr] ï¼Œå¹¶è¿”å›å…¶é•¿åº¦ã€‚å¦‚æœä¸å­˜åœ¨ç¬¦åˆæ¡ä»¶çš„å­æ•°ç»„ï¼Œè¿”å› 0 ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="2021å¹´10æœˆ" scheme="http://yoursite.com/categories/2021%E5%B9%B410%E6%9C%88/"/>
    
    
      <category term="LeetCode" scheme="http://yoursite.com/tags/LeetCode/"/>
    
      <category term="Array" scheme="http://yoursite.com/tags/Array/"/>
    
      <category term="Binary Search" scheme="http://yoursite.com/tags/Binary-Search/"/>
    
      <category term="Prefix Sum" scheme="http://yoursite.com/tags/Prefix-Sum/"/>
    
      <category term="Sliding Window" scheme="http://yoursite.com/tags/Sliding-Window/"/>
    
  </entry>
  
  <entry>
    <title>318. æœ€å¤§å•è¯é•¿åº¦ä¹˜ç§¯</title>
    <link href="http://yoursite.com/2021/10/27/318.%20%E6%9C%80%E5%A4%A7%E5%8D%95%E8%AF%8D%E9%95%BF%E5%BA%A6%E4%B9%98%E7%A7%AF/"/>
    <id>http://yoursite.com/2021/10/27/318. æœ€å¤§å•è¯é•¿åº¦ä¹˜ç§¯/</id>
    <published>2021-10-27T09:12:12.000Z</published>
    <updated>2021-10-27T10:28:55.078Z</updated>
    
    <content type="html"><![CDATA[<p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ wordsï¼Œæ‰¾åˆ° length(word[i]) * length(word[j]) çš„æœ€å¤§å€¼ï¼Œå¹¶ä¸”è¿™ä¸¤ä¸ªå•è¯ä¸å«æœ‰å…¬å…±å­—æ¯ã€‚ä½ å¯ä»¥è®¤ä¸ºæ¯ä¸ªå•è¯åªåŒ…å«å°å†™å­—æ¯ã€‚å¦‚æœä¸å­˜åœ¨è¿™æ ·çš„ä¸¤ä¸ªå•è¯ï¼Œè¿”å› 0ã€‚</p><a id="more"></a><p>[TOC]</p><p>ç¤ºä¾‹ 1:</p><pre><code>è¾“å…¥: [&quot;abcw&quot;,&quot;baz&quot;,&quot;foo&quot;,&quot;bar&quot;,&quot;xtfn&quot;,&quot;abcdef&quot;]è¾“å‡º: 16 è§£é‡Š: è¿™ä¸¤ä¸ªå•è¯ä¸º &quot;abcw&quot;, &quot;xtfn&quot;ã€‚</code></pre><p>ç¤ºä¾‹ 2:</p><pre><code>è¾“å…¥: [&quot;a&quot;,&quot;ab&quot;,&quot;abc&quot;,&quot;d&quot;,&quot;cd&quot;,&quot;bcd&quot;,&quot;abcd&quot;]è¾“å‡º: 4 è§£é‡Š: è¿™ä¸¤ä¸ªå•è¯ä¸º &quot;ab&quot;, &quot;cd&quot;ã€‚</code></pre><p>ç¤ºä¾‹ 3:</p><pre><code>è¾“å…¥: [&quot;a&quot;,&quot;aa&quot;,&quot;aaa&quot;,&quot;aaaa&quot;]è¾“å‡º: 0 è§£é‡Š: ä¸å­˜åœ¨è¿™æ ·çš„ä¸¤ä¸ªå•è¯ã€‚</code></pre><p>æç¤ºï¼š</p><p>2 &lt;= words.length &lt;= 1000<br>1 &lt;= words[i].length &lt;= 1000<br>words[i] ä»…åŒ…å«å°å†™å­—æ¯</p><h1 id="ç»¼è¿°"><a href="#ç»¼è¿°" class="headerlink" title="ç»¼è¿°"></a>ç»¼è¿°</h1><p>ä»ç®€å•æ–¹æ³•å¼€å§‹æ…¢æ…¢æ·±å…¥ã€‚<a href="https://leetcode-cn.com/problems/maximum-product-of-word-lengths/solution/zui-da-dan-ci-chang-du-cheng-ji-by-leetcode/" target="_blank" rel="noopener">^1</a></p><blockquote><p>å°†æ¯ä¸ªå•è¯ä¸å…¶ä»–æ‰€æœ‰å•è¯ä¸€ä¸€æ¯”è¾ƒã€‚å¦‚æœä¸¤ä¸ªå•è¯æ²¡æœ‰å…¬å…±å­—æ¯ï¼Œåˆ™æ›´æ–° <code>maxProd</code>ã€‚</p></blockquote><p>å…ˆä¸è€ƒè™‘å®ç°æ–¹æ³• <code>noCommonLetters</code>ï¼Œè¯¥è§£æ³•çš„ä»£ç å¦‚ä¸‹ï¼š</p><details>    <summary>Python</summary><figure class="highlight python"><figcaption><span>[snippet1-Python]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">maxProduct</span><span class="params">(self, words: List[str])</span> -&gt; int:</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">no_common_letters</span><span class="params">(s1, s2)</span>:</span></span><br><span class="line">            <span class="comment"># TODO</span></span><br><span class="line">            </span><br><span class="line">        n = len(words)</span><br><span class="line">        max_prod = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(i + <span class="number">1</span>, n):</span><br><span class="line">                <span class="keyword">if</span> no_common_letters(words[i], words[j]):</span><br><span class="line">                    max_prod = max(max_prod, len(words[i]) * len(words[j]))</span><br><span class="line">        <span class="keyword">return</span> max_prod</span><br></pre></td></tr></table></figure></details><details>    <summary>Java</summary><figure class="highlight java"><figcaption><span>[snippet1-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">noCommonLetters</span><span class="params">(String s1, String s2)</span></span>&#123;</span><br><span class="line">    <span class="comment">// TODO</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxProduct</span><span class="params">(String[] words)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = words.length;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> maxProd = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt; n; ++j)</span><br><span class="line">        <span class="keyword">if</span> (noCommonLetters(words[i], words[j]))</span><br><span class="line">          maxProd = Math.max(maxProd, words[i].length() * words[j].length());</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> maxProd;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><ul><li><p>æ–¹æ³•ä¸€ï¼šæœ€å°åŒ–æ–¹æ³• <em>f(L_1, L_2)</em> çš„å¤æ‚åº¦ã€‚</p></li><li><p>æ–¹æ³•äºŒï¼šæœ€å°åŒ–å•è¯çš„æ¯”è¾ƒæ¬¡æ•°ã€‚ä¸éœ€è¦O(N^2) æ¬¡æ¯”è¾ƒï¼Œåœ¨æ‰€æœ‰å…·æœ‰ç›¸åŒå­—ç¬¦é›†çš„å•è¯ä¸­åªä¿ç•™æœ€é•¿çš„ä¸€ä¸ªå•è¯ã€‚ä¾‹ï¼šï¼ˆ<em>ab</em>ï¼Œ<em>aaaaabaabaaabb</em>ï¼Œ<em>bbabbabba</em>ï¼‰ä¸­åªä¿ç•™æœ€é•¿çš„ä¸€ä¸ªå•è¯ï¼ˆ<em>aaaaabaabaaabb</em>ï¼‰ã€‚</p></li></ul><h1 id="æ–¹æ³•ä¸€ï¼šä¼˜åŒ–çš„æ–¹æ³•-noCommonLettersï¼šä½æ“ä½œ-é¢„è®¡ç®—"><a href="#æ–¹æ³•ä¸€ï¼šä¼˜åŒ–çš„æ–¹æ³•-noCommonLettersï¼šä½æ“ä½œ-é¢„è®¡ç®—" class="headerlink" title="æ–¹æ³•ä¸€ï¼šä¼˜åŒ–çš„æ–¹æ³• noCommonLettersï¼šä½æ“ä½œ+é¢„è®¡ç®—"></a>æ–¹æ³•ä¸€ï¼šä¼˜åŒ–çš„æ–¹æ³• noCommonLettersï¼šä½æ“ä½œ+é¢„è®¡ç®—</h1><p>é¦–å…ˆæœ€å°åŒ–å•è¯æ¯”è¾ƒ <em>f(L_1, L_2)</em> çš„å¤æ‚åº¦ã€‚</p><p>é€ä¸ªæ£€æŸ¥ç¬¬ä¸€ä¸ªå•è¯çš„æ¯ä¸ªå­—æ¯æ˜¯å¦å‡ºç°åœ¨ç¬¬äºŒä¸ªå•è¯ä¸­ï¼Œè¿™ç§æ–¹æ³•ä¸æ˜¯æœ€ä¼˜çš„ã€‚</p><details>    <summary>Python</summary><figure class="highlight python"><figcaption><span>[snippet2-Python]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">no_common_letters</span><span class="params">(s1, s2)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> ch <span class="keyword">in</span> s1:</span><br><span class="line">        <span class="keyword">if</span> ch <span class="keyword">in</span> s2:</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">False</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">True</span></span><br></pre></td></tr></table></figure></details><details>    <summary>Java</summary><figure class="highlight java"><figcaption><span>[snippet2-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">noCommonLetters</span><span class="params">(String s1, String s2)</span></span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">char</span> ch : s1.toCharArray())</span><br><span class="line">    <span class="keyword">if</span> (s2.indexOf(ch) != -<span class="number">1</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> </details><p>æ›´å¥½çš„æ–¹æ³•æ˜¯ä½¿ç”¨ä½æ“ä½œã€‚</p><p>å•è¯ä»…åŒ…å«å°å†™å­—æ¯ï¼Œå¯ä»¥ä½¿ç”¨ 26 ä¸ªå­—æ¯çš„ä½æ©ç å¯¹å•è¯çš„æ¯ä¸ªå­—æ¯å¤„ç†ï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨æŸä¸ªå­—æ¯ã€‚å¦‚æœå•è¯ä¸­å­˜åœ¨å­—æ¯ <code>a</code>ï¼Œåˆ™å°†ä½æ©ç çš„ç¬¬ä¸€ä½è®¾ä¸º <code>1</code>ï¼Œå¦åˆ™è®¾ä¸º <code>0</code>ã€‚å¦‚æœå•è¯ä¸­å­˜åœ¨å­—æ¯ <code>b</code>ï¼Œåˆ™å°†ä½æ©ç çš„ç¬¬äºŒä½è®¾ä¸º <code>1</code>ï¼Œå¦åˆ™è®¾ä¸º <code>0</code>ã€‚ä¾æ¬¡ç±»æ¨ï¼Œä¸€ç›´åˆ¤æ–­åˆ°å­—æ¯ <code>z</code>ã€‚</p><blockquote><p>å¦‚ä½•è®¾ç½®æ©ç çš„ç¬¬ n ä½ï¼Ÿä½¿ç”¨æ ‡å‡†çš„ä½æ“ä½œï¼š<code>n_th_bit = 1 &lt;&lt; n</code>ã€‚</p></blockquote><blockquote><p>å¦‚ä½•è®¡ç®—ä¸€ä¸ªå•è¯çš„ä½æ©ç ï¼Ÿéå†å•è¯çš„æ¯ä¸ªå­—æ¯ï¼Œè®¡ç®—è¯¥å­—æ¯åœ¨æ©ç ä¸­çš„ä½ç½® <code>n = (int)ch - (int)&#39;a&#39;</code>ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªç¬¬ n ä½ä¸º 1 çš„æ©ç  <code>n_th_bit = 1 &lt;&lt; n</code>ï¼Œé€šè¿‡æˆ–æ“ä½œå°†è¯¥ç åˆå¹¶åˆ°ä½æ©ç ä¸­ <code>bitmask |= n_th_bit</code>ã€‚</p></blockquote><details>    <summary>Python</summary><figure class="highlight python"><figcaption><span>[snippet3-Python]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">no_common_letters</span><span class="params">(s1, s2)</span>:</span></span><br><span class="line">    bit_number = <span class="keyword">lambda</span> ch : ord(ch) - ord(<span class="string">'a'</span>)</span><br><span class="line"></span><br><span class="line">    bitmask1 = bitmask2 = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> ch <span class="keyword">in</span> s1:</span><br><span class="line">        bitmask1 |= <span class="number">1</span> &lt;&lt; bit_number(ch)</span><br><span class="line">    <span class="keyword">for</span> ch <span class="keyword">in</span> s2:</span><br><span class="line">        bitmask2 |= <span class="number">1</span> &lt;&lt; bit_number(ch)</span><br><span class="line">    <span class="keyword">return</span> bitmask1 &amp; bitmask2 == <span class="number">0</span></span><br></pre></td></tr></table></figure></details><details>    <summary>Java</summary><figure class="highlight java"><figcaption><span>[snippet3-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">bitNumber</span><span class="params">(<span class="keyword">char</span> ch)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (<span class="keyword">int</span>)ch - (<span class="keyword">int</span>)<span class="string">'a'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">noCommonLetters</span><span class="params">(String s1, String s2)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> bitmask1 = <span class="number">0</span>, bitmask2 = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">char</span> ch : s1.toCharArray())</span><br><span class="line">    bitmask1 |= <span class="number">1</span> &lt;&lt; bitNumber(ch);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">char</span> ch : s2.toCharArray())</span><br><span class="line">    bitmask2 |= <span class="number">1</span> &lt;&lt; bitNumber(ch);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (bitmask1 &amp; bitmask2) == <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><p>å‰é¢æ–¹æ³•ä¸­ï¼Œæ¯ä¸ªå•è¯éœ€è¦è®¡ç®— N æ¬¡ä½æ©ç ã€‚å®é™…ä¸Šï¼Œæ¯ä¸ªå•è¯çš„ä½æ©ç å¯ä»¥é¢„å…ˆè®¡ç®—å¹¶å­˜å‚¨èµ·æ¥ï¼Œä¹‹åæ¯æ¬¡ç›´æ¥æ‹¿æ¥æ¯”è¾ƒã€‚</p><p>å› ä¸º Java çš„ä¼˜åŒ–ï¼Œæ“ä½œæ•°ç»„æ¯” HashMap æ›´å¿«ï¼Œæ‰€ä»¥ä½¿ç”¨ä¸¤ä¸ªæ•´æ•°æ•°ç»„å­˜å‚¨ä½æ©ç å’Œå­—ç¬¦ä¸²é•¿åº¦ã€‚</p><p><strong>ç®—æ³•</strong></p><ul><li><p>é¢„è®¡ç®—æ‰€æœ‰å•è¯çš„ä½æ©ç ï¼Œå¹¶æŠŠå®ƒä»¬å­˜å‚¨åœ¨æ•°ç»„ <code>masks</code> ä¸­ã€‚ä½¿ç”¨æ•°ç»„ <code>lens</code> å­˜å‚¨æ‰€æœ‰å•è¯çš„é•¿åº¦ã€‚</p></li><li><p>é€ä¸€ä¸¤ä¸¤æ¯”è¾ƒå•è¯ã€‚å¦‚æœä¸¤ä¸ªå•è¯ä¸å­˜åœ¨å…¬å…±å­—æ¯ï¼Œåˆ™æ›´æ–°æœ€å¤§å•è¯é•¿åº¦ä¹˜ç§¯ <code>maxProd</code>ã€‚ä½¿ç”¨æ•°ç»„ <code>masks</code> å¯ä»¥åœ¨å¸¸æ•°æ—¶é—´å†…åˆ¤æ–­ä¸¤ä¸ªå•è¯æ˜¯å¦åŒ…å«å…¬å…±å­—æ¯ï¼š<code>(masks[i] &amp; masks[j]) == 0</code>ã€‚</p></li><li><p>è¿”å› <code>maxProd</code>ã€‚</p></li></ul><details>    <summary>Python</summary><figure class="highlight python"><figcaption><span>[solution1-Python]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">maxProduct</span><span class="params">(self, words: List[str])</span> -&gt; int:</span></span><br><span class="line">        n = len(words)</span><br><span class="line">        masks = [<span class="number">0</span>] * n</span><br><span class="line">        lens = [<span class="number">0</span>] * n</span><br><span class="line">        bit_number = <span class="keyword">lambda</span> ch : ord(ch) - ord(<span class="string">'a'</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            bitmask = <span class="number">0</span></span><br><span class="line">            <span class="keyword">for</span> ch <span class="keyword">in</span> words[i]:</span><br><span class="line">                <span class="comment"># add bit number bit_number in bitmask</span></span><br><span class="line">                bitmask |= <span class="number">1</span> &lt;&lt; bit_number(ch)</span><br><span class="line">            masks[i] = bitmask</span><br><span class="line">            lens[i] = len(words[i])</span><br><span class="line">            </span><br><span class="line">        max_val = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(i + <span class="number">1</span>, n):</span><br><span class="line">                <span class="keyword">if</span> masks[i] &amp; masks[j] == <span class="number">0</span>:</span><br><span class="line">                    max_val = max(max_val, lens[i] * lens[j])</span><br><span class="line">        <span class="keyword">return</span> max_val</span><br></pre></td></tr></table></figure></details><details>    <summary>Java</summary><figure class="highlight java"><figcaption><span>[solution1-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">bitNumber</span><span class="params">(<span class="keyword">char</span> ch)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="keyword">int</span>)ch - (<span class="keyword">int</span>)<span class="string">'a'</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxProduct</span><span class="params">(String[] words)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = words.length;</span><br><span class="line">    <span class="keyword">int</span>[] masks = <span class="keyword">new</span> <span class="keyword">int</span>[n];</span><br><span class="line">    <span class="keyword">int</span>[] lens = <span class="keyword">new</span> <span class="keyword">int</span>[n];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> bitmask = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">      bitmask = <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">char</span> ch : words[i].toCharArray()) &#123;</span><br><span class="line">        <span class="comment">// add bit number bit_number in bitmask</span></span><br><span class="line">        bitmask |= <span class="number">1</span> &lt;&lt; bitNumber(ch);</span><br><span class="line">      &#125;</span><br><span class="line">      masks[i] = bitmask;</span><br><span class="line">      lens[i] = words[i].length();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> maxVal = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt; n; ++j)</span><br><span class="line">        <span class="keyword">if</span> ((masks[i] &amp; masks[j]) == <span class="number">0</span>)</span><br><span class="line">          maxVal = Math.max(maxVal, lens[i] * lens[j]);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> maxVal;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><h1 id="æ–¹æ³•äºŒï¼šä¼˜åŒ–æ¯”è¾ƒæ¬¡æ•°ï¼šä½æ“ä½œ-é¢„è®¡ç®—-HashMap"><a href="#æ–¹æ³•äºŒï¼šä¼˜åŒ–æ¯”è¾ƒæ¬¡æ•°ï¼šä½æ“ä½œ-é¢„è®¡ç®—-HashMap" class="headerlink" title="æ–¹æ³•äºŒï¼šä¼˜åŒ–æ¯”è¾ƒæ¬¡æ•°ï¼šä½æ“ä½œ+é¢„è®¡ç®—+HashMap"></a>æ–¹æ³•äºŒï¼šä¼˜åŒ–æ¯”è¾ƒæ¬¡æ•°ï¼šä½æ“ä½œ+é¢„è®¡ç®—+HashMap</h1><p>æ–¹æ³•ä¸€ä¼˜åŒ–äº†æ¯”è¾ƒè¿‡ç¨‹ï¼Œæ–¹æ³•äºŒä¼˜åŒ–æ¯”è¾ƒæ¬¡æ•°ã€‚å®Œæˆæ‰€æœ‰çš„ä¸¤ä¸¤æ¯”è¾ƒéœ€è¦ O(N^2)  ã€‚ä¸€äº›å•è¯å…·æœ‰ç›¸åŒçš„å­—ç¬¦é›†ï¼Œåˆ™åªä¿ç•™è¿™äº›å•è¯ä¸­æœ€é•¿çš„ä¸€ä¸ªå•è¯å³å¯ã€‚ä¾‹å¦‚ï¼šå•è¯é›†åˆï¼ˆ<em>ab<em>ï¼Œ</em>aaaaabaabaaabb<em>ï¼Œ</em>bbabbabba*ï¼‰åªä¿ç•™å•è¯ *aaaaabaabaaabb</em> å³å¯ã€‚ä½¿ç”¨ HashMap ä»£æ›¿æ–¹æ³•ä¸€ä¸­çš„ä¸¤ä¸ªé•¿åº¦ä¸º <em>N</em> çš„æ•°ç»„ï¼Œå­˜å‚¨ç»“æ„ä¸ºï¼šä½æ©ç  -&gt; è¯¥æ©ç å¯¹åº”çš„æœ€å¤§é•¿åº¦å­—ç¬¦ä¸²ã€‚</p><p>è¿™ç§æ–¹æ³•å•è¯æ¯”è¾ƒæ¬¡æ•°å¯èƒ½ä¼šå‡å°‘ï¼Œä»è€Œæé«˜ Python è§£æ³•çš„æ•ˆç‡ã€‚ç”±äº Java ä¸­ HashMap çš„æ€§èƒ½é—®é¢˜ï¼Œè¿™ç§æ–¹æ³•ä¸ä¼šæ”¹å–„ Java è§£æ³•çš„æ•ˆç‡ã€‚</p><p><strong>ç®—æ³•</strong></p><ul><li><p>é¢„è®¡ç®—æ‰€æœ‰å•è¯çš„ä½æ©ç ï¼Œå¹¶å°†å®ƒä»¬å­˜å‚¨åœ¨ HashMap ä¸­ï¼šä½æ©ç  -&gt; è¯¥æ©ç å¯¹åº”çš„æœ€å¤§é•¿åº¦å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ï¼šå•è¯ â€œaaaaaaaâ€ å’Œ â€œaâ€ å…·æœ‰ç›¸åŒçš„æ©ç ã€‚ </p></li><li><p>é€ä¸€ä¸¤ä¸¤æ¯”è¾ƒ HashMap ä¸­çš„å•è¯ã€‚å¦‚æœä¸¤ä¸ªå•è¯æ²¡æœ‰å…¬å…±å­—æ¯ï¼Œæ›´æ–°æœ€å¤§å•è¯é•¿åº¦ä¹˜ç§¯ <code>maxProd</code>ã€‚ä½¿ç”¨ä½æ©ç å¯ä»¥åœ¨å¸¸æ•°æ—¶é—´å†…åˆ¤æ–­ä¸¤ä¸ªå•è¯æ˜¯å¦åŒ…å«å…¬å…±å­—æ¯ï¼š<code>(x &amp; y) == 0</code>ã€‚</p></li><li><p>è¿”å› <code>maxProd</code>ã€‚</p></li></ul><details>    <summary>Python</summary><figure class="highlight python"><figcaption><span>[solution2-Python]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">maxProduct</span><span class="params">(self, words: List[str])</span> -&gt; int:</span></span><br><span class="line">        hashmap = defaultdict(int)</span><br><span class="line">        bit_number = <span class="keyword">lambda</span> ch : ord(ch) - ord(<span class="string">'a'</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> word <span class="keyword">in</span> words:</span><br><span class="line">            bitmask = <span class="number">0</span></span><br><span class="line">            <span class="keyword">for</span> ch <span class="keyword">in</span> word:</span><br><span class="line">                <span class="comment"># add bit number bit_number in bitmask</span></span><br><span class="line">                bitmask |= <span class="number">1</span> &lt;&lt; bit_number(ch)</span><br><span class="line">            <span class="comment"># there could be different words with the same bitmask</span></span><br><span class="line">            <span class="comment"># ex. ab and aabb</span></span><br><span class="line">            hashmap[bitmask] = max(hashmap[bitmask], len(word))</span><br><span class="line">        </span><br><span class="line">        max_prod = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> x <span class="keyword">in</span> hashmap:</span><br><span class="line">            <span class="keyword">for</span> y <span class="keyword">in</span> hashmap:</span><br><span class="line">                <span class="keyword">if</span> x &amp; y == <span class="number">0</span>:</span><br><span class="line">                    max_prod = max(max_prod, hashmap[x] * hashmap[y])</span><br><span class="line">        <span class="keyword">return</span> max_prod</span><br></pre></td></tr></table></figure></details><details>    <summary>Java</summary><figure class="highlight java"><figcaption><span>[solution2-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">bitNumber</span><span class="params">(<span class="keyword">char</span> ch)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="keyword">int</span>)ch - (<span class="keyword">int</span>)<span class="string">'a'</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxProduct</span><span class="params">(String[] words)</span> </span>&#123;</span><br><span class="line">    Map&lt;Integer, Integer&gt; hashmap = <span class="keyword">new</span> HashMap();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> bitmask = <span class="number">0</span>, bitNum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (String word : words) &#123;</span><br><span class="line">      bitmask = <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">char</span> ch : word.toCharArray()) &#123;</span><br><span class="line">        <span class="comment">// add bit number bitNumber in bitmask</span></span><br><span class="line">        bitmask |= <span class="number">1</span> &lt;&lt; bitNumber(ch);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// there could be different words with the same bitmask</span></span><br><span class="line">      <span class="comment">// ex. ab and aabb</span></span><br><span class="line">      hashmap.put(bitmask, Math.max(hashmap.getOrDefault(bitmask, <span class="number">0</span>), word.length()));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> maxProd = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> x : hashmap.keySet())</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> y : hashmap.keySet())</span><br><span class="line">        <span class="keyword">if</span> ((x &amp; y) == <span class="number">0</span>) maxProd = Math.max(maxProd, hashmap.get(x) * hashmap.get(y));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> maxProd;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ wordsï¼Œæ‰¾åˆ° length(word[i]) * length(word[j]) çš„æœ€å¤§å€¼ï¼Œå¹¶ä¸”è¿™ä¸¤ä¸ªå•è¯ä¸å«æœ‰å…¬å…±å­—æ¯ã€‚ä½ å¯ä»¥è®¤ä¸ºæ¯ä¸ªå•è¯åªåŒ…å«å°å†™å­—æ¯ã€‚å¦‚æœä¸å­˜åœ¨è¿™æ ·çš„ä¸¤ä¸ªå•è¯ï¼Œè¿”å› 0ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="2021å¹´10æœˆ" scheme="http://yoursite.com/categories/2021%E5%B9%B410%E6%9C%88/"/>
    
    
      <category term="LeetCode" scheme="http://yoursite.com/tags/LeetCode/"/>
    
      <category term="Array" scheme="http://yoursite.com/tags/Array/"/>
    
      <category term="String" scheme="http://yoursite.com/tags/String/"/>
    
      <category term="Bit Manipulation" scheme="http://yoursite.com/tags/Bit-Manipulation/"/>
    
  </entry>
  
  <entry>
    <title>1531. å‹ç¼©å­—ç¬¦ä¸² II</title>
    <link href="http://yoursite.com/2021/10/25/1531.%20%E5%8E%8B%E7%BC%A9%E5%AD%97%E7%AC%A6%E4%B8%B2%20II/"/>
    <id>http://yoursite.com/2021/10/25/1531. å‹ç¼©å­—ç¬¦ä¸² II/</id>
    <published>2021-10-25T06:12:12.000Z</published>
    <updated>2021-10-26T02:08:45.928Z</updated>
    
    <content type="html"><![CDATA[<p>è¯·ä½ è¿”å›åˆ é™¤æœ€å¤škä¸ªå­—ç¬¦åï¼Œsè¡Œç¨‹é•¿åº¦ç¼–ç çš„æœ€å°é•¿åº¦ ã€‚</p><a id="more"></a><p>[TOC]</p><p>è¡Œç¨‹é•¿åº¦ç¼–ç  æ˜¯ä¸€ç§å¸¸ç”¨çš„å­—ç¬¦ä¸²å‹ç¼©æ–¹æ³•ï¼Œå®ƒå°†è¿ç»­çš„ç›¸åŒå­—ç¬¦ï¼ˆé‡å¤ 2 æ¬¡æˆ–æ›´å¤šæ¬¡ï¼‰æ›¿æ¢ä¸ºå­—ç¬¦å’Œè¡¨ç¤ºå­—ç¬¦è®¡æ•°çš„æ•°å­—ï¼ˆè¡Œç¨‹é•¿åº¦ï¼‰ã€‚ä¾‹å¦‚ï¼Œç”¨æ­¤æ–¹æ³•å‹ç¼©å­—ç¬¦ä¸² â€œaabcccâ€ ï¼Œå°† â€œaaâ€ æ›¿æ¢ä¸º â€œa2â€ ï¼Œâ€cccâ€ æ›¿æ¢ä¸º` â€œc3â€ ã€‚å› æ­¤å‹ç¼©åçš„å­—ç¬¦ä¸²å˜ä¸º â€œa2bc3â€ ã€‚</p><p>æ³¨æ„ï¼Œæœ¬é—®é¢˜ä¸­ï¼Œå‹ç¼©æ—¶æ²¡æœ‰åœ¨å•ä¸ªå­—ç¬¦åé™„åŠ è®¡æ•° â€˜1â€™ ã€‚</p><p>ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² s å’Œä¸€ä¸ªæ•´æ•° k ã€‚ä½ éœ€è¦ä»å­—ç¬¦ä¸² s ä¸­åˆ é™¤æœ€å¤š k ä¸ªå­—ç¬¦ï¼Œä»¥ä½¿ s çš„è¡Œç¨‹é•¿åº¦ç¼–ç é•¿åº¦æœ€å°ã€‚</p><p>è¯·ä½ è¿”å›åˆ é™¤æœ€å¤š k ä¸ªå­—ç¬¦åï¼Œs è¡Œç¨‹é•¿åº¦ç¼–ç çš„æœ€å°é•¿åº¦ ã€‚</p><p>ç¤ºä¾‹ 1ï¼š</p><pre><code>è¾“å…¥ï¼šs = &quot;aaabcccd&quot;, k = 2è¾“å‡ºï¼š4è§£é‡Šï¼šåœ¨ä¸åˆ é™¤ä»»ä½•å†…å®¹çš„æƒ…å†µä¸‹ï¼Œå‹ç¼©åçš„å­—ç¬¦ä¸²æ˜¯ &quot;a3bc3d&quot; ï¼Œé•¿åº¦ä¸º 6 ã€‚æœ€ä¼˜çš„æ–¹æ¡ˆæ˜¯åˆ é™¤ &apos;b&apos; å’Œ &apos;d&apos;ï¼Œè¿™æ ·ä¸€æ¥ï¼Œå‹ç¼©åçš„å­—ç¬¦ä¸²ä¸º &quot;a3c3&quot; ï¼Œé•¿åº¦æ˜¯ 4 ã€‚</code></pre><p>ç¤ºä¾‹ 2ï¼š</p><pre><code>è¾“å…¥ï¼šs = &quot;aabbaa&quot;, k = 2è¾“å‡ºï¼š2è§£é‡Šï¼šå¦‚æœåˆ å»ä¸¤ä¸ª &apos;b&apos; å­—ç¬¦ï¼Œé‚£ä¹ˆå‹ç¼©åçš„å­—ç¬¦ä¸²æ˜¯é•¿åº¦ä¸º 2 çš„ &quot;a4&quot; ã€‚</code></pre><p>ç¤ºä¾‹ 3ï¼š</p><pre><code>è¾“å…¥ï¼šs = &quot;aaaaaaaaaaa&quot;, k = 0è¾“å‡ºï¼š3è§£é‡Šï¼šç”±äº k ç­‰äº 0 ï¼Œä¸èƒ½åˆ å»ä»»ä½•å­—ç¬¦ã€‚å‹ç¼©åçš„å­—ç¬¦ä¸²æ˜¯ &quot;a11&quot; ï¼Œé•¿åº¦ä¸º 3 ã€‚</code></pre><p>æç¤ºï¼š</p><pre><code>1 &lt;= s.length &lt;= 1000 &lt;= k &lt;= s.lengths ä»…åŒ…å«å°å†™è‹±æ–‡å­—æ¯</code></pre><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æœ¬é¢˜éš¾åº¦è¾ƒå¤§ï¼Œé¢˜è§£ä¸­åŒ…å«è¾ƒå¤šå˜é‡ä»¥åŠå…¬å¼ï¼Œå¸Œæœ›è¯»è€…è®¤çœŸé˜…è¯»ã€‚</p><p>ä¸ºäº†å™è¿°æ–¹ä¾¿ï¼Œæˆ‘ä»¬ç§°ç»™å®šçš„å­—ç¬¦ä¸² <em>s</em> ä¸ºã€ŒåŸä¸²ã€ï¼Œå‹ç¼©åçš„å­—ç¬¦ä¸² <em>t</em> ä¸ºã€Œå‹ç¼©ä¸²ã€ã€‚æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ä» <em>s</em> ä¸­åˆ é™¤è‡³å¤š <em>k</em> ä¸ªå­—ç¬¦ï¼Œä½¿å¾—å…¶å¯¹åº”çš„ <em>t</em> çš„é•¿åº¦æœ€å°ã€‚</p><h1 id="æ–¹æ³•ä¸€ï¼šåŠ¨æ€è§„åˆ’"><a href="#æ–¹æ³•ä¸€ï¼šåŠ¨æ€è§„åˆ’" class="headerlink" title="æ–¹æ³•ä¸€ï¼šåŠ¨æ€è§„åˆ’"></a>æ–¹æ³•ä¸€ï¼šåŠ¨æ€è§„åˆ’</h1><p><strong>æ€è·¯ä¸ç®—æ³•</strong><a href="https://leetcode-cn.com/problems/string-compression-ii/solution/ya-suo-zi-fu-chuan-ii-by-leetcode-solution/" target="_blank" rel="noopener">^1</a></p><p><strong>ä»£ç </strong></p><details>    <summary>C++</summary><figure class="highlight c++"><figcaption><span>[sol1-C++]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getLengthOfOptimalCompression</span><span class="params">(<span class="built_in">string</span> s, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">auto</span> calc = [](<span class="keyword">int</span> x) &#123;</span><br><span class="line">            <span class="keyword">if</span> (x == <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (x &lt; <span class="number">10</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (x &lt; <span class="number">100</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">3</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">4</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">int</span> n = s.size();</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; f(n + <span class="number">1</span>, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(k + <span class="number">1</span>, INT_MAX &gt;&gt; <span class="number">1</span>));</span><br><span class="line">        f[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt;= k &amp;&amp; j &lt;= i; ++j) &#123;</span><br><span class="line">                <span class="comment">// æƒ…å†µ1:åˆ é™¤ç¬¬iä¸ªå­—ç¬¦</span></span><br><span class="line">                <span class="keyword">if</span> (j &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                    f[i][j] = f[i - <span class="number">1</span>][j - <span class="number">1</span>];</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// æƒ…å†µ2ï¼šä¿ç•™ç¬¬iä¸ªå­—ç¬¦</span></span><br><span class="line">                <span class="keyword">int</span> same = <span class="number">0</span>, diff = <span class="number">0</span>;</span><br><span class="line">                <span class="comment">//å‘å‰éå†ä¸ç¬¬iä¸ªå­—ç¬¦ç›¸åŒçš„å­—ç¬¦åˆ™è€ƒè™‘ä¿ç•™</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i0 = i; i0 &gt;= <span class="number">1</span> &amp;&amp; diff &lt;= j; --i0) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (s[i0 - <span class="number">1</span>] == s[i - <span class="number">1</span>]) &#123;</span><br><span class="line">                        ++same;</span><br><span class="line">                        f[i][j] = min(f[i][j], f[i0 - <span class="number">1</span>][j - diff] + calc(same));</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        ++diff;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> f[n][k];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></details><details>    <summary>Java</summary><figure class="highlight java"><figcaption><span>[sol1-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getLengthOfOptimalCompression</span><span class="params">(String s, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = s.length();</span><br><span class="line">        <span class="keyword">int</span>[][] f = <span class="keyword">new</span> <span class="keyword">int</span>[n + <span class="number">1</span>][k + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            <span class="comment">//é˜²æ­¢åé¢f[i0 - 1][j - diff] + calc(same)æº¢å‡º,æœ€å¤§ä¸ºInteger.MAX_VALUE - 3</span></span><br><span class="line">            Arrays.fill(f[i], Integer.MAX_VALUE - <span class="number">3</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        f[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt;= k &amp;&amp; j &lt;= i; j++) &#123;</span><br><span class="line">                <span class="comment">//???</span></span><br><span class="line">                <span class="keyword">if</span> (j &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                    f[i][j] = f[i - <span class="number">1</span>][j - <span class="number">1</span>];</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">int</span> same = <span class="number">0</span>, diff = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i0 = i; i0 &gt;= <span class="number">1</span> &amp;&amp; diff &lt;= j; i0--) &#123;</span><br><span class="line">                    <span class="comment">//ä¸ºäº†æ–¹ä¾¿å¯¹è¾¹ç•Œæ¡ä»¶è¿›è¡Œå¤„ç†ï¼Œè¿™é‡Œçš„ iå’Œ j éƒ½ä» 1 å¼€å§‹ç¼–å·ï¼Œä½†åœ¨å­—ç¬¦ä¸²ä¸­ä»ç„¶ä»0å¼€å§‹</span></span><br><span class="line">                    <span class="keyword">if</span> (s.charAt(i0 - <span class="number">1</span>) == s.charAt(i - <span class="number">1</span>)) &#123;</span><br><span class="line">                        ++same;</span><br><span class="line">                        f[i][j] = Math.min(f[i][j], f[i0 - <span class="number">1</span>][j - diff] + calc(same));</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        diff++;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[n][k];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">calc</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (x == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (x &lt; <span class="number">10</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (x &lt; <span class="number">100</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">3</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">4</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>Python3</summary><figure class="highlight python"><figcaption><span>[sol1-Python3]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getLengthOfOptimalCompression</span><span class="params">(self, s: str, k: int)</span> -&gt; int:</span></span><br><span class="line">        calc = <span class="keyword">lambda</span> x: <span class="number">1</span> <span class="keyword">if</span> x == <span class="number">1</span> <span class="keyword">else</span> (<span class="number">2</span> <span class="keyword">if</span> x &lt; <span class="number">10</span> <span class="keyword">else</span> (<span class="number">3</span> <span class="keyword">if</span> x &lt; <span class="number">100</span> <span class="keyword">else</span> <span class="number">4</span>))</span><br><span class="line"></span><br><span class="line">        n = len(s)</span><br><span class="line">        f = [[<span class="number">10</span>**<span class="number">9</span>] * (k + <span class="number">1</span>) <span class="keyword">for</span> _ <span class="keyword">in</span> range(n + <span class="number">1</span>)]</span><br><span class="line">        f[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, n + <span class="number">1</span>):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(min(k, i) + <span class="number">1</span>):</span><br><span class="line">                <span class="keyword">if</span> j &gt; <span class="number">0</span>:</span><br><span class="line">                    f[i][j] = f[i - <span class="number">1</span>][j - <span class="number">1</span>]</span><br><span class="line">                same = diff = <span class="number">0</span></span><br><span class="line">                <span class="keyword">for</span> i0 <span class="keyword">in</span> range(i, <span class="number">0</span>, <span class="number">-1</span>):</span><br><span class="line">                    <span class="keyword">if</span> s[i0 - <span class="number">1</span>] == s[i - <span class="number">1</span>]:</span><br><span class="line">                        same += <span class="number">1</span></span><br><span class="line">                        f[i][j] = min(f[i][j], f[i0 - <span class="number">1</span>][j - diff] + calc(same))</span><br><span class="line">                    <span class="keyword">else</span>:</span><br><span class="line">                        diff += <span class="number">1</span></span><br><span class="line">                        <span class="keyword">if</span> diff &gt; j:</span><br><span class="line">                            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">return</span> f[n][k]</span><br></pre></td></tr></table></figure></details><details>    <summary>C</summary><figure class="highlight c"><figcaption><span>[sol1-C]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">calc</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (x &lt; <span class="number">10</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (x &lt; <span class="number">100</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">3</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">4</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">getLengthOfOptimalCompression</span><span class="params">(<span class="keyword">char</span>* s, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = <span class="built_in">strlen</span>(s);</span><br><span class="line">    <span class="keyword">int</span> f[n + <span class="number">1</span>][k + <span class="number">1</span>];</span><br><span class="line">    <span class="built_in">memset</span>(f, <span class="number">0x3f</span>, <span class="keyword">sizeof</span>(f));</span><br><span class="line">    f[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt;= k &amp;&amp; j &lt;= i; ++j) &#123;</span><br><span class="line">            <span class="keyword">if</span> (j &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                f[i][j] = f[i - <span class="number">1</span>][j - <span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">int</span> same = <span class="number">0</span>, diff = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i0 = i; i0 &gt;= <span class="number">1</span> &amp;&amp; diff &lt;= j; --i0) &#123;</span><br><span class="line">                <span class="keyword">if</span> (s[i0 - <span class="number">1</span>] == s[i - <span class="number">1</span>]) &#123;</span><br><span class="line">                    ++same;</span><br><span class="line">                    f[i][j] = fmin(f[i][j], f[i0 - <span class="number">1</span>][j - diff] + calc(same));</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    ++diff;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> f[n][k];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><p><strong>å¤æ‚åº¦åˆ†æ</strong></p><ul><li><p>æ—¶é—´å¤æ‚åº¦ï¼šO(|s|^2k)ï¼Œå…¶ä¸­ <em>|s|</em> æ˜¯åŸä¸² <em>s</em> çš„é•¿åº¦ã€‚åŠ¨æ€è§„åˆ’ä¸­çŠ¶æ€çš„æ•°ç›®ä¸º O(|s|k)ï¼Œæ¯ä¸€ä¸ªçŠ¶æ€éœ€è¦ O(|s|) çš„æ—¶é—´è¿›è¡Œè½¬ç§»ï¼Œç›¸ä¹˜å³å¯å¾—åˆ°æ€»æ—¶é—´å¤æ‚åº¦ã€‚</p></li><li><p>ç©ºé—´å¤æ‚åº¦ï¼šO(|s|k)ï¼Œå³ä¸ºåŠ¨æ€è§„åˆ’ä¸­çŠ¶æ€çš„æ•°ç›®ã€‚</p></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è¯·ä½ è¿”å›åˆ é™¤æœ€å¤škä¸ªå­—ç¬¦åï¼Œsè¡Œç¨‹é•¿åº¦ç¼–ç çš„æœ€å°é•¿åº¦ ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="2021å¹´10æœˆ" scheme="http://yoursite.com/categories/2021%E5%B9%B410%E6%9C%88/"/>
    
    
      <category term="LeetCode" scheme="http://yoursite.com/tags/LeetCode/"/>
    
      <category term="String" scheme="http://yoursite.com/tags/String/"/>
    
      <category term="Dynamic Programming" scheme="http://yoursite.com/tags/Dynamic-Programming/"/>
    
  </entry>
  
  <entry>
    <title>443. å‹ç¼©å­—ç¬¦ä¸²</title>
    <link href="http://yoursite.com/2021/10/25/443.%20%E5%8E%8B%E7%BC%A9%E5%AD%97%E7%AC%A6%E4%B8%B2/"/>
    <id>http://yoursite.com/2021/10/25/443. å‹ç¼©å­—ç¬¦ä¸²/</id>
    <published>2021-10-25T06:12:12.000Z</published>
    <updated>2021-10-25T09:08:02.616Z</updated>
    
    <content type="html"><![CDATA[<p>ç»™ä½ ä¸€ä¸ªå­—ç¬¦æ•°ç»„ chars ï¼Œè¯·ä½¿ç”¨ä¸‹è¿°ç®—æ³•å‹ç¼©</p><a id="more"></a><p>[TOC]</p><p>ä»ä¸€ä¸ªç©ºå­—ç¬¦ä¸² s å¼€å§‹ã€‚å¯¹äº chars ä¸­çš„æ¯ç»„ è¿ç»­é‡å¤å­—ç¬¦ ï¼š</p><p>å¦‚æœè¿™ä¸€ç»„é•¿åº¦ä¸º 1 ï¼Œåˆ™å°†å­—ç¬¦è¿½åŠ åˆ° s ä¸­ã€‚<br>å¦åˆ™ï¼Œéœ€è¦å‘ s è¿½åŠ å­—ç¬¦ï¼Œåè·Ÿè¿™ä¸€ç»„çš„é•¿åº¦ã€‚<br>å‹ç¼©åå¾—åˆ°çš„å­—ç¬¦ä¸² s ä¸åº”è¯¥ç›´æ¥è¿”å› ï¼Œéœ€è¦è½¬å‚¨åˆ°å­—ç¬¦æ•°ç»„ chars ä¸­ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœç»„é•¿åº¦ä¸º 10 æˆ– 10 ä»¥ä¸Šï¼Œåˆ™åœ¨ chars æ•°ç»„ä¸­ä¼šè¢«æ‹†åˆ†ä¸ºå¤šä¸ªå­—ç¬¦ã€‚</p><p>è¯·åœ¨ ä¿®æ”¹å®Œè¾“å…¥æ•°ç»„å ï¼Œè¿”å›è¯¥æ•°ç»„çš„æ–°é•¿åº¦ã€‚</p><p>ä½ å¿…é¡»è®¾è®¡å¹¶å®ç°ä¸€ä¸ªåªä½¿ç”¨å¸¸é‡é¢å¤–ç©ºé—´çš„ç®—æ³•æ¥è§£å†³æ­¤é—®é¢˜ã€‚</p><p>ç¤ºä¾‹ 1ï¼š</p><pre><code>è¾“å…¥ï¼šchars = [&quot;a&quot;,&quot;a&quot;,&quot;b&quot;,&quot;b&quot;,&quot;c&quot;,&quot;c&quot;,&quot;c&quot;]è¾“å‡ºï¼šè¿”å› 6 ï¼Œè¾“å…¥æ•°ç»„çš„å‰ 6 ä¸ªå­—ç¬¦åº”è¯¥æ˜¯ï¼š[&quot;a&quot;,&quot;2&quot;,&quot;b&quot;,&quot;2&quot;,&quot;c&quot;,&quot;3&quot;]è§£é‡Šï¼š&quot;aa&quot; è¢« &quot;a2&quot; æ›¿ä»£ã€‚&quot;bb&quot; è¢« &quot;b2&quot; æ›¿ä»£ã€‚&quot;ccc&quot; è¢« &quot;c3&quot; æ›¿ä»£ã€‚</code></pre><p>ç¤ºä¾‹ 2ï¼š</p><pre><code>è¾“å…¥ï¼šchars = [&quot;a&quot;]è¾“å‡ºï¼šè¿”å› 1 ï¼Œè¾“å…¥æ•°ç»„çš„å‰ 1 ä¸ªå­—ç¬¦åº”è¯¥æ˜¯ï¼š[&quot;a&quot;]è§£é‡Šï¼šæ²¡æœ‰ä»»ä½•å­—ç¬¦ä¸²è¢«æ›¿ä»£ã€‚</code></pre><p>ç¤ºä¾‹ 3ï¼š</p><pre><code>è¾“å…¥ï¼šchars = [&quot;a&quot;,&quot;b&quot;,&quot;b&quot;,&quot;b&quot;,&quot;b&quot;,&quot;b&quot;,&quot;b&quot;,&quot;b&quot;,&quot;b&quot;,&quot;b&quot;,&quot;b&quot;,&quot;b&quot;,&quot;b&quot;]è¾“å‡ºï¼šè¿”å› 4 ï¼Œè¾“å…¥æ•°ç»„çš„å‰ 4 ä¸ªå­—ç¬¦åº”è¯¥æ˜¯ï¼š[&quot;a&quot;,&quot;b&quot;,&quot;1&quot;,&quot;2&quot;]ã€‚è§£é‡Šï¼šç”±äºå­—ç¬¦ &quot;a&quot; ä¸é‡å¤ï¼Œæ‰€ä»¥ä¸ä¼šè¢«å‹ç¼©ã€‚&quot;bbbbbbbbbbbb&quot; è¢« â€œb12â€ æ›¿ä»£ã€‚æ³¨æ„æ¯ä¸ªæ•°å­—åœ¨æ•°ç»„ä¸­éƒ½æœ‰å®ƒè‡ªå·±çš„ä½ç½®ã€‚</code></pre><p>æç¤ºï¼š</p><pre><code>1 &lt;= chars.length &lt;= 2000chars[i] å¯ä»¥æ˜¯å°å†™è‹±æ–‡å­—æ¯ã€å¤§å†™è‹±æ–‡å­—æ¯ã€æ•°å­—æˆ–ç¬¦å·</code></pre><h1 id="æ–¹æ³•ä¸€ï¼šåŒæŒ‡é’ˆ"><a href="#æ–¹æ³•ä¸€ï¼šåŒæŒ‡é’ˆ" class="headerlink" title="æ–¹æ³•ä¸€ï¼šåŒæŒ‡é’ˆ"></a>æ–¹æ³•ä¸€ï¼šåŒæŒ‡é’ˆ</h1><p><strong>æ€è·¯å’Œç®—æ³•</strong></p><p>ä¸ºäº†å®ç°åŸåœ°å‹ç¼©ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åŒæŒ‡é’ˆåˆ†åˆ«æ ‡å¿—æˆ‘ä»¬åœ¨å­—ç¬¦ä¸²ä¸­è¯»å’Œå†™çš„ä½ç½®ã€‚æ¯æ¬¡å½“è¯»æŒ‡é’ˆread ç§»åŠ¨åˆ°æŸä¸€æ®µè¿ç»­ç›¸åŒå­ä¸²çš„æœ€å³ä¾§ï¼Œæˆ‘ä»¬å°±åœ¨å†™æŒ‡é’ˆ write å¤„ä¾æ¬¡å†™å…¥è¯¥å­ä¸²å¯¹åº”çš„å­—ç¬¦å’Œå­ä¸²é•¿åº¦å³å¯ã€‚</p><p>åœ¨å®é™…ä»£ç ä¸­ï¼Œå½“è¯»æŒ‡é’ˆä½äºå­—ç¬¦ä¸²çš„æœ«å°¾ï¼Œæˆ–è¯»æŒ‡é’ˆæŒ‡å‘çš„å­—ç¬¦ä¸åŒäºä¸‹ä¸€ä¸ªå­—ç¬¦æ—¶ï¼Œæˆ‘ä»¬å°±è®¤ä¸ºè¯»æŒ‡é’ˆä½äºæŸä¸€æ®µè¿ç»­ç›¸åŒå­ä¸²çš„æœ€å³ä¾§ã€‚è¯¥å­ä¸²å¯¹åº”çš„å­—ç¬¦å³ä¸ºè¯»æŒ‡é’ˆæŒ‡å‘çš„å­—ç¬¦ä¸²ã€‚æˆ‘ä»¬ä½¿ç”¨å˜é‡è®°å½•è¯¥å­ä¸²çš„æœ€å·¦ä¾§çš„ä½ç½®ï¼Œè¿™æ ·å­ä¸²é•¿åº¦å³ä¸ºread-left+1 ã€‚</p><p>ç‰¹åˆ«åœ°ï¼Œä¸ºäº†è¾¾åˆ° <em>O(1)</em> ç©ºé—´å¤æ‚åº¦ï¼Œæˆ‘ä»¬éœ€è¦è‡ªè¡Œå®ç°å°†æ•°å­—è½¬åŒ–ä¸ºå­—ç¬¦ä¸²å†™å…¥åˆ°åŸå­—ç¬¦ä¸²çš„åŠŸèƒ½ã€‚è¿™é‡Œæˆ‘ä»¬é‡‡ç”¨çŸ­é™¤æ³•å°†å­ä¸²é•¿åº¦å€’åºå†™å…¥åŸå­—ç¬¦ä¸²ä¸­ï¼Œç„¶åå†å°†å…¶åè½¬å³å¯ã€‚</p><p><strong>ä»£ç </strong></p><details>    <summary>C++</summary><figure class="highlight c++"><figcaption><span>[sol1-C++]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">compress</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt;&amp; chars)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = chars.size();</span><br><span class="line">        <span class="keyword">int</span> write = <span class="number">0</span>, left = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> read = <span class="number">0</span>; read &lt; n; read++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (read == n - <span class="number">1</span> || chars[read] != chars[read + <span class="number">1</span>]) &#123;</span><br><span class="line">                chars[write++] = chars[read];</span><br><span class="line">                <span class="keyword">int</span> num = read - left + <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">if</span> (num &gt; <span class="number">1</span>) &#123;</span><br><span class="line">                    <span class="keyword">int</span> anchor = write;</span><br><span class="line">                    <span class="keyword">while</span> (num &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                        chars[write++] = num % <span class="number">10</span> + <span class="string">'0'</span>;</span><br><span class="line">                        num /= <span class="number">10</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    reverse(&amp;chars[anchor], &amp;chars[write]);</span><br><span class="line">                &#125;</span><br><span class="line">                left = read + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> write;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></details><details>    <summary>Java</summary><figure class="highlight java"><figcaption><span>[sol1-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compress</span><span class="params">(<span class="keyword">char</span>[] chars)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = chars.length;</span><br><span class="line">        <span class="keyword">int</span> write = <span class="number">0</span>, left = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> read = <span class="number">0</span>; read &lt; n; read++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (read == n - <span class="number">1</span> || chars[read] != chars[read + <span class="number">1</span>]) &#123;</span><br><span class="line">                <span class="comment">//ä¸ºäº†è®°å½•æ–°è¿ç»­å­—ç¬¦ä¸²å­—ç¬¦å†…å®¹ï¼Œè¦†ç›–åŸæœ‰è®°å½•</span></span><br><span class="line">                chars[write++] = chars[read];</span><br><span class="line">                <span class="keyword">int</span> num = read - left + <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">if</span> (num &gt; <span class="number">1</span>) &#123;</span><br><span class="line">                    <span class="comment">//æ•°å­—çš„èµ·ç‚¹ä½ç½®</span></span><br><span class="line">                    <span class="keyword">int</span> anchor = write;</span><br><span class="line">                    <span class="keyword">while</span> (num &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                        <span class="comment">//æ•°å­—ä»å³åˆ°å·¦å†™å…¥å­—ç¬¦æ•°ç»„ä¸­</span></span><br><span class="line">                        chars[write++] = (<span class="keyword">char</span>) (num % <span class="number">10</span> + <span class="string">'0'</span>);</span><br><span class="line">                        num /= <span class="number">10</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">//å°†æ•°å­—å€’è½¬è¿‡æ¥</span></span><br><span class="line">                    reverse(chars, anchor, write - <span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                left = read + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> write;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">reverse</span><span class="params">(<span class="keyword">char</span>[] chars, <span class="keyword">int</span> left, <span class="keyword">int</span> right)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (left &lt; right) &#123;</span><br><span class="line">            <span class="keyword">char</span> temp = chars[left];</span><br><span class="line">            chars[left] = chars[right];</span><br><span class="line">            chars[right] = temp;</span><br><span class="line">            left++;</span><br><span class="line">            right--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>C#</summary><figure class="highlight plain"><figcaption><span>[sol1-C#]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">public class Solution &#123;</span><br><span class="line">    public int Compress(char[] chars) &#123;</span><br><span class="line">        int n = chars.Length;</span><br><span class="line">        int write = 0, left = 0;</span><br><span class="line">        for (int read = 0; read &lt; n; read++) &#123;</span><br><span class="line">            if (read == n - 1 || chars[read] != chars[read + 1]) &#123;</span><br><span class="line">                chars[write++] = chars[read];</span><br><span class="line">                int num = read - left + 1;</span><br><span class="line">                if (num &gt; 1) &#123;</span><br><span class="line">                    int anchor = write;</span><br><span class="line">                    while (num &gt; 0) &#123;</span><br><span class="line">                        chars[write++] = (char) (num % 10 + &apos;0&apos;);</span><br><span class="line">                        num /= 10;</span><br><span class="line">                    &#125;</span><br><span class="line">                    Reverse(chars, anchor, write - 1);</span><br><span class="line">                &#125;</span><br><span class="line">                left = read + 1;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return write;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void Reverse(char[] chars, int left, int right) &#123;</span><br><span class="line">        while (left &lt; right) &#123;</span><br><span class="line">            char temp = chars[left];</span><br><span class="line">            chars[left] = chars[right];</span><br><span class="line">            chars[right] = temp;</span><br><span class="line">            left++;</span><br><span class="line">            right--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>C</summary><figure class="highlight c"><figcaption><span>[sol1-C]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">char</span> *a, <span class="keyword">char</span> *b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">char</span> t = *a;</span><br><span class="line">    *a = *b, *b = t;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">reverse</span><span class="params">(<span class="keyword">char</span> *a, <span class="keyword">char</span> *b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (a &lt; b) &#123;</span><br><span class="line">        swap(a++, --b);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">compress</span><span class="params">(<span class="keyword">char</span> *chars, <span class="keyword">int</span> charsSize)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> write = <span class="number">0</span>, left = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> read = <span class="number">0</span>; read &lt; charsSize; read++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (read == charsSize - <span class="number">1</span> || chars[read] != chars[read + <span class="number">1</span>]) &#123;</span><br><span class="line">            chars[write++] = chars[read];</span><br><span class="line">            <span class="keyword">int</span> num = read - left + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (num &gt; <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="keyword">int</span> anchor = write;</span><br><span class="line">                <span class="keyword">while</span> (num &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                    chars[write++] = num % <span class="number">10</span> + <span class="string">'0'</span>;</span><br><span class="line">                    num /= <span class="number">10</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                reverse(&amp;chars[anchor], &amp;chars[write]);</span><br><span class="line">            &#125;</span><br><span class="line">            left = read + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> write;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>Python3</summary><figure class="highlight python"><figcaption><span>[sol1-Python3]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">compress</span><span class="params">(self, chars: List[str])</span> -&gt; int:</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">reverse</span><span class="params">(left: int, right: int)</span> -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">            <span class="keyword">while</span> left &lt; right:</span><br><span class="line">                chars[left], chars[right] = chars[right], chars[left]</span><br><span class="line">                left += <span class="number">1</span></span><br><span class="line">                right -= <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        n = len(chars)</span><br><span class="line">        write = left = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> read <span class="keyword">in</span> range(n):</span><br><span class="line">            <span class="keyword">if</span> read == n - <span class="number">1</span> <span class="keyword">or</span> chars[read] != chars[read + <span class="number">1</span>]:</span><br><span class="line">                chars[write] = chars[read]</span><br><span class="line">                write += <span class="number">1</span></span><br><span class="line">                num = read - left + <span class="number">1</span></span><br><span class="line">                <span class="keyword">if</span> num &gt; <span class="number">1</span>:</span><br><span class="line">                    anchor = write</span><br><span class="line">                    <span class="keyword">while</span> num &gt; <span class="number">0</span>:</span><br><span class="line">                        chars[write] = str(num % <span class="number">10</span>)</span><br><span class="line">                        write += <span class="number">1</span></span><br><span class="line">                        num //= <span class="number">10</span></span><br><span class="line">                    reverse(anchor, write - <span class="number">1</span>)</span><br><span class="line">                left = read + <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> write</span><br></pre></td></tr></table></figure></details><details>    <summary>Golang</summary><figure class="highlight go"><figcaption><span>[sol1-Golang]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">compress</span><span class="params">(chars []<span class="keyword">byte</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    write, left := <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> read, ch := <span class="keyword">range</span> chars &#123;</span><br><span class="line">        <span class="keyword">if</span> read == <span class="built_in">len</span>(chars)<span class="number">-1</span> || ch != chars[read+<span class="number">1</span>] &#123;</span><br><span class="line">            chars[write] = ch</span><br><span class="line">            write++</span><br><span class="line">            num := read - left + <span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> num &gt; <span class="number">1</span> &#123;</span><br><span class="line">                anchor := write</span><br><span class="line">                <span class="keyword">for</span> ; num &gt; <span class="number">0</span>; num /= <span class="number">10</span> &#123;</span><br><span class="line">                    chars[write] = <span class="string">'0'</span> + <span class="keyword">byte</span>(num%<span class="number">10</span>)</span><br><span class="line">                    write++</span><br><span class="line">                &#125;</span><br><span class="line">                s := chars[anchor:write]</span><br><span class="line">                <span class="keyword">for</span> i, n := <span class="number">0</span>, <span class="built_in">len</span>(s); i &lt; n/<span class="number">2</span>; i++ &#123;</span><br><span class="line">                    s[i], s[n<span class="number">-1</span>-i] = s[n<span class="number">-1</span>-i], s[i]</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            left = read + <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> write</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>JavaScript</summary><figure class="highlight javascript"><figcaption><span>[sol1-JavaScript]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> compress = <span class="function"><span class="keyword">function</span>(<span class="params">chars</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> n = chars.length;</span><br><span class="line">    <span class="keyword">let</span> write = <span class="number">0</span>, left = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> read = <span class="number">0</span>; read &lt; n; read++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (read === n - <span class="number">1</span> || chars[read] !== chars[read + <span class="number">1</span>]) &#123;</span><br><span class="line">            chars[write++] = chars[read];</span><br><span class="line">            <span class="keyword">let</span> num = read - left + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (num &gt; <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="keyword">const</span> anchor = write;</span><br><span class="line">                <span class="keyword">while</span> (num &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                    chars[write++] = <span class="string">''</span> + num % <span class="number">10</span>;</span><br><span class="line">                    num = <span class="built_in">Math</span>.floor(num / <span class="number">10</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                reverse(chars, anchor, write - <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            left = read + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> write;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> reverse = <span class="function">(<span class="params">chars, left, right</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">while</span> (left &lt; right) &#123;</span><br><span class="line">        <span class="keyword">const</span> temp = chars[left];</span><br><span class="line">        chars[left] = chars[right];</span><br><span class="line">        chars[right] = temp;</span><br><span class="line">        left++;</span><br><span class="line">        right--;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><p><strong>å¤æ‚åº¦åˆ†æ</strong></p><ul><li><p>æ—¶é—´å¤æ‚åº¦ï¼š<em>O(n)*ï¼Œå…¶ä¸­ *n</em> ä¸ºå­—ç¬¦ä¸²é•¿åº¦ï¼Œæˆ‘ä»¬åªéœ€è¦éå†è¯¥å­—ç¬¦ä¸²ä¸€æ¬¡ã€‚</p></li><li><p>ç©ºé—´å¤æ‚åº¦ï¼š<em>O(1)</em>ã€‚æˆ‘ä»¬åªéœ€è¦å¸¸æ•°çš„ç©ºé—´ä¿å­˜è‹¥å¹²å˜é‡ã€‚</p></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç»™ä½ ä¸€ä¸ªå­—ç¬¦æ•°ç»„ chars ï¼Œè¯·ä½¿ç”¨ä¸‹è¿°ç®—æ³•å‹ç¼©&lt;/p&gt;
    
    </summary>
    
      <category term="2021å¹´10æœˆ" scheme="http://yoursite.com/categories/2021%E5%B9%B410%E6%9C%88/"/>
    
    
      <category term="LeetCode" scheme="http://yoursite.com/tags/LeetCode/"/>
    
      <category term="String" scheme="http://yoursite.com/tags/String/"/>
    
      <category term="Two Pointers" scheme="http://yoursite.com/tags/Two-Pointers/"/>
    
  </entry>
  
  <entry>
    <title>338. æ¯”ç‰¹ä½è®¡æ•°</title>
    <link href="http://yoursite.com/2021/10/24/338.%20%E6%AF%94%E7%89%B9%E4%BD%8D%E8%AE%A1%E6%95%B0/"/>
    <id>http://yoursite.com/2021/10/24/338. æ¯”ç‰¹ä½è®¡æ•°/</id>
    <published>2021-10-24T13:12:12.000Z</published>
    <updated>2021-10-24T14:03:05.727Z</updated>
    
    <content type="html"><![CDATA[<p>ç»™ä½ ä¸€ä¸ªæ•´æ•° n ï¼Œå¯¹äº 0 &lt;= i &lt;= n ä¸­çš„æ¯ä¸ª i ï¼Œè®¡ç®—å…¶äºŒè¿›åˆ¶è¡¨ç¤ºä¸­ 1 çš„ä¸ªæ•° ï¼Œè¿”å›ä¸€ä¸ªé•¿åº¦ä¸º n + 1 çš„æ•°ç»„ ans ä½œä¸ºç­”æ¡ˆã€‚</p><a id="more"></a><p>[TOC]</p><p>ç¤ºä¾‹ 1ï¼š</p><p>è¾“å…¥ï¼šn = 2<br>è¾“å‡ºï¼š[0,1,1]<br>è§£é‡Šï¼š<br>0 â€“&gt; 0<br>1 â€“&gt; 1<br>2 â€“&gt; 10<br>ç¤ºä¾‹ 2ï¼š</p><p>è¾“å…¥ï¼šn = 5<br>è¾“å‡ºï¼š[0,1,1,2,1,2]<br>è§£é‡Šï¼š<br>0 â€“&gt; 0<br>1 â€“&gt; 1<br>2 â€“&gt; 10<br>3 â€“&gt; 11<br>4 â€“&gt; 100<br>5 â€“&gt; 101</p><p>æç¤ºï¼š</p><p>0 &lt;= n &lt;= 105</p><p>è¿›é˜¶ï¼š</p><p>å¾ˆå®¹æ˜“å°±èƒ½å®ç°æ—¶é—´å¤æ‚åº¦ä¸º O(n log n) çš„è§£å†³æ–¹æ¡ˆï¼Œä½ å¯ä»¥åœ¨çº¿æ€§æ—¶é—´å¤æ‚åº¦ O(n) å†…ç”¨ä¸€è¶Ÿæ‰«æè§£å†³æ­¤é—®é¢˜å—ï¼Ÿ</p><p>ä½ èƒ½ä¸ä½¿ç”¨ä»»ä½•å†…ç½®å‡½æ•°è§£å†³æ­¤é—®é¢˜å—ï¼Ÿï¼ˆå¦‚ï¼ŒC++ ä¸­çš„ __builtin_popcount ï¼‰</p><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>è¿™é“é¢˜éœ€è¦è®¡ç®—ä» <em>0</em> åˆ° <em>n</em> çš„æ¯ä¸ªæ•´æ•°çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸­çš„ <em>1</em> çš„æ•°ç›®ã€‚</p><p>éƒ¨åˆ†ç¼–ç¨‹è¯­è¨€æœ‰ç›¸åº”çš„å†…ç½®å‡½æ•°ç”¨äºè®¡ç®—ç»™å®šçš„æ•´æ•°çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸­çš„ <em>1</em> çš„æ•°ç›®ï¼Œä¸‹åˆ—å„ç§æ–¹æ³•å‡ä¸ºä¸ä½¿ç”¨å†…ç½®å‡½æ•°çš„è§£æ³•ã€‚</p><p>ä¸ºäº†è¡¨è¿°ç®€æ´ï¼Œä¸‹æ–‡ç”¨ã€Œä¸€æ¯”ç‰¹æ•°ã€è¡¨ç¤ºäºŒè¿›åˆ¶è¡¨ç¤ºä¸­çš„ <em>1</em> çš„æ•°ç›®ã€‚</p><p>å‚è€ƒ<a href="https://leetcode-cn.com/problems/counting-bits/solution/bi-te-wei-ji-shu-by-leetcode-solution-0t1i/" target="_blank" rel="noopener">^1</a></p><h1 id="æ–¹æ³•ä¸€ï¼šBrianKernighan-ç®—æ³•"><a href="#æ–¹æ³•ä¸€ï¼šBrianKernighan-ç®—æ³•" class="headerlink" title="æ–¹æ³•ä¸€ï¼šBrianKernighan  ç®—æ³•"></a>æ–¹æ³•ä¸€ï¼šBrianKernighan  ç®—æ³•</h1><details>    <summary>Java</summary><figure class="highlight java"><figcaption><span>[sol1-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] countBits(<span class="keyword">int</span> n) &#123;</span><br><span class="line">        <span class="keyword">int</span>[] bits = <span class="keyword">new</span> <span class="keyword">int</span>[n + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            bits[i] = countOnes(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> bits;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">countOnes</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> ones = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (x &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            x &amp;= (x - <span class="number">1</span>);</span><br><span class="line">            ones++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ones;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>JavaScript</summary><figure class="highlight javascript"><figcaption><span>[sol1-JavaScript]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> countBits = <span class="function"><span class="keyword">function</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> bits = <span class="keyword">new</span> <span class="built_in">Array</span>(n + <span class="number">1</span>).fill(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        bits[i] = countOnes(i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> bits</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> countOnes = <span class="function">(<span class="params">x</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> ones = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (x &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        x &amp;= (x - <span class="number">1</span>);</span><br><span class="line">        ones++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ones;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>Golang</summary><figure class="highlight go"><figcaption><span>[sol1-Golang]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">onesCount</span><span class="params">(x <span class="keyword">int</span>)</span> <span class="params">(ones <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">for</span> ; x &gt; <span class="number">0</span>; x &amp;= x - <span class="number">1</span> &#123;</span><br><span class="line">        ones++</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">countBits</span><span class="params">(n <span class="keyword">int</span>)</span> []<span class="title">int</span></span> &#123;</span><br><span class="line">    bits := <span class="built_in">make</span>([]<span class="keyword">int</span>, n+<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">for</span> i := <span class="keyword">range</span> bits &#123;</span><br><span class="line">        bits[i] = onesCount(i)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> bits</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>Python3</summary><figure class="highlight python"><figcaption><span>[sol1-Python3]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">countBits</span><span class="params">(self, n: int)</span> -&gt; List[int]:</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">countOnes</span><span class="params">(x: int)</span> -&gt; int:</span></span><br><span class="line">            ones = <span class="number">0</span></span><br><span class="line">            <span class="keyword">while</span> x &gt; <span class="number">0</span>:</span><br><span class="line">                x &amp;= (x - <span class="number">1</span>)</span><br><span class="line">                ones += <span class="number">1</span></span><br><span class="line">            <span class="keyword">return</span> ones</span><br><span class="line">        </span><br><span class="line">        bits = [countOnes(i) <span class="keyword">for</span> i <span class="keyword">in</span> range(n + <span class="number">1</span>)]</span><br><span class="line">        <span class="keyword">return</span> bits</span><br></pre></td></tr></table></figure></details><details>    <summary>C++</summary><figure class="highlight c++"><figcaption><span>[sol1-C++]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">countOnes</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> ones = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (x &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            x &amp;= (x - <span class="number">1</span>);</span><br><span class="line">            ones++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ones;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; countBits(<span class="keyword">int</span> n) &#123;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; bits(n + <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            bits[i] = countOnes(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> bits;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></details><details>    <summary>C</summary><figure class="highlight c"><figcaption><span>[sol1-C]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">countOnes</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> ones = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (x &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        x &amp;= (x - <span class="number">1</span>);</span><br><span class="line">        ones++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ones;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span>* <span class="title">countBits</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span>* returnSize)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span>* bits = <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">int</span>) * (n + <span class="number">1</span>));</span><br><span class="line">    *returnSize = n + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        bits[i] = countOnes(i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> bits;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><p><strong>å¤æ‚åº¦åˆ†æ</strong></p><ul><li><p>æ—¶é—´å¤æ‚åº¦O(nlogn) ã€‚éœ€è¦å¯¹ä» <em>0</em> åˆ° <em>n</em> çš„æ¯ä¸ªæ•´æ•°ä½¿ç”¨è®¡ç®—ã€Œä¸€æ¯”ç‰¹æ•°ã€ï¼Œå¯¹äºæ¯ä¸ªæ•´æ•°è®¡ç®—ã€Œä¸€æ¯”ç‰¹æ•°ã€çš„æ—¶é—´éƒ½ä¸ä¼šè¶…è¿‡O(logn)ã€‚</p></li><li><p>ç©ºé—´å¤æ‚åº¦ï¼š<em>O(1)</em>ã€‚é™¤äº†è¿”å›çš„æ•°ç»„ä»¥å¤–ï¼Œç©ºé—´å¤æ‚åº¦ä¸ºå¸¸æ•°ã€‚</p></li></ul><h1 id="æ–¹æ³•äºŒï¼šåŠ¨æ€è§„åˆ’â€”â€”æœ€é«˜æœ‰æ•ˆä½"><a href="#æ–¹æ³•äºŒï¼šåŠ¨æ€è§„åˆ’â€”â€”æœ€é«˜æœ‰æ•ˆä½" class="headerlink" title="æ–¹æ³•äºŒï¼šåŠ¨æ€è§„åˆ’â€”â€”æœ€é«˜æœ‰æ•ˆä½"></a>æ–¹æ³•äºŒï¼šåŠ¨æ€è§„åˆ’â€”â€”æœ€é«˜æœ‰æ•ˆä½</h1><details>    <summary>Java</summary><figure class="highlight java"><figcaption><span>[sol2-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] countBits(<span class="keyword">int</span> n) &#123;</span><br><span class="line">        <span class="keyword">int</span>[] bits = <span class="keyword">new</span> <span class="keyword">int</span>[n + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">int</span> highBit = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> ((i &amp; (i - <span class="number">1</span>)) == <span class="number">0</span>) &#123;</span><br><span class="line">                highBit = i;</span><br><span class="line">            &#125;</span><br><span class="line">            bits[i] = bits[i - highBit] + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> bits;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>JavaScript</summary><figure class="highlight javascript"><figcaption><span>[sol2-JavaScript]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> countBits = <span class="function"><span class="keyword">function</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> bits = <span class="keyword">new</span> <span class="built_in">Array</span>(n + <span class="number">1</span>).fill(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">let</span> highBit = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> ((i &amp; (i - <span class="number">1</span>)) == <span class="number">0</span>) &#123;</span><br><span class="line">            highBit = i;</span><br><span class="line">        &#125;</span><br><span class="line">        bits[i] = bits[i - highBit] + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> bits;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></details><details>    <summary>Golang</summary><figure class="highlight go"><figcaption><span>[sol2-Golang]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">countBits</span><span class="params">(n <span class="keyword">int</span>)</span> []<span class="title">int</span></span> &#123;</span><br><span class="line">    bits := <span class="built_in">make</span>([]<span class="keyword">int</span>, n+<span class="number">1</span>)</span><br><span class="line">    highBit := <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= n; i++ &#123;</span><br><span class="line">        <span class="keyword">if</span> i&amp;(i<span class="number">-1</span>) == <span class="number">0</span> &#123;</span><br><span class="line">            highBit = i</span><br><span class="line">        &#125;</span><br><span class="line">        bits[i] = bits[i-highBit] + <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> bits</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>Python3</summary><figure class="highlight python"><figcaption><span>[sol2-Python3]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">countBits</span><span class="params">(self, n: int)</span> -&gt; List[int]:</span></span><br><span class="line">        bits = [<span class="number">0</span>]</span><br><span class="line">        highBit = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, n + <span class="number">1</span>):</span><br><span class="line">            <span class="keyword">if</span> i &amp; (i - <span class="number">1</span>) == <span class="number">0</span>:</span><br><span class="line">                highBit = i</span><br><span class="line">            bits.append(bits[i - highBit] + <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> bits</span><br></pre></td></tr></table></figure></details><details>    <summary>C++</summary><figure class="highlight c++"><figcaption><span>[sol2-C++]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; countBits(<span class="keyword">int</span> n) &#123;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; bits(n + <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">int</span> highBit = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> ((i &amp; (i - <span class="number">1</span>)) == <span class="number">0</span>) &#123;</span><br><span class="line">                highBit = i;</span><br><span class="line">            &#125;</span><br><span class="line">            bits[i] = bits[i - highBit] + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> bits;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></details><details>    <summary>C</summary><figure class="highlight c"><figcaption><span>[sol2-C]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span>* <span class="title">countBits</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span>* returnSize)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span>* bits = <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">int</span>) * (n + <span class="number">1</span>));</span><br><span class="line">    *returnSize = n + <span class="number">1</span>;</span><br><span class="line">    bits[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> highBit = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> ((i &amp; (i - <span class="number">1</span>)) == <span class="number">0</span>) &#123;</span><br><span class="line">            highBit = i;</span><br><span class="line">        &#125;</span><br><span class="line">        bits[i] = bits[i - highBit] + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> bits;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><p><strong>å¤æ‚åº¦åˆ†æ</strong></p><ul><li><p>æ—¶é—´å¤æ‚åº¦ï¼š<em>O(n)*ã€‚å¯¹äºæ¯ä¸ªæ•´æ•°ï¼Œåªéœ€è¦ *O(1)</em> çš„æ—¶é—´è®¡ç®—ã€Œä¸€æ¯”ç‰¹æ•°ã€ã€‚</p></li><li><p>ç©ºé—´å¤æ‚åº¦ï¼š<em>O(1)</em>ã€‚é™¤äº†è¿”å›çš„æ•°ç»„ä»¥å¤–ï¼Œç©ºé—´å¤æ‚åº¦ä¸ºå¸¸æ•°ã€‚</p></li></ul><h1 id="æ–¹æ³•ä¸‰ï¼šåŠ¨æ€è§„åˆ’â€”â€”æœ€ä½æœ‰æ•ˆä½"><a href="#æ–¹æ³•ä¸‰ï¼šåŠ¨æ€è§„åˆ’â€”â€”æœ€ä½æœ‰æ•ˆä½" class="headerlink" title="æ–¹æ³•ä¸‰ï¼šåŠ¨æ€è§„åˆ’â€”â€”æœ€ä½æœ‰æ•ˆä½"></a>æ–¹æ³•ä¸‰ï¼šåŠ¨æ€è§„åˆ’â€”â€”æœ€ä½æœ‰æ•ˆä½</h1><p>æ–¹æ³•äºŒéœ€è¦å®æ—¶ç»´æŠ¤æœ€é«˜æœ‰æ•ˆä½ï¼Œå½“éå†åˆ°çš„æ•°æ˜¯ <em>2</em> çš„æ•´æ•°æ¬¡å¹‚æ—¶ï¼Œéœ€è¦æ›´æ–°æœ€é«˜æœ‰æ•ˆä½ã€‚å¦‚æœå†æ¢ä¸€ä¸ªæ€è·¯ï¼Œå¯ä»¥ä½¿ç”¨ã€Œæœ€ä½æœ‰æ•ˆä½ã€è®¡ç®—ã€Œä¸€æ¯”ç‰¹æ•°ã€ã€‚</p><p>å¯¹äºæ­£æ•´æ•° <em>x</em>ï¼Œå°†å…¶äºŒè¿›åˆ¶è¡¨ç¤ºå³ç§»ä¸€ä½ï¼Œç­‰ä»·äºå°†å…¶äºŒè¿›åˆ¶è¡¨ç¤ºçš„æœ€ä½ä½å»æ‰ã€‚</p><details>    <summary>Java</summary><figure class="highlight java"><figcaption><span>[sol3-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] countBits(<span class="keyword">int</span> n) &#123;</span><br><span class="line">        <span class="keyword">int</span>[] bits = <span class="keyword">new</span> <span class="keyword">int</span>[n + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            bits[i] = bits[i &gt;&gt; <span class="number">1</span>] + (i &amp; <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> bits;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>JavaScript</summary><figure class="highlight javascript"><figcaption><span>[sol3-JavaScript]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> countBits = <span class="function"><span class="keyword">function</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> bits = <span class="keyword">new</span> <span class="built_in">Array</span>(n + <span class="number">1</span>).fill(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        bits[i] = bits[i &gt;&gt; <span class="number">1</span>] + (i &amp; <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> bits;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></details><details>    <summary>Golang</summary><figure class="highlight go"><figcaption><span>[sol3-Golang]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">countBits</span><span class="params">(n <span class="keyword">int</span>)</span> []<span class="title">int</span></span> &#123;</span><br><span class="line">    bits := <span class="built_in">make</span>([]<span class="keyword">int</span>, n+<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= n; i++ &#123;</span><br><span class="line">        bits[i] = bits[i&gt;&gt;<span class="number">1</span>] + i&amp;<span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> bits</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>Python3</summary><figure class="highlight python"><figcaption><span>[sol3-Python3]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">countBits</span><span class="params">(self, n: int)</span> -&gt; List[int]:</span></span><br><span class="line">        bits = [<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, n + <span class="number">1</span>):</span><br><span class="line">            bits.append(bits[i &gt;&gt; <span class="number">1</span>] + (i &amp; <span class="number">1</span>))</span><br><span class="line">        <span class="keyword">return</span> bits</span><br></pre></td></tr></table></figure></details><details>    <summary>C++</summary><figure class="highlight c++"><figcaption><span>[sol3-C++]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; countBits(<span class="keyword">int</span> n) &#123;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; bits(n + <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            bits[i] = bits[i &gt;&gt; <span class="number">1</span>] + (i &amp; <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> bits;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></details><details>    <summary>C</summary><figure class="highlight c"><figcaption><span>[sol3-C]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span>* <span class="title">countBits</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span>* returnSize)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span>* bits = <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">int</span>) * (n + <span class="number">1</span>));</span><br><span class="line">    *returnSize = n + <span class="number">1</span>;</span><br><span class="line">    bits[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        bits[i] = bits[i &gt;&gt; <span class="number">1</span>] + (i &amp; <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> bits;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><p><strong>å¤æ‚åº¦åˆ†æ</strong></p><ul><li><p>æ—¶é—´å¤æ‚åº¦ï¼š<em>O(n)*ã€‚å¯¹äºæ¯ä¸ªæ•´æ•°ï¼Œåªéœ€è¦ *O(1)</em> çš„æ—¶é—´è®¡ç®—ã€Œä¸€æ¯”ç‰¹æ•°ã€ã€‚</p></li><li><p>ç©ºé—´å¤æ‚åº¦ï¼š<em>O(1)</em>ã€‚é™¤äº†è¿”å›çš„æ•°ç»„ä»¥å¤–ï¼Œç©ºé—´å¤æ‚åº¦ä¸ºå¸¸æ•°ã€‚</p></li></ul><h1 id="æ–¹æ³•å››ï¼šåŠ¨æ€è§„åˆ’â€”â€”æœ€ä½è®¾ç½®ä½"><a href="#æ–¹æ³•å››ï¼šåŠ¨æ€è§„åˆ’â€”â€”æœ€ä½è®¾ç½®ä½" class="headerlink" title="æ–¹æ³•å››ï¼šåŠ¨æ€è§„åˆ’â€”â€”æœ€ä½è®¾ç½®ä½"></a>æ–¹æ³•å››ï¼šåŠ¨æ€è§„åˆ’â€”â€”æœ€ä½è®¾ç½®ä½</h1><p>å®šä¹‰æ­£æ•´æ•° <em>x</em> çš„ã€Œæœ€ä½è®¾ç½®ä½ã€ä¸º <em>x</em> çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸­çš„æœ€ä½çš„ <em>1</em> æ‰€åœ¨ä½ã€‚ä¾‹å¦‚ï¼Œ<em>10</em> çš„äºŒè¿›åˆ¶è¡¨ç¤ºæ˜¯ <em>1010_{(2)}</em>ï¼Œå…¶æœ€ä½è®¾ç½®ä½ä¸º <em>2</em>ï¼Œå¯¹åº”çš„äºŒè¿›åˆ¶è¡¨ç¤ºæ˜¯ <em>10_{(2)}</em>ã€‚</p><p>éå†ä» <em>1</em> åˆ° <em>n</em> çš„æ¯ä¸ªæ­£æ•´æ•° <em>i</em>ï¼Œè®¡ç®— <img src="./p__textit%7Bbits%7D_.png" alt="\textit{bits} ">  çš„å€¼ã€‚æœ€ç»ˆå¾—åˆ°çš„æ•°ç»„ <img src="./p__textit%7Bbits%7D_.png" alt="\textit{bits} ">  å³ä¸ºç­”æ¡ˆã€‚</p><details>    <summary>Java</summary><figure class="highlight java"><figcaption><span>[sol4-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] countBits(<span class="keyword">int</span> n) &#123;</span><br><span class="line">        <span class="keyword">int</span>[] bits = <span class="keyword">new</span> <span class="keyword">int</span>[n + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            bits[i] = bits[i &amp; (i - <span class="number">1</span>)] + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> bits;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>JavaScript</summary><figure class="highlight javascript"><figcaption><span>[sol4-JavaScript]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> countBits = <span class="function"><span class="keyword">function</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> bits = <span class="keyword">new</span> <span class="built_in">Array</span>(n + <span class="number">1</span>).fill(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        bits[i] = bits[i &amp; (i - <span class="number">1</span>)] + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> bits;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></details><details>    <summary>Golang</summary><figure class="highlight go"><figcaption><span>[sol4-Golang]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">countBits</span><span class="params">(n <span class="keyword">int</span>)</span> []<span class="title">int</span></span> &#123;</span><br><span class="line">    bits := <span class="built_in">make</span>([]<span class="keyword">int</span>, n+<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= n; i++ &#123;</span><br><span class="line">        bits[i] = bits[i&amp;(i<span class="number">-1</span>)] + <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> bits</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>Python3</summary><figure class="highlight python"><figcaption><span>[sol4-Python3]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">countBits</span><span class="params">(self, n: int)</span> -&gt; List[int]:</span></span><br><span class="line">        bits = [<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, n + <span class="number">1</span>):</span><br><span class="line">            bits.append(bits[i &amp; (i - <span class="number">1</span>)] + <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> bits</span><br></pre></td></tr></table></figure></details><details>    <summary>C++</summary><figure class="highlight c++"><figcaption><span>[sol4-C++]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; countBits(<span class="keyword">int</span> n) &#123;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; bits(n + <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            bits[i] = bits[i &amp; (i - <span class="number">1</span>)] + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> bits;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></details><details>    <summary>C</summary><figure class="highlight c"><figcaption><span>[sol4-C]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span>* <span class="title">countBits</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span>* returnSize)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span>* bits = <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">int</span>) * (n + <span class="number">1</span>));</span><br><span class="line">    *returnSize = n + <span class="number">1</span>;</span><br><span class="line">    bits[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        bits[i] = bits[i &amp; (i - <span class="number">1</span>)] + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> bits;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><p><strong>å¤æ‚åº¦åˆ†æ</strong></p><ul><li><p>æ—¶é—´å¤æ‚åº¦ï¼š<em>O(n)*ã€‚å¯¹äºæ¯ä¸ªæ•´æ•°ï¼Œåªéœ€è¦ *O(1)</em> çš„æ—¶é—´è®¡ç®—ã€Œä¸€æ¯”ç‰¹æ•°ã€ã€‚</p></li><li><p>ç©ºé—´å¤æ‚åº¦ï¼š<em>O(1)</em>ã€‚é™¤äº†è¿”å›çš„æ•°ç»„ä»¥å¤–ï¼Œç©ºé—´å¤æ‚åº¦ä¸ºå¸¸æ•°ã€‚</p></li></ul><h1 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h1><p>è¿™é“é¢˜è™½ç„¶çœ‹èµ·æ¥ç®€å•ï¼Œä½†åšçš„æ—¶å€™è¿˜æ˜¯æœ‰å‡ ä¸ªå€¼å¾—æ³¨æ„çš„ç‚¹</p><h2 id="åˆ¤æ–­ä¸€ä¸ªæ­£æ•´æ•°æ˜¯ä¸æ˜¯-2-çš„æ•´æ•°æ¬¡å¹‚-i-amp-i-1-0"><a href="#åˆ¤æ–­ä¸€ä¸ªæ­£æ•´æ•°æ˜¯ä¸æ˜¯-2-çš„æ•´æ•°æ¬¡å¹‚-i-amp-i-1-0" class="headerlink" title="åˆ¤æ–­ä¸€ä¸ªæ­£æ•´æ•°æ˜¯ä¸æ˜¯ 2 çš„æ•´æ•°æ¬¡å¹‚(i &amp; (i - 1)) == 0"></a>åˆ¤æ–­ä¸€ä¸ªæ­£æ•´æ•°æ˜¯ä¸æ˜¯ 2 çš„æ•´æ•°æ¬¡å¹‚(i &amp; (i - 1)) == 0</h2><h2 id="ä¸-amp-ç¬¦å·çš„è¿ç®—ä¼˜å…ˆçº§ï¼Œæ³¨æ„åŠ æ‹¬å·-bits-i-bits-i-gt-gt-1-i-amp-1"><a href="#ä¸-amp-ç¬¦å·çš„è¿ç®—ä¼˜å…ˆçº§ï¼Œæ³¨æ„åŠ æ‹¬å·-bits-i-bits-i-gt-gt-1-i-amp-1" class="headerlink" title="ä¸&amp;ç¬¦å·çš„è¿ç®—ä¼˜å…ˆçº§ï¼Œæ³¨æ„åŠ æ‹¬å· bits[i] = bits[i &gt;&gt; 1] + (i &amp; 1);"></a>ä¸&amp;ç¬¦å·çš„è¿ç®—ä¼˜å…ˆçº§ï¼Œæ³¨æ„åŠ æ‹¬å· bits[i] = bits[i &gt;&gt; 1] + (i &amp; 1);</h2>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç»™ä½ ä¸€ä¸ªæ•´æ•° n ï¼Œå¯¹äº 0 &amp;lt;= i &amp;lt;= n ä¸­çš„æ¯ä¸ª i ï¼Œè®¡ç®—å…¶äºŒè¿›åˆ¶è¡¨ç¤ºä¸­ 1 çš„ä¸ªæ•° ï¼Œè¿”å›ä¸€ä¸ªé•¿åº¦ä¸º n + 1 çš„æ•°ç»„ ans ä½œä¸ºç­”æ¡ˆã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="2021å¹´10æœˆ" scheme="http://yoursite.com/categories/2021%E5%B9%B410%E6%9C%88/"/>
    
    
      <category term="LeetCode" scheme="http://yoursite.com/tags/LeetCode/"/>
    
      <category term="Dynamic Programming" scheme="http://yoursite.com/tags/Dynamic-Programming/"/>
    
      <category term="Bit Manipulation" scheme="http://yoursite.com/tags/Bit-Manipulation/"/>
    
  </entry>
  
  <entry>
    <title>262. è¡Œç¨‹å’Œç”¨æˆ·</title>
    <link href="http://yoursite.com/2021/10/21/262.%20%E8%A1%8C%E7%A8%8B%E5%92%8C%E7%94%A8%E6%88%B7/"/>
    <id>http://yoursite.com/2021/10/21/262. è¡Œç¨‹å’Œç”¨æˆ·/</id>
    <published>2021-10-21T11:12:12.000Z</published>
    <updated>2021-10-21T12:16:04.136Z</updated>
    
    <content type="html"><![CDATA[<p>å†™ä¸€æ®µ SQL è¯­å¥æŸ¥å‡º â€œ2013-10-01â€ è‡³ â€œ2013-10-03â€ æœŸé—´éç¦æ­¢ç”¨æˆ·ï¼ˆä¹˜å®¢å’Œå¸æœºéƒ½å¿…é¡»æœªè¢«ç¦æ­¢ï¼‰çš„å–æ¶ˆç‡ã€‚éç¦æ­¢ç”¨æˆ·å³ Ban<br>ned ä¸º No çš„ç”¨æˆ·ï¼Œç¦æ­¢ç”¨æˆ·å³ Banned ä¸º Yes çš„ç”¨æˆ·ã€‚ </p><a id="more"></a><p>[TOC]</p><p>è¡¨ï¼šTrips</p><pre><code>+-------------+----------+| Column Name | Type     |+-------------+----------+| Id          | int      || Client_Id   | int      || Driver_Id   | int      || City_Id     | int      || Status      | enum     || Request_at  | date     |     +-------------+----------+</code></pre><p>Id æ˜¯è¿™å¼ è¡¨çš„ä¸»é”®ã€‚<br>è¿™å¼ è¡¨ä¸­å­˜æ‰€æœ‰å‡ºç§Ÿè½¦çš„è¡Œç¨‹ä¿¡æ¯ã€‚æ¯æ®µè¡Œç¨‹æœ‰å”¯ä¸€ Id ï¼Œå…¶ä¸­ Client_Id å’Œ Driver_Id æ˜¯ Users è¡¨ä¸­ Users_Id çš„å¤–é”®ã€‚<br>Status æ˜¯ä¸€ä¸ªè¡¨ç¤ºè¡Œç¨‹çŠ¶æ€çš„æšä¸¾ç±»å‹ï¼Œæšä¸¾æˆå‘˜ä¸º(â€˜completedâ€™, â€˜cancelled_by_driverâ€™, â€˜cancelled_by_<br>clientâ€™) ã€‚</p><p> è¡¨ï¼šUsers </p><pre><code>+-------------+----------+| Column Name | Type     |+-------------+----------+| Users_Id    | int      || Banned      | enum     || Role        | enum     |+-------------+----------+</code></pre><p>Users_Id æ˜¯è¿™å¼ è¡¨çš„ä¸»é”®ã€‚<br>è¿™å¼ è¡¨ä¸­å­˜æ‰€æœ‰ç”¨æˆ·ï¼Œæ¯ä¸ªç”¨æˆ·éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„ Users_Id ï¼ŒRole æ˜¯ä¸€ä¸ªè¡¨ç¤ºç”¨æˆ·èº«ä»½çš„æšä¸¾ç±»å‹ï¼Œæšä¸¾æˆå‘˜ä¸º (â€˜clientâ€™, â€˜driverâ€™,<br> â€˜partnerâ€™) ã€‚<br>Banned æ˜¯ä¸€ä¸ªè¡¨ç¤ºç”¨æˆ·æ˜¯å¦è¢«ç¦æ­¢çš„æšä¸¾ç±»å‹ï¼Œæšä¸¾æˆå‘˜ä¸º (â€˜Yesâ€™, â€˜Noâ€™) ã€‚</p><p> å†™ä¸€æ®µ SQL è¯­å¥æŸ¥å‡º â€œ2013-10-01â€ è‡³ â€œ2013-10-03â€ æœŸé—´éç¦æ­¢ç”¨æˆ·ï¼ˆä¹˜å®¢å’Œå¸æœºéƒ½å¿…é¡»æœªè¢«ç¦æ­¢ï¼‰çš„å–æ¶ˆç‡ã€‚éç¦æ­¢ç”¨æˆ·å³ Ban<br>ned ä¸º No çš„ç”¨æˆ·ï¼Œç¦æ­¢ç”¨æˆ·å³ Banned ä¸º Yes çš„ç”¨æˆ·ã€‚ </p><p> å–æ¶ˆç‡ çš„è®¡ç®—æ–¹å¼å¦‚ä¸‹ï¼š(è¢«å¸æœºæˆ–ä¹˜å®¢å–æ¶ˆçš„éç¦æ­¢ç”¨æˆ·ç”Ÿæˆçš„è®¢å•æ•°é‡) / (éç¦æ­¢ç”¨æˆ·ç”Ÿæˆçš„è®¢å•æ€»æ•°)ã€‚ </p><p> è¿”å›ç»“æœè¡¨ä¸­çš„æ•°æ®å¯ä»¥æŒ‰ä»»æ„é¡ºåºç»„ç»‡ã€‚å…¶ä¸­å–æ¶ˆç‡ Cancellation Rate éœ€è¦å››èˆäº”å…¥ä¿ç•™ ä¸¤ä½å°æ•° ã€‚ </p><p> æŸ¥è¯¢ç»“æœæ ¼å¼å¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼š </p><p>Trips è¡¨ï¼š</p><pre><code>+----+-----------+-----------+---------+---------------------+------------+| Id | Client_Id | Driver_Id | City_Id | Status              | Request_at |+----+-----------+-----------+---------+---------------------+------------+| 1  | 1         | 10        | 1       | completed           | 2013-10-01 || 2  | 2         | 11        | 1       | cancelled_by_driver | 2013-10-01 || 3  | 3         | 12        | 6       | completed           | 2013-10-01 || 4  | 4         | 13        | 6       | cancelled_by_client | 2013-10-01 || 5  | 1         | 10        | 1       | completed           | 2013-10-02 || 6  | 2         | 11        | 6       | completed           | 2013-10-02 || 7  | 3         | 12        | 6       | completed           | 2013-10-02 || 8  | 2         | 12        | 12      | completed           | 2013-10-03 || 9  | 3         | 10        | 12      | completed           | 2013-10-03 || 10 | 4         | 13        | 12      | cancelled_by_driver | 2013-10-03 |+----+-----------+-----------+---------+---------------------+------------+</code></pre><p>Users è¡¨ï¼š</p><pre><code>+----------+--------+--------+| Users_Id | Banned | Role   |+----------+--------+--------+| 1        | No     | client || 2        | Yes    | client || 3        | No     | client || 4        | No     | client || 10       | No     | driver || 11       | No     | driver || 12       | No     | driver || 13       | No     | driver |+----------+--------+--------+</code></pre><p>Result è¡¨ï¼š</p><pre><code>+------------+-------------------+| Day        | Cancellation Rate |+------------+-------------------+| 2013-10-01 | 0.33              || 2013-10-02 | 0.00              || 2013-10-03 | 0.50              |+------------+-------------------+</code></pre><p>2013-10-01ï¼š</p><ul><li>å…±æœ‰ 4 æ¡è¯·æ±‚ï¼Œå…¶ä¸­ 2 æ¡å–æ¶ˆã€‚</li><li>ç„¶è€Œï¼ŒId=2 çš„è¯·æ±‚æ˜¯ç”±ç¦æ­¢ç”¨æˆ·ï¼ˆUser_Id=2ï¼‰å‘å‡ºçš„ï¼Œæ‰€ä»¥è®¡ç®—æ—¶åº”å½“å¿½ç•¥å®ƒã€‚</li><li>å› æ­¤ï¼Œæ€»å…±æœ‰ 3 æ¡éç¦æ­¢è¯·æ±‚å‚ä¸è®¡ç®—ï¼Œå…¶ä¸­ 1 æ¡å–æ¶ˆã€‚</li><li>å–æ¶ˆç‡ä¸º (1 / 3) = 0.33<br>2013-10-02ï¼š</li><li>å…±æœ‰ 3 æ¡è¯·æ±‚ï¼Œå…¶ä¸­ 0 æ¡å–æ¶ˆã€‚</li><li>ç„¶è€Œï¼ŒId=6 çš„è¯·æ±‚æ˜¯ç”±ç¦æ­¢ç”¨æˆ·å‘å‡ºçš„ï¼Œæ‰€ä»¥è®¡ç®—æ—¶åº”å½“å¿½ç•¥å®ƒã€‚</li><li>å› æ­¤ï¼Œæ€»å…±æœ‰ 2 æ¡éç¦æ­¢è¯·æ±‚å‚ä¸è®¡ç®—ï¼Œå…¶ä¸­ 0 æ¡å–æ¶ˆã€‚</li><li>å–æ¶ˆç‡ä¸º (0 / 2) = 0.00<br>2013-10-03ï¼š</li><li>å…±æœ‰ 3 æ¡è¯·æ±‚ï¼Œå…¶ä¸­ 1 æ¡å–æ¶ˆã€‚</li><li>ç„¶è€Œï¼ŒId=8 çš„è¯·æ±‚æ˜¯ç”±ç¦æ­¢ç”¨æˆ·å‘å‡ºçš„ï¼Œæ‰€ä»¥è®¡ç®—æ—¶åº”å½“å¿½ç•¥å®ƒã€‚</li><li>å› æ­¤ï¼Œæ€»å…±æœ‰ 2 æ¡éç¦æ­¢è¯·æ±‚å‚ä¸è®¡ç®—ï¼Œå…¶ä¸­ 1 æ¡å–æ¶ˆã€‚</li><li>å–æ¶ˆç‡ä¸º (1 / 2) = 0.50</li></ul><p>ç»Ÿè®¡æ¯å¤©éç¦æ­¢ç”¨æˆ·çš„å–æ¶ˆç‡ï¼Œéœ€è¦çŸ¥é“éç¦æ­¢ç”¨æˆ·æœ‰å“ªäº›ï¼Œæ€»è¡Œç¨‹æ•°ï¼Œå–æ¶ˆçš„è¡Œç¨‹æ•°ã€‚</p><h1 id="è§£æ³•ä¸€"><a href="#è§£æ³•ä¸€" class="headerlink" title="è§£æ³•ä¸€"></a>è§£æ³•ä¸€</h1><p>é¦–å…ˆç¡®å®šè¢«ç¦æ­¢ç”¨æˆ·çš„è¡Œç¨‹è®°å½•ï¼Œå†å‰”é™¤è¿™äº›è¡Œç¨‹è®°å½•ã€‚</p><p>è¡Œç¨‹è¡¨ä¸­ï¼Œå­—æ®µ client_id å’Œ driver_idï¼Œéƒ½ä¸ç”¨æˆ·è¡¨ä¸­çš„ users_id å…³è”ã€‚å› æ­¤åªè¦ client_id å’Œ driver_id ä¸­æœ‰ä¸€ä¸ªè¢«ç¦æ­¢äº†ï¼Œæ­¤æ¡è¡Œç¨‹è®°å½•è¦è¢«å‰”é™¤ã€‚</p><p>å…ˆè¯´ä¸€ç§é”™è¯¯çš„æ‰¾å‡ºæ²¡è¢«ç¦æ­¢ç”¨æˆ·è¡Œç¨‹è®°å½•çš„æ–¹æ³•ã€‚æ­¤æ–¹æ³•å¾ˆæœ‰è¿·æƒ‘æ€§ã€‚</p><p>æ€è·¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if (client_id = users_id æˆ– driver_id = users_id) ä¸” users_idæ²¡æœ‰è¢«ç¦æ­¢</span><br><span class="line">&#123;</span><br><span class="line">    æ­¤æ¡è®°å½•æ²¡è¢«ç¦æ­¢ã€‚</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>SQL ä»£ç </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT *</span><br><span class="line">FROM Trips AS T JOIN Users AS U </span><br><span class="line">ON (T.client_id = U.users_id  OR T.driver_id = U.users_id )  AND U.banned =&apos;No&apos;</span><br></pre></td></tr></table></figure><p>ä¹ä¸€çœ‹ï¼Œæ€è·¯æ˜¯å¯¹ã€‚å…¶å®æ˜¯é”™è¯¯çš„ã€‚å› ä¸ºï¼Œæˆ‘ä»¬ä¸çŸ¥è§‰å¾—è‚¯å®šäº†ä¸€ä¸ªå‡è®¾â€”â€” client_id ä¸ driver_id æ˜¯ç›¸åŒçš„ã€‚åªæœ‰å½“ä¸¤è€…ç›¸åŒæ—¶ï¼Œæ‰èƒ½ç”¨æ­¤æ¡ä»¶æ’é™¤è¢«ç¦æ­¢ç”¨æˆ·çš„è¡Œç¨‹è®°å½•ã€‚</p><p>é”™è¯¯çš„ç»“æœï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">+------+-----------+-----------+---------+---------------------+------------+----------+--------+--------+</span><br><span class="line">| Id   | Client_Id | Driver_Id | City_Id | STATUS              | Request_at | Users_Id | Banned | Role   |</span><br><span class="line">+------+-----------+-----------+---------+---------------------+------------+----------+--------+--------+</span><br><span class="line">|    1 |         1 |        10 |       1 | completed           | 2013-10-01 |        1 | No     | client |</span><br><span class="line">|    1 |         1 |        10 |       1 | completed           | 2013-10-01 |       10 | No     | driver |</span><br><span class="line">|    2 |         2 |        11 |       1 | cancelled_by_driver | 2013-10-01 |       11 | No     | driver |</span><br><span class="line">|    3 |         3 |        12 |       6 | completed           | 2013-10-01 |        3 | No     | client |</span><br><span class="line">|    3 |         3 |        12 |       6 | completed           | 2013-10-01 |       12 | No     | driver |</span><br><span class="line">|    4 |         4 |        13 |       6 | cancelled_by_client | 2013-10-01 |        4 | No     | client |</span><br><span class="line">|    4 |         4 |        13 |       6 | cancelled_by_client | 2013-10-01 |       13 | No     | driver |</span><br><span class="line">|    5 |         1 |        10 |       1 | completed           | 2013-10-02 |        1 | No     | client |</span><br><span class="line">|    5 |         1 |        10 |       1 | completed           | 2013-10-02 |       10 | No     | driver |</span><br><span class="line">|    6 |         2 |        11 |       6 | completed           | 2013-10-02 |       11 | No     | driver |</span><br><span class="line">|    7 |         3 |        12 |       6 | completed           | 2013-10-02 |        3 | No     | client |</span><br><span class="line">|    7 |         3 |        12 |       6 | completed           | 2013-10-02 |       12 | No     | driver |</span><br><span class="line">|    8 |         2 |        12 |      12 | completed           | 2013-10-03 |       12 | No     | driver |</span><br><span class="line">|    9 |         3 |        10 |      12 | completed           | 2013-10-03 |        3 | No     | client |</span><br><span class="line">|    9 |         3 |        10 |      12 | completed           | 2013-10-03 |       10 | No     | driver |</span><br><span class="line">|   10 |         4 |        13 |      12 | cancelled_by_driver | 2013-10-03 |        4 | No     | client |</span><br><span class="line">|   10 |         4 |        13 |      12 | cancelled_by_driver | 2013-10-03 |       13 | No     | driver |</span><br><span class="line">+------+-----------+-----------+---------+---------------------+------------+----------+--------+--------+</span><br></pre></td></tr></table></figure><p>ç»“æœä¸­ï¼Œè¢«ç¦æ­¢çš„ users_id = 2ï¼Œå…¶è¡Œç¨‹è®°å½•æ²¡è¢«å‰”é™¤æ‰ã€‚</p><p>æ˜æ˜¾ï¼Œ client_id ä¸ driver_id ä¸ä¸€å®šç›¸åŒ ã€‚</p><p>æ­£ç¡®çš„åšæ³•æ˜¯å¯¹ client_id å’Œ driver_id å„è‡ªå…³è”çš„ users_idï¼ŒåŒæ—¶æ£€æµ‹æ˜¯å¦è¢«ç¦æ­¢ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if (client_id = users_id_1 ä¸” users_id_1æ²¡è¢«ç¦æ­¢ å¹¶ä¸” client_id = users_id_2 ä¸” users_id_2æ²¡è¢«ç¦æ­¢)&#123;</span><br><span class="line">    æ­¤æ¡è®°å½•æ²¡è¢«ç¦æ­¢ã€‚</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>SQL ä»£ç ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT *</span><br><span class="line">FROM Trips AS T</span><br><span class="line">JOIN Users AS U1 ON (T.client_id = U1.users_id AND U1.banned =&apos;No&apos;)</span><br><span class="line">JOIN Users AS U2 ON (T.driver_id = U2.users_id AND U2.banned =&apos;No&apos;)</span><br></pre></td></tr></table></figure><p>åœ¨æ­¤åŸºç¡€ä¸Šï¼ŒæŒ‰æ—¥æœŸåˆ†ç»„ï¼Œç»Ÿè®¡æ¯ç»„çš„ æ€»è¡Œç¨‹æ•°ï¼Œå–æ¶ˆçš„è¡Œç¨‹æ•° ã€‚</p><p>æ¯ç»„çš„æ€»è¡Œç¨‹æ•°ï¼šCOUNT(T.STATUS)ã€‚</p><p>æ¯ç»„çš„å–æ¶ˆçš„è¡Œç¨‹æ•°ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SUM(</span><br><span class="line">IF(T.STATUS = &apos;completed&apos;,0,1)</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>å–æ¶ˆç‡ = æ¯ç»„çš„å–æ¶ˆçš„è¡Œç¨‹æ•° / æ¯ç»„çš„æ€»è¡Œç¨‹æ•°</p><p>å®Œæ•´é€»è¾‘ä¸º:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">SELECT T.request_at AS `Day`, </span><br><span class="line">ROUND(</span><br><span class="line">SUM(</span><br><span class="line">IF(T.STATUS = &apos;completed&apos;,0,1)</span><br><span class="line">)</span><br><span class="line">/ </span><br><span class="line">COUNT(T.STATUS),</span><br><span class="line">2</span><br><span class="line">) AS `Cancellation Rate`</span><br><span class="line">FROM Trips AS T</span><br><span class="line">JOIN Users AS U1 ON (T.client_id = U1.users_id AND U1.banned =&apos;No&apos;)</span><br><span class="line">JOIN Users AS U2 ON (T.driver_id = U2.users_id AND U2.banned =&apos;No&apos;)</span><br><span class="line">WHERE T.request_at BETWEEN &apos;2013-10-01&apos; AND &apos;2013-10-03&apos;</span><br><span class="line">GROUP BY T.request_at</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ SUM æ±‚å’Œå‡½æ•°ï¼ŒCOUNT è®¡æ•°å‡½æ•°ï¼ŒROUND å››èˆäº”å…¥å‡½æ•°ã€‚</p><h1 id="è§£æ³•äºŒ"><a href="#è§£æ³•äºŒ" class="headerlink" title="è§£æ³•äºŒ"></a>è§£æ³•äºŒ</h1><p>æ€è·¯ä¸è§£æ³•ä¸€ç›¸åŒã€‚è€Œé‡‡ç”¨ä¸åŒçš„æ–¹æ³•æ’é™¤æ‰è¢«ç¦æ­¢ç”¨æˆ·çš„è¡Œç¨‹è®°å½•ã€‚æƒ³åˆ°æ’é™¤ï¼Œå°±è”æƒ³åˆ°é›†åˆå·®ã€‚</p><p>client_id å’Œ driver_id çš„å…¨éƒ¨ä¸ºé›†åˆ Uã€‚è¢«ç¦æ­¢çš„ users_id é›†åˆä¸º Aã€‚</p><p>U å‡å» A çš„ç»“æœä¸ºæ²¡è¢«ç¦æ­¢çš„ç”¨æˆ·ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(</span><br><span class="line">SELECT users_id</span><br><span class="line">FROM users</span><br><span class="line">WHERE banned = &apos;Yes&apos;</span><br><span class="line">) AS A</span><br></pre></td></tr></table></figure><p>å¥½äº†ï¼Œå…ˆæ¼”ç¤ºä¸€ä¸ªé”™è¯¯çš„è§£æ³•ï¼š</p><p>è¡Œç¨‹è¡¨è¿æ¥è¡¨ Aï¼Œæ’é™¤æ‰è¢«è¢«ç¦æ­¢çš„è¡Œç¨‹ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT *</span><br><span class="line">FROM trips AS T,</span><br><span class="line">(</span><br><span class="line">SELECT users_id</span><br><span class="line">FROM users</span><br><span class="line">WHERE banned = &apos;Yes&apos;</span><br><span class="line">) AS A</span><br><span class="line">WHERE (T.Client_Id != A.users_id AND T.Driver_Id != A.users_id)</span><br></pre></td></tr></table></figure><p>å‰©ä¸‹çš„é€»è¾‘ä¸è§£æ³•ä¸€åéƒ¨åˆ†ç›¸åŒï¼Œå®Œå–„åçš„é€»è¾‘ä¸ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">SELECT T.request_at AS `Day`, </span><br><span class="line">ROUND(</span><br><span class="line">SUM(</span><br><span class="line">IF(T.STATUS = &apos;completed&apos;,0,1)</span><br><span class="line">)</span><br><span class="line">/ </span><br><span class="line">COUNT(T.STATUS),</span><br><span class="line">2</span><br><span class="line">) AS `Cancellation Rate`</span><br><span class="line">FROM trips AS T,</span><br><span class="line">(</span><br><span class="line">SELECT users_id</span><br><span class="line">FROM users</span><br><span class="line">WHERE banned = &apos;Yes&apos;</span><br><span class="line">) AS A</span><br><span class="line">WHERE (T.Client_Id != A.users_id AND T.Driver_Id != A.users_id) AND T.request_at BETWEEN &apos;2013-10-01&apos; AND &apos;2013-10-03&apos;</span><br><span class="line">GROUP BY T.request_at</span><br></pre></td></tr></table></figure><p>å¾ˆå¯æƒœï¼Œå½“è¡¨ A ä¸ºç©ºæ—¶ï¼Œæ­¤æ–¹æ³•çš„ç»“æœæ˜¯ç©ºè¡¨ã€‚ä½†æ˜¯è¡¨ A ä¸ºç©ºï¼Œå¯èƒ½æ˜¯æœ‰ç”¨æˆ·ä½†æ˜¯æ²¡æœ‰è¢«ç¦æ­¢çš„ç”¨æˆ·ã€‚å› æ­¤æ–¹æ³•æ˜¯é”™è¯¯çš„ã€‚</p><p>æ­£ç¡®çš„è§£æ³•æ˜¯ï¼šè¡Œç¨‹è¡¨ left join è¡¨ A ä¸¤æ¬¡ï¼ŒA.users_id éƒ½ä¸º NULL çš„è¡Œéƒ½æ˜¯æ²¡è¢«æ’é™¤çš„è¡Œã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">SELECT *</span><br><span class="line">FROM trips AS T LEFT JOIN </span><br><span class="line">(</span><br><span class="line">SELECT users_id</span><br><span class="line">FROM users</span><br><span class="line">WHERE banned = &apos;Yes&apos;</span><br><span class="line">) AS A ON (T.Client_Id = A.users_id)</span><br><span class="line">LEFT JOIN (</span><br><span class="line">SELECT users_id</span><br><span class="line">FROM users</span><br><span class="line">WHERE banned = &apos;Yes&apos;</span><br><span class="line">) AS A1</span><br><span class="line">ON (T.Driver_Id = A1.users_id)</span><br><span class="line">WHERE A.users_id IS NULL AND A1.users_id IS NULL</span><br></pre></td></tr></table></figure><p>è¡¥ä¸Šå…¶å®ƒéƒ¨åˆ†çš„é€»è¾‘ä¸ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">SELECT T.request_at AS `Day`, </span><br><span class="line">ROUND(</span><br><span class="line">SUM(</span><br><span class="line">IF(T.STATUS = &apos;completed&apos;,0,1)</span><br><span class="line">)</span><br><span class="line">/ </span><br><span class="line">COUNT(T.STATUS),</span><br><span class="line">2</span><br><span class="line">) AS `Cancellation Rate`</span><br><span class="line">FROM trips AS T LEFT JOIN </span><br><span class="line">(</span><br><span class="line">SELECT users_id</span><br><span class="line">FROM users</span><br><span class="line">WHERE banned = &apos;Yes&apos;</span><br><span class="line">) AS A ON (T.Client_Id = A.users_id)</span><br><span class="line">LEFT JOIN (</span><br><span class="line">SELECT users_id</span><br><span class="line">FROM users</span><br><span class="line">WHERE banned = &apos;Yes&apos;</span><br><span class="line">) AS A1</span><br><span class="line">ON (T.Driver_Id = A1.users_id)</span><br><span class="line">WHERE A.users_id IS NULL AND A1.users_id IS NULL AND T.request_at BETWEEN &apos;2013-10-01&apos; AND &apos;2013-10-03&apos;</span><br><span class="line">GROUP BY T.request_at</span><br></pre></td></tr></table></figure><h1 id="è§£æ³•ä¸‰"><a href="#è§£æ³•ä¸‰" class="headerlink" title="è§£æ³•ä¸‰"></a>è§£æ³•ä¸‰</h1><p>ä¸è§£æ³•äºŒæ€è·¯ç›¸åŒã€‚æ‰¾å‡ºè¢«ç¦æ­¢çš„ç”¨æˆ·åï¼Œä¸å†è¿æ¥è¡Œç¨‹è¡¨å’Œç”¨æˆ·è¡¨ï¼Œç›´æ¥ä»è¡Œç¨‹è¡¨ä¸­æ’é™¤æ‰è¢«è¢«ç¦æ­¢ç”¨æˆ·çš„è¡Œç¨‹è®°å½•ã€‚</p><p>è¢«ç¦æ­¢çš„ç”¨æˆ·ç”¨å­æŸ¥è¯¢ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(</span><br><span class="line">SELECT users_id</span><br><span class="line">FROM users</span><br><span class="line">WHERE banned = &apos;Yes&apos;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>è¡Œç¨‹è¡¨ä¸­ client_id å’Œ driver_id éƒ½åœ¨æ­¤å­æŸ¥è¯¢ç»“æœä¸­çš„è¡Œè¦å‰”é™¤æ‰ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">SELECT *</span><br><span class="line">FROM trips AS T</span><br><span class="line">WHERE </span><br><span class="line">T.Client_Id NOT IN (</span><br><span class="line">SELECT users_id</span><br><span class="line">FROM users</span><br><span class="line">WHERE banned = &apos;Yes&apos;</span><br><span class="line">)</span><br><span class="line">AND</span><br><span class="line">T.Driver_Id NOT IN (</span><br><span class="line">SELECT users_id</span><br><span class="line">FROM users</span><br><span class="line">WHERE banned = &apos;Yes&apos;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>è¡¥ä¸Šå…¶å®ƒéƒ¨åˆ†ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">SELECT T.request_at AS `Day`, </span><br><span class="line">ROUND(</span><br><span class="line">SUM(</span><br><span class="line">IF(T.STATUS = &apos;completed&apos;,0,1)</span><br><span class="line">)</span><br><span class="line">/ </span><br><span class="line">COUNT(T.STATUS),</span><br><span class="line">2</span><br><span class="line">) AS `Cancellation Rate`</span><br><span class="line">FROM trips AS T</span><br><span class="line">WHERE </span><br><span class="line">T.Client_Id NOT IN (</span><br><span class="line">SELECT users_id</span><br><span class="line">FROM users</span><br><span class="line">WHERE banned = &apos;Yes&apos;</span><br><span class="line">)</span><br><span class="line">AND</span><br><span class="line">T.Driver_Id NOT IN (</span><br><span class="line">SELECT users_id</span><br><span class="line">FROM users</span><br><span class="line">WHERE banned = &apos;Yes&apos;</span><br><span class="line">)</span><br><span class="line">AND T.request_at BETWEEN &apos;2013-10-01&apos; AND &apos;2013-10-03&apos;</span><br><span class="line">GROUP BY T.request_at</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å†™ä¸€æ®µ SQL è¯­å¥æŸ¥å‡º â€œ2013-10-01â€ è‡³ â€œ2013-10-03â€ æœŸé—´éç¦æ­¢ç”¨æˆ·ï¼ˆä¹˜å®¢å’Œå¸æœºéƒ½å¿…é¡»æœªè¢«ç¦æ­¢ï¼‰çš„å–æ¶ˆç‡ã€‚éç¦æ­¢ç”¨æˆ·å³ Ban&lt;br&gt;ned ä¸º No çš„ç”¨æˆ·ï¼Œç¦æ­¢ç”¨æˆ·å³ Banned ä¸º Yes çš„ç”¨æˆ·ã€‚ &lt;/p&gt;
    
    </summary>
    
      <category term="2021å¹´10æœˆ" scheme="http://yoursite.com/categories/2021%E5%B9%B410%E6%9C%88/"/>
    
    
      <category term="LeetCode" scheme="http://yoursite.com/tags/LeetCode/"/>
    
      <category term="Database" scheme="http://yoursite.com/tags/Database/"/>
    
  </entry>
  
  <entry>
    <title>29. ä¸¤æ•°ç›¸é™¤</title>
    <link href="http://yoursite.com/2021/10/18/29.%20%E4%B8%A4%E6%95%B0%E7%9B%B8%E9%99%A4/"/>
    <id>http://yoursite.com/2021/10/18/29. ä¸¤æ•°ç›¸é™¤/</id>
    <published>2021-10-18T11:12:12.000Z</published>
    <updated>2021-10-19T11:27:50.856Z</updated>
    
    <content type="html"><![CDATA[<p>ç»™å®šä¸¤ä¸ªæ•´æ•° a å’Œ b ï¼Œæ±‚å®ƒä»¬çš„é™¤æ³•çš„å•† a/b ï¼Œè¦æ±‚ä¸å¾—ä½¿ç”¨ä¹˜å· â€˜*â€™ã€é™¤å· â€˜/â€˜ ä»¥åŠæ±‚ä½™ç¬¦å· â€˜%â€™ã€‚</p><a id="more"></a><p>[TOC]</p><p>æ³¨æ„ï¼š</p><p>æ•´æ•°é™¤æ³•çš„ç»“æœåº”å½“æˆªå»ï¼ˆtruncateï¼‰å…¶å°æ•°éƒ¨åˆ†ï¼Œä¾‹å¦‚ï¼štruncate(8.345) = 8 ä»¥åŠ truncate(-2.7335) = -2<br>å‡è®¾æˆ‘ä»¬çš„ç¯å¢ƒåªèƒ½å­˜å‚¨ 32 ä½æœ‰ç¬¦å·æ•´æ•°ï¼Œå…¶æ•°å€¼èŒƒå›´æ˜¯ [âˆ’231, 231âˆ’1]ã€‚æœ¬é¢˜ä¸­ï¼Œå¦‚æœé™¤æ³•ç»“æœæº¢å‡ºï¼Œåˆ™è¿”å› 231 âˆ’ 1</p><p>ç¤ºä¾‹ 1ï¼š</p><pre><code>è¾“å…¥ï¼ša = 15, b = 2è¾“å‡ºï¼š7è§£é‡Šï¼š15/2 = truncate(7.5) = 7</code></pre><p>ç¤ºä¾‹ 2ï¼š</p><pre><code>è¾“å…¥ï¼ša = 7, b = -3è¾“å‡ºï¼š-2è§£é‡Šï¼š7/-3 = truncate(-2.33333..) = -2</code></pre><p>ç¤ºä¾‹ 3ï¼š</p><pre><code>è¾“å…¥ï¼ša = 0, b = 1è¾“å‡ºï¼š0</code></pre><p>ç¤ºä¾‹ 4ï¼š</p><pre><code>è¾“å…¥ï¼ša = 1, b = 1è¾“å‡ºï¼š1</code></pre><p>æç¤º:</p><pre><code>-2^31 &lt;= a, b &lt;= 2^31 - 1b != 0</code></pre><h1 id="ğŸ“–-æ–‡å­—é¢˜è§£"><a href="#ğŸ“–-æ–‡å­—é¢˜è§£" class="headerlink" title="ğŸ“– æ–‡å­—é¢˜è§£"></a>ğŸ“– æ–‡å­—é¢˜è§£</h1><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ç”±äºé¢˜ç›®è§„å®šäº†ã€Œåªèƒ½å­˜å‚¨ <em>32</em> ä½æ•´æ•°ã€ï¼Œæœ¬é¢˜è§£çš„æ­£æ–‡éƒ¨åˆ†å’Œä»£ç ä¸­éƒ½ä¸ä¼šä½¿ç”¨ä»»ä½• <em>64</em> ä½æ•´æ•°ã€‚<strong>è¯šç„¶ï¼Œä½¿ç”¨ <em>64</em> ä½æ•´æ•°å¯ä»¥æå¤§åœ°æ–¹ä¾¿æˆ‘ä»¬çš„ç¼–ç ï¼Œä½†è¿™æ˜¯è¿åé¢˜ç›®è§„åˆ™çš„ã€‚</strong></p><p>å¦‚æœé™¤æ³•ç»“æœæº¢å‡ºï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦è¿”å› <em>2^{31} - 1</em> ä½œä¸ºç­”æ¡ˆã€‚å› æ­¤åœ¨ç¼–ç ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥é¦–å…ˆå¯¹äºæº¢å‡ºæˆ–è€…å®¹æ˜“å‡ºé”™çš„è¾¹ç•Œæƒ…å†µè¿›è¡Œè®¨è®ºï¼š</p><ul><li><p>å½“è¢«é™¤æ•°ä¸º <em>32</em> ä½æœ‰ç¬¦å·æ•´æ•°çš„æœ€å°å€¼ <em>-2^{31}</em> æ—¶ï¼š</p><ul><li>å¦‚æœé™¤æ•°ä¸º <em>1</em>ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ç›´æ¥è¿”å›ç­”æ¡ˆ <em>-2^{31}</em>ï¼›</li><li>å¦‚æœé™¤æ•°ä¸º <em>-1</em>ï¼Œé‚£ä¹ˆç­”æ¡ˆä¸º <em>2^{31}</em>ï¼Œäº§ç”Ÿäº†æº¢å‡ºã€‚æ­¤æ—¶æˆ‘ä»¬éœ€è¦è¿”å› <em>2^{31} - 1</em>ã€‚</li></ul></li><li><p>å½“é™¤æ•°ä¸º <em>32</em> ä½æœ‰ç¬¦å·æ•´æ•°çš„æœ€å°å€¼ <em>-2^{31}</em> æ—¶ï¼š</p><ul><li>å¦‚æœè¢«é™¤æ•°åŒæ ·ä¸º <em>-2^{31}</em>ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ç›´æ¥è¿”å›ç­”æ¡ˆ <em>1</em>ï¼›</li><li>å¯¹äºå…¶ä½™çš„æƒ…å†µï¼Œæˆ‘ä»¬è¿”å›ç­”æ¡ˆ <em>0</em>ã€‚</li></ul></li><li><p>å½“è¢«é™¤æ•°ä¸º <em>0</em> æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è¿”å›ç­”æ¡ˆ <em>0</em>ã€‚</p></li></ul><p>å¯¹äºä¸€èˆ¬çš„æƒ…å†µï¼Œæ ¹æ®é™¤æ•°å’Œè¢«é™¤æ•°çš„ç¬¦å·ï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘ <em>4</em> ç§ä¸åŒçš„å¯èƒ½æ€§ã€‚å› æ­¤ï¼Œä¸ºäº†æ–¹ä¾¿ç¼–ç ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¢«é™¤æ•°æˆ–è€…é™¤æ•°å–ç›¸åæ•°ï¼Œä½¿å¾—å®ƒä»¬ç¬¦å·ç›¸åŒã€‚</p><p>å¦‚æœæˆ‘ä»¬å°†è¢«é™¤æ•°å’Œé™¤æ•°éƒ½å˜ä¸ºæ­£æ•°ï¼Œé‚£ä¹ˆå¯èƒ½ä¼šå¯¼è‡´æº¢å‡ºã€‚ä¾‹å¦‚å½“è¢«é™¤æ•°ä¸º <em>-2^{31}</em> æ—¶ï¼Œå®ƒçš„ç›¸åæ•° <em>2^{31}</em> äº§ç”Ÿäº†æº¢å‡ºã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘å°†è¢«é™¤æ•°å’Œé™¤æ•°éƒ½å˜ä¸ºè´Ÿæ•°ï¼Œè¿™æ ·å°±ä¸ä¼šæœ‰æº¢å‡ºçš„é—®é¢˜ï¼Œåœ¨ç¼–ç æ—¶åªéœ€è¦è€ƒè™‘ <em>1</em> ç§æƒ…å†µäº†ã€‚</p><p>å¦‚æœæˆ‘ä»¬å°†è¢«é™¤æ•°å’Œé™¤æ•°çš„å…¶ä¸­ï¼ˆæ°å¥½ï¼‰ä¸€ä¸ªå˜ä¸ºäº†æ­£æ•°ï¼Œé‚£ä¹ˆåœ¨è¿”å›ç­”æ¡ˆä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å¯¹ç­”æ¡ˆä¹Ÿå–ç›¸åæ•°ã€‚</p><h2 id="æ–¹æ³•ä¸€ï¼šäºŒåˆ†æŸ¥æ‰¾"><a href="#æ–¹æ³•ä¸€ï¼šäºŒåˆ†æŸ¥æ‰¾" class="headerlink" title="æ–¹æ³•ä¸€ï¼šäºŒåˆ†æŸ¥æ‰¾"></a>æ–¹æ³•ä¸€ï¼šäºŒåˆ†æŸ¥æ‰¾</h2><p><strong>æ€è·¯ä¸ç®—æ³•</strong></p><p>æ ¹æ®ã€Œå‰è¨€ã€éƒ¨åˆ†çš„è®¨è®ºï¼Œæˆ‘ä»¬è®°è¢«é™¤æ•°ä¸º <em>X</em>ï¼Œé™¤æ•°ä¸º <em>Y</em>ï¼Œå¹¶ä¸” <em>X</em> å’Œ <em>Y</em> éƒ½æ˜¯è´Ÿæ•°ã€‚æˆ‘ä»¬éœ€è¦æ‰¾å‡º <em>X/Y</em> çš„ç»“æœ <em>Z</em>ã€‚<em>Z</em> ä¸€å®šæ˜¯æ­£æ•°æˆ– <em>0</em>ã€‚</p><p>æ ¹æ®é™¤æ³•ä»¥åŠä½™æ•°çš„å®šä¹‰ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶æ”¹æˆä¹˜æ³•çš„ç­‰ä»·å½¢å¼</p><p><strong>ç»†èŠ‚</strong></p><p>ç”±äºæˆ‘ä»¬åªèƒ½ä½¿ç”¨ <em>32</em> ä½æ•´æ•°ï¼Œå› æ­¤äºŒåˆ†æŸ¥æ‰¾ä¸­ä¼šæœ‰å¾ˆå¤šç»†èŠ‚ã€‚</p><p>é¦–å…ˆï¼ŒäºŒåˆ†æŸ¥æ‰¾çš„ä¸‹ç•Œä¸º <em>1</em>ï¼Œä¸Šç•Œä¸º <em>2^{31} - 1*ã€‚å”¯ä¸€å¯èƒ½å‡ºç°çš„ç­”æ¡ˆä¸º *2^{31}</em> çš„æƒ…å†µå·²ç»è¢«æˆ‘ä»¬åœ¨ã€Œå‰è¨€ã€éƒ¨åˆ†è¿›è¡Œäº†ç‰¹æ®Šå¤„ç†ï¼Œå› æ­¤ç­”æ¡ˆçš„æœ€å¤§å€¼ä¸º <em>2^{31} - 1</em>ã€‚å¦‚æœäºŒåˆ†æŸ¥æ‰¾å¤±è´¥ï¼Œé‚£ä¹ˆç­”æ¡ˆä¸€å®šä¸º <em>0</em>ã€‚</p><p>åœ¨å®ç°ã€Œå¿«é€Ÿä¹˜ã€æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨åŠ æ³•è¿ç®—ï¼Œç„¶è€Œè¾ƒå¤§çš„ <em>Z</em> ä¹Ÿä¼šå¯¼è‡´åŠ æ³•è¿ç®—æº¢å‡ºã€‚ä¾‹å¦‚æˆ‘ä»¬è¦åˆ¤æ–­ <em>A + B</em> æ˜¯å¦å°äº <em>C</em> æ—¶ï¼ˆå…¶ä¸­ <em>A, B, C</em> å‡ä¸ºè´Ÿæ•°ï¼‰ï¼Œ<em>A + B</em> å¯èƒ½ä¼šäº§ç”Ÿæº¢å‡ºï¼Œå› æ­¤æˆ‘ä»¬å¿…é¡»å°†åˆ¤æ–­æ”¹ä¸º <em>A &lt; C - B</em> æ˜¯å¦æˆç«‹ã€‚ç”±äºä»»æ„ä¸¤ä¸ªè´Ÿæ•°çš„å·®ä¸€å®šåœ¨ <em>[-2^{31} + 1, 2^{31} - 1]</em> èŒƒå›´å†…ï¼Œè¿™æ ·å°±ä¸ä¼šäº§ç”Ÿæº¢å‡ºã€‚</p><p>è¯»è€…å¯ä»¥é˜…è¯»ä¸‹é¢çš„ä»£ç å’Œæ³¨é‡Šï¼Œç†è§£å¦‚ä½•é¿å…ä½¿ç”¨ä¹˜æ³•å’Œé™¤æ³•ï¼Œä»¥åŠæ­£ç¡®å¤„ç†æº¢å‡ºé—®é¢˜ã€‚<a href="https://leetcode-cn.com/problems/powx-n/solution/powx-n-by-leetcode-solution/" target="_blank" rel="noopener">^1</a></p><p><strong>ä»£ç </strong></p><details>    <summary>C++</summary><figure class="highlight c++"><figcaption><span>[sol1-C++]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">divide</span><span class="params">(<span class="keyword">int</span> dividend, <span class="keyword">int</span> divisor)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// è€ƒè™‘è¢«é™¤æ•°ä¸ºæœ€å°å€¼çš„æƒ…å†µ</span></span><br><span class="line">        <span class="keyword">if</span> (dividend == INT_MIN) &#123;</span><br><span class="line">            <span class="keyword">if</span> (divisor == <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> INT_MIN;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (divisor == <span class="number">-1</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> INT_MAX;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// è€ƒè™‘é™¤æ•°ä¸ºæœ€å°å€¼çš„æƒ…å†µ</span></span><br><span class="line">        <span class="keyword">if</span> (divisor == INT_MIN) &#123;</span><br><span class="line">            <span class="keyword">return</span> dividend == INT_MIN ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// è€ƒè™‘è¢«é™¤æ•°ä¸º 0 çš„æƒ…å†µ</span></span><br><span class="line">        <span class="keyword">if</span> (dividend == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// ä¸€èˆ¬æƒ…å†µï¼Œä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾</span></span><br><span class="line">        <span class="comment">// å°†æ‰€æœ‰çš„æ­£æ•°å–ç›¸åæ•°ï¼Œè¿™æ ·å°±åªéœ€è¦è€ƒè™‘ä¸€ç§æƒ…å†µ</span></span><br><span class="line">        <span class="keyword">bool</span> rev = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">if</span> (dividend &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            dividend = -dividend;</span><br><span class="line">            rev = !rev;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (divisor &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            divisor = -divisor;</span><br><span class="line">            rev = !rev;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¿«é€Ÿä¹˜</span></span><br><span class="line">        <span class="keyword">auto</span> quickAdd = [](<span class="keyword">int</span> y, <span class="keyword">int</span> z, <span class="keyword">int</span> x) &#123;</span><br><span class="line">            <span class="comment">// x å’Œ y æ˜¯è´Ÿæ•°ï¼Œz æ˜¯æ­£æ•°</span></span><br><span class="line">            <span class="comment">// éœ€è¦åˆ¤æ–­ z * y &gt;= x æ˜¯å¦æˆç«‹</span></span><br><span class="line">            <span class="keyword">int</span> result = <span class="number">0</span>, add = y;</span><br><span class="line">            <span class="keyword">while</span> (z) &#123;</span><br><span class="line">                <span class="keyword">if</span> (z &amp; <span class="number">1</span>) &#123;</span><br><span class="line">                    <span class="comment">// éœ€è¦ä¿è¯ result + add &gt;= x</span></span><br><span class="line">                    <span class="keyword">if</span> (result &lt; x - add) &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    result += add;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (z != <span class="number">1</span>) &#123;</span><br><span class="line">                    <span class="comment">// éœ€è¦ä¿è¯ add + add &gt;= x</span></span><br><span class="line">                    <span class="keyword">if</span> (add &lt; x - add) &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    add += add;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// ä¸èƒ½ä½¿ç”¨é™¤æ³•</span></span><br><span class="line">                z &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">int</span> left = <span class="number">1</span>, right = INT_MAX, ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (left &lt;= right) &#123;</span><br><span class="line">            <span class="comment">// æ³¨æ„æº¢å‡ºï¼Œå¹¶ä¸”ä¸èƒ½ä½¿ç”¨é™¤æ³•</span></span><br><span class="line">            <span class="keyword">int</span> mid = left + ((right - left) &gt;&gt; <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">bool</span> check = quickAdd(divisor, mid, dividend);</span><br><span class="line">            <span class="keyword">if</span> (check) &#123;</span><br><span class="line">                ans = mid;</span><br><span class="line">                <span class="comment">// æ³¨æ„æº¢å‡º</span></span><br><span class="line">                <span class="keyword">if</span> (mid == INT_MAX) &#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                left = mid + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                right = mid - <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> rev ? -ans : ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></details><details>    <summary>Java</summary><figure class="highlight java"><figcaption><span>[sol1-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">divide</span><span class="params">(<span class="keyword">int</span> dividend, <span class="keyword">int</span> divisor)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// è€ƒè™‘è¢«é™¤æ•°ä¸ºæœ€å°å€¼çš„æƒ…å†µ</span></span><br><span class="line">        <span class="keyword">if</span> (dividend == Integer.MIN_VALUE) &#123;</span><br><span class="line">            <span class="keyword">if</span> (divisor == <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> Integer.MIN_VALUE;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (divisor == -<span class="number">1</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> Integer.MAX_VALUE;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// è€ƒè™‘é™¤æ•°ä¸ºæœ€å°å€¼çš„æƒ…å†µ</span></span><br><span class="line">        <span class="keyword">if</span> (divisor == Integer.MIN_VALUE) &#123;</span><br><span class="line">            <span class="keyword">return</span> dividend == Integer.MIN_VALUE ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// è€ƒè™‘è¢«é™¤æ•°ä¸º 0 çš„æƒ…å†µ</span></span><br><span class="line">        <span class="keyword">if</span> (dividend == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// ä¸€èˆ¬æƒ…å†µï¼Œä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾</span></span><br><span class="line">        <span class="comment">// å°†æ‰€æœ‰çš„æ­£æ•°å–ç›¸åæ•°ï¼Œè¿™æ ·å°±åªéœ€è¦è€ƒè™‘ä¸€ç§æƒ…å†µ</span></span><br><span class="line">        <span class="keyword">boolean</span> rev = <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">if</span> (dividend &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            dividend = -dividend;</span><br><span class="line">            rev = !rev;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (divisor &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            divisor = -divisor;</span><br><span class="line">            rev = !rev;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">int</span> left = <span class="number">1</span>, right = Integer.MAX_VALUE, ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (left &lt;= right) &#123;</span><br><span class="line">            <span class="comment">// æ³¨æ„æº¢å‡ºï¼Œå¹¶ä¸”ä¸èƒ½ä½¿ç”¨é™¤æ³•</span></span><br><span class="line">            <span class="keyword">int</span> mid = left + ((right - left) &gt;&gt; <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">boolean</span> check = quickAdd(divisor, mid, dividend);</span><br><span class="line">            <span class="keyword">if</span> (check) &#123;</span><br><span class="line">                ans = mid;</span><br><span class="line">                <span class="comment">// æ³¨æ„æº¢å‡º</span></span><br><span class="line">                <span class="keyword">if</span> (mid == Integer.MAX_VALUE) &#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                left = mid + <span class="number">1</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                right = mid - <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> rev ? -ans : ans;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¿«é€Ÿä¹˜</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">quickAdd</span><span class="params">(<span class="keyword">int</span> y, <span class="keyword">int</span> z, <span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// x å’Œ y æ˜¯è´Ÿæ•°ï¼Œz æ˜¯æ­£æ•°</span></span><br><span class="line">        <span class="comment">// éœ€è¦åˆ¤æ–­ z * y &gt;= x æ˜¯å¦æˆç«‹</span></span><br><span class="line">        <span class="keyword">int</span> result = <span class="number">0</span>, add = y;</span><br><span class="line">        <span class="keyword">while</span> (z != <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> ((z &amp; <span class="number">1</span>) != <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">// éœ€è¦ä¿è¯ result + add &gt;= x</span></span><br><span class="line">                <span class="keyword">if</span> (result &lt; x - add) &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                result += add;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (z != <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="comment">// éœ€è¦ä¿è¯ add + add &gt;= x</span></span><br><span class="line">                <span class="keyword">if</span> (add &lt; x - add) &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                add += add;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// ä¸èƒ½ä½¿ç”¨é™¤æ³•</span></span><br><span class="line">            z &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>C#</summary><figure class="highlight plain"><figcaption><span>[sol1-C#]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">public class Solution &#123;</span><br><span class="line">    public int Divide(int dividend, int divisor) &#123;</span><br><span class="line">        // è€ƒè™‘è¢«é™¤æ•°ä¸ºæœ€å°å€¼çš„æƒ…å†µ</span><br><span class="line">        if (dividend == int.MinValue) &#123;</span><br><span class="line">            if (divisor == 1) &#123;</span><br><span class="line">                return int.MinValue;</span><br><span class="line">            &#125;</span><br><span class="line">            if (divisor == -1) &#123;</span><br><span class="line">                return int.MaxValue;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        // è€ƒè™‘é™¤æ•°ä¸ºæœ€å°å€¼çš„æƒ…å†µ</span><br><span class="line">        if (divisor == int.MinValue) &#123;</span><br><span class="line">            return dividend == int.MinValue ? 1 : 0;</span><br><span class="line">        &#125;</span><br><span class="line">        // è€ƒè™‘è¢«é™¤æ•°ä¸º 0 çš„æƒ…å†µ</span><br><span class="line">        if (dividend == 0) &#123;</span><br><span class="line">            return 0;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        // ä¸€èˆ¬æƒ…å†µï¼Œä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾</span><br><span class="line">        // å°†æ‰€æœ‰çš„æ­£æ•°å–ç›¸åæ•°ï¼Œè¿™æ ·å°±åªéœ€è¦è€ƒè™‘ä¸€ç§æƒ…å†µ</span><br><span class="line">        bool rev = false;</span><br><span class="line">        if (dividend &gt; 0) &#123;</span><br><span class="line">            dividend = -dividend;</span><br><span class="line">            rev = !rev;</span><br><span class="line">        &#125;</span><br><span class="line">        if (divisor &gt; 0) &#123;</span><br><span class="line">            divisor = -divisor;</span><br><span class="line">            rev = !rev;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        int left = 1, right = int.MaxValue, ans = 0;</span><br><span class="line">        while (left &lt;= right) &#123;</span><br><span class="line">            // æ³¨æ„æº¢å‡ºï¼Œå¹¶ä¸”ä¸èƒ½ä½¿ç”¨é™¤æ³•</span><br><span class="line">            int mid = left + ((right - left) &gt;&gt; 1);</span><br><span class="line">            bool check = quickAdd(divisor, mid, dividend);</span><br><span class="line">            if (check) &#123;</span><br><span class="line">                ans = mid;</span><br><span class="line">                // æ³¨æ„æº¢å‡º</span><br><span class="line">                if (mid == int.MaxValue) &#123;</span><br><span class="line">                    break;</span><br><span class="line">                &#125;</span><br><span class="line">                left = mid + 1;</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                right = mid - 1;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return rev ? -ans : ans;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // å¿«é€Ÿä¹˜</span><br><span class="line">    public bool quickAdd(int y, int z, int x) &#123;</span><br><span class="line">        // x å’Œ y æ˜¯è´Ÿæ•°ï¼Œz æ˜¯æ­£æ•°</span><br><span class="line">        // éœ€è¦åˆ¤æ–­ z * y &gt;= x æ˜¯å¦æˆç«‹</span><br><span class="line">        int result = 0, add = y;</span><br><span class="line">        while (z != 0) &#123;</span><br><span class="line">            if ((z &amp; 1) != 0) &#123;</span><br><span class="line">                // éœ€è¦ä¿è¯ result + add &gt;= x</span><br><span class="line">                if (result &lt; x - add) &#123;</span><br><span class="line">                    return false;</span><br><span class="line">                &#125;</span><br><span class="line">                result += add;</span><br><span class="line">            &#125;</span><br><span class="line">            if (z != 1) &#123;</span><br><span class="line">                // éœ€è¦ä¿è¯ add + add &gt;= x</span><br><span class="line">                if (add &lt; x - add) &#123;</span><br><span class="line">                    return false;</span><br><span class="line">                &#125;</span><br><span class="line">                add += add;</span><br><span class="line">            &#125;</span><br><span class="line">            // ä¸èƒ½ä½¿ç”¨é™¤æ³•</span><br><span class="line">            z &gt;&gt;= 1;</span><br><span class="line">        &#125;</span><br><span class="line">        return true;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>Python</summary><figure class="highlight python"><figcaption><span>[sol1-Python3]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">divide</span><span class="params">(self, dividend: int, divisor: int)</span> -&gt; int:</span></span><br><span class="line">        INT_MIN, INT_MAX = <span class="number">-2</span>**<span class="number">31</span>, <span class="number">2</span>**<span class="number">31</span> - <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># è€ƒè™‘è¢«é™¤æ•°ä¸ºæœ€å°å€¼çš„æƒ…å†µ</span></span><br><span class="line">        <span class="keyword">if</span> dividend == INT_MIN:</span><br><span class="line">            <span class="keyword">if</span> divisor == <span class="number">1</span>:</span><br><span class="line">                <span class="keyword">return</span> INT_MIN</span><br><span class="line">            <span class="keyword">if</span> divisor == <span class="number">-1</span>:</span><br><span class="line">                <span class="keyword">return</span> INT_MAX</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># è€ƒè™‘é™¤æ•°ä¸ºæœ€å°å€¼çš„æƒ…å†µ</span></span><br><span class="line">        <span class="keyword">if</span> divisor == INT_MIN:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span> <span class="keyword">if</span> dividend == INT_MIN <span class="keyword">else</span> <span class="number">0</span></span><br><span class="line">        <span class="comment"># è€ƒè™‘è¢«é™¤æ•°ä¸º 0 çš„æƒ…å†µ</span></span><br><span class="line">        <span class="keyword">if</span> dividend == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># ä¸€èˆ¬æƒ…å†µï¼Œä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾</span></span><br><span class="line">        <span class="comment"># å°†æ‰€æœ‰çš„æ­£æ•°å–ç›¸åæ•°ï¼Œè¿™æ ·å°±åªéœ€è¦è€ƒè™‘ä¸€ç§æƒ…å†µ</span></span><br><span class="line">        rev = <span class="keyword">False</span></span><br><span class="line">        <span class="keyword">if</span> dividend &gt; <span class="number">0</span>:</span><br><span class="line">            dividend = -dividend</span><br><span class="line">            rev = <span class="keyword">not</span> rev</span><br><span class="line">        <span class="keyword">if</span> divisor &gt; <span class="number">0</span>:</span><br><span class="line">            divisor = -divisor</span><br><span class="line">            rev = <span class="keyword">not</span> rev</span><br><span class="line"></span><br><span class="line">        <span class="comment"># å¿«é€Ÿä¹˜</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">quickAdd</span><span class="params">(y: int, z: int, x: int)</span> -&gt; bool:</span></span><br><span class="line">            <span class="comment"># x å’Œ y æ˜¯è´Ÿæ•°ï¼Œz æ˜¯æ­£æ•°</span></span><br><span class="line">            <span class="comment"># éœ€è¦åˆ¤æ–­ z * y &gt;= x æ˜¯å¦æˆç«‹</span></span><br><span class="line">            result, add = <span class="number">0</span>, y</span><br><span class="line">            <span class="keyword">while</span> z &gt; <span class="number">0</span>:</span><br><span class="line">                <span class="keyword">if</span> (z &amp; <span class="number">1</span>) == <span class="number">1</span>:</span><br><span class="line">                    <span class="comment"># éœ€è¦ä¿è¯ result + add &gt;= x</span></span><br><span class="line">                    <span class="keyword">if</span> result &lt; x - add:</span><br><span class="line">                        <span class="keyword">return</span> <span class="keyword">False</span></span><br><span class="line">                    result += add</span><br><span class="line">                <span class="keyword">if</span> z != <span class="number">1</span>:</span><br><span class="line">                    <span class="comment"># éœ€è¦ä¿è¯ add + add &gt;= x</span></span><br><span class="line">                    <span class="keyword">if</span> add &lt; x - add:</span><br><span class="line">                        <span class="keyword">return</span> <span class="keyword">False</span></span><br><span class="line">                    add += add</span><br><span class="line">                <span class="comment"># ä¸èƒ½ä½¿ç”¨é™¤æ³•</span></span><br><span class="line">                z &gt;&gt;= <span class="number">1</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">True</span></span><br><span class="line">        </span><br><span class="line">        left, right, ans = <span class="number">1</span>, INT_MAX, <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> left &lt;= right:</span><br><span class="line">            <span class="comment"># æ³¨æ„æº¢å‡ºï¼Œå¹¶ä¸”ä¸èƒ½ä½¿ç”¨é™¤æ³•</span></span><br><span class="line">            mid = left + ((right - left) &gt;&gt; <span class="number">1</span>)</span><br><span class="line">            check = quickAdd(divisor, mid, dividend)</span><br><span class="line">            <span class="keyword">if</span> check:</span><br><span class="line">                ans = mid</span><br><span class="line">                <span class="comment"># æ³¨æ„æº¢å‡º</span></span><br><span class="line">                <span class="keyword">if</span> mid == INT_MAX:</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">                left = mid + <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                right = mid - <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> -ans <span class="keyword">if</span> rev <span class="keyword">else</span> ans</span><br></pre></td></tr></table></figure></details><details>    <summary>Golang</summary><figure class="highlight go"><figcaption><span>[sol1-Golang]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¿«é€Ÿä¹˜</span></span><br><span class="line"><span class="comment">// x å’Œ y æ˜¯è´Ÿæ•°ï¼Œz æ˜¯æ­£æ•°</span></span><br><span class="line"><span class="comment">// åˆ¤æ–­ z * y &gt;= x æ˜¯å¦æˆç«‹</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">quickAdd</span><span class="params">(y, z, x <span class="keyword">int</span>)</span> <span class="title">bool</span></span> &#123;</span><br><span class="line">    <span class="keyword">for</span> result, add := <span class="number">0</span>, y; z &gt; <span class="number">0</span>; z &gt;&gt;= <span class="number">1</span> &#123; <span class="comment">// ä¸èƒ½ä½¿ç”¨é™¤æ³•</span></span><br><span class="line">        <span class="keyword">if</span> z&amp;<span class="number">1</span> &gt; <span class="number">0</span> &#123;</span><br><span class="line">            <span class="comment">// éœ€è¦ä¿è¯ result + add &gt;= x</span></span><br><span class="line">            <span class="keyword">if</span> result &lt; x-add &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">            &#125;</span><br><span class="line">            result += add</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> z != <span class="number">1</span> &#123;</span><br><span class="line">            <span class="comment">// éœ€è¦ä¿è¯ add + add &gt;= x</span></span><br><span class="line">            <span class="keyword">if</span> add &lt; x-add &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">            &#125;</span><br><span class="line">            add += add</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">divide</span><span class="params">(dividend, divisor <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> dividend == math.MinInt32 &#123; <span class="comment">// è€ƒè™‘è¢«é™¤æ•°ä¸ºæœ€å°å€¼çš„æƒ…å†µ</span></span><br><span class="line">        <span class="keyword">if</span> divisor == <span class="number">1</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> math.MinInt32</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> divisor == <span class="number">-1</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> math.MaxInt32</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> divisor == math.MinInt32 &#123; <span class="comment">// è€ƒè™‘é™¤æ•°ä¸ºæœ€å°å€¼çš„æƒ…å†µ</span></span><br><span class="line">        <span class="keyword">if</span> dividend == math.MinInt32 &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> dividend == <span class="number">0</span> &#123; <span class="comment">// è€ƒè™‘è¢«é™¤æ•°ä¸º 0 çš„æƒ…å†µ</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸€èˆ¬æƒ…å†µï¼Œä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾</span></span><br><span class="line">    <span class="comment">// å°†æ‰€æœ‰çš„æ­£æ•°å–ç›¸åæ•°ï¼Œè¿™æ ·å°±åªéœ€è¦è€ƒè™‘ä¸€ç§æƒ…å†µ</span></span><br><span class="line">    rev := <span class="literal">false</span></span><br><span class="line">    <span class="keyword">if</span> dividend &gt; <span class="number">0</span> &#123;</span><br><span class="line">        dividend = -dividend</span><br><span class="line">        rev = !rev</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> divisor &gt; <span class="number">0</span> &#123;</span><br><span class="line">        divisor = -divisor</span><br><span class="line">        rev = !rev</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ans := <span class="number">0</span></span><br><span class="line">    left, right := <span class="number">1</span>, math.MaxInt32</span><br><span class="line">    <span class="keyword">for</span> left &lt;= right &#123;</span><br><span class="line">        mid := left + (right-left)&gt;&gt;<span class="number">1</span> <span class="comment">// æ³¨æ„æº¢å‡ºï¼Œå¹¶ä¸”ä¸èƒ½ä½¿ç”¨é™¤æ³•</span></span><br><span class="line">        <span class="keyword">if</span> quickAdd(divisor, mid, dividend) &#123;</span><br><span class="line">            ans = mid</span><br><span class="line">            <span class="keyword">if</span> mid == math.MaxInt32 &#123; <span class="comment">// æ³¨æ„æº¢å‡º</span></span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            &#125;</span><br><span class="line">            left = mid + <span class="number">1</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            right = mid - <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> rev &#123;</span><br><span class="line">        <span class="keyword">return</span> -ans</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>JavaScript</summary><figure class="highlight javascript"><figcaption><span>[sol1-JavaScript]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> divide = <span class="function"><span class="keyword">function</span>(<span class="params">dividend, divisor</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> MAX_VALUE = <span class="number">2</span> ** <span class="number">31</span> - <span class="number">1</span>, MIN_VALUE = -(<span class="number">2</span> ** <span class="number">31</span>);</span><br><span class="line">    <span class="comment">// è€ƒè™‘è¢«é™¤æ•°ä¸ºæœ€å°å€¼çš„æƒ…å†µ</span></span><br><span class="line">    <span class="keyword">if</span> (dividend === MIN_VALUE) &#123;</span><br><span class="line">        <span class="keyword">if</span> (divisor === <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> MIN_VALUE;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (divisor === <span class="number">-1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> MAX_VALUE;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è€ƒè™‘é™¤æ•°ä¸ºæœ€å°å€¼çš„æƒ…å†µ</span></span><br><span class="line">    <span class="keyword">if</span> (divisor === MIN_VALUE) &#123;</span><br><span class="line">        <span class="keyword">return</span> dividend === MIN_VALUE ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è€ƒè™‘è¢«é™¤æ•°ä¸º 0 çš„æƒ…å†µ</span></span><br><span class="line">    <span class="keyword">if</span> (dividend === <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ä¸€èˆ¬æƒ…å†µï¼Œä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾</span></span><br><span class="line">    <span class="comment">// å°†æ‰€æœ‰çš„æ­£æ•°å–ç›¸åæ•°ï¼Œè¿™æ ·å°±åªéœ€è¦è€ƒè™‘ä¸€ç§æƒ…å†µ</span></span><br><span class="line">    <span class="keyword">let</span> rev = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span> (dividend &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        dividend = -dividend;</span><br><span class="line">        rev = !rev;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (divisor &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        divisor = -divisor;</span><br><span class="line">        rev = !rev;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> left = <span class="number">1</span>, right = MAX_VALUE, ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (left &lt;= right) &#123;</span><br><span class="line">        <span class="comment">// æ³¨æ„æº¢å‡ºï¼Œå¹¶ä¸”ä¸èƒ½ä½¿ç”¨é™¤æ³•</span></span><br><span class="line">        <span class="keyword">const</span> mid = left + ((right - left) &gt;&gt; <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">const</span> check = quickAdd(divisor, mid, dividend);</span><br><span class="line">        <span class="keyword">if</span> (check) &#123;</span><br><span class="line">            ans = mid;</span><br><span class="line">            <span class="comment">// æ³¨æ„æº¢å‡º</span></span><br><span class="line">            <span class="keyword">if</span> (mid === MAX_VALUE) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            left = mid + <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            right = mid - <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> rev ? -ans : ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¿«é€Ÿä¹˜</span></span><br><span class="line"><span class="keyword">const</span> quickAdd = <span class="function">(<span class="params">y, z, x</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// x å’Œ y æ˜¯è´Ÿæ•°ï¼Œz æ˜¯æ­£æ•°</span></span><br><span class="line">    <span class="comment">// éœ€è¦åˆ¤æ–­ z * y &gt;= x æ˜¯å¦æˆç«‹</span></span><br><span class="line">    <span class="keyword">let</span> result = <span class="number">0</span>, add = y;</span><br><span class="line">    <span class="keyword">while</span> (z !== <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> ((z &amp; <span class="number">1</span>) !== <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">// éœ€è¦ä¿è¯ result + add &gt;= x</span></span><br><span class="line">            <span class="keyword">if</span> (result &lt; x - add) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            result += add;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (z !== <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="comment">// éœ€è¦ä¿è¯ add + add &gt;= x</span></span><br><span class="line">            <span class="keyword">if</span> (add &lt; x - add) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            add += add;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// ä¸èƒ½ä½¿ç”¨é™¤æ³•</span></span><br><span class="line">        z &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></details><h2 id="æ–¹æ³•äºŒï¼šç±»äºŒåˆ†æŸ¥æ‰¾"><a href="#æ–¹æ³•äºŒï¼šç±»äºŒåˆ†æŸ¥æ‰¾" class="headerlink" title="æ–¹æ³•äºŒï¼šç±»äºŒåˆ†æŸ¥æ‰¾"></a>æ–¹æ³•äºŒï¼šç±»äºŒåˆ†æŸ¥æ‰¾</h2><p><strong>æ€è·¯ä¸ç®—æ³•</strong><a href="https://leetcode-cn.com/problems/divide-two-integers/solution/liang-shu-xiang-chu-by-leetcode-solution-5hic/" target="_blank" rel="noopener">^1</a></p><p><strong>ä»£ç </strong></p><details>    <summary>C++</summary><figure class="highlight c++"><figcaption><span>[sol2-C++]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">divide</span><span class="params">(<span class="keyword">int</span> dividend, <span class="keyword">int</span> divisor)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// è€ƒè™‘è¢«é™¤æ•°ä¸ºæœ€å°å€¼çš„æƒ…å†µ</span></span><br><span class="line">        <span class="keyword">if</span> (dividend == INT_MIN) &#123;</span><br><span class="line">            <span class="keyword">if</span> (divisor == <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> INT_MIN;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (divisor == <span class="number">-1</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> INT_MAX;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// è€ƒè™‘é™¤æ•°ä¸ºæœ€å°å€¼çš„æƒ…å†µ</span></span><br><span class="line">        <span class="keyword">if</span> (divisor == INT_MIN) &#123;</span><br><span class="line">            <span class="keyword">return</span> dividend == INT_MIN ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// è€ƒè™‘è¢«é™¤æ•°ä¸º 0 çš„æƒ…å†µ</span></span><br><span class="line">        <span class="keyword">if</span> (dividend == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// ä¸€èˆ¬æƒ…å†µï¼Œä½¿ç”¨ç±»äºŒåˆ†æŸ¥æ‰¾</span></span><br><span class="line">        <span class="comment">// å°†æ‰€æœ‰çš„æ­£æ•°å–ç›¸åæ•°ï¼Œè¿™æ ·å°±åªéœ€è¦è€ƒè™‘ä¸€ç§æƒ…å†µ</span></span><br><span class="line">        <span class="keyword">bool</span> rev = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">if</span> (dividend &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            dividend = -dividend;</span><br><span class="line">            rev = !rev;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (divisor &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            divisor = -divisor;</span><br><span class="line">            rev = !rev;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; candidates = &#123;divisor&#125;;</span><br><span class="line">        <span class="comment">// æ³¨æ„æº¢å‡º</span></span><br><span class="line">        <span class="keyword">while</span> (candidates.back() &gt;= dividend - candidates.back()) &#123;</span><br><span class="line">            candidates.push_back(candidates.back() + candidates.back());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = candidates.size() - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (candidates[i] &gt;= dividend) &#123;</span><br><span class="line">                ans += (<span class="number">1</span> &lt;&lt; i);</span><br><span class="line">                dividend -= candidates[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> rev ? -ans : ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></details><details>    <summary>Java</summary><figure class="highlight java"><figcaption><span>[sol2-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">divide</span><span class="params">(<span class="keyword">int</span> dividend, <span class="keyword">int</span> divisor)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// è€ƒè™‘è¢«é™¤æ•°ä¸ºæœ€å°å€¼çš„æƒ…å†µ</span></span><br><span class="line">        <span class="keyword">if</span> (dividend == Integer.MIN_VALUE) &#123;</span><br><span class="line">            <span class="keyword">if</span> (divisor == <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> Integer.MIN_VALUE;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (divisor == -<span class="number">1</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> Integer.MAX_VALUE;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// è€ƒè™‘é™¤æ•°ä¸ºæœ€å°å€¼çš„æƒ…å†µ</span></span><br><span class="line">        <span class="keyword">if</span> (divisor == Integer.MIN_VALUE) &#123;</span><br><span class="line">            <span class="keyword">return</span> dividend == Integer.MIN_VALUE ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// è€ƒè™‘è¢«é™¤æ•°ä¸º 0 çš„æƒ…å†µ</span></span><br><span class="line">        <span class="keyword">if</span> (dividend == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// ä¸€èˆ¬æƒ…å†µï¼Œä½¿ç”¨ç±»äºŒåˆ†æŸ¥æ‰¾</span></span><br><span class="line">        <span class="comment">// å°†æ‰€æœ‰çš„æ­£æ•°å–ç›¸åæ•°ï¼Œè¿™æ ·å°±åªéœ€è¦è€ƒè™‘ä¸€ç§æƒ…å†µ</span></span><br><span class="line">        <span class="keyword">boolean</span> rev = <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">if</span> (dividend &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            dividend = -dividend;</span><br><span class="line">            rev = !rev;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (divisor &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            divisor = -divisor;</span><br><span class="line">            rev = !rev;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        List&lt;Integer&gt; candidates = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</span><br><span class="line">        candidates.add(divisor);</span><br><span class="line">        <span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// æ³¨æ„æº¢å‡º</span></span><br><span class="line">        <span class="keyword">while</span> (candidates.get(index) &gt;= dividend - candidates.get(index)) &#123;</span><br><span class="line">            candidates.add(candidates.get(index) + candidates.get(index));</span><br><span class="line">            ++index;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = candidates.size() - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (candidates.get(i) &gt;= dividend) &#123;</span><br><span class="line">                ans += <span class="number">1</span> &lt;&lt; i;</span><br><span class="line">                dividend -= candidates.get(i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> rev ? -ans : ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>C#</summary><figure class="highlight plain"><figcaption><span>[sol2-C#]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">public class Solution &#123;</span><br><span class="line">    public int Divide(int dividend, int divisor) &#123;</span><br><span class="line">        // è€ƒè™‘è¢«é™¤æ•°ä¸ºæœ€å°å€¼çš„æƒ…å†µ</span><br><span class="line">        if (dividend == int.MinValue) &#123;</span><br><span class="line">            if (divisor == 1) &#123;</span><br><span class="line">                return int.MinValue;</span><br><span class="line">            &#125;</span><br><span class="line">            if (divisor == -1) &#123;</span><br><span class="line">                return int.MaxValue;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        // è€ƒè™‘é™¤æ•°ä¸ºæœ€å°å€¼çš„æƒ…å†µ</span><br><span class="line">        if (divisor == int.MinValue) &#123;</span><br><span class="line">            return dividend == int.MinValue ? 1 : 0;</span><br><span class="line">        &#125;</span><br><span class="line">        // è€ƒè™‘è¢«é™¤æ•°ä¸º 0 çš„æƒ…å†µ</span><br><span class="line">        if (dividend == 0) &#123;</span><br><span class="line">            return 0;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        // ä¸€èˆ¬æƒ…å†µï¼Œä½¿ç”¨ç±»äºŒåˆ†æŸ¥æ‰¾</span><br><span class="line">        // å°†æ‰€æœ‰çš„æ­£æ•°å–ç›¸åæ•°ï¼Œè¿™æ ·å°±åªéœ€è¦è€ƒè™‘ä¸€ç§æƒ…å†µ</span><br><span class="line">        bool rev = false;</span><br><span class="line">        if (dividend &gt; 0) &#123;</span><br><span class="line">            dividend = -dividend;</span><br><span class="line">            rev = !rev;</span><br><span class="line">        &#125;</span><br><span class="line">        if (divisor &gt; 0) &#123;</span><br><span class="line">            divisor = -divisor;</span><br><span class="line">            rev = !rev;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        IList&lt;int&gt; candidates = new List&lt;int&gt;();</span><br><span class="line">        candidates.Add(divisor);</span><br><span class="line">        int index = 0;</span><br><span class="line">        // æ³¨æ„æº¢å‡º</span><br><span class="line">        while (candidates[index] &gt;= dividend - candidates[index]) &#123;</span><br><span class="line">            candidates.Add(candidates[index] + candidates[index]);</span><br><span class="line">            ++index;</span><br><span class="line">        &#125;</span><br><span class="line">        int ans = 0;</span><br><span class="line">        for (int i = candidates.Count - 1; i &gt;= 0; --i) &#123;</span><br><span class="line">            if (candidates[i] &gt;= dividend) &#123;</span><br><span class="line">                ans += 1 &lt;&lt; i;</span><br><span class="line">                dividend -= candidates[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return rev ? -ans : ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>Python3</summary><figure class="highlight python"><figcaption><span>[sol2-Python3]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">divide</span><span class="params">(self, dividend: int, divisor: int)</span> -&gt; int:</span></span><br><span class="line">        INT_MIN, INT_MAX = <span class="number">-2</span>**<span class="number">31</span>, <span class="number">2</span>**<span class="number">31</span> - <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># è€ƒè™‘è¢«é™¤æ•°ä¸ºæœ€å°å€¼çš„æƒ…å†µ</span></span><br><span class="line">        <span class="keyword">if</span> dividend == INT_MIN:</span><br><span class="line">            <span class="keyword">if</span> divisor == <span class="number">1</span>:</span><br><span class="line">                <span class="keyword">return</span> INT_MIN</span><br><span class="line">            <span class="keyword">if</span> divisor == <span class="number">-1</span>:</span><br><span class="line">                <span class="keyword">return</span> INT_MAX</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># è€ƒè™‘é™¤æ•°ä¸ºæœ€å°å€¼çš„æƒ…å†µ</span></span><br><span class="line">        <span class="keyword">if</span> divisor == INT_MIN:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span> <span class="keyword">if</span> dividend == INT_MIN <span class="keyword">else</span> <span class="number">0</span></span><br><span class="line">        <span class="comment"># è€ƒè™‘è¢«é™¤æ•°ä¸º 0 çš„æƒ…å†µ</span></span><br><span class="line">        <span class="keyword">if</span> dividend == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># ä¸€èˆ¬æƒ…å†µï¼Œä½¿ç”¨ç±»äºŒåˆ†æŸ¥æ‰¾</span></span><br><span class="line">        <span class="comment"># å°†æ‰€æœ‰çš„æ­£æ•°å–ç›¸åæ•°ï¼Œè¿™æ ·å°±åªéœ€è¦è€ƒè™‘ä¸€ç§æƒ…å†µ</span></span><br><span class="line">        rev = <span class="keyword">False</span></span><br><span class="line">        <span class="keyword">if</span> dividend &gt; <span class="number">0</span>:</span><br><span class="line">            dividend = -dividend</span><br><span class="line">            rev = <span class="keyword">not</span> rev</span><br><span class="line">        <span class="keyword">if</span> divisor &gt; <span class="number">0</span>:</span><br><span class="line">            divisor = -divisor</span><br><span class="line">            rev = <span class="keyword">not</span> rev</span><br><span class="line">        </span><br><span class="line">        candidates = [divisor]</span><br><span class="line">        <span class="comment"># æ³¨æ„æº¢å‡º</span></span><br><span class="line">        <span class="keyword">while</span> candidates[<span class="number">-1</span>] &gt;= dividend - candidates[<span class="number">-1</span>]:</span><br><span class="line">            candidates.append(candidates[<span class="number">-1</span>] + candidates[<span class="number">-1</span>])</span><br><span class="line">        </span><br><span class="line">        ans = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(candidates) - <span class="number">1</span>, <span class="number">-1</span>, <span class="number">-1</span>):</span><br><span class="line">            <span class="keyword">if</span> candidates[i] &gt;= dividend:</span><br><span class="line">                ans += (<span class="number">1</span> &lt;&lt; i)</span><br><span class="line">                dividend -= candidates[i]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> -ans <span class="keyword">if</span> rev <span class="keyword">else</span> ans</span><br></pre></td></tr></table></figure></details><details>    <summary>Golang</summary><figure class="highlight go"><figcaption><span>[sol2-Golang]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">divide</span><span class="params">(dividend, divisor <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> dividend == math.MinInt32 &#123; <span class="comment">// è€ƒè™‘è¢«é™¤æ•°ä¸ºæœ€å°å€¼çš„æƒ…å†µ</span></span><br><span class="line">        <span class="keyword">if</span> divisor == <span class="number">1</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> math.MinInt32</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> divisor == <span class="number">-1</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> math.MaxInt32</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> divisor == math.MinInt32 &#123; <span class="comment">// è€ƒè™‘é™¤æ•°ä¸ºæœ€å°å€¼çš„æƒ…å†µ</span></span><br><span class="line">        <span class="keyword">if</span> dividend == math.MinInt32 &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> dividend == <span class="number">0</span> &#123; <span class="comment">// è€ƒè™‘è¢«é™¤æ•°ä¸º 0 çš„æƒ…å†µ</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸€èˆ¬æƒ…å†µï¼Œä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾</span></span><br><span class="line">    <span class="comment">// å°†æ‰€æœ‰çš„æ­£æ•°å–ç›¸åæ•°ï¼Œè¿™æ ·å°±åªéœ€è¦è€ƒè™‘ä¸€ç§æƒ…å†µ</span></span><br><span class="line">    rev := <span class="literal">false</span></span><br><span class="line">    <span class="keyword">if</span> dividend &gt; <span class="number">0</span> &#123;</span><br><span class="line">        dividend = -dividend</span><br><span class="line">        rev = !rev</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> divisor &gt; <span class="number">0</span> &#123;</span><br><span class="line">        divisor = -divisor</span><br><span class="line">        rev = !rev</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    candidates := []<span class="keyword">int</span>&#123;divisor&#125;</span><br><span class="line">    <span class="keyword">for</span> y := divisor; y &gt;= dividend-y; &#123; <span class="comment">// æ³¨æ„æº¢å‡º</span></span><br><span class="line">        y += y</span><br><span class="line">        candidates = <span class="built_in">append</span>(candidates, y)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ans := <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="built_in">len</span>(candidates) - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i-- &#123;</span><br><span class="line">        <span class="keyword">if</span> candidates[i] &gt;= dividend &#123;</span><br><span class="line">            ans |= <span class="number">1</span> &lt;&lt; i</span><br><span class="line">            dividend -= candidates[i]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> rev &#123;</span><br><span class="line">        <span class="keyword">return</span> -ans</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>JavaScript</summary><figure class="highlight javascript"><figcaption><span>[sol2-JavaScript]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> divide = <span class="function"><span class="keyword">function</span>(<span class="params">dividend, divisor</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> MAX_VALUE = <span class="number">2</span> ** <span class="number">31</span> - <span class="number">1</span>, MIN_VALUE = -(<span class="number">2</span> ** <span class="number">31</span>);</span><br><span class="line">    <span class="comment">// è€ƒè™‘è¢«é™¤æ•°ä¸ºæœ€å°å€¼çš„æƒ…å†µ</span></span><br><span class="line">    <span class="keyword">if</span> (dividend === MIN_VALUE) &#123;</span><br><span class="line">        <span class="keyword">if</span> (divisor === <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> MIN_VALUE;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (divisor === <span class="number">-1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> MAX_VALUE;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è€ƒè™‘é™¤æ•°ä¸ºæœ€å°å€¼çš„æƒ…å†µ</span></span><br><span class="line">    <span class="keyword">if</span> (divisor === MIN_VALUE) &#123;</span><br><span class="line">        <span class="keyword">return</span> dividend === MIN_VALUE ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è€ƒè™‘è¢«é™¤æ•°ä¸º 0 çš„æƒ…å†µ</span></span><br><span class="line">    <span class="keyword">if</span> (dividend === <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ä¸€èˆ¬æƒ…å†µï¼Œä½¿ç”¨ç±»äºŒåˆ†æŸ¥æ‰¾</span></span><br><span class="line">    <span class="comment">// å°†æ‰€æœ‰çš„æ­£æ•°å–ç›¸åæ•°ï¼Œè¿™æ ·å°±åªéœ€è¦è€ƒè™‘ä¸€ç§æƒ…å†µ</span></span><br><span class="line">    <span class="keyword">let</span> rev = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span> (dividend &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        dividend = -dividend;</span><br><span class="line">        rev = !rev;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (divisor &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        divisor = -divisor;</span><br><span class="line">        rev = !rev;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> candidates = [divisor];</span><br><span class="line">    <span class="keyword">let</span> index = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// æ³¨æ„æº¢å‡º</span></span><br><span class="line">    <span class="keyword">while</span> (candidates[index] &gt;= dividend - candidates[index]) &#123;</span><br><span class="line">        candidates.push(candidates[index] + candidates[index]);</span><br><span class="line">        ++index;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = candidates.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (candidates[i] &gt;= dividend) &#123;</span><br><span class="line">            ans += <span class="number">1</span> &lt;&lt; i;</span><br><span class="line">            dividend -= candidates[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> rev ? -ans : ans;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></details>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç»™å®šä¸¤ä¸ªæ•´æ•° a å’Œ b ï¼Œæ±‚å®ƒä»¬çš„é™¤æ³•çš„å•† a/b ï¼Œè¦æ±‚ä¸å¾—ä½¿ç”¨ä¹˜å· â€˜*â€™ã€é™¤å· â€˜/â€˜ ä»¥åŠæ±‚ä½™ç¬¦å· â€˜%â€™ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="2021å¹´10æœˆ" scheme="http://yoursite.com/categories/2021%E5%B9%B410%E6%9C%88/"/>
    
    
      <category term="LeetCode" scheme="http://yoursite.com/tags/LeetCode/"/>
    
      <category term="Math" scheme="http://yoursite.com/tags/Math/"/>
    
      <category term="Bit Manipulation" scheme="http://yoursite.com/tags/Bit-Manipulation/"/>
    
  </entry>
  
  <entry>
    <title>1071. å­—ç¬¦ä¸²çš„æœ€å¤§å…¬å› å­</title>
    <link href="http://yoursite.com/2021/09/04/1071.%20%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%9C%80%E5%A4%A7%E5%85%AC%E5%9B%A0%E5%AD%90/"/>
    <id>http://yoursite.com/2021/09/04/1071. å­—ç¬¦ä¸²çš„æœ€å¤§å…¬å› å­/</id>
    <published>2021-09-04T08:12:12.000Z</published>
    <updated>2021-09-06T02:45:24.264Z</updated>
    
    <content type="html"><![CDATA[<p>å¯¹äºå­—ç¬¦ä¸² S å’Œ Tï¼Œåªæœ‰åœ¨ S = T + â€¦ + Tï¼ˆT è‡ªèº«è¿æ¥ 1 æ¬¡æˆ–å¤šæ¬¡ï¼‰æ—¶ï¼Œæˆ‘ä»¬æ‰è®¤å®š â€œT èƒ½é™¤å°½ Sâ€ã€‚</p><p>è¿”å›æœ€é•¿å­—ç¬¦ä¸² Xï¼Œè¦æ±‚æ»¡è¶³ X èƒ½é™¤å°½ str1 ä¸” X èƒ½é™¤å°½ str2ã€‚</p><a id="more"></a><p>ç¤ºä¾‹ 1ï¼š</p><pre><code>è¾“å…¥ï¼šstr1 = &quot;ABCABC&quot;, str2 = &quot;ABC&quot;è¾“å‡ºï¼š&quot;ABC&quot;</code></pre><p>ç¤ºä¾‹ 2ï¼š</p><pre><code>è¾“å…¥ï¼šstr1 = &quot;ABABAB&quot;, str2 = &quot;ABAB&quot;è¾“å‡ºï¼š&quot;AB&quot;</code></pre><p>ç¤ºä¾‹ 3ï¼š</p><pre><code>è¾“å…¥ï¼šstr1 = &quot;LEET&quot;, str2 = &quot;CODE&quot;è¾“å‡ºï¼š&quot;&quot;</code></pre><p>æç¤ºï¼š</p><pre><code>1 &lt;= str1.length &lt;= 10001 &lt;= str2.length &lt;= 1000str1[i] å’Œ str2[i] ä¸ºå¤§å†™è‹±æ–‡å­—æ¯</code></pre><h1 id="é¢„å¤‡çŸ¥è¯†"><a href="#é¢„å¤‡çŸ¥è¯†" class="headerlink" title="é¢„å¤‡çŸ¥è¯†"></a>é¢„å¤‡çŸ¥è¯†</h1><ul><li>çº¦æ•°ï¼Œæœ€å¤§å…¬çº¦æ•°</li><li>è¾—è½¬ç›¸é™¤æ³•</li></ul><h1 id="æ–¹æ³•ä¸€ï¼šæšä¸¾"><a href="#æ–¹æ³•ä¸€ï¼šæšä¸¾" class="headerlink" title="æ–¹æ³•ä¸€ï¼šæšä¸¾"></a>æ–¹æ³•ä¸€ï¼šæšä¸¾</h1><p><strong>æ€è·¯å’Œç®—æ³•</strong></p><p>é¦–å…ˆç­”æ¡ˆè‚¯å®šæ˜¯å­—ç¬¦ä¸²çš„æŸä¸ªå‰ç¼€ï¼Œç„¶åç®€å•ç›´è§‚çš„æƒ³æ³•å°±æ˜¯æšä¸¾æ‰€æœ‰çš„å‰ç¼€æ¥åˆ¤æ–­ï¼Œæˆ‘ä»¬è®¾è¿™ä¸ªå‰ç¼€ä¸²é•¿åº¦ä¸º len ï¼Œ<code>str1</code> çš„é•¿åº¦ä¸º len1ï¼Œ<code>str2</code> çš„é•¿åº¦ä¸º len2 ï¼Œåˆ™æˆ‘ä»¬çŸ¥é“å‰ç¼€ä¸²çš„é•¿åº¦å¿…ç„¶è¦æ˜¯ä¸¤ä¸ªå­—ç¬¦ä¸²é•¿åº¦çš„çº¦æ•°æ‰èƒ½æ»¡è¶³æ¡ä»¶ï¼Œå¦åˆ™æ— æ³•ç»è¿‡è‹¥å¹²æ¬¡æ‹¼æ¥åå¾—åˆ°é•¿åº¦ç›¸ç­‰çš„å­—ç¬¦ä¸²</p><p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥æšä¸¾ç¬¦åˆé•¿åº¦æ¡ä»¶çš„å‰ç¼€ä¸²ï¼Œå†å»åˆ¤æ–­è¿™ä¸ªå‰ç¼€ä¸²æ‹¼æ¥è‹¥å¹²æ¬¡ä»¥åæ˜¯å¦ç­‰äº <code>str1</code> å’Œ <code>str2</code> å³å¯ã€‚</p><p>ç”±äºé¢˜ç›®è¦æ±‚æœ€é•¿çš„ç¬¦åˆè¦æ±‚çš„å­—ç¬¦ä¸² <code>X</code>ï¼Œæ‰€ä»¥å¯ä»¥æŒ‰é•¿åº¦ä»å¤§åˆ°å°æšä¸¾å‰ç¼€ä¸²ï¼Œè¿™æ ·ç¢°åˆ°ç¬¬ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„å‰ç¼€ä¸²è¿”å›å³å¯ã€‚</p><details>    <summary>C++</summary><figure class="highlight c++"><figcaption><span>[sol1-C++]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(<span class="built_in">string</span> t,<span class="built_in">string</span> s)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> lenx = (<span class="keyword">int</span>)s.length() / (<span class="keyword">int</span>)t.length();</span><br><span class="line">        <span class="built_in">string</span> ans = <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= lenx; ++i)&#123;</span><br><span class="line">            ans = ans + t;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans == s;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="built_in">string</span> <span class="title">gcdOfStrings</span><span class="params">(<span class="built_in">string</span> str1, <span class="built_in">string</span> str2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> len1 = (<span class="keyword">int</span>)str1.length(), len2 = (<span class="keyword">int</span>)str2.length();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = min(len1, len2); i &gt;= <span class="number">1</span>; --i)&#123; <span class="comment">// ä»é•¿åº¦å¤§çš„å¼€å§‹æšä¸¾</span></span><br><span class="line">            <span class="keyword">if</span> (len1 % i == <span class="number">0</span> &amp;&amp; len2 % i == <span class="number">0</span>)&#123;</span><br><span class="line">                <span class="built_in">string</span> X = str1.substr(<span class="number">0</span>, i);</span><br><span class="line">                <span class="keyword">if</span> (check(X, str1) &amp;&amp; check(X, str2)) <span class="keyword">return</span> X;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></details><details>    <summary>Java</summary><figure class="highlight java"><figcaption><span>[sol1-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">gcdOfStrings</span><span class="params">(String str1, String str2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> len1 = str1.length(), len2 = str2.length();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = Math.min(len1, len2); i &gt;= <span class="number">1</span>; --i) &#123; <span class="comment">// ä»é•¿åº¦å¤§çš„å¼€å§‹æšä¸¾</span></span><br><span class="line">            <span class="keyword">if</span> (len1 % i == <span class="number">0</span> &amp;&amp; len2 % i == <span class="number">0</span>) &#123;</span><br><span class="line">                String X = str1.substring(<span class="number">0</span>, i);</span><br><span class="line">                <span class="keyword">if</span> (check(X, str1) &amp;&amp; check(X, str2)) &#123;</span><br><span class="line">                    <span class="keyword">return</span> X;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">check</span><span class="params">(String t, String s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> lenx = s.length() / t.length();</span><br><span class="line">        StringBuffer ans = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= lenx; ++i) &#123;</span><br><span class="line">            ans.append(t);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans.toString().equals(s);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>Python</summary><figure class="highlight python"><figcaption><span>[sol1-Python3]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">gcdOfStrings</span><span class="params">(self, str1: str, str2: str)</span> -&gt; str:</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(min(len(str1), len(str2)), <span class="number">0</span>, <span class="number">-1</span>):</span><br><span class="line">            <span class="keyword">if</span> (len(str1) % i) == <span class="number">0</span> <span class="keyword">and</span> (len(str2) % i) == <span class="number">0</span>:</span><br><span class="line">                <span class="keyword">if</span> str1[: i] * (len(str1) // i) == str1 <span class="keyword">and</span> str1[: i] * (len(str2) // i) == str2:</span><br><span class="line">                    <span class="keyword">return</span> str1[: i]</span><br><span class="line">        <span class="keyword">return</span> <span class="string">''</span></span><br></pre></td></tr></table></figure></details><p><strong>å¤æ‚åº¦åˆ†æ</strong></p><h1 id="æ–¹æ³•äºŒï¼šæšä¸¾ä¼˜åŒ–"><a href="#æ–¹æ³•äºŒï¼šæšä¸¾ä¼˜åŒ–" class="headerlink" title="æ–¹æ³•äºŒï¼šæšä¸¾ä¼˜åŒ–"></a>æ–¹æ³•äºŒï¼šæšä¸¾ä¼˜åŒ–</h1><p><strong>æ€è·¯</strong></p><p>æ³¨æ„åˆ°ä¸€ä¸ªæ€§è´¨ï¼š<strong>å¦‚æœå­˜åœ¨ä¸€ä¸ªç¬¦åˆè¦æ±‚çš„å­—ç¬¦ä¸² <code>X</code>ï¼Œé‚£ä¹ˆä¹Ÿä¸€å®šå­˜åœ¨ä¸€ä¸ªç¬¦åˆè¦æ±‚çš„å­—ç¬¦ä¸² <code>X&#39;</code>ï¼Œå®ƒçš„é•¿åº¦ä¸º <code>str1</code> å’Œ <code>str2</code> é•¿åº¦çš„æœ€å¤§å…¬çº¦æ•°</strong>ã€‚</p><p>ç®€å•æ¥è¯´ï¼Œæ–¹æ³•ä¸€ä¸­æˆ‘ä»¬å·²ç»çŸ¥é“ç¬¦åˆæ¡ä»¶çš„é•¿åº¦å‡ºç°åœ¨ gcd(len1,len2) çš„æ‰€æœ‰çº¦æ•°ä¸­ï¼Œæˆ‘ä»¬å‡è®¾å…¶ä¸­ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„çº¦æ•°ä¸º lenx ï¼Œè¯¥é•¿åº¦ä¸º lenx çš„å‰ç¼€ä¸² <em>X</em> èƒ½ç»è¿‡è‹¥å¹²æ¬¡æ‹¼æ¥åå¾—åˆ° <code>str1</code> å’Œ <code>str2</code>ã€‚æ‹¿ <code>str1</code> ä¸¾ä¾‹ï¼Œ<em>X</em> ç»è¿‡ len1/lenx  æ¬¡æ‹¼æ¥åå¾—åˆ°äº† <code>str1</code>ï¼Œè€Œ <em>X</em> åˆèƒ½ç»è¿‡ gcd(len1,len2)/lenx æ¬¡æ‹¼æ¥åå¾—åˆ°é•¿åº¦ä¸ºgcd(len1,len2) çš„å‰ç¼€ä¸² <em>Xâ€™</em> ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ¯æ¬¡å–å‡º gcd(len1,len2)/lenx ä¸ª <em>X</em> æ¥ç”¨ <em>Xâ€™</em> å®Œæˆæ›¿æ¢ï¼Œæœ€å <code>str1</code> ä¼šè¢«æ›¿æ¢æˆ len1/gcd(len1,len2)  ä¸ª <em>Xâ€™</em> ï¼Œ<code>str2</code> åŒç†å¯å¾—ã€‚å› æ­¤å¦‚æœå­˜åœ¨ä¸€ä¸ªç¬¦åˆè¦æ±‚çš„å­—ç¬¦ä¸² <em>X</em>ï¼Œé‚£ä¹ˆä¹Ÿä¸€å®šå­˜åœ¨ä¸€ä¸ªç¬¦åˆè¦æ±‚çš„å­—ç¬¦ä¸² <em>Xâ€™</em>ï¼Œå®ƒçš„é•¿åº¦ä¸º <code>str1</code> å’Œ <code>str2</code> é•¿åº¦çš„æœ€å¤§å…¬çº¦æ•°ã€‚æˆ‘ä»¬åªéœ€è¦åˆ¤æ–­é•¿åº¦ä¸ºgcd(len1,len2) çš„å‰ç¼€ä¸²æ˜¯å¦æ»¡è¶³è¦æ±‚å³å¯ã€‚</p><p><strong>ç®—æ³•</strong></p><p>ç”±ä¸Šè¿°æ€§è´¨æˆ‘ä»¬å¯ä»¥å…ˆç”¨è¾—è½¬ç›¸é™¤æ³•æ±‚å¾—ä¸¤ä¸ªå­—ç¬¦ä¸²é•¿åº¦çš„æœ€å¤§å…¬çº¦æ•°gcd(len1,len2) ï¼Œå–å‡ºè¯¥é•¿åº¦çš„å‰ç¼€ä¸²ï¼Œåˆ¤æ–­ä¸€ä¸‹å®ƒæ˜¯å¦èƒ½ç»è¿‡è‹¥å¹²æ¬¡æ‹¼æ¥å¾—åˆ° <code>str1</code> å’Œ <code>str2</code> å³å¯ã€‚</p><details>    <summary>C++</summary><figure class="highlight c++"><figcaption><span>[sol2-C++]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(<span class="built_in">string</span> t,<span class="built_in">string</span> s)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> lenx = (<span class="keyword">int</span>)s.length() / (<span class="keyword">int</span>)t.length();</span><br><span class="line">        <span class="built_in">string</span> ans = <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= lenx; ++i)&#123;</span><br><span class="line">            ans = ans + t;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans == s;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="built_in">string</span> <span class="title">gcdOfStrings</span><span class="params">(<span class="built_in">string</span> str1, <span class="built_in">string</span> str2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> len1 = (<span class="keyword">int</span>)str1.length(), len2 = (<span class="keyword">int</span>)str2.length();</span><br><span class="line">        <span class="built_in">string</span> T = str1.substr(<span class="number">0</span>, __gcd(len1,len2)); <span class="comment">// __gcd() ä¸ºc++è‡ªå¸¦çš„æ±‚æœ€å¤§å…¬çº¦æ•°çš„å‡½æ•°</span></span><br><span class="line">        <span class="keyword">if</span> (check(T, str1) &amp;&amp; check(T, str2)) <span class="keyword">return</span> T;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></details><details>    <summary>Java</summary><figure class="highlight java"><figcaption><span>[sol2-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">gcdOfStrings</span><span class="params">(String str1, String str2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> len1 = str1.length(), len2 = str2.length();</span><br><span class="line">        String T = str1.substring(<span class="number">0</span>, gcd(len1, len2));</span><br><span class="line">        <span class="keyword">if</span> (check(T, str1) &amp;&amp; check(T, str2)) &#123;</span><br><span class="line">            <span class="keyword">return</span> T;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">check</span><span class="params">(String t, String s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> lenx = s.length() / t.length();</span><br><span class="line">        StringBuffer ans = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= lenx; ++i) &#123;</span><br><span class="line">            ans.append(t);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans.toString().equals(s);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">gcd</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> remainder = a % b;</span><br><span class="line">        <span class="keyword">while</span> (remainder != <span class="number">0</span>) &#123;</span><br><span class="line">            a = b;</span><br><span class="line">            b = remainder;</span><br><span class="line">            remainder = a % b;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> b;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>Python3</summary><figure class="highlight python"><figcaption><span>[sol2-Python3]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">gcdOfStrings</span><span class="params">(self, str1: str, str2: str)</span> -&gt; str:</span></span><br><span class="line">        candidate_len = math.gcd(len(str1), len(str2))</span><br><span class="line">        candidate = str1[: candidate_len]</span><br><span class="line">        <span class="keyword">if</span> candidate * (len(str1) // candidate_len) == str1 <span class="keyword">and</span> candidate * (len(str2) // candidate_len) == str2:</span><br><span class="line">            <span class="keyword">return</span> candidate</span><br><span class="line">        <span class="keyword">return</span> <span class="string">''</span></span><br></pre></td></tr></table></figure></details><h1 id="æ–¹æ³•ä¸‰ï¼šæ•°å­¦"><a href="#æ–¹æ³•ä¸‰ï¼šæ•°å­¦" class="headerlink" title="æ–¹æ³•ä¸‰ï¼šæ•°å­¦"></a>æ–¹æ³•ä¸‰ï¼šæ•°å­¦</h1><p><strong>æ€è·¯</strong></p><p>éœ€è¦çŸ¥é“ä¸€ä¸ªæ€§è´¨ï¼š<strong>å¦‚æœ <code>str1</code> å’Œ <code>str2</code> æ‹¼æ¥åç­‰äº <code>str2</code>å’Œ <code>str1</code> æ‹¼æ¥èµ·æ¥çš„å­—ç¬¦ä¸²ï¼ˆæ³¨æ„æ‹¼æ¥é¡ºåºä¸åŒï¼‰ï¼Œé‚£ä¹ˆä¸€å®šå­˜åœ¨ç¬¦åˆæ¡ä»¶çš„å­—ç¬¦ä¸² <code>X</code></strong>ã€‚</p><p>å…ˆè¯å¿…è¦æ€§ï¼Œå³å¦‚æœå­˜åœ¨ç¬¦åˆæ¡ä»¶çš„å­—ç¬¦ä¸² <code>X</code> ï¼Œåˆ™ <code>str1</code> å’Œ <code>str2</code> æ‹¼æ¥åç­‰äº <code>str2</code>å’Œ <code>str1</code> æ‹¼æ¥èµ·æ¥çš„å­—ç¬¦ä¸²ã€‚</p><p>å¦‚æœå­—ç¬¦ä¸² <code>X</code> ç¬¦åˆæ¡ä»¶ï¼Œé‚£ä¹ˆ <code>str1=X+X+...+X+X=n*X</code> ï¼Œ<code>str2=X+X+..+X+X=m*X</code>ï¼Œ<code>n*X</code> è¡¨ç¤º <code>n</code> ä¸ªå­—ç¬¦ä¸² <code>X</code> æ‹¼æ¥ï¼Œ<code>m*X</code> åŒç†ï¼Œåˆ™ <code>str1</code> ä¸ <code>str2</code> æ‹¼æ¥åçš„å­—ç¬¦ä¸²å³ä¸º <code>(n+m)*X</code>ï¼Œè€Œ <code>str2</code> ä¸ <code>str1</code> æ‹¼æ¥åçš„å­—ç¬¦ä¸²å³ä¸º <code>(m+n)*X</code>ï¼Œç­‰äº <code>(n+m)*X</code>ï¼Œæ‰€ä»¥å¿…è¦æ€§å¾—è¯ã€‚</p><p>å†çœ‹å……åˆ†æ€§ï¼Œç®€å•æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥å¦‚ä¸‹å›¾ä¸€æ ·å…ˆå°†ä¸¤ä¸ªæ‹¼æ¥åçš„å­—ç¬¦ä¸²æ”¾åœ¨ä¸€èµ·ã€‚ä¸å¤±ä¸€èˆ¬æ€§ï¼Œæˆ‘ä»¬å‡å®š <code>str1</code> çš„é•¿åº¦å¤§äº <code>str2</code>ï¼Œ</p><p>æˆ‘ä»¬ç­‰é—´éš”å–gcd(len1,len2) é•¿åº¦çš„å­—ç¬¦ä¸²ã€‚</p><p>å¦‚æœè¯¥é•¿åº¦ç­‰äº <code>str2</code> çš„é•¿åº¦ï¼Œå³ <code>str1</code> çš„é•¿åº¦å¯ä»¥æ•´é™¤ <code>str2</code> çš„é•¿åº¦ã€‚æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œå·²çŸ¥å›¾ä¸­ç¬¬ä¸€éƒ¨åˆ†ç­‰äºå›¾ä¸­çš„ç¬¬äºŒéƒ¨åˆ†ï¼ˆéƒ½æ˜¯å­—ç¬¦ä¸² <code>str1</code> çš„å¼€å¤´ï¼‰ï¼Œè€Œå›¾ä¸­çš„ç¬¬äºŒéƒ¨åˆ†åˆç­‰äºç¬¬ä¸‰éƒ¨åˆ†ï¼ˆä¸¤ä¸ªå­—ç¬¦ä¸²ç›¸ç­‰ï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬çŸ¥é“ç¬¬ä¸‰éƒ¨åˆ†ä¹Ÿæ˜¯ç­‰äºç¬¬ä¸€éƒ¨åˆ†ã€‚åŒç†æˆ‘ä»¬å¯ä»¥æ¨å¾—å›¾ä¸­åˆ’åˆ†çš„ <code>1,3,5,7</code> å››ä¸ªéƒ¨åˆ†éƒ½ç›¸ç­‰ï¼Œæ‰€ä»¥æ‹¼æ¥èµ·æ¥çš„å­—ç¬¦ä¸²å¯ä»¥ç”±ç¬¬ä¸€éƒ¨åˆ†çš„å‰ç¼€ä¸²ç»è¿‡è‹¥å¹²æ¬¡æ‹¼æ¥å¾—åˆ°ã€‚</p><p>é‚£ä¹ˆå¦‚æœä¸ç­‰äº <code>str2</code> çš„é•¿åº¦ï¼Œæˆ‘ä»¬ç”±ä¸Šæ–‡ä¸€æ ·çš„æ–¹æ³•å¯ä»¥æ¨å¾—ä¸‹å›¾ä¸­è¢«æŸ“é¢œè‰²ç›¸åŒçš„å­—ç¬¦ä¸²ç‰‡æ®µæ˜¯ç›¸ç­‰çš„ï¼Œå…¶ä¸­æ¯ä¸ªé¢œè‰²ç‰‡æ®µéƒ½æ˜¯é•¿ä¸º gcd(len1,len2) çš„å­—ç¬¦ä¸²ã€‚é‚£ä¹ˆä¸åŒé¢œè‰²ä»£è¡¨çš„å­—ç¬¦ä¸²æ˜¯å¦ä¹Ÿç›¸ç­‰å‘¢ï¼Ÿå¦‚æœç›¸ç­‰å°±å¯ä»¥æ¨å¾—æˆ‘ä»¬çš„ç»“è®ºæ˜¯æ­£ç¡®çš„ã€‚</p><p>å…¶å®ç”±ä¸Šå›¾æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œå› ä¸ºç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²å’Œç¬¬äºŒä¸ªå­—ç¬¦ä¸²ç›¸ç­‰ï¼Œæ‰€ä»¥ä¸¤ä¸ªå­—ç¬¦ä¸²å¼€å¤´çš„éƒ¨åˆ†å¿…ç„¶ç›¸ç­‰ã€‚æˆ‘ä»¬å°†å‰ len2/gcd(len1,len2) ä¸ªè¢«æŸ“é¢œè‰²çš„éƒ¨åˆ†æ”¾åœ¨ä¸€èµ·æ¯”è¾ƒå³å¯æ¨å¾—ä¸åŒé¢œè‰²çš„éƒ¨åˆ†éƒ½æ˜¯ä¸¤ä¸¤ç›¸ç­‰çš„ï¼Œä½†æ˜¯è¿™æ˜¯åŸºäºå®ƒä»¬å¼€å¤´è¢«æŸ“çš„é¢œè‰²é¡ºåºæ˜¯ä¸åŒçš„ï¼Œè¿™ä¸€å®šæˆç«‹å—ï¼Ÿ</p><p>å…¶å®å›¾ä¸­å¯ä»¥çœ‹å‡ºç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²è¢«æŸ“çš„é¢œè‰²æ˜¯ä»¥ <code>str2</code> çš„é•¿åº¦åœ¨å¾ªç¯çš„ï¼Œç”±äºç¬¬äºŒç§æƒ…å†µä¸‹ <code>str1</code> çš„é•¿åº¦ä¸æ•´é™¤ <code>str2</code> çš„é•¿åº¦ï¼Œå¯¼è‡´ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²çš„ <code>str1</code> éƒ¨åˆ†è¢«æŸ“å®Œé¢œè‰²çš„æ—¶å€™ï¼Œ<code>str2</code> è¢«æŸ“çš„é¢œè‰²çš„é¡ºåºå¿…ç„¶ä¸ç­‰äºå¼€å¤´ <code>str1</code> è¢«æŸ“çš„é¢œè‰²é¡ºåºï¼Œè€Œç¬¬äºŒä¸ªå­—ç¬¦ä¸²çš„å¼€å¤´åˆæ˜¯ <code>str2</code>ï¼Œå®ƒè¢«æŸ“è‰²çš„é¡ºåºæ˜¯ç­‰äºç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ <code>str2</code> è¢«æŸ“è‰²çš„é¡ºåºçš„ï¼Œæ‰€ä»¥ä¸¤ä¸ªå­—ç¬¦ä¸²çš„å¼€å¤´è¢«æŸ“çš„é¢œè‰²é¡ºåºä¸€å®šä¸åŒã€‚æœ€åæˆ‘ä»¬å°±æ¨å‡ºå¦‚æœ <code>str1</code> å’Œ <code>str2</code> æ‹¼æ¥åç­‰äº <code>str2</code> å’Œ <code>str1</code> æ‹¼æ¥èµ·æ¥çš„å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆä¸€å®šå­˜åœ¨ç¬¦åˆæ¡ä»¶çš„å­—ç¬¦ä¸² <code>X</code>ã€‚</p><p><strong>ç®—æ³•</strong></p><p>æœ‰äº†è¯¥æ€§è´¨ä»¥åŠæ–¹æ³•äºŒçš„æ€§è´¨ï¼Œæˆ‘ä»¬å°±å¯ä»¥å…ˆåˆ¤æ–­ <code>str1</code> å’Œ <code>str2</code> æ‹¼æ¥åæ˜¯å¦ç­‰äº <code>str2</code> å’Œ <code>str1</code> æ‹¼æ¥èµ·æ¥çš„å­—ç¬¦ä¸²ï¼Œå¦‚æœç­‰äºç›´æ¥è¾“å‡ºé•¿åº¦ä¸ºgcd(len1,len2) çš„å‰ç¼€ä¸²å³å¯ï¼Œå¦åˆ™è¿”å›ç©ºä¸²ã€‚</p><details>    <summary>C++</summary><figure class="highlight c++"><figcaption><span>[sol3-C++]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="built_in">string</span> <span class="title">gcdOfStrings</span><span class="params">(<span class="built_in">string</span> str1, <span class="built_in">string</span> str2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (str1 + str2 != str2 + str1) <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">return</span> str1.substr(<span class="number">0</span>, __gcd((<span class="keyword">int</span>)str1.length(), (<span class="keyword">int</span>)str2.length())); <span class="comment">// __gcd() ä¸ºc++è‡ªå¸¦çš„æ±‚æœ€å¤§å…¬çº¦æ•°çš„å‡½æ•°</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></details><details>    <summary>Java</summary><figure class="highlight java"><figcaption><span>[sol3-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">gcdOfStrings</span><span class="params">(String str1, String str2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!str1.concat(str2).equals(str2.concat(str1))) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> str1.substring(<span class="number">0</span>, gcd(str1.length(), str2.length()));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">gcd</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> remainder = a % b;</span><br><span class="line">        <span class="keyword">while</span> (remainder != <span class="number">0</span>) &#123;</span><br><span class="line">            a = b;</span><br><span class="line">            b = remainder;</span><br><span class="line">            remainder = a % b;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> b;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>Python</summary><figure class="highlight python"><figcaption><span>[sol3-Python3]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">gcdOfStrings</span><span class="params">(self, str1: str, str2: str)</span> -&gt; str:</span></span><br><span class="line">        candidate_len = math.gcd(len(str1), len(str2))</span><br><span class="line">        candidate = str1[: candidate_len]</span><br><span class="line">        <span class="keyword">if</span> str1 + str2 == str2 + str1:</span><br><span class="line">            <span class="keyword">return</span> candidate</span><br><span class="line">        <span class="keyword">return</span> <span class="string">''</span></span><br></pre></td></tr></table></figure></details>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å¯¹äºå­—ç¬¦ä¸² S å’Œ Tï¼Œåªæœ‰åœ¨ S = T + â€¦ + Tï¼ˆT è‡ªèº«è¿æ¥ 1 æ¬¡æˆ–å¤šæ¬¡ï¼‰æ—¶ï¼Œæˆ‘ä»¬æ‰è®¤å®š â€œT èƒ½é™¤å°½ Sâ€ã€‚&lt;/p&gt;
&lt;p&gt;è¿”å›æœ€é•¿å­—ç¬¦ä¸² Xï¼Œè¦æ±‚æ»¡è¶³ X èƒ½é™¤å°½ str1 ä¸” X èƒ½é™¤å°½ str2ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="2021å¹´9æœˆ" scheme="http://yoursite.com/categories/2021%E5%B9%B49%E6%9C%88/"/>
    
    
      <category term="LeetCode" scheme="http://yoursite.com/tags/LeetCode/"/>
    
      <category term="Math" scheme="http://yoursite.com/tags/Math/"/>
    
      <category term="String" scheme="http://yoursite.com/tags/String/"/>
    
  </entry>
  
  <entry>
    <title>1206. è®¾è®¡è·³è¡¨</title>
    <link href="http://yoursite.com/2021/05/07/1206.%20%E8%AE%BE%E8%AE%A1%E8%B7%B3%E8%A1%A8/"/>
    <id>http://yoursite.com/2021/05/07/1206. è®¾è®¡è·³è¡¨/</id>
    <published>2021-05-07T07:12:12.000Z</published>
    <updated>2021-05-19T12:24:53.918Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸ä½¿ç”¨ä»»ä½•åº“å‡½æ•°ï¼Œè®¾è®¡ä¸€ä¸ªè·³è¡¨ã€‚</p><p>è·³è¡¨æ˜¯åœ¨ O(log(n)) æ—¶é—´å†…å®Œæˆå¢åŠ ã€åˆ é™¤ã€æœç´¢æ“ä½œçš„æ•°æ®ç»“æ„ã€‚è·³è¡¨ç›¸æ¯”äºæ ‘å †ä¸çº¢é»‘æ ‘ï¼Œå…¶åŠŸèƒ½ä¸æ€§èƒ½ç›¸å½“ï¼Œå¹¶ä¸”è·³è¡¨çš„ä»£ç é•¿åº¦ç›¸è¾ƒä¸‹æ›´çŸ­ï¼Œå…¶è®¾è®¡æ€æƒ³ä¸é“¾è¡¨ç›¸ä¼¼ã€‚</p><a id="more"></a><p>ä¾‹å¦‚ï¼Œä¸€ä¸ªè·³è¡¨åŒ…å« [30, 40, 50, 60, 70, 90]ï¼Œç„¶åå¢åŠ  80ã€45 åˆ°è·³è¡¨ä¸­ï¼Œä»¥ä¸‹å›¾çš„æ–¹å¼æ“ä½œï¼š</p><p>Artyom Kalinin [CC BY-SA 3.0], via Wikimedia Commons</p><p>è·³è¡¨ä¸­æœ‰å¾ˆå¤šå±‚ï¼Œæ¯ä¸€å±‚æ˜¯ä¸€ä¸ªçŸ­çš„é“¾è¡¨ã€‚åœ¨ç¬¬ä¸€å±‚çš„ä½œç”¨ä¸‹ï¼Œå¢åŠ ã€åˆ é™¤å’Œæœç´¢æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¸è¶…è¿‡ O(n)ã€‚è·³è¡¨çš„æ¯ä¸€ä¸ªæ“ä½œçš„å¹³å‡æ—¶é—´å¤æ‚åº¦æ˜¯ O(log(n))ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯ O(n)ã€‚</p><p>åœ¨æœ¬é¢˜ä¸­ï¼Œä½ çš„è®¾è®¡åº”è¯¥è¦åŒ…å«è¿™äº›å‡½æ•°ï¼š</p><p>bool search(int target) : è¿”å›targetæ˜¯å¦å­˜åœ¨äºè·³è¡¨ä¸­ã€‚<br>void add(int num): æ’å…¥ä¸€ä¸ªå…ƒç´ åˆ°è·³è¡¨ã€‚<br>bool erase(int num): åœ¨è·³è¡¨ä¸­åˆ é™¤ä¸€ä¸ªå€¼ï¼Œå¦‚æœ num ä¸å­˜åœ¨ï¼Œç›´æ¥è¿”å›false. å¦‚æœå­˜åœ¨å¤šä¸ª num ï¼Œåˆ é™¤å…¶ä¸­ä»»æ„ä¸€ä¸ªå³å¯ã€‚<br>äº†è§£æ›´å¤š : <a href="https://en.wikipedia.org/wiki/Skip_list" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/Skip_list</a></p><p>æ³¨æ„ï¼Œè·³è¡¨ä¸­å¯èƒ½å­˜åœ¨å¤šä¸ªç›¸åŒçš„å€¼ï¼Œä½ çš„ä»£ç éœ€è¦å¤„ç†è¿™ç§æƒ…å†µã€‚</p><p>æ ·ä¾‹:</p><pre><code>Skiplist skiplist = new Skiplist();skiplist.add(1);skiplist.add(2);skiplist.add(3);skiplist.search(0);   // è¿”å› falseskiplist.add(4);skiplist.search(1);   // è¿”å› trueskiplist.erase(0);    // è¿”å› falseï¼Œ0 ä¸åœ¨è·³è¡¨ä¸­skiplist.erase(1);    // è¿”å› trueskiplist.search(1);   // è¿”å› falseï¼Œ1 å·²è¢«æ“¦é™¤</code></pre><p>çº¦æŸæ¡ä»¶:</p><p>0 &lt;= num, target &lt;= 20000</p><p>æœ€å¤šè°ƒç”¨ 50000 æ¬¡ search, add, ä»¥åŠ eraseæ“ä½œã€‚</p><h1 id="è§£é¢˜æ€è·¯"><a href="#è§£é¢˜æ€è·¯" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h1><p>è·³è¡¨å®ç°çš„ä¸»è¦éš¾åº¦åœ¨äºæ’å…¥(add)ç®—æ³•ã€‚åªè¦æŠŠaddæ–¹æ³•ææ˜ç™½ä¹‹åï¼Œä¸€åˆ‡éƒ½è¿åˆƒè€Œè§£äº†ã€‚</p><p>å…³äºè·³è¡¨çš„æ’å…¥ï¼Œä¸€å¼ å›¾å³å¯æè¿°å‡ºæ¥ï¼Œ<br><a href="https://pic.leetcode-cn.com/1612247342-QjALhY-skiplist_insertions.png" target="_blank" rel="noopener">skiplist_insertions.png</a></p><blockquote><p>å›¾ç‰‡æ¥è‡ª <a href="http://zhangtielei.com/posts/blog-redis-skiplist.html" target="_blank" rel="noopener">http://zhangtielei.com/posts/blog-redis-skiplist.html</a></p></blockquote><p>é€šè¿‡è¿™å¼ å›¾ï¼Œå¯ä»¥å…ˆç¡®å®šè·³è¡¨ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„æ•°æ®ç»“æ„ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span></span>&#123;</span><br><span class="line">    Integer value; <span class="comment">//èŠ‚ç‚¹å€¼</span></span><br><span class="line">    Node[] next; <span class="comment">// èŠ‚ç‚¹åœ¨ä¸åŒå±‚çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Node</span><span class="params">(Integer value,<span class="keyword">int</span> size)</span> </span>&#123; <span class="comment">// ç”¨sizeè¡¨ç¤ºå½“å‰èŠ‚ç‚¹åœ¨è·³è¡¨ä¸­ç´¢å¼•å‡ å±‚</span></span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">        <span class="keyword">this</span>.next = <span class="keyword">new</span> Node[size];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åå°±éœ€è¦è€ƒè™‘ï¼šæˆ‘æ’å…¥ä¸€ä¸ªèŠ‚ç‚¹Nodeï¼Œå®ƒåˆ°åº•åº”è¯¥æ˜¯ç´¢å¼•åˆ°ç¬¬å‡ å±‚å‘¢ï¼Ÿ</p><p>ä¸€å¼€å§‹æˆ‘è¿˜æƒ³ç€å¦‚ä½•å‡†ç¡®çš„ç»´æŠ¤ä¸Šä¸€å±‚æ˜¯ä¸‹ä¸€å±‚çš„1/2ï¼Œå‘ç°è¶Šæƒ³è¶Šå¤æ‚ï¼›ç„¶åé€šè¿‡ç›¸å…³èµ„æ–™ï¼Œå‘ç°äººå®¶æ—©å°±ç»™å‡ºä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼šéšæœºå‡ºæ¥ä¸€ä¸ªå±‚æ•°ã€‚</p><p>è¿™é‡Œæœ‰ä¸€ä¸ªç–‘æƒ‘ï¼šå°±å‡­éšæœºå‡ºæ¥çš„ä¸€ä¸ªå±‚æ•°ï¼Œèƒ½ä¿è¯æŸ¥è¯¢ä¸æ’å…¥æ€§èƒ½å—ï¼Ÿ</p><blockquote><p>åœ¨åˆ†æä¹‹å‰ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ç€é‡æŒ‡å‡ºçš„æ˜¯ï¼Œæ‰§è¡Œæ’å…¥æ“ä½œæ—¶è®¡ç®—éšæœºæ•°çš„è¿‡ç¨‹ï¼Œæ˜¯ä¸€ä¸ªå¾ˆå…³é”®çš„è¿‡ç¨‹ï¼Œå®ƒå¯¹skiplistçš„ç»Ÿè®¡ç‰¹æ€§æœ‰ç€å¾ˆé‡è¦çš„å½±å“ã€‚è¿™å¹¶ä¸æ˜¯ä¸€ä¸ªæ™®é€šçš„æœä»å‡åŒ€åˆ†å¸ƒçš„éšæœºæ•°ï¼Œå®ƒçš„è®¡ç®—è¿‡ç¨‹å¦‚ä¸‹ï¼š<br>é¦–å…ˆï¼Œæ¯ä¸ªèŠ‚ç‚¹è‚¯å®šéƒ½æœ‰ç¬¬1å±‚æŒ‡é’ˆï¼ˆæ¯ä¸ªèŠ‚ç‚¹éƒ½åœ¨ç¬¬1å±‚é“¾è¡¨é‡Œï¼‰ã€‚<br>å¦‚æœä¸€ä¸ªèŠ‚ç‚¹æœ‰ç¬¬iå±‚(i&gt;=1)æŒ‡é’ˆï¼ˆå³èŠ‚ç‚¹å·²ç»åœ¨ç¬¬1å±‚åˆ°ç¬¬iå±‚é“¾è¡¨ä¸­ï¼‰ï¼Œé‚£ä¹ˆå®ƒæœ‰ç¬¬(i+1)å±‚æŒ‡é’ˆçš„æ¦‚ç‡ä¸ºpã€‚<br>èŠ‚ç‚¹æœ€å¤§çš„å±‚æ•°ä¸å…è®¸è¶…è¿‡ä¸€ä¸ªæœ€å¤§å€¼ï¼Œè®°ä¸ºMaxLevelã€‚<br>è¿™ä¸ªè®¡ç®—éšæœºå±‚æ•°çš„ä¼ªç å¦‚ä¸‹æ‰€ç¤ºï¼š</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">randomLevel</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    <span class="keyword">int</span> level </span>= <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (Math.random()&lt;p &amp;&amp; level&lt;MaxLevel)&#123;</span><br><span class="line">        level ++ ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> level;</span><br></pre></td></tr></table></figure><blockquote><p>randomLevel()çš„ä¼ªç ä¸­åŒ…å«ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯pï¼Œä¸€ä¸ªæ˜¯MaxLevelã€‚åœ¨Redisçš„skiplistå®ç°ä¸­ï¼Œè¿™ä¸¤ä¸ªå‚æ•°çš„å–å€¼ä¸ºï¼š</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">p = 1/4</span><br><span class="line">MaxLevel = 32</span><br></pre></td></tr></table></figure><blockquote><p>from : <a href="http://zhangtielei.com/posts/blog-redis-skiplist.html" target="_blank" rel="noopener">http://zhangtielei.com/posts/blog-redis-skiplist.html</a></p></blockquote><p>çŸ¥é“äº†å±‚æ•°ï¼Œè¿™ä¸‹å°±å¥½åŠäº†ã€‚æ€è·¯å¦‚ä¸‹ï¼š</p><ol><li><p>å…ˆéšæœºå‡ºæ¥ä¸€ä¸ªå±‚æ•°ï¼Œnewè¦æ’å…¥çš„èŠ‚ç‚¹ï¼Œå…ˆå«åšæ’å…¥èŠ‚ç‚¹newNodeï¼›</p></li><li><p>æ ¹æ®è·³è¡¨å®é™…çš„æ€»å±‚æ•°ä»ä¸Šå¾€ä¸‹åˆ†æï¼Œè¦æ’å…¥ä¸€ä¸ªèŠ‚ç‚¹newNodeæ—¶ï¼Œå…ˆæ‰¾åˆ°èŠ‚ç‚¹åœ¨è¯¥å±‚çš„ä½ç½®ï¼šå› ä¸ºæ˜¯é“¾è¡¨ï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ªèŠ‚ç‚¹nodeï¼Œæ»¡è¶³æ’å…¥æ’å…¥èŠ‚ç‚¹newNodeçš„å€¼åˆšå¥½ä¸å¤§äºnodeçš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹å€¼ï¼Œå½“ç„¶ï¼Œå¦‚æœnodeçš„ä¸‹ä¸ªèŠ‚ç‚¹ä¸ºç©ºï¼Œé‚£ä¹ˆä¹Ÿæ˜¯æ»¡è¶³çš„ã€‚</p></li></ol><p>æˆ‘ä»¬å…ˆæŠŠæ‰¾èŠ‚ç‚¹åœ¨æŸä¸€å±‚ä½ç½®çš„æ–¹æ³•å°è£…èµ·æ¥ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æ‰¾åˆ°levelå±‚ value åˆšå¥½ä¸å°äºnode çš„èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> node ä»å“ªä¸ªèŠ‚ç‚¹å¼€å§‹æ‰¾</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> levelIndex æ‰€åœ¨å±‚</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> value è¦æ’å…¥çš„èŠ‚ç‚¹å€¼</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> Node <span class="title">findClosest</span><span class="params">(Node node,<span class="keyword">int</span> levelIndex,<span class="keyword">int</span> value)</span></span>&#123;</span><br><span class="line">    <span class="keyword">while</span> ((node.next[levelIndex])!=<span class="keyword">null</span> &amp;&amp; value &gt;node.next[levelIndex].value)&#123;</span><br><span class="line">        node = node.next[levelIndex];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> node;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="3"><li><p>ç¡®å®šæ’å…¥èŠ‚ç‚¹newNodeåœ¨è¯¥å±‚çš„ä½ç½®åï¼Œå…ˆåˆ¤æ–­ä¸‹newNodeçš„éšæœºå±‚æ•°æ˜¯å¦å°äºå½“å‰è·³è¡¨çš„æ€»å±‚æ•°ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™ç”¨é“¾è¡¨çš„æ’å…¥æ–¹æ³•å°†newNodeæ’å…¥å³å¯ã€‚</p></li><li><p>å¦‚æ­¤å¾ªç¯ï¼Œç›´åˆ°æœ€åº•å±‚æ’å…¥newNodeå®Œæ¯•ã€‚</p></li><li><p>å¾ªç¯å®Œæ¯•åï¼Œè¿˜éœ€è¦åˆ¤æ–­ä¸‹newNodeéšæœºå‡ºæ¥çš„å±‚æ•°æ˜¯å¦æ¯”è·³è¡¨çš„å®é™…å±‚æ•°è¿˜è¦å¤§ï¼Œå¦‚æœæ˜¯ï¼Œç›´æ¥å°†è¶…è¿‡å®é™…å±‚æ•°çš„è·³è¡¨çš„å¤´èŠ‚ç‚¹æŒ‡å‘newNodeå³å¯ï¼Œè¯¥è·³è¡¨çš„å®é™…å±‚æ•°ä¹Ÿå°±å˜ä¸ºnewNodeçš„éšæœºå±‚æ•°äº†ã€‚</p></li></ol><p>ä»¥ä¸Šå°±æ˜¯æ’å…¥çš„ç®—æ³•ã€‚</p><p>ç†è§£äº†æ’å…¥ç®—æ³•åï¼ŒæŸ¥æ‰¾è·Ÿåˆ é™¤å°±ç®€å•å¤šäº†ã€‚</p><p>ä¸ç®¡æ˜¯æ’å…¥ã€æŸ¥æ‰¾è¿˜æ˜¯åˆ é™¤ï¼Œå‡æ˜¯ä»è·³è¡¨ä¸Šå±‚å¾€ä¸‹å±‚åˆ†æï¼Œå¤ç”¨ä¸Šé¢çš„findClosestæ–¹æ³•ï¼Œæ‰¾åˆ°è¦æŸ¥è¯¢çš„å€¼ åœ¨è¯¥å±‚closestçš„èŠ‚ç‚¹ã€‚æ¯”å¦‚æŸ¥è¯¢ï¼Œåªéœ€è¦åˆ¤æ–­findClosestå‡ºæ¥çš„èŠ‚ç‚¹å€¼æ˜¯å¦ç­‰äºè¯¥æŸ¥è¯¢å€¼å³å¯ï¼Œæ˜¯å°±è¿”å›ï¼Œä¸æ˜¯åˆ™ç»§ç»­å¾€ä¸‹å±‚åˆ¤æ–­ã€‚åˆ é™¤æ–¹æ³•æ€æƒ³ä¹Ÿæ˜¯ä¸€è‡´çš„ã€‚</p><h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><details>    <summary>Java</summary><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Skiplist</span> </span>&#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * æœ€å¤§å±‚æ•°</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> DEFAULT_MAX_LEVEL = <span class="number">32</span>;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * éšæœºå±‚æ•°æ¦‚ç‡ï¼Œä¹Ÿå°±æ˜¯éšæœºå‡ºçš„å±‚æ•°ï¼Œåœ¨ ç¬¬1å±‚ä»¥ä¸Š(ä¸åŒ…æ‹¬ç¬¬ä¸€å±‚)çš„æ¦‚ç‡ï¼Œå±‚æ•°ä¸è¶…è¿‡maxLevelï¼Œå±‚æ•°çš„èµ·å§‹å·ä¸º1</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">double</span> DEFAULT_P_FACTOR = <span class="number">0.25</span>;</span><br><span class="line"></span><br><span class="line">        Node head = <span class="keyword">new</span> Node(<span class="keyword">null</span>,DEFAULT_MAX_LEVEL); <span class="comment">//å¤´èŠ‚ç‚¹</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> currentLevel = <span class="number">1</span>; <span class="comment">//è¡¨ç¤ºå½“å‰nodesçš„å®é™…å±‚æ•°ï¼Œå®ƒä»1å¼€å§‹</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Skiplist</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">search</span><span class="params">(<span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">            Node searchNode = head;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = currentLevel-<span class="number">1</span>; i &gt;=<span class="number">0</span>; i--) &#123;</span><br><span class="line">                searchNode = findClosest(searchNode, i, target);</span><br><span class="line">                <span class="keyword">if</span> (searchNode.next[i]!=<span class="keyword">null</span> &amp;&amp; searchNode.next[i].value == target)&#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> num</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> num)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">int</span> level = randomLevel();</span><br><span class="line">            Node updateNode = head;</span><br><span class="line">            Node newNode = <span class="keyword">new</span> Node(num,level);</span><br><span class="line">            <span class="comment">// è®¡ç®—å‡ºå½“å‰num ç´¢å¼•çš„å®é™…å±‚æ•°ï¼Œä»è¯¥å±‚å¼€å§‹æ·»åŠ ç´¢å¼•</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = currentLevel-<span class="number">1</span>; i&gt;=<span class="number">0</span>; i--) &#123;</span><br><span class="line">                <span class="comment">//æ‰¾åˆ°æœ¬å±‚æœ€è¿‘ç¦»numæœ€è¿‘çš„list</span></span><br><span class="line">                updateNode = findClosest(updateNode,i,num);</span><br><span class="line">                <span class="keyword">if</span> (i&lt;level)&#123;</span><br><span class="line">                    <span class="keyword">if</span> (updateNode.next[i]==<span class="keyword">null</span>)&#123;</span><br><span class="line">                        updateNode.next[i] = newNode;</span><br><span class="line">                    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                        Node temp = updateNode.next[i];</span><br><span class="line">                        updateNode.next[i] = newNode;</span><br><span class="line">                        newNode.next[i] = temp;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (level &gt; currentLevel)&#123; <span class="comment">//å¦‚æœéšæœºå‡ºæ¥çš„å±‚æ•°æ¯”å½“å‰çš„å±‚æ•°è¿˜å¤§ï¼Œé‚£ä¹ˆè¶…è¿‡currentLevelçš„head ç›´æ¥æŒ‡å‘newNode</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = currentLevel; i &lt; level; i++) &#123;</span><br><span class="line">                    head.next[i] = newNode;</span><br><span class="line">                &#125;</span><br><span class="line">                currentLevel = level;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">erase</span><span class="params">(<span class="keyword">int</span> num)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">boolean</span> flag = <span class="keyword">false</span>;</span><br><span class="line">            Node searchNode = head;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = currentLevel-<span class="number">1</span>; i &gt;=<span class="number">0</span>; i--) &#123;</span><br><span class="line">                searchNode = findClosest(searchNode, i, num);</span><br><span class="line">                <span class="keyword">if</span> (searchNode.next[i]!=<span class="keyword">null</span> &amp;&amp; searchNode.next[i].value == num)&#123;</span><br><span class="line">                    <span class="comment">//æ‰¾åˆ°è¯¥å±‚ä¸­è¯¥èŠ‚ç‚¹</span></span><br><span class="line">                    searchNode.next[i] = searchNode.next[i].next[i];</span><br><span class="line">                    flag = <span class="keyword">true</span>;</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> flag;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * æ‰¾åˆ°levelå±‚ value å¤§äºnode çš„èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> node</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> levelIndex</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> value</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="function"><span class="keyword">private</span> Node <span class="title">findClosest</span><span class="params">(Node node,<span class="keyword">int</span> levelIndex,<span class="keyword">int</span> value)</span></span>&#123;</span><br><span class="line">            <span class="keyword">while</span> ((node.next[levelIndex])!=<span class="keyword">null</span> &amp;&amp; value &gt;node.next[levelIndex].value)&#123;</span><br><span class="line">                node = node.next[levelIndex];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> node;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * éšæœºä¸€ä¸ªå±‚æ•°</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">randomLevel</span><span class="params">()</span></span>&#123;</span><br><span class="line">            <span class="keyword">int</span> level = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">while</span> (Math.random()&lt;DEFAULT_P_FACTOR &amp;&amp; level&lt;DEFAULT_MAX_LEVEL)&#123;</span><br><span class="line">                level ++ ;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> level;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="class"><span class="keyword">class</span> <span class="title">Node</span></span>&#123;</span><br><span class="line">            Integer value;</span><br><span class="line">            Node[] next;</span><br><span class="line"></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="title">Node</span><span class="params">(Integer value,<span class="keyword">int</span> size)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">this</span>.value = value;</span><br><span class="line">                <span class="keyword">this</span>.next = <span class="keyword">new</span> Node[size];</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> String.valueOf(value);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></details>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¸ä½¿ç”¨ä»»ä½•åº“å‡½æ•°ï¼Œè®¾è®¡ä¸€ä¸ªè·³è¡¨ã€‚&lt;/p&gt;
&lt;p&gt;è·³è¡¨æ˜¯åœ¨ O(log(n)) æ—¶é—´å†…å®Œæˆå¢åŠ ã€åˆ é™¤ã€æœç´¢æ“ä½œçš„æ•°æ®ç»“æ„ã€‚è·³è¡¨ç›¸æ¯”äºæ ‘å †ä¸çº¢é»‘æ ‘ï¼Œå…¶åŠŸèƒ½ä¸æ€§èƒ½ç›¸å½“ï¼Œå¹¶ä¸”è·³è¡¨çš„ä»£ç é•¿åº¦ç›¸è¾ƒä¸‹æ›´çŸ­ï¼Œå…¶è®¾è®¡æ€æƒ³ä¸é“¾è¡¨ç›¸ä¼¼ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="2021å¹´5æœˆ" scheme="http://yoursite.com/categories/2021%E5%B9%B45%E6%9C%88/"/>
    
    
      <category term="LeetCode" scheme="http://yoursite.com/tags/LeetCode/"/>
    
      <category term="Design" scheme="http://yoursite.com/tags/Design/"/>
    
  </entry>
  
  <entry>
    <title>707. è®¾è®¡é“¾è¡¨</title>
    <link href="http://yoursite.com/2021/04/26/707.%20%E8%AE%BE%E8%AE%A1%E9%93%BE%E8%A1%A8/"/>
    <id>http://yoursite.com/2021/04/26/707. è®¾è®¡é“¾è¡¨/</id>
    <published>2021-04-26T03:12:12.000Z</published>
    <updated>2021-05-06T09:49:49.812Z</updated>
    
    <content type="html"><![CDATA[<p>è®¾è®¡é“¾è¡¨çš„å®ç°ã€‚æ‚¨å¯ä»¥é€‰æ‹©ä½¿ç”¨å•é“¾è¡¨æˆ–åŒé“¾è¡¨ã€‚å•é“¾è¡¨ä¸­çš„èŠ‚ç‚¹åº”è¯¥å…·æœ‰ä¸¤ä¸ªå±æ€§ï¼šval å’Œ nextã€‚val æ˜¯å½“å‰èŠ‚ç‚¹çš„å€¼ï¼Œnext æ˜¯æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆ/å¼•ç”¨ã€‚å¦‚æœè¦ä½¿ç”¨åŒå‘é“¾è¡¨ï¼Œåˆ™è¿˜éœ€è¦ä¸€ä¸ªå±æ€§ prev ä»¥æŒ‡ç¤ºé“¾è¡¨ä¸­çš„ä¸Šä¸€ä¸ªèŠ‚ç‚¹ã€‚å‡è®¾é“¾è¡¨ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹éƒ½æ˜¯ 0-index çš„ã€‚</p><a id="more"></a><p>åœ¨é“¾è¡¨ç±»ä¸­å®ç°è¿™äº›åŠŸèƒ½ï¼š</p><pre><code>get(index)ï¼šè·å–é“¾è¡¨ä¸­ç¬¬ index ä¸ªèŠ‚ç‚¹çš„å€¼ã€‚å¦‚æœç´¢å¼•æ— æ•ˆï¼Œåˆ™è¿”å›-1ã€‚addAtHead(val)ï¼šåœ¨é“¾è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ ä¹‹å‰æ·»åŠ ä¸€ä¸ªå€¼ä¸º val çš„èŠ‚ç‚¹ã€‚æ’å…¥åï¼Œæ–°èŠ‚ç‚¹å°†æˆä¸ºé“¾è¡¨çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚addAtTail(val)ï¼šå°†å€¼ä¸º val çš„èŠ‚ç‚¹è¿½åŠ åˆ°é“¾è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ ã€‚addAtIndex(index,val)ï¼šåœ¨é“¾è¡¨ä¸­çš„ç¬¬ index ä¸ªèŠ‚ç‚¹ä¹‹å‰æ·»åŠ å€¼ä¸º val  çš„èŠ‚ç‚¹ã€‚å¦‚æœ index ç­‰äºé“¾è¡¨çš„é•¿åº¦ï¼Œåˆ™è¯¥èŠ‚ç‚¹å°†é™„åŠ åˆ°é“¾è¡¨çš„æœ«å°¾ã€‚å¦‚æœ index å¤§äºé“¾è¡¨é•¿åº¦ï¼Œåˆ™ä¸ä¼šæ’å…¥èŠ‚ç‚¹ã€‚å¦‚æœindexå°äº0ï¼Œåˆ™åœ¨å¤´éƒ¨æ’å…¥èŠ‚ç‚¹ã€‚deleteAtIndex(index)ï¼šå¦‚æœç´¢å¼• index æœ‰æ•ˆï¼Œåˆ™åˆ é™¤é“¾è¡¨ä¸­çš„ç¬¬ index ä¸ªèŠ‚ç‚¹ã€‚</code></pre><p>ç¤ºä¾‹ï¼š</p><pre><code>MyLinkedList linkedList = new MyLinkedList();linkedList.addAtHead(1);linkedList.addAtTail(3);linkedList.addAtIndex(1,2);   //é“¾è¡¨å˜ä¸º1-&gt; 2-&gt; 3linkedList.get(1);            //è¿”å›2linkedList.deleteAtIndex(1);  //ç°åœ¨é“¾è¡¨æ˜¯1-&gt; 3linkedList.get(1);            //è¿”å›3</code></pre><p>æç¤ºï¼š</p><pre><code>æ‰€æœ‰valå€¼éƒ½åœ¨ [1, 1000] ä¹‹å†…ã€‚æ“ä½œæ¬¡æ•°å°†åœ¨  [1, 1000] ä¹‹å†…ã€‚è¯·ä¸è¦ä½¿ç”¨å†…ç½®çš„ LinkedList åº“ã€‚</code></pre><h1 id="é¢è¯•è¦ç‚¹"><a href="#é¢è¯•è¦ç‚¹" class="headerlink" title="é¢è¯•è¦ç‚¹"></a>é¢è¯•è¦ç‚¹</h1><p>é“¾è¡¨æ—¶ä¸€ä¸ªåŒ…å«é›¶ä¸ªæˆ–å¤šä¸ªå…ƒç´ çš„æ•°æ®ç»“æ„ã€‚æ¯ä¸ªå…ƒç´ éƒ½åŒ…å«ä¸€ä¸ªå€¼å’Œåˆ°å¦ä¸€ä¸ªå…ƒç´ çš„é“¾æ¥ã€‚æ ¹æ®é“¾æ¥æ•°çš„ä¸åŒï¼Œå¯ä»¥åˆ†ä¸ºå•é“¾è¡¨ï¼ŒåŒé“¾è¡¨å’Œå¤šé‡é“¾è¡¨ã€‚</p><p>å•é“¾è¡¨æ˜¯æœ€ç®€å•çš„ä¸€ç§ï¼Œå®ƒæä¾›äº†åœ¨å¸¸æ•°æ—¶é—´å†…çš„ <code>addAtHead</code> æ“ä½œå’Œåœ¨çº¿æ€§æ—¶é—´å†…çš„ <code>addAtTail</code> çš„æ“ä½œã€‚åŒé“¾è¡¨æ˜¯æœ€å¸¸ç”¨çš„ä¸€ç§ï¼Œå› ä¸ºå®ƒæä¾›äº†åœ¨å¸¸æ•°æ—¶é—´å†…çš„ <code>addAtHead</code> å’Œ <code>addAtTail</code> æ“ä½œï¼Œå¹¶ä¸”ä¼˜åŒ–çš„æ’å…¥å’Œåˆ é™¤ã€‚</p><p>åŒé“¾è¡¨åœ¨ Java ä¸­çš„å®ç°ä¸º LinkedListï¼Œåœ¨ Python ä¸­ä¸º listã€‚è¿™äº›ç»“æ„éƒ½æ¯”è¾ƒå¸¸ç”¨ï¼Œæœ‰ä¸¤ä¸ªè¦ç‚¹ï¼š</p><ul><li>å“¨å…µèŠ‚ç‚¹ï¼š</li></ul><p>å“¨å…µèŠ‚ç‚¹åœ¨æ ‘å’Œé“¾è¡¨ä¸­è¢«å¹¿æ³›ç”¨ä½œä¼ªå¤´ã€ä¼ªå°¾ç­‰ï¼Œé€šå¸¸ä¸ä¿å­˜ä»»ä½•æ•°æ®ã€‚</p><p>æˆ‘ä»¬å°†ä½¿ç”¨ä¼ªå¤´æ¥ç®€åŒ–æˆ‘ä»¬ç®€åŒ–æ’å…¥å’Œåˆ é™¤ã€‚åœ¨æ¥ä¸‹æ¥çš„ä¸¤ç§æ–¹æ³•ä¸­åº”ç”¨æ­¤æ–¹æ³•ã€‚</p><ul><li>åŒé“¾è¡¨çš„åŒå‘æœç´¢ï¼šæˆ‘ä»¬å¯ä»¥ä»å¤´éƒ¨æˆ–å°¾éƒ¨è¿›è¡Œæœç´¢ã€‚</li></ul><h1 id="æ–¹æ³•ä¸€ï¼šå•é“¾è¡¨"><a href="#æ–¹æ³•ä¸€ï¼šå•é“¾è¡¨" class="headerlink" title="æ–¹æ³•ä¸€ï¼šå•é“¾è¡¨"></a>æ–¹æ³•ä¸€ï¼šå•é“¾è¡¨</h1><p>è®©æˆ‘ä»¬ä»æœ€ç®€å•çš„é“¾è¡¨å¼€å§‹ã€‚</p><details>    <summary>å•é“¾è¡¨</summary><figure class="highlight python"><figcaption><span>[init1-Python]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyLinkedList</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.size = <span class="number">0</span></span><br><span class="line">        self.head = ListNode(<span class="number">0</span>)  <span class="comment"># sentinel node as pseudo-head</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><figcaption><span>[init1-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyLinkedList</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> size;</span><br><span class="line">  ListNode head;  <span class="comment">// sentinel node as pseudo-head</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">MyLinkedList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    size = <span class="number">0</span>;</span><br><span class="line">    head = <span class="keyword">new</span> ListNode(<span class="number">0</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><p>å“¨å…µèŠ‚ç‚¹è¢«ç”¨ä½œä¼ªå¤´å§‹ç»ˆå­˜åœ¨ï¼Œè¿™æ ·ç»“æ„ä¸­æ°¸è¿œä¸ä¸ºç©ºï¼Œå®ƒå°†è‡³å°‘åŒ…å«ä¸€ä¸ªä¼ªå¤´ã€‚MyLinkedList ä¸­æ‰€æœ‰èŠ‚ç‚¹å‡åŒ…å«ï¼šå€¼ + é“¾æ¥åˆ°ä¸‹ä¸€ä¸ªå…ƒç´ çš„æŒ‡é’ˆã€‚</p><details>    <summary>å•é“¾è¡¨</summary><figure class="highlight python"><figcaption><span>[ListNode1-Python]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ListNode</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        self.val = x</span><br><span class="line">        self.next = <span class="keyword">None</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><figcaption><span>[ListNode1-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ListNode</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> val;</span><br><span class="line">  ListNode next;</span><br><span class="line">  ListNode(<span class="keyword">int</span> x) &#123; val = x; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><p><code>addAtIndex</code>ï¼Œ<code>addAtHead</code> å’Œ <code>addAtTail</code>ï¼š<br>æˆ‘ä»¬é¦–å…ˆè®¨è®º <code>addAtIndex</code>ï¼Œå› ä¸ºä¼ªå¤´çš„å…³ç³» <code>addAtHead</code> å’Œ <code>addAtTail</code> å¯ä»¥ä½¿ç”¨ <code>addAtIndex</code> æ¥å®Œæˆã€‚</p><p>è¿™ä¸ªæƒ³æ³•å¾ˆç®€å•ï¼š</p><ul><li>æ‰¾åˆ°è¦æ’å…¥ä½ç½®èŠ‚ç‚¹çš„å‰é©±èŠ‚ç‚¹ã€‚å¦‚æœè¦åœ¨å¤´éƒ¨æ’å…¥ï¼Œåˆ™å®ƒçš„å‰é©±èŠ‚ç‚¹å°±æ˜¯ä¼ªå¤´ã€‚å¦‚æœè¦åœ¨å°¾éƒ¨æ’å…¥èŠ‚ç‚¹ï¼Œåˆ™å‰é©±èŠ‚ç‚¹å°±æ˜¯å°¾èŠ‚ç‚¹ã€‚</li><li>é€šè¿‡æ”¹å˜ <code>next</code> æ¥æ’å…¥èŠ‚ç‚¹ã€‚<details>  <summary>å•é“¾è¡¨</summary></details></li></ul><figure class="highlight python"><figcaption><span>[add1-Python]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">to_add.next = pred.next</span><br><span class="line">pred.next = to_add</span><br></pre></td></tr></table></figure><figure class="highlight java"><figcaption><span>[add1-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">toAdd.next = pred.next;</span><br><span class="line">pred.next = toAdd;</span><br></pre></td></tr></table></figure><p><code>deleteAtIndex</code>ï¼š<br>å’Œæ’å…¥åŒæ ·çš„é“ç†ã€‚</p><ul><li>æ‰¾åˆ°è¦åˆ é™¤èŠ‚ç‚¹çš„å‰é©±èŠ‚ç‚¹ã€‚</li><li>é€šè¿‡æ”¹å˜ <code>next</code> æ¥åˆ é™¤èŠ‚ç‚¹ã€‚</li></ul><details>    <summary>å•é“¾è¡¨</summary><figure class="highlight python"><figcaption><span>[delete2-Python]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># delete pred.next </span></span><br><span class="line">pred.next = pred.next.next</span><br></pre></td></tr></table></figure><figure class="highlight java"><figcaption><span>[delete2-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// delete pred.next </span></span><br><span class="line">pred.next = pred.next.next;</span><br></pre></td></tr></table></figure></details><p><code>get</code>ï¼š<br>ä»ä¼ªå¤´èŠ‚ç‚¹å¼€å§‹ï¼Œå‘å‰èµ° <code>index+1</code> æ­¥ã€‚</p><details>    <summary>å•é“¾è¡¨</summary><figure class="highlight python"><figcaption><span>[get1-Python]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># index steps needed </span></span><br><span class="line"><span class="comment"># to move from sentinel node to wanted index</span></span><br><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> range(index + <span class="number">1</span>):</span><br><span class="line">    curr = curr.next</span><br><span class="line"><span class="keyword">return</span> curr.val</span><br></pre></td></tr></table></figure><figure class="highlight java"><figcaption><span>[get1-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index steps needed </span></span><br><span class="line"><span class="comment">// to move from sentinel node to wanted index</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; index + <span class="number">1</span>; ++i) curr = curr.next;</span><br><span class="line"><span class="keyword">return</span> curr.val;</span><br></pre></td></tr></table></figure></details><p><strong>å…¨éƒ¨ä»£ç ï¼š</strong></p><details>    <summary>å•é“¾è¡¨Python</summary><figure class="highlight python"><figcaption><span>[solution1-Python]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ListNode</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        self.val = x</span><br><span class="line">        self.next = <span class="keyword">None</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyLinkedList</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.size = <span class="number">0</span></span><br><span class="line">        self.head = ListNode(<span class="number">0</span>)  <span class="comment"># sentinel node as pseudo-head</span></span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, index: int)</span> -&gt; int:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        Get the value of the index-th node in the linked list. If the index is invalid, return -1.</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="comment"># if index is invalid</span></span><br><span class="line">        <span class="keyword">if</span> index &lt; <span class="number">0</span> <span class="keyword">or</span> index &gt;= self.size:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">        </span><br><span class="line">        curr = self.head</span><br><span class="line">        <span class="comment"># index steps needed </span></span><br><span class="line">        <span class="comment"># to move from sentinel node to wanted index</span></span><br><span class="line">        <span class="keyword">for</span> _ <span class="keyword">in</span> range(index + <span class="number">1</span>):</span><br><span class="line">            curr = curr.next</span><br><span class="line">        <span class="keyword">return</span> curr.val</span><br><span class="line">            </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">addAtHead</span><span class="params">(self, val: int)</span> -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        Add a node of value val before the first element of the linked list. After the insertion, the new node will be the first node of the linked list.</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        self.addAtIndex(<span class="number">0</span>, val)</span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">addAtTail</span><span class="params">(self, val: int)</span> -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        Append a node of value val to the last element of the linked list.</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        self.addAtIndex(self.size, val)</span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">addAtIndex</span><span class="params">(self, index: int, val: int)</span> -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        Add a node of value val before the index-th node in the linked list. If index equals to the length of linked list, the node will be appended to the end of linked list. If index is greater than the length, the node will not be inserted.</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="comment"># If index is greater than the length, </span></span><br><span class="line">        <span class="comment"># the node will not be inserted.</span></span><br><span class="line">        <span class="keyword">if</span> index &gt; self.size:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># [so weird] If index is negative, </span></span><br><span class="line">        <span class="comment"># the node will be inserted at the head of the list.</span></span><br><span class="line">        <span class="keyword">if</span> index &lt; <span class="number">0</span>:</span><br><span class="line">            index = <span class="number">0</span></span><br><span class="line">        </span><br><span class="line">        self.size += <span class="number">1</span></span><br><span class="line">        <span class="comment"># find predecessor of the node to be added</span></span><br><span class="line">        pred = self.head</span><br><span class="line">        <span class="keyword">for</span> _ <span class="keyword">in</span> range(index):</span><br><span class="line">            pred = pred.next</span><br><span class="line">            </span><br><span class="line">        <span class="comment"># node to be added</span></span><br><span class="line">        to_add = ListNode(val)</span><br><span class="line">        <span class="comment"># insertion itself</span></span><br><span class="line">        to_add.next = pred.next</span><br><span class="line">        pred.next = to_add</span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">deleteAtIndex</span><span class="params">(self, index: int)</span> -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        Delete the index-th node in the linked list, if the index is valid.</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="comment"># if the index is invalid, do nothing</span></span><br><span class="line">        <span class="keyword">if</span> index &lt; <span class="number">0</span> <span class="keyword">or</span> index &gt;= self.size:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        </span><br><span class="line">        self.size -= <span class="number">1</span></span><br><span class="line">        <span class="comment"># find predecessor of the node to be deleted</span></span><br><span class="line">        pred = self.head</span><br><span class="line">        <span class="keyword">for</span> _ <span class="keyword">in</span> range(index):</span><br><span class="line">            pred = pred.next</span><br><span class="line">            </span><br><span class="line">        <span class="comment"># delete pred.next </span></span><br><span class="line">        pred.next = pred.next.next</span><br></pre></td></tr></table></figure></details><details>    <summary>å•é“¾è¡¨Java</summary><figure class="highlight java"><figcaption><span>[solution1-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ListNode</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> val;</span><br><span class="line">  ListNode next;</span><br><span class="line">  ListNode(<span class="keyword">int</span> x) &#123; val = x; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyLinkedList</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> size;</span><br><span class="line">  ListNode head;  <span class="comment">// sentinel node as pseudo-head</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">MyLinkedList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    size = <span class="number">0</span>;</span><br><span class="line">    head = <span class="keyword">new</span> ListNode(<span class="number">0</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/** Get the value of the index-th node in the linked list. If the index is invalid, return -1. */</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">get</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// if index is invalid</span></span><br><span class="line">    <span class="keyword">if</span> (index &lt; <span class="number">0</span> || index &gt;= size) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    ListNode curr = head;</span><br><span class="line">    <span class="comment">// index steps needed </span></span><br><span class="line">    <span class="comment">// to move from sentinel node to wanted index</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; index + <span class="number">1</span>; ++i) curr = curr.next;</span><br><span class="line">    <span class="keyword">return</span> curr.val;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/** Add a node of value val before the first element of the linked list. After the insertion, the new node will be the first node of the linked list. */</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addAtHead</span><span class="params">(<span class="keyword">int</span> val)</span> </span>&#123;</span><br><span class="line">    addAtIndex(<span class="number">0</span>, val);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/** Append a node of value val to the last element of the linked list. */</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addAtTail</span><span class="params">(<span class="keyword">int</span> val)</span> </span>&#123;</span><br><span class="line">    addAtIndex(size, val);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/** Add a node of value val before the index-th node in the linked list. If index equals to the length of linked list, the node will be appended to the end of linked list. If index is greater than the length, the node will not be inserted. */</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addAtIndex</span><span class="params">(<span class="keyword">int</span> index, <span class="keyword">int</span> val)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// If index is greater than the length, </span></span><br><span class="line">    <span class="comment">// the node will not be inserted.</span></span><br><span class="line">    <span class="keyword">if</span> (index &gt; size) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// [so weird] If index is negative, </span></span><br><span class="line">    <span class="comment">// the node will be inserted at the head of the list.</span></span><br><span class="line">    <span class="keyword">if</span> (index &lt; <span class="number">0</span>) index = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    ++size;</span><br><span class="line">    <span class="comment">// find predecessor of the node to be added</span></span><br><span class="line">    ListNode pred = head;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; index; ++i) pred = pred.next;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// node to be added</span></span><br><span class="line">    ListNode toAdd = <span class="keyword">new</span> ListNode(val);</span><br><span class="line">    <span class="comment">// insertion itself</span></span><br><span class="line">    toAdd.next = pred.next;</span><br><span class="line">    pred.next = toAdd;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/** Delete the index-th node in the linked list, if the index is valid. */</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteAtIndex</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// if the index is invalid, do nothing</span></span><br><span class="line">    <span class="keyword">if</span> (index &lt; <span class="number">0</span> || index &gt;= size) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    size--;</span><br><span class="line">    <span class="comment">// find predecessor of the node to be deleted</span></span><br><span class="line">    ListNode pred = head;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; index; ++i) pred = pred.next;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// delete pred.next </span></span><br><span class="line">    pred.next = pred.next.next;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><p><strong>å¤æ‚åº¦åˆ†æ</strong></p><ul><li>ç©ºé—´å¤æ‚åº¦ï¼šæ‰€æœ‰çš„æ“ä½œéƒ½æ˜¯ <em>O(1)</em>ã€‚</li></ul><h1 id="æ–¹æ³•äºŒï¼šåŒé“¾è¡¨"><a href="#æ–¹æ³•äºŒï¼šåŒé“¾è¡¨" class="headerlink" title="æ–¹æ³•äºŒï¼šåŒé“¾è¡¨"></a>æ–¹æ³•äºŒï¼šåŒé“¾è¡¨</h1><p>åŒé“¾è¡¨æ¯”å•é“¾è¡¨å¿«å¾—å¤šï¼Œæµ‹è¯•ç”¨ä¾‹èŠ±è´¹çš„æ—¶é—´æ¯”å•é“¾è¡¨å¿«äº†ä¸¤å€ã€‚ä½†æ˜¯å®ƒæ›´åŠ å¤æ‚ï¼Œå®ƒåŒ…å«äº† <code>size</code>ï¼Œè®°å½•é“¾è¡¨å…ƒç´ ä¸ªæ•°ï¼Œå’Œä¼ªå¤´ä¼ªå°¾ã€‚</p><details>    <summary>åŒé“¾è¡¨</summary><figure class="highlight python"><figcaption><span>[init2-Python]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyLinkedList</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.size = <span class="number">0</span></span><br><span class="line">        <span class="comment"># sentinel nodes as pseudo-head and pseudo-tail</span></span><br><span class="line">        self.head, self.tail = ListNode(<span class="number">0</span>), ListNode(<span class="number">0</span>) </span><br><span class="line">        self.head.next = self.tail</span><br><span class="line">        self.tail.prev = self.head</span><br></pre></td></tr></table></figure><figure class="highlight java"><figcaption><span>[init2-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyLinkedList</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> size;</span><br><span class="line">  <span class="comment">// sentinel nodes as pseudo-head and pseudo-tail</span></span><br><span class="line">  ListNode head, tail;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">MyLinkedList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    size = <span class="number">0</span>;</span><br><span class="line">    head = <span class="keyword">new</span> ListNode(<span class="number">0</span>);</span><br><span class="line">    tail = <span class="keyword">new</span> ListNode(<span class="number">0</span>);</span><br><span class="line">    head.next = tail;</span><br><span class="line">    tail.prev = head;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><p>ä¼ªå¤´å’Œä¼ªå°¾æ€»æ˜¯å­˜åœ¨ï¼ŒMyLinkedList ä¸­æ‰€æœ‰èŠ‚ç‚¹éƒ½åŒ…å«ï¼šå€¼ + æŒ‡å‘å‰ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆ + æŒ‡å‘åä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆã€‚</p><details>    <summary>åŒé“¾è¡¨</summary><figure class="highlight python"><figcaption><span>[ListNode2-Python]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ListNode</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        self.val = x</span><br><span class="line">        self.next = <span class="keyword">None</span></span><br><span class="line">        self.prev = <span class="keyword">None</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><figcaption><span>[ListNode2-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ListNode</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> val;</span><br><span class="line">  ListNode next;</span><br><span class="line">  ListNode prev;</span><br><span class="line">  ListNode(<span class="keyword">int</span> x) &#123; val = x; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><p><code>addAtIndex</code>ï¼Œ<code>addAtHead</code> å’Œ <code>addAtTail</code>ï¼š</p><ul><li>æ‰¾åˆ°è¦æ’å…¥èŠ‚ç‚¹çš„å‰é©±èŠ‚ç‚¹å’Œåç»§èŠ‚ç‚¹ã€‚å¦‚æœè¦åœ¨å¤´éƒ¨æ’å…¥èŠ‚ç‚¹ï¼Œåˆ™å®ƒçš„å‰é©±ç»“ç‚¹æ˜¯ä¼ªå¤´ã€‚å¦‚æœè¦åœ¨å°¾éƒ¨æ’å…¥èŠ‚ç‚¹ï¼Œåˆ™å®ƒçš„åç»§èŠ‚ç‚¹æ˜¯ä¼ªå°¾ã€‚</li><li>é€šè¿‡æ”¹å˜å‰é©±ç»“ç‚¹å’Œåç»§èŠ‚ç‚¹çš„é“¾æ¥å…³ç³»æ·»åŠ å…ƒç´ ã€‚</li></ul><details>    <summary>åŒé“¾è¡¨</summary><figure class="highlight python"><figcaption><span>[add2-Python]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">to_add.prev = pred</span><br><span class="line">to_add.next = succ</span><br><span class="line">pred.next = to_add</span><br><span class="line">succ.prev = to_add</span><br></pre></td></tr></table></figure><figure class="highlight java"><figcaption><span>[add2-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">toAdd.prev = pred</span><br><span class="line">toAdd.next = succ</span><br><span class="line">pred.next = toAdd</span><br><span class="line">succ.prev = toAdd</span><br></pre></td></tr></table></figure></details><p><code>deleteAtIndex</code>ï¼š<br>å’Œæ’å…¥åŒæ ·çš„é“ç†ã€‚</p><ul><li>æ‰¾åˆ°è¦åˆ é™¤èŠ‚ç‚¹çš„å‰é©±ç»“ç‚¹å’Œåç»§èŠ‚ç‚¹ã€‚</li><li>é€šè¿‡æ”¹å˜å‰é©±ç»“ç‚¹å’Œåç»§èŠ‚ç‚¹çš„é“¾æ¥å…³ç³»åˆ é™¤å…ƒç´ ã€‚</li></ul><details>    <summary>åŒé“¾è¡¨</summary><figure class="highlight python"><figcaption><span>[delete2-Python]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pred.next = succ</span><br><span class="line">succ.prev = pred</span><br></pre></td></tr></table></figure><figure class="highlight java"><figcaption><span>[delete2-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pred.next = succ</span><br><span class="line">succ.prev = pred</span><br></pre></td></tr></table></figure></details><p><code>get</code>ï¼š</p><ul><li>é€šè¿‡æ¯”è¾ƒ <code>index</code> å’Œ <code>size - index</code> çš„å¤§å°åˆ¤æ–­ä»å¤´å¼€å§‹è¾ƒå¿«è¿˜æ˜¯ä»å°¾å·´å¼€å§‹è¾ƒå¿«ã€‚</li><li>ä»è¾ƒå¿«çš„æ–¹å‘å¼€å§‹ã€‚ </li></ul><details>    <summary>åŒé“¾è¡¨Python</summary><figure class="highlight python"><figcaption><span>[get2-Python]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># choose the fastest way: to move from the head</span></span><br><span class="line"><span class="comment"># or to move from the tail</span></span><br><span class="line"><span class="keyword">if</span> index + <span class="number">1</span> &lt; self.size - index:</span><br><span class="line">    curr = self.head</span><br><span class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> range(index + <span class="number">1</span>):</span><br><span class="line">        curr = curr.next</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    curr = self.tail</span><br><span class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> range(self.size - index):</span><br><span class="line">        curr = curr.prev</span><br></pre></td></tr></table></figure></details><details>    <summary>åŒé“¾è¡¨Java</summary><figure class="highlight java"><figcaption><span>[get2-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// choose the fastest way: to move from the head</span></span><br><span class="line"><span class="comment">// or to move from the tail</span></span><br><span class="line">ListNode curr = head;</span><br><span class="line"><span class="keyword">if</span> (index + <span class="number">1</span> &lt; size - index)</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; index + <span class="number">1</span>; ++i) curr = curr.next;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">  curr = tail;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size - index; ++i) curr = curr.prev;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><p><strong>å…¨éƒ¨ä»£ç ï¼š</strong></p><details>    <summary>åŒé“¾è¡¨Python</summary><figure class="highlight python"><figcaption><span>[solution2-Python]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ListNode</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        self.val = x</span><br><span class="line">        self.next, self.prev = <span class="keyword">None</span>, <span class="keyword">None</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyLinkedList</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.size = <span class="number">0</span></span><br><span class="line">        <span class="comment"># sentinel nodes as pseudo-head and pseudo-tail</span></span><br><span class="line">        self.head, self.tail = ListNode(<span class="number">0</span>), ListNode(<span class="number">0</span>) </span><br><span class="line">        self.head.next = self.tail</span><br><span class="line">        self.tail.prev = self.head</span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, index: int)</span> -&gt; int:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        Get the value of the index-th node in the linked list. If the index is invalid, return -1.</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="comment"># if index is invalid</span></span><br><span class="line">        <span class="keyword">if</span> index &lt; <span class="number">0</span> <span class="keyword">or</span> index &gt;= self.size:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># choose the fastest way: to move from the head</span></span><br><span class="line">        <span class="comment"># or to move from the tail</span></span><br><span class="line">        <span class="keyword">if</span> index + <span class="number">1</span> &lt; self.size - index:</span><br><span class="line">            curr = self.head</span><br><span class="line">            <span class="keyword">for</span> _ <span class="keyword">in</span> range(index + <span class="number">1</span>):</span><br><span class="line">                curr = curr.next</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            curr = self.tail</span><br><span class="line">            <span class="keyword">for</span> _ <span class="keyword">in</span> range(self.size - index):</span><br><span class="line">                curr = curr.prev</span><br><span class="line">                </span><br><span class="line">        <span class="keyword">return</span> curr.val</span><br><span class="line">            </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">addAtHead</span><span class="params">(self, val: int)</span> -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        Add a node of value val before the first element of the linked list. After the insertion, the new node will be the first node of the linked list.</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        pred, succ = self.head, self.head.next</span><br><span class="line">        </span><br><span class="line">        self.size += <span class="number">1</span></span><br><span class="line">        to_add = ListNode(val)</span><br><span class="line">        to_add.prev = pred</span><br><span class="line">        to_add.next = succ</span><br><span class="line">        pred.next = to_add</span><br><span class="line">        succ.prev = to_add</span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">addAtTail</span><span class="params">(self, val: int)</span> -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        Append a node of value val to the last element of the linked list.</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        succ, pred = self.tail, self.tail.prev</span><br><span class="line">        </span><br><span class="line">        self.size += <span class="number">1</span></span><br><span class="line">        to_add = ListNode(val)</span><br><span class="line">        to_add.prev = pred</span><br><span class="line">        to_add.next = succ</span><br><span class="line">        pred.next = to_add</span><br><span class="line">        succ.prev = to_add</span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">addAtIndex</span><span class="params">(self, index: int, val: int)</span> -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        Add a node of value val before the index-th node in the linked list. If index equals to the length of linked list, the node will be appended to the end of linked list. If index is greater than the length, the node will not be inserted.</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="comment"># If index is greater than the length, </span></span><br><span class="line">        <span class="comment"># the node will not be inserted.</span></span><br><span class="line">        <span class="keyword">if</span> index &gt; self.size:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># [so weird] If index is negative, </span></span><br><span class="line">        <span class="comment"># the node will be inserted at the head of the list.</span></span><br><span class="line">        <span class="keyword">if</span> index &lt; <span class="number">0</span>:</span><br><span class="line">            index = <span class="number">0</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># find predecessor and successor of the node to be added</span></span><br><span class="line">        <span class="keyword">if</span> index &lt; self.size - index:</span><br><span class="line">            pred = self.head</span><br><span class="line">            <span class="keyword">for</span> _ <span class="keyword">in</span> range(index):</span><br><span class="line">                pred = pred.next</span><br><span class="line">            succ = pred.next</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            succ = self.tail</span><br><span class="line">            <span class="keyword">for</span> _ <span class="keyword">in</span> range(self.size - index):</span><br><span class="line">                succ = succ.prev</span><br><span class="line">            pred = succ.prev</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># insertion itself</span></span><br><span class="line">        self.size += <span class="number">1</span></span><br><span class="line">        to_add = ListNode(val)</span><br><span class="line">        to_add.prev = pred</span><br><span class="line">        to_add.next = succ</span><br><span class="line">        pred.next = to_add</span><br><span class="line">        succ.prev = to_add</span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">deleteAtIndex</span><span class="params">(self, index: int)</span> -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        Delete the index-th node in the linked list, if the index is valid.</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="comment"># if the index is invalid, do nothing</span></span><br><span class="line">        <span class="keyword">if</span> index &lt; <span class="number">0</span> <span class="keyword">or</span> index &gt;= self.size:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># find predecessor and successor of the node to be deleted</span></span><br><span class="line">        <span class="keyword">if</span> index &lt; self.size - index:</span><br><span class="line">            pred = self.head</span><br><span class="line">            <span class="keyword">for</span> _ <span class="keyword">in</span> range(index):</span><br><span class="line">                pred = pred.next</span><br><span class="line">            succ = pred.next.next</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            succ = self.tail</span><br><span class="line">            <span class="keyword">for</span> _ <span class="keyword">in</span> range(self.size - index - <span class="number">1</span>):</span><br><span class="line">                succ = succ.prev</span><br><span class="line">            pred = succ.prev.prev</span><br><span class="line">            </span><br><span class="line">        <span class="comment"># delete pred.next </span></span><br><span class="line">        self.size -= <span class="number">1</span></span><br><span class="line">        pred.next = succ</span><br><span class="line">        succ.prev = pred</span><br></pre></td></tr></table></figure></details><details>    <summary>åŒé“¾è¡¨Java</summary><figure class="highlight java"><figcaption><span>[solution2-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ListNode</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> val;</span><br><span class="line">  ListNode next;</span><br><span class="line">  ListNode prev;</span><br><span class="line">  ListNode(<span class="keyword">int</span> x) &#123; val = x; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyLinkedList</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> size;</span><br><span class="line">  <span class="comment">// sentinel nodes as pseudo-head and pseudo-tail</span></span><br><span class="line">  ListNode head, tail;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">MyLinkedList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    size = <span class="number">0</span>;</span><br><span class="line">    head = <span class="keyword">new</span> ListNode(<span class="number">0</span>);</span><br><span class="line">    tail = <span class="keyword">new</span> ListNode(<span class="number">0</span>);</span><br><span class="line">    head.next = tail;</span><br><span class="line">    tail.prev = head;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/** Get the value of the index-th node in the linked list. If the index is invalid, return -1. */</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">get</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// if index is invalid</span></span><br><span class="line">    <span class="keyword">if</span> (index &lt; <span class="number">0</span> || index &gt;= size) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// choose the fastest way: to move from the head</span></span><br><span class="line">    <span class="comment">// or to move from the tail</span></span><br><span class="line">    ListNode curr = head;</span><br><span class="line">    <span class="keyword">if</span> (index + <span class="number">1</span> &lt; size - index)</span><br><span class="line">      <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; index + <span class="number">1</span>; ++i) curr = curr.next;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">      curr = tail;</span><br><span class="line">      <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size - index; ++i) curr = curr.prev;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> curr.val;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/** Add a node of value val before the first element of the linked list. After the insertion, the new node will be the first node of the linked list. */</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addAtHead</span><span class="params">(<span class="keyword">int</span> val)</span> </span>&#123;</span><br><span class="line">    ListNode pred = head, succ = head.next;</span><br><span class="line"></span><br><span class="line">    ++size;</span><br><span class="line">    ListNode toAdd = <span class="keyword">new</span> ListNode(val);</span><br><span class="line">    toAdd.prev = pred;</span><br><span class="line">    toAdd.next = succ;</span><br><span class="line">    pred.next = toAdd;</span><br><span class="line">    succ.prev = toAdd;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/** Append a node of value val to the last element of the linked list. */</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addAtTail</span><span class="params">(<span class="keyword">int</span> val)</span> </span>&#123;</span><br><span class="line">    ListNode succ = tail, pred = tail.prev;</span><br><span class="line"></span><br><span class="line">    ++size;</span><br><span class="line">    ListNode toAdd = <span class="keyword">new</span> ListNode(val);</span><br><span class="line">    toAdd.prev = pred;</span><br><span class="line">    toAdd.next = succ;</span><br><span class="line">    pred.next = toAdd;</span><br><span class="line">    succ.prev = toAdd;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/** Add a node of value val before the index-th node in the linked list. If index equals to the length of linked list, the node will be appended to the end of linked list. If index is greater than the length, the node will not be inserted. */</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addAtIndex</span><span class="params">(<span class="keyword">int</span> index, <span class="keyword">int</span> val)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// If index is greater than the length, </span></span><br><span class="line">    <span class="comment">// the node will not be inserted.</span></span><br><span class="line">    <span class="keyword">if</span> (index &gt; size) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// [so weird] If index is negative, </span></span><br><span class="line">    <span class="comment">// the node will be inserted at the head of the list.</span></span><br><span class="line">    <span class="keyword">if</span> (index &lt; <span class="number">0</span>) index = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// find predecessor and successor of the node to be added</span></span><br><span class="line">    ListNode pred, succ;</span><br><span class="line">    <span class="keyword">if</span> (index &lt; size - index) &#123;</span><br><span class="line">      pred = head;</span><br><span class="line">      <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; index; ++i) pred = pred.next;</span><br><span class="line">      succ = pred.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">      succ = tail;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size - index; ++i) succ = succ.prev;</span><br><span class="line">      pred = succ.prev;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// insertion itself</span></span><br><span class="line">    ++size;</span><br><span class="line">    ListNode toAdd = <span class="keyword">new</span> ListNode(val);</span><br><span class="line">    toAdd.prev = pred;</span><br><span class="line">    toAdd.next = succ;</span><br><span class="line">    pred.next = toAdd;</span><br><span class="line">    succ.prev = toAdd;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/** Delete the index-th node in the linked list, if the index is valid. */</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteAtIndex</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// if the index is invalid, do nothing</span></span><br><span class="line">    <span class="keyword">if</span> (index &lt; <span class="number">0</span> || index &gt;= size) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// find predecessor and successor of the node to be deleted</span></span><br><span class="line">    ListNode pred, succ;</span><br><span class="line">    <span class="keyword">if</span> (index &lt; size - index) &#123;</span><br><span class="line">      pred = head;</span><br><span class="line">      <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; index; ++i) pred = pred.next;</span><br><span class="line">      succ = pred.next.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">      succ = tail;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size - index - <span class="number">1</span>; ++i) succ = succ.prev;</span><br><span class="line">      pred = succ.prev.prev;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// delete pred.next </span></span><br><span class="line">    --size;</span><br><span class="line">    pred.next = succ;</span><br><span class="line">    succ.prev = pred;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è®¾è®¡é“¾è¡¨çš„å®ç°ã€‚æ‚¨å¯ä»¥é€‰æ‹©ä½¿ç”¨å•é“¾è¡¨æˆ–åŒé“¾è¡¨ã€‚å•é“¾è¡¨ä¸­çš„èŠ‚ç‚¹åº”è¯¥å…·æœ‰ä¸¤ä¸ªå±æ€§ï¼šval å’Œ nextã€‚val æ˜¯å½“å‰èŠ‚ç‚¹çš„å€¼ï¼Œnext æ˜¯æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆ/å¼•ç”¨ã€‚å¦‚æœè¦ä½¿ç”¨åŒå‘é“¾è¡¨ï¼Œåˆ™è¿˜éœ€è¦ä¸€ä¸ªå±æ€§ prev ä»¥æŒ‡ç¤ºé“¾è¡¨ä¸­çš„ä¸Šä¸€ä¸ªèŠ‚ç‚¹ã€‚å‡è®¾é“¾è¡¨ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹éƒ½æ˜¯ 0-index çš„ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="2021å¹´4æœˆ" scheme="http://yoursite.com/categories/2021%E5%B9%B44%E6%9C%88/"/>
    
    
      <category term="LeetCode" scheme="http://yoursite.com/tags/LeetCode/"/>
    
      <category term="Design" scheme="http://yoursite.com/tags/Design/"/>
    
      <category term="Linked List" scheme="http://yoursite.com/tags/Linked-List/"/>
    
  </entry>
  
  <entry>
    <title>706. è®¾è®¡å“ˆå¸Œæ˜ å°„</title>
    <link href="http://yoursite.com/2021/04/09/706.%20%E8%AE%BE%E8%AE%A1%E5%93%88%E5%B8%8C%E6%98%A0%E5%B0%84/"/>
    <id>http://yoursite.com/2021/04/09/706. è®¾è®¡å“ˆå¸Œæ˜ å°„/</id>
    <published>2021-04-09T10:12:12.000Z</published>
    <updated>2021-04-10T16:53:00.872Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸ä½¿ç”¨ä»»ä½•å†…å»ºçš„å“ˆå¸Œè¡¨åº“è®¾è®¡ä¸€ä¸ªå“ˆå¸Œæ˜ å°„ï¼ˆHashMapï¼‰ã€‚</p><a id="more"></a><p>å®ç° MyHashMap ç±»ï¼š</p><p>MyHashMap() ç”¨ç©ºæ˜ å°„åˆå§‹åŒ–å¯¹è±¡<br>void put(int key, int value) å‘ HashMap æ’å…¥ä¸€ä¸ªé”®å€¼å¯¹ (key, value) ã€‚å¦‚æœ key å·²ç»å­˜åœ¨äºæ˜ å°„ä¸­ï¼Œåˆ™æ›´æ–°å…¶å¯¹åº”çš„å€¼ value ã€‚<br>int get(int key) è¿”å›ç‰¹å®šçš„ key æ‰€æ˜ å°„çš„ value ï¼›å¦‚æœæ˜ å°„ä¸­ä¸åŒ…å« key çš„æ˜ å°„ï¼Œè¿”å› -1 ã€‚<br>void remove(key) å¦‚æœæ˜ å°„ä¸­å­˜åœ¨ key çš„æ˜ å°„ï¼Œåˆ™ç§»é™¤ key å’Œå®ƒæ‰€å¯¹åº”çš„ value ã€‚</p><p>ç¤ºä¾‹ï¼š</p><p>è¾“å…¥ï¼š</p><pre><code>[&quot;MyHashMap&quot;, &quot;put&quot;, &quot;put&quot;, &quot;get&quot;, &quot;get&quot;, &quot;put&quot;, &quot;get&quot;, &quot;remove&quot;, &quot;get&quot;][[], [1, 1], [2, 2], [1], [3], [2, 1], [2], [2], [2]]</code></pre><p>è¾“å‡ºï¼š</p><pre><code>[null, null, null, 1, -1, null, 1, null, -1]</code></pre><p>è§£é‡Šï¼š</p><pre><code>MyHashMap myHashMap = new MyHashMap();myHashMap.put(1, 1); // myHashMap ç°åœ¨ä¸º [[1,1]]myHashMap.put(2, 2); // myHashMap ç°åœ¨ä¸º [[1,1], [2,2]]myHashMap.get(1);    // è¿”å› 1 ï¼ŒmyHashMap ç°åœ¨ä¸º [[1,1], [2,2]]myHashMap.get(3);    // è¿”å› -1ï¼ˆæœªæ‰¾åˆ°ï¼‰ï¼ŒmyHashMap ç°åœ¨ä¸º [[1,1], [2,2]]myHashMap.put(2, 1); // myHashMap ç°åœ¨ä¸º [[1,1], [2,1]]ï¼ˆæ›´æ–°å·²æœ‰çš„å€¼ï¼‰myHashMap.get(2);    // è¿”å› 1 ï¼ŒmyHashMap ç°åœ¨ä¸º [[1,1], [2,1]]myHashMap.remove(2); // åˆ é™¤é”®ä¸º 2 çš„æ•°æ®ï¼ŒmyHashMap ç°åœ¨ä¸º [[1,1]]myHashMap.get(2);    // è¿”å› -1ï¼ˆæœªæ‰¾åˆ°ï¼‰ï¼ŒmyHashMap ç°åœ¨ä¸º [[1,1]]</code></pre><p>æç¤ºï¼š</p><pre><code>0 &lt;= key, value &lt;= 106æœ€å¤šè°ƒç”¨ 104 æ¬¡ putã€get å’Œ remove æ–¹æ³•</code></pre><p>è¿›é˜¶ï¼šä½ èƒ½å¦ä¸ä½¿ç”¨å†…ç½®çš„ HashMap åº“è§£å†³æ­¤é—®é¢˜ï¼Ÿ</p><h1 id="é“¾åœ°å€æ³•"><a href="#é“¾åœ°å€æ³•" class="headerlink" title="é“¾åœ°å€æ³•"></a>é“¾åœ°å€æ³•</h1><p>æˆ‘ä»¬å‡å®šè¯»è€…å·²ç»å®Œæˆäº†ã€Œ<a href="https://leetcode-cn.com/problems/design-hashset/" target="_blank" rel="noopener">705. è®¾è®¡å“ˆå¸Œé›†åˆ</a>ã€è¿™ä¸€é¢˜ç›®ã€‚</p><p>ã€Œè®¾è®¡å“ˆå¸Œæ˜ å°„ã€ä¸ã€Œè®¾è®¡å“ˆå¸Œé›†åˆã€è§£æ³•æ¥è¿‘ï¼Œå”¯ä¸€çš„åŒºåˆ«åœ¨äºæˆ‘ä»¬å­˜å‚¨çš„ä¸æ˜¯ keyæœ¬èº«ï¼Œè€Œæ˜¯ key,value å¯¹ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œä»£ç åŸºæœ¬æ˜¯ç±»ä¼¼çš„ã€‚</p><details>    <summary>é“¾åœ°å€æ³•C++</summary><figure class="highlight c++"><figcaption><span>[sol1-C++]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyHashMap</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">list</span>&lt;pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;&gt;&gt; data;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">int</span> base = <span class="number">769</span>;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">hash</span><span class="params">(<span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> key % base;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">/** Initialize your data structure here. */</span></span><br><span class="line">    MyHashMap(): data(base) &#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/** value will always be non-negative. */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">put</span><span class="params">(<span class="keyword">int</span> key, <span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> h = hash(key);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> it = data[h].begin(); it != data[h].end(); it++) &#123;</span><br><span class="line">            <span class="keyword">if</span> ((*it).first == key) &#123;</span><br><span class="line">                (*it).second = value;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        data[h].push_back(make_pair(key, value));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/** Returns the value to which the specified key is mapped, or -1 if this map contains no mapping for the key */</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">get</span><span class="params">(<span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> h = hash(key);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> it = data[h].begin(); it != data[h].end(); it++) &#123;</span><br><span class="line">            <span class="keyword">if</span> ((*it).first == key) &#123;</span><br><span class="line">                <span class="keyword">return</span> (*it).second;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/** Removes the mapping of the specified value key if this map contains a mapping for the key */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">remove</span><span class="params">(<span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> h = hash(key);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> it = data[h].begin(); it != data[h].end(); it++) &#123;</span><br><span class="line">            <span class="keyword">if</span> ((*it).first == key) &#123;</span><br><span class="line">                data[h].erase(it);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></details><details>    <summary>é“¾åœ°å€æ³•Java</summary><figure class="highlight java"><figcaption><span>[sol1-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyHashMap</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Pair</span> </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> key;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> value;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Pair</span><span class="params">(<span class="keyword">int</span> key, <span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.key = key;</span><br><span class="line">            <span class="keyword">this</span>.value = value;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getKey</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> key;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> value;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValue</span><span class="params">(<span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.value = value;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> BASE = <span class="number">769</span>;</span><br><span class="line">    <span class="keyword">private</span> LinkedList[] data;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Initialize your data structure here. */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyHashMap</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        data = <span class="keyword">new</span> LinkedList[BASE];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; BASE; ++i) &#123;</span><br><span class="line">            data[i] = <span class="keyword">new</span> LinkedList&lt;Pair&gt;();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/** value will always be non-negative. */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(<span class="keyword">int</span> key, <span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> h = hash(key);</span><br><span class="line">        Iterator&lt;Pair&gt; iterator = data[h].iterator();</span><br><span class="line">        <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">            Pair pair = iterator.next();</span><br><span class="line">            <span class="keyword">if</span> (pair.getKey() == key) &#123;</span><br><span class="line">                pair.setValue(value);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        data[h].offerLast(<span class="keyword">new</span> Pair(key, value));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/** Returns the value to which the specified key is mapped, or -1 if this map contains no mapping for the key */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">get</span><span class="params">(<span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> h = hash(key);</span><br><span class="line">        Iterator&lt;Pair&gt; iterator = data[h].iterator();</span><br><span class="line">        <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">            Pair pair = iterator.next();</span><br><span class="line">            <span class="keyword">if</span> (pair.getKey() == key) &#123;</span><br><span class="line">                <span class="keyword">return</span> pair.value;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/** Removes the mapping of the specified value key if this map contains a mapping for the key */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">(<span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> h = hash(key);</span><br><span class="line">        Iterator&lt;Pair&gt; iterator = data[h].iterator();</span><br><span class="line">        <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">            Pair pair = iterator.next();</span><br><span class="line">            <span class="keyword">if</span> (pair.key == key) &#123;</span><br><span class="line">                data[h].remove(pair);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">hash</span><span class="params">(<span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> key % BASE;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>é“¾åœ°å€æ³•Golang</summary><figure class="highlight go"><figcaption><span>[sol1-Golang]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> base = <span class="number">769</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> entry <span class="keyword">struct</span> &#123;</span><br><span class="line">    key, value <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> MyHashMap <span class="keyword">struct</span> &#123;</span><br><span class="line">    data []list.List</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Constructor</span><span class="params">()</span> <span class="title">MyHashMap</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> MyHashMap&#123;<span class="built_in">make</span>([]list.List, base)&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(m *MyHashMap)</span> <span class="title">hash</span><span class="params">(key <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> key % base</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(m *MyHashMap)</span> <span class="title">Put</span><span class="params">(key, value <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    h := m.hash(key)</span><br><span class="line">    <span class="keyword">for</span> e := m.data[h].Front(); e != <span class="literal">nil</span>; e = e.Next() &#123;</span><br><span class="line">        <span class="keyword">if</span> et := e.Value.(entry); et.key == key &#123;</span><br><span class="line">            e.Value = entry&#123;key, value&#125;</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    m.data[h].PushBack(entry&#123;key, value&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(m *MyHashMap)</span> <span class="title">Get</span><span class="params">(key <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    h := m.hash(key)</span><br><span class="line">    <span class="keyword">for</span> e := m.data[h].Front(); e != <span class="literal">nil</span>; e = e.Next() &#123;</span><br><span class="line">        <span class="keyword">if</span> et := e.Value.(entry); et.key == key &#123;</span><br><span class="line">            <span class="keyword">return</span> et.value</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(m *MyHashMap)</span> <span class="title">Remove</span><span class="params">(key <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    h := m.hash(key)</span><br><span class="line">    <span class="keyword">for</span> e := m.data[h].Front(); e != <span class="literal">nil</span>; e = e.Next() &#123;</span><br><span class="line">        <span class="keyword">if</span> e.Value.(entry).key == key &#123;</span><br><span class="line">            m.data[h].Remove(e)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>é“¾åœ°å€æ³•JavaScript</summary><figure class="highlight javascript"><figcaption><span>[sol1-JavaScript]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> MyHashMap = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.BASE = <span class="number">769</span>;</span><br><span class="line">    <span class="keyword">this</span>.data = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="keyword">this</span>.BASE).fill(<span class="number">0</span>).map(<span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">new</span> <span class="built_in">Array</span>());</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">MyHashMap.prototype.put = <span class="function"><span class="keyword">function</span>(<span class="params">key, value</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> h = <span class="keyword">this</span>.hash(key);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> it <span class="keyword">of</span> <span class="keyword">this</span>.data[h]) &#123;</span><br><span class="line">        <span class="keyword">if</span> (it[<span class="number">0</span>] === key) &#123;</span><br><span class="line">            it[<span class="number">1</span>] = value;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>.data[h].push([key, value]);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">MyHashMap.prototype.get = <span class="function"><span class="keyword">function</span>(<span class="params">key</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> h = <span class="keyword">this</span>.hash(key);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> it <span class="keyword">of</span> <span class="keyword">this</span>.data[h]) &#123;</span><br><span class="line">        <span class="keyword">if</span> (it[<span class="number">0</span>] === key) &#123;</span><br><span class="line">            <span class="keyword">return</span> it[<span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">MyHashMap.prototype.remove = <span class="function"><span class="keyword">function</span>(<span class="params">key</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> h = <span class="keyword">this</span>.hash(key);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> it <span class="keyword">of</span> <span class="keyword">this</span>.data[h]) &#123;</span><br><span class="line">        <span class="keyword">if</span> (it[<span class="number">0</span>] === key) &#123;</span><br><span class="line">            <span class="keyword">const</span> idx = <span class="keyword">this</span>.data[h].indexOf(it);</span><br><span class="line">            <span class="keyword">this</span>.data[h].splice(idx, <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">MyHashMap.prototype.hash = <span class="function"><span class="keyword">function</span>(<span class="params">key</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> key % <span class="keyword">this</span>.BASE;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>é“¾åœ°å€æ³•C</summary><figure class="highlight c"><figcaption><span>[sol1-C]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">List</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> key;</span><br><span class="line">    <span class="keyword">int</span> val;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">List</span>* <span class="title">next</span>;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">listPush</span><span class="params">(struct List* head, <span class="keyword">int</span> key, <span class="keyword">int</span> val)</span> </span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">List</span>* <span class="title">tmp</span> = <span class="title">malloc</span>(<span class="title">sizeof</span>(<span class="title">struct</span> <span class="title">List</span>));</span></span><br><span class="line">    tmp-&gt;key = key;</span><br><span class="line">    tmp-&gt;val = val;</span><br><span class="line">    tmp-&gt;next = head-&gt;next;</span><br><span class="line">    head-&gt;next = tmp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">listDelete</span><span class="params">(struct List* head, <span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (struct List* it = head; it-&gt;next; it = it-&gt;next) &#123;</span><br><span class="line">        <span class="keyword">if</span> (it-&gt;next-&gt;key == key) &#123;</span><br><span class="line">            <span class="class"><span class="keyword">struct</span> <span class="title">List</span>* <span class="title">tmp</span> = <span class="title">it</span>-&gt;<span class="title">next</span>;</span></span><br><span class="line">            it-&gt;next = tmp-&gt;next;</span><br><span class="line">            <span class="built_in">free</span>(tmp);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">struct List* <span class="title">listFind</span><span class="params">(struct List* head, <span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (struct List* it = head; it-&gt;next; it = it-&gt;next) &#123;</span><br><span class="line">        <span class="keyword">if</span> (it-&gt;next-&gt;key == key) &#123;</span><br><span class="line">            <span class="keyword">return</span> it-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">listFree</span><span class="params">(struct List* head)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (head-&gt;next) &#123;</span><br><span class="line">        <span class="class"><span class="keyword">struct</span> <span class="title">List</span>* <span class="title">tmp</span> = <span class="title">head</span>-&gt;<span class="title">next</span>;</span></span><br><span class="line">        head-&gt;next = tmp-&gt;next;</span><br><span class="line">        <span class="built_in">free</span>(tmp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> base = <span class="number">769</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">hash</span><span class="params">(<span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> key % base;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">List</span>* <span class="title">data</span>;</span></span><br><span class="line">&#125; MyHashMap;</span><br><span class="line"></span><br><span class="line"><span class="function">MyHashMap* <span class="title">myHashMapCreate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    MyHashMap* ret = <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(MyHashMap));</span><br><span class="line">    ret-&gt;data = <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(struct List) * base);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; base; i++) &#123;</span><br><span class="line">        ret-&gt;data[i].key = <span class="number">0</span>;</span><br><span class="line">        ret-&gt;data[i].val = <span class="number">0</span>;</span><br><span class="line">        ret-&gt;data[i].next = <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">myHashMapPut</span><span class="params">(MyHashMap* obj, <span class="keyword">int</span> key, <span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> h = hash(key);</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">List</span>* <span class="title">rec</span> = <span class="title">listFind</span>(&amp;(<span class="title">obj</span>-&gt;<span class="title">data</span>[<span class="title">h</span>]), <span class="title">key</span>);</span></span><br><span class="line">    <span class="keyword">if</span> (rec == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        listPush(&amp;(obj-&gt;data[h]), key, value);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        rec-&gt;val = value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">myHashMapGet</span><span class="params">(MyHashMap* obj, <span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> h = hash(key);</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">List</span>* <span class="title">rec</span> = <span class="title">listFind</span>(&amp;(<span class="title">obj</span>-&gt;<span class="title">data</span>[<span class="title">h</span>]), <span class="title">key</span>);</span></span><br><span class="line">    <span class="keyword">if</span> (rec == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> rec-&gt;val;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">myHashMapRemove</span><span class="params">(MyHashMap* obj, <span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> h = hash(key);</span><br><span class="line">    listDelete(&amp;(obj-&gt;data[h]), key);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">myHashMapFree</span><span class="params">(MyHashMap* obj)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; base; i++) &#123;</span><br><span class="line">        listFree(&amp;(obj-&gt;data[i]));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">free</span>(obj-&gt;data);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><ul><li>ç©ºé—´å¤æ‚åº¦ï¼š<em>O(n+b)</em>ã€‚</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¸ä½¿ç”¨ä»»ä½•å†…å»ºçš„å“ˆå¸Œè¡¨åº“è®¾è®¡ä¸€ä¸ªå“ˆå¸Œæ˜ å°„ï¼ˆHashMapï¼‰ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="2021å¹´4æœˆ" scheme="http://yoursite.com/categories/2021%E5%B9%B44%E6%9C%88/"/>
    
    
      <category term="LeetCode" scheme="http://yoursite.com/tags/LeetCode/"/>
    
      <category term="Hash Table" scheme="http://yoursite.com/tags/Hash-Table/"/>
    
      <category term="Design" scheme="http://yoursite.com/tags/Design/"/>
    
  </entry>
  
  <entry>
    <title>705. è®¾è®¡å“ˆå¸Œé›†åˆ</title>
    <link href="http://yoursite.com/2021/04/09/705.%20%E8%AE%BE%E8%AE%A1%E5%93%88%E5%B8%8C%E9%9B%86%E5%90%88/"/>
    <id>http://yoursite.com/2021/04/09/705. è®¾è®¡å“ˆå¸Œé›†åˆ/</id>
    <published>2021-04-09T10:10:12.000Z</published>
    <updated>2021-04-10T16:53:07.037Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸ä½¿ç”¨ä»»ä½•å†…å»ºçš„å“ˆå¸Œè¡¨åº“è®¾è®¡ä¸€ä¸ªå“ˆå¸Œé›†åˆï¼ˆHashSetï¼‰ã€‚</p><a id="more"></a><p>å®ç° MyHashSet ç±»ï¼š</p><p>void add(key) å‘å“ˆå¸Œé›†åˆä¸­æ’å…¥å€¼ key ã€‚<br>bool contains(key) è¿”å›å“ˆå¸Œé›†åˆä¸­æ˜¯å¦å­˜åœ¨è¿™ä¸ªå€¼ key ã€‚<br>void remove(key) å°†ç»™å®šå€¼ key ä»å“ˆå¸Œé›†åˆä¸­åˆ é™¤ã€‚å¦‚æœå“ˆå¸Œé›†åˆä¸­æ²¡æœ‰è¿™ä¸ªå€¼ï¼Œä»€ä¹ˆä¹Ÿä¸åšã€‚</p><p>ç¤ºä¾‹ï¼š</p><p>è¾“å…¥ï¼š</p><pre><code>[&quot;MyHashSet&quot;, &quot;add&quot;, &quot;add&quot;, &quot;contains&quot;, &quot;contains&quot;, &quot;add&quot;, &quot;contains&quot;, &quot;remove&quot;, &quot;contains&quot;][[], [1], [2], [1], [3], [2], [2], [2], [2]]</code></pre><p>è¾“å‡ºï¼š</p><pre><code>[null, null, null, true, false, null, true, null, false]</code></pre><p>è§£é‡Šï¼š</p><pre><code>MyHashSet myHashSet = new MyHashSet();myHashSet.add(1);      // set = [1]myHashSet.add(2);      // set = [1, 2]myHashSet.contains(1); // è¿”å› TruemyHashSet.contains(3); // è¿”å› False ï¼Œï¼ˆæœªæ‰¾åˆ°ï¼‰myHashSet.add(2);      // set = [1, 2]myHashSet.contains(2); // è¿”å› TruemyHashSet.remove(2);   // set = [1]myHashSet.contains(2); // è¿”å› False ï¼Œï¼ˆå·²ç§»é™¤ï¼‰</code></pre><p>æç¤ºï¼š</p><pre><code>0 &lt;= key &lt;= 106æœ€å¤šè°ƒç”¨ 104 æ¬¡ addã€remove å’Œ contains ã€‚</code></pre><p>è¿›é˜¶ï¼šä½ å¯ä»¥ä¸ä½¿ç”¨å†…å»ºçš„å“ˆå¸Œé›†åˆåº“è§£å†³æ­¤é—®é¢˜å—ï¼Ÿ</p><h1 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h1><p>ä¸ºäº†å®ç°å“ˆå¸Œé›†åˆè¿™ä¸€æ•°æ®ç»“æ„ï¼Œæœ‰ä»¥ä¸‹å‡ ä¸ªå…³é”®é—®é¢˜éœ€è¦è§£å†³ï¼š</p><ul><li>å“ˆå¸Œå‡½æ•°ï¼šèƒ½å¤Ÿå°†é›†åˆä¸­ä»»æ„å¯èƒ½çš„å…ƒç´ æ˜ å°„åˆ°ä¸€ä¸ªå›ºå®šèŒƒå›´çš„æ•´æ•°å€¼ï¼Œå¹¶å°†è¯¥å…ƒç´ å­˜å‚¨åˆ°æ•´æ•°å€¼å¯¹åº”çš„åœ°å€ä¸Šã€‚</li><li>å†²çªå¤„ç†ï¼šç”±äºä¸åŒå…ƒç´ å¯èƒ½æ˜ å°„åˆ°ç›¸åŒçš„æ•´æ•°å€¼ï¼Œå› æ­¤éœ€è¦åœ¨æ•´æ•°å€¼å‡ºç°ã€Œå†²çªã€æ—¶ï¼Œéœ€è¦è¿›è¡Œå†²çªå¤„ç†ã€‚æ€»çš„æ¥è¯´ï¼Œæœ‰ä»¥ä¸‹å‡ ç§ç­–ç•¥è§£å†³å†²çªï¼š<ul><li>é“¾åœ°å€æ³•ï¼šä¸ºæ¯ä¸ªå“ˆå¸Œå€¼ç»´æŠ¤ä¸€ä¸ªé“¾è¡¨ï¼Œå¹¶å°†å…·æœ‰ç›¸åŒå“ˆå¸Œå€¼çš„å…ƒç´ éƒ½æ”¾å…¥è¿™ä¸€é“¾è¡¨å½“ä¸­ã€‚</li><li>å¼€æ”¾åœ°å€æ³•ï¼šå½“å‘ç°å“ˆå¸Œå€¼ <em>h</em> å¤„äº§ç”Ÿå†²çªæ—¶ï¼Œæ ¹æ®æŸç§ç­–ç•¥ï¼Œä» <em>h</em> å‡ºå‘æ‰¾åˆ°ä¸‹ä¸€ä¸ªä¸å†²çªçš„ä½ç½®ã€‚ä¾‹å¦‚ï¼Œä¸€ç§æœ€ç®€å•çš„ç­–ç•¥æ˜¯ï¼Œä¸æ–­åœ°æ£€æŸ¥ h+1,h+2,h+3â€¦ è¿™äº›æ•´æ•°å¯¹åº”çš„ä½ç½®ã€‚</li><li>å†å“ˆå¸Œæ³•ï¼šå½“å‘ç°å“ˆå¸Œå†²çªåï¼Œä½¿ç”¨å¦ä¸€ä¸ªå“ˆå¸Œå‡½æ•°äº§ç”Ÿä¸€ä¸ªæ–°çš„åœ°å€ã€‚</li></ul></li><li>æ‰©å®¹ï¼šå½“å“ˆå¸Œè¡¨å…ƒç´ è¿‡å¤šæ—¶ï¼Œå†²çªçš„æ¦‚ç‡å°†è¶Šæ¥è¶Šå¤§ï¼Œè€Œåœ¨å“ˆå¸Œè¡¨ä¸­æŸ¥è¯¢ä¸€ä¸ªå…ƒç´ çš„æ•ˆç‡ä¹Ÿä¼šè¶Šæ¥è¶Šä½ã€‚å› æ­¤ï¼Œéœ€è¦å¼€è¾Ÿä¸€å—æ›´å¤§çš„ç©ºé—´ï¼Œæ¥ç¼“è§£å“ˆå¸Œè¡¨ä¸­å‘ç”Ÿçš„å†²çªã€‚</li></ul><p>ä»¥ä¸Šå†…å®¹è¯»è€…å¯ä»¥è‡ªè¡Œç¿»é˜…æ•°æ®ç»“æ„çš„æ•™æï¼Œæœ¬é¢˜è§£ä¸å†é˜è¿°ï¼Œè€Œæ˜¯ç›´æ¥ç»™å‡ºä¸€ä¸ªæœ€ç®€å•çš„å“ˆå¸Œè¡¨å®ç°ã€‚</p><h1 id="æ–¹æ³•ä¸€ï¼šé“¾åœ°å€æ³•"><a href="#æ–¹æ³•ä¸€ï¼šé“¾åœ°å€æ³•" class="headerlink" title="æ–¹æ³•ä¸€ï¼šé“¾åœ°å€æ³•"></a>æ–¹æ³•ä¸€ï¼šé“¾åœ°å€æ³•</h1><p>è®¾å“ˆå¸Œè¡¨çš„å¤§å°ä¸º base ï¼Œåˆ™å¯ä»¥è®¾è®¡ä¸€ä¸ªç®€å•çš„å“ˆå¸Œå‡½æ•°ï¼šhash(x)=x%baseã€‚</p><p>æˆ‘ä»¬å¼€è¾Ÿä¸€ä¸ªå¤§å°ä¸º base çš„æ•°ç»„ï¼Œæ•°ç»„çš„æ¯ä¸ªä½ç½®æ˜¯ä¸€ä¸ªé“¾è¡¨ã€‚å½“è®¡ç®—å‡ºå“ˆå¸Œå€¼ä¹‹åï¼Œå°±æ’å…¥åˆ°å¯¹åº”ä½ç½®çš„é“¾è¡¨å½“ä¸­ã€‚</p><p>ç”±äºæˆ‘ä»¬ä½¿ç”¨æ•´æ•°é™¤æ³•ä½œä¸ºå“ˆå¸Œå‡½æ•°ï¼Œä¸ºäº†å°½å¯èƒ½é¿å…å†²çªï¼Œåº”å½“å°† base  å–ä¸ºä¸€ä¸ªè´¨æ•°ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å– base=769ã€‚</p><p><strong>ä»£ç </strong></p><details>    <summary>é“¾åœ°å€æ³•C++</summary><figure class="highlight c++"><figcaption><span>[sol1-C++]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyHashSet</span> &#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">list</span>&lt;<span class="keyword">int</span>&gt;&gt; data;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">int</span> base = <span class="number">769</span>;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">hash</span><span class="params">(<span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> key % base;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">/** Initialize your data structure here. */</span></span><br><span class="line">    MyHashSet(): data(base) &#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> h = hash(key);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> it = data[h].begin(); it != data[h].end(); it++) &#123;</span><br><span class="line">            <span class="keyword">if</span> ((*it) == key) &#123;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        data[h].push_back(key);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">remove</span><span class="params">(<span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> h = hash(key);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> it = data[h].begin(); it != data[h].end(); it++) &#123;</span><br><span class="line">            <span class="keyword">if</span> ((*it) == key) &#123;</span><br><span class="line">                data[h].erase(it);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/** Returns true if this set contains the specified element */</span></span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">contains</span><span class="params">(<span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> h = hash(key);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> it = data[h].begin(); it != data[h].end(); it++) &#123;</span><br><span class="line">            <span class="keyword">if</span> ((*it) == key) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></details><details>    <summary>é“¾åœ°å€æ³•Java</summary><figure class="highlight java"><figcaption><span>[sol1-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyHashSet</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> BASE = <span class="number">769</span>;</span><br><span class="line">    <span class="keyword">private</span> LinkedList[] data;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Initialize your data structure here. */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyHashSet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        data = <span class="keyword">new</span> LinkedList[BASE];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; BASE; ++i) &#123;</span><br><span class="line">            data[i] = <span class="keyword">new</span> LinkedList&lt;Integer&gt;();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> h = hash(key);</span><br><span class="line">        Iterator&lt;Integer&gt; iterator = data[h].iterator();</span><br><span class="line">        <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">            Integer element = iterator.next();</span><br><span class="line">            <span class="keyword">if</span> (element == key) &#123;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        data[h].offerLast(key);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">(<span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> h = hash(key);</span><br><span class="line">        Iterator&lt;Integer&gt; iterator = data[h].iterator();</span><br><span class="line">        <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">            Integer element = iterator.next();</span><br><span class="line">            <span class="keyword">if</span> (element == key) &#123;</span><br><span class="line">                data[h].remove(element);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/** Returns true if this set contains the specified element */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">contains</span><span class="params">(<span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> h = hash(key);</span><br><span class="line">        Iterator&lt;Integer&gt; iterator = data[h].iterator();</span><br><span class="line">        <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">            Integer element = iterator.next();</span><br><span class="line">            <span class="keyword">if</span> (element == key) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">hash</span><span class="params">(<span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> key % BASE;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>é“¾åœ°å€æ³•JavaScript</summary><figure class="highlight javascript"><figcaption><span>[sol1-JavaScript]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> MyHashSet = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.BASE = <span class="number">769</span>;</span><br><span class="line">    <span class="keyword">this</span>.data = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="keyword">this</span>.BASE).fill(<span class="number">0</span>).map(<span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">new</span> <span class="built_in">Array</span>());</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">MyHashSet.prototype.add = <span class="function"><span class="keyword">function</span>(<span class="params">key</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> h = <span class="keyword">this</span>.hash(key);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> element <span class="keyword">of</span> <span class="keyword">this</span>.data[h]) &#123;</span><br><span class="line">        <span class="keyword">if</span> (element === key) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>.data[h].push(key);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">MyHashSet.prototype.remove = <span class="function"><span class="keyword">function</span>(<span class="params">key</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> h = <span class="keyword">this</span>.hash(key);</span><br><span class="line">    <span class="keyword">const</span> it = <span class="keyword">this</span>.data[h];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; it.length; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (it[i] === key) &#123;</span><br><span class="line">            it.splice(i, <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">MyHashSet.prototype.contains = <span class="function"><span class="keyword">function</span>(<span class="params">key</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> h = <span class="keyword">this</span>.hash(key);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> element <span class="keyword">of</span> <span class="keyword">this</span>.data[h]) &#123;</span><br><span class="line">        <span class="keyword">if</span> (element === key) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">MyHashSet.prototype.hash = <span class="function"><span class="keyword">function</span>(<span class="params">key</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> key % <span class="keyword">this</span>.BASE;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>é“¾åœ°å€æ³•Golang</summary><figure class="highlight go"><figcaption><span>[sol1-Golang]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> base = <span class="number">769</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> MyHashSet <span class="keyword">struct</span> &#123;</span><br><span class="line">    data []list.List</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Constructor</span><span class="params">()</span> <span class="title">MyHashSet</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> MyHashSet&#123;<span class="built_in">make</span>([]list.List, base)&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *MyHashSet)</span> <span class="title">hash</span><span class="params">(key <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> key % base</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *MyHashSet)</span> <span class="title">Add</span><span class="params">(key <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> !s.Contains(key) &#123;</span><br><span class="line">        h := s.hash(key)</span><br><span class="line">        s.data[h].PushBack(key)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *MyHashSet)</span> <span class="title">Remove</span><span class="params">(key <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    h := s.hash(key)</span><br><span class="line">    <span class="keyword">for</span> e := s.data[h].Front(); e != <span class="literal">nil</span>; e = e.Next() &#123;</span><br><span class="line">        <span class="keyword">if</span> e.Value.(<span class="keyword">int</span>) == key &#123;</span><br><span class="line">            s.data[h].Remove(e)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *MyHashSet)</span> <span class="title">Contains</span><span class="params">(key <span class="keyword">int</span>)</span> <span class="title">bool</span></span> &#123;</span><br><span class="line">    h := s.hash(key)</span><br><span class="line">    <span class="keyword">for</span> e := s.data[h].Front(); e != <span class="literal">nil</span>; e = e.Next() &#123;</span><br><span class="line">        <span class="keyword">if</span> e.Value.(<span class="keyword">int</span>) == key &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>é“¾åœ°å€æ³•C</summary><figure class="highlight c"><figcaption><span>[sol1-C]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">List</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> val;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">List</span>* <span class="title">next</span>;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">listPush</span><span class="params">(struct List* head, <span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">List</span>* <span class="title">tmp</span> = <span class="title">malloc</span>(<span class="title">sizeof</span>(<span class="title">struct</span> <span class="title">List</span>));</span></span><br><span class="line">    tmp-&gt;val = x;</span><br><span class="line">    tmp-&gt;next = head-&gt;next;</span><br><span class="line">    head-&gt;next = tmp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">listDelete</span><span class="params">(struct List* head, <span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (struct List* it = head; it-&gt;next; it = it-&gt;next) &#123;</span><br><span class="line">        <span class="keyword">if</span> (it-&gt;next-&gt;val == x) &#123;</span><br><span class="line">            <span class="class"><span class="keyword">struct</span> <span class="title">List</span>* <span class="title">tmp</span> = <span class="title">it</span>-&gt;<span class="title">next</span>;</span></span><br><span class="line">            it-&gt;next = tmp-&gt;next;</span><br><span class="line">            <span class="built_in">free</span>(tmp);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">listContains</span><span class="params">(struct List* head, <span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (struct List* it = head; it-&gt;next; it = it-&gt;next) &#123;</span><br><span class="line">        <span class="keyword">if</span> (it-&gt;next-&gt;val == x) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">listFree</span><span class="params">(struct List* head)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (head-&gt;next) &#123;</span><br><span class="line">        <span class="class"><span class="keyword">struct</span> <span class="title">List</span>* <span class="title">tmp</span> = <span class="title">head</span>-&gt;<span class="title">next</span>;</span></span><br><span class="line">        head-&gt;next = tmp-&gt;next;</span><br><span class="line">        <span class="built_in">free</span>(tmp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> base = <span class="number">769</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">hash</span><span class="params">(<span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> key % base;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">List</span>* <span class="title">data</span>;</span></span><br><span class="line">&#125; MyHashSet;</span><br><span class="line"></span><br><span class="line"><span class="function">MyHashSet* <span class="title">myHashSetCreate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    MyHashSet* ret = <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(MyHashSet));</span><br><span class="line">    ret-&gt;data = <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(struct List) * base);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; base; i++) &#123;</span><br><span class="line">        ret-&gt;data[i].val = <span class="number">0</span>;</span><br><span class="line">        ret-&gt;data[i].next = <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">myHashSetAdd</span><span class="params">(MyHashSet* obj, <span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> h = hash(key);</span><br><span class="line">    <span class="keyword">if</span> (!listContains(&amp;(obj-&gt;data[h]), key)) &#123;</span><br><span class="line">        listPush(&amp;(obj-&gt;data[h]), key);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">myHashSetRemove</span><span class="params">(MyHashSet* obj, <span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> h = hash(key);</span><br><span class="line">    listDelete(&amp;(obj-&gt;data[h]), key);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">myHashSetContains</span><span class="params">(MyHashSet* obj, <span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> h = hash(key);</span><br><span class="line">    <span class="keyword">return</span> listContains(&amp;(obj-&gt;data[h]), key);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">myHashSetFree</span><span class="params">(MyHashSet* obj)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; base; i++) &#123;</span><br><span class="line">        listFree(&amp;(obj-&gt;data[i]));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">free</span>(obj-&gt;data);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¸ä½¿ç”¨ä»»ä½•å†…å»ºçš„å“ˆå¸Œè¡¨åº“è®¾è®¡ä¸€ä¸ªå“ˆå¸Œé›†åˆï¼ˆHashSetï¼‰ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="2021å¹´4æœˆ" scheme="http://yoursite.com/categories/2021%E5%B9%B44%E6%9C%88/"/>
    
    
      <category term="LeetCode" scheme="http://yoursite.com/tags/LeetCode/"/>
    
      <category term="Hash Table" scheme="http://yoursite.com/tags/Hash-Table/"/>
    
      <category term="Design" scheme="http://yoursite.com/tags/Design/"/>
    
  </entry>
  
  <entry>
    <title>LCP 29. ä¹å›¢ç«™ä½</title>
    <link href="http://yoursite.com/2021/04/07/LCP%2029.%20%E4%B9%90%E5%9B%A2%E7%AB%99%E4%BD%8D/"/>
    <id>http://yoursite.com/2021/04/07/LCP 29. ä¹å›¢ç«™ä½/</id>
    <published>2021-04-07T02:00:12.000Z</published>
    <updated>2021-04-10T16:53:13.832Z</updated>
    
    <content type="html"><![CDATA[<p>æŸä¹å›¢çš„æ¼”å‡ºåœºåœ°å¯è§†ä½œ num * num çš„äºŒç»´çŸ©é˜µ gridï¼ˆå·¦ä¸Šè§’åæ ‡ä¸º [0,0])ï¼Œæ¯ä¸ªä½ç½®ç«™æœ‰ä¸€ä½æˆå‘˜ã€‚ä¹å›¢å…±æœ‰ 9 ç§ä¹å™¨ï¼Œä¹å™¨ç¼–å·ä¸º 1~9ï¼Œæ¯ä½æˆå‘˜æŒæœ‰ 1 ä¸ªä¹å™¨ã€‚</p><p>ä¸ºä¿è¯å£°ä¹æ··åˆæ•ˆæœï¼Œæˆå‘˜ç«™ä½è§„åˆ™ä¸ºï¼šè‡ª grid å·¦ä¸Šè§’å¼€å§‹é¡ºæ—¶é’ˆèºæ—‹å½¢å‘å†…å¾ªç¯ä»¥ 1ï¼Œ2ï¼Œâ€¦ï¼Œ9 å¾ªç¯é‡å¤æ’åˆ—ã€‚</p><a id="more"></a><p>è¯·è¿”å›ä½äºåœºåœ°åæ ‡ [Xpos,Ypos] çš„æˆå‘˜æ‰€æŒä¹å™¨ç¼–å·ã€‚</p><p>ç¤ºä¾‹ 1ï¼š</p><p>è¾“å…¥ï¼šnum = 3, Xpos = 0, Ypos = 2</p><p>è¾“å‡ºï¼š3</p><p>è§£é‡Šï¼š</p><pre><code>1 2 38 9 47 6 5</code></pre><p>ç¤ºä¾‹ 2ï¼š</p><p>è¾“å…¥ï¼šnum = 4, Xpos = 1, Ypos = 2</p><p>è¾“å‡ºï¼š5</p><p>è§£é‡Šï¼š</p><pre><code>1 2 3 43 4 5 52 7 6 61 9 8 7</code></pre><p>æç¤ºï¼š</p><p>1 &lt;= num &lt;= 10^9</p><p>0 &lt;= Xpos, Ypos &lt; num</p><h1 id="é¢˜è§£-1"><a href="#é¢˜è§£-1" class="headerlink" title="é¢˜è§£^1"></a>é¢˜è§£<a href="https://leetcode-cn.com/problems/SNJvJP/solution/shu-xue-yi-ge-gong-shi-ji-ke-by-ivon_shi-mo6a/" target="_blank" rel="noopener">^1</a></h1><p>1.è·å–æ‰€æ±‚ç‚¹åœ¨ç¬¬å‡ å±‚ï¼ˆæ­¤å¤„æ ¹æ®æ‰€æ±‚ç‚¹çš„ä½ç½®ï¼Œå±‚æ•°kå¯èƒ½ä¼šå¤šç®—ä¸€å±‚ï¼‰</p><p>2.ç¬¬<code>0ï¼Œ1...k</code>å±‚çš„æ•°é‡ ä¸ æ‰€æ±‚ç‚¹ç›¸å¯¹ç¬¬kå±‚å·¦ä¸Šè§’å…ƒç´ çš„ä½ç½®åš<code>+</code>æˆ–<code>-</code>è¿ç®—ï¼Œæ±‚å¾—æ‰€æ±‚ç‚¹çš„ç»å¯¹æ¬¡åºï¼ˆä»èµ·å§‹ç‚¹åˆ°æ‰€æ±‚ç‚¹ç»è¿‡çš„é•¿åº¦ï¼‰</p><p>è®°ï¼š<code>k(0,1,2...n/2</code>(å¾€ä¸Šå–æ•´))<br><code>C(K)</code>=ç¬¬kå±‚çš„æ–¹å—æ•°ç›®,å¦‚å›¾<code>C(0)=16,C(1)=8,C(2)=1</code>;<br><code>T(K)</code>=ç¬¬kå±‚åŠä»¥å¤–çš„æ–¹å— æ•°ç›®ï¼Œå¦‚å›¾<code>T(0)=16,T(1)=16+8=24,T(2)=16+8+1=25;</code><br>ä½†æ˜¯å…·ä½“æ€ä¹ˆè®¡ç®—å‘¢ å¯ä»¥ç”¨è¡¥é›†çš„æ€æƒ³<br><code>T(K)=n*n-(n-2k)*(n-2k)=4*k*(n-k)</code></p><p>ä½†æ˜¯æ€ä¹ˆæ±‚<code>(i,j)</code>ç‚¹æ‰€åœ¨å±‚ å·²ç»éå†è¿‡çš„æ•°ç›®å‘¢ ã€‚<br>1.æ±‚æ‰€åœ¨çš„å±‚æ•°<code>k</code><br><code>k=min(x,n-1-x,y,n-1-y)</code>(åç»­ç”±äºè¦åˆ†ç±»è®¨è®ºï¼Œkçš„æ±‚å–å¯ä»¥ç›´æ¥é€šè¿‡å…¶ä¸­æŸä¸¤ä¸ªå€¼æ±‚æœ€å°å€¼å³å¯); å³çœ‹è¯¥ç‚¹è·ç¦»å“ªä¸ªè¾¹ç•Œæ›´è¿‘ï¼Œæ‰€æ±‚çš„æœ€å°å€¼å°±æ˜¯ç¬¬å‡ å±‚ï¼Œå¦‚å›¾ <code>k=min(2,2,3,1)</code>,å³å¤„äºç¬¬ä¸€å±‚ã€‚é‚£ä¹ˆæˆ‘ä»¬ä¹Ÿå°±çŸ¥é“äº†è¯¥å±‚ä»¥å¤–çš„æ©™è‰²æ•°ç›®<code>T(k)</code>ã€‚<br>2.æ±‚æ‰€æ±‚ç‚¹<code>(x,y)</code>ç›¸å¯¹è¯¥å±‚å·¦ä¸Šè§’ç‚¹çš„ç›¸å¯¹è·¯å¾„é•¿åº¦</p><p>2.1 å¯¹äº<code>x&lt;=y</code>ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“<code>dl=(x-k)+(y-k)+1</code><br>æ•… ç»å¯¹è·¯å¾„é•¿åº¦ä¸º <code>T(k)+dl</code></p><p>2.2 ä½†æ˜¯å¯¹äº<code>x&gt;y</code>å‘¢ï¼Œå¦‚æœæˆ‘ä»¬é‡‡ç”¨ç›¸åŒçš„æ–¹æ³•ï¼Œå°±ä¼šå¯¼è‡´å¯¹ç§°çš„ä¸¤ä¸ª<code>(i,j)</code>ä¸<code>(j,i)</code>ç›¸å¯¹è·¯å¾„ç›¸åŒã€‚æ•…æ‰ç”¨å¦å¤–ä¸€ç§æ–¹æ³•</p><p>åœ¨è®¡ç®—å±‚æ•°kçš„æ—¶å€™ å¤šè®¡ç®—ä¸€å±‚ï¼Œå†ä»ä¸‹ä¸€å±‚çš„å…¥å£å¤„å›é€€dlä¸ªè·¯å¾„<br>æ­¤æ—¶ç»å¯¹è·¯å¾„é•¿åº¦ä¸º <code>T(k+1)-dl</code> ,æ³¨æ„dlè®¡ç®—æ—¶ï¼Œä»ç”¨å…¶çœŸæ­£æ‰€å¤„çš„å±‚æ•°k-1æ¥è®¡ç®—ã€‚å³ï¼š<code>dl=(x-(k-1))+(y-(k-1))+1</code></p><p>(è‡³äºä¸ºä½•æ­¤å¤„å¯ç›´æ¥-dlï¼Œå¯ä»¥çœ‹ä¸‹å›¾ï¼Œä¸‹ä¸€å±‚çš„å…¥å£ç‚¹ä¸ä¸Šä¸€å±‚çš„å…¥å£ç‚¹æ˜¯å³ä¸‹å’Œå·¦ä¸Šå…³ç³»ï¼ŒæŒ‰ç…§èºæ—‹é¡ºåºåˆ°<code>(i,j)</code>ç‚¹çš„è·¯å¾„é•¿åº¦æ˜¯ç›¸åŒçš„ã€‚)</p><p>æœ€åï¼Œ å°±æ˜¯æŠŠç›¸åº”çš„è·¯å¾„é•¿åº¦<code>len</code>è½¬åŒ–ä¸º<code>1-9</code>çš„æ•°å­—å³å¯ï¼Œ<code>index=(len-1)%9+1</code>ã€‚</p><details>    <summary>C++</summary><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">    int orchestraLayout(int num, int xPos, int yPos) &#123;</span><br><span class="line">        long long x=xPos,y=yPos,n=num;</span><br><span class="line">        if  (x &lt;= y) &#123;</span><br><span class="line">            long long  k= min(x, n-1-y);</span><br><span class="line">            return  (4*k*(n-k)+1+(x+y-k*2)-1)%9+1;</span><br><span class="line">        &#125;</span><br><span class="line">        long long  k =min(y, n-1-x)+1 ; </span><br><span class="line">        return   (4*k*(n-k)+ 1-(x+y-(k-1)*2 )-1)%9+1;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></details><p>Javaè¿™é‡Œå°±æ˜¯ç›´æ¥å®šæˆkæ˜¯ä»1å¼€å§‹è®¡æ•°çš„ã€‚xå’Œyæ˜¯ä»0å¼€å§‹è®¡æ•°çš„ã€‚</p><details>    <summary>Java</summary><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">    public int orchestraLayout(int num, int xPos, int yPos) &#123;</span><br><span class="line">        //æ ¹æ®xï¼Œyè®¡ç®—k</span><br><span class="line">        int k = Math.min(Math.min(xPos,yPos),Math.min(num-xPos-1,num-yPos-1)) + 1; //1,2,3</span><br><span class="line">        long total_distance = 0;</span><br><span class="line">        long distance = 0;</span><br><span class="line">        if(xPos&lt;=yPos)&#123;</span><br><span class="line">            distance = (xPos-(k-1))+(yPos-(k-1))+1; //1,2...</span><br><span class="line">            total_distance  = T(num,k-1)+distance;</span><br><span class="line">            return total_distance%9==0?9:(int)(total_distance%9);</span><br><span class="line">        &#125;</span><br><span class="line">        //å½“å‰å±‚çš„ä¸ªæ•°å‡å»0ï¼Œ1ï¼Œ2ç­‰</span><br><span class="line">        distance = T(num,k) - T(num,k-1) - (Math.abs(xPos-k)+Math.abs(yPos-(k-1))) ;</span><br><span class="line">        total_distance = T(num,k-1)+distance;</span><br><span class="line">        return total_distance%9==0?9:(int)(total_distance%9);</span><br><span class="line">    &#125;</span><br><span class="line">    public long T(long n,long k)&#123; //k=1,2,3</span><br><span class="line">        if(k&lt;=0)&#123;</span><br><span class="line">            return 0;</span><br><span class="line">        &#125;</span><br><span class="line">        else&#123;</span><br><span class="line">            return 4*k*(n-k);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æŸä¹å›¢çš„æ¼”å‡ºåœºåœ°å¯è§†ä½œ num * num çš„äºŒç»´çŸ©é˜µ gridï¼ˆå·¦ä¸Šè§’åæ ‡ä¸º [0,0])ï¼Œæ¯ä¸ªä½ç½®ç«™æœ‰ä¸€ä½æˆå‘˜ã€‚ä¹å›¢å…±æœ‰ 9 ç§ä¹å™¨ï¼Œä¹å™¨ç¼–å·ä¸º 1~9ï¼Œæ¯ä½æˆå‘˜æŒæœ‰ 1 ä¸ªä¹å™¨ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºä¿è¯å£°ä¹æ··åˆæ•ˆæœï¼Œæˆå‘˜ç«™ä½è§„åˆ™ä¸ºï¼šè‡ª grid å·¦ä¸Šè§’å¼€å§‹é¡ºæ—¶é’ˆèºæ—‹å½¢å‘å†…å¾ªç¯ä»¥ 1ï¼Œ2ï¼Œâ€¦ï¼Œ9 å¾ªç¯é‡å¤æ’åˆ—ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="2021å¹´4æœˆ" scheme="http://yoursite.com/categories/2021%E5%B9%B44%E6%9C%88/"/>
    
    
      <category term="LeetCode" scheme="http://yoursite.com/tags/LeetCode/"/>
    
  </entry>
  
  <entry>
    <title>LCP 28. é‡‡è´­æ–¹æ¡ˆ</title>
    <link href="http://yoursite.com/2021/04/05/LCP%2028.%20%E9%87%87%E8%B4%AD%E6%96%B9%E6%A1%88/"/>
    <id>http://yoursite.com/2021/04/05/LCP 28. é‡‡è´­æ–¹æ¡ˆ/</id>
    <published>2021-04-05T07:00:12.000Z</published>
    <updated>2021-04-10T16:52:53.992Z</updated>
    
    <content type="html"><![CDATA[<p>å°åŠ›å°† N ä¸ªé›¶ä»¶çš„æŠ¥ä»·å­˜äºæ•°ç»„ numsã€‚å°åŠ›é¢„ç®—ä¸º targetï¼Œå‡å®šå°åŠ›ä»…è´­ä¹°ä¸¤ä¸ªé›¶ä»¶ï¼Œè¦æ±‚è´­ä¹°é›¶ä»¶çš„èŠ±è´¹ä¸è¶…è¿‡é¢„ç®—ï¼Œè¯·é—®ä»–æœ‰å¤šå°‘ç§é‡‡è´­æ–¹æ¡ˆã€‚</p><p>æ³¨æ„ï¼šç­”æ¡ˆéœ€è¦ä»¥ 1e9 + 7 (1000000007) ä¸ºåº•å–æ¨¡ï¼Œå¦‚ï¼šè®¡ç®—åˆå§‹ç»“æœä¸ºï¼š1000000008ï¼Œè¯·è¿”å› 1</p><a id="more"></a><p>ç¤ºä¾‹ 1ï¼š</p><pre><code>è¾“å…¥ï¼šnums = [2,5,3,5], target = 6è¾“å‡ºï¼š1è§£é‡Šï¼šé¢„ç®—å†…ä»…èƒ½è´­ä¹° nums[0] ä¸ nums[2]ã€‚</code></pre><p>ç¤ºä¾‹ 2ï¼š</p><pre><code>è¾“å…¥ï¼šnums = [2,2,1,9], target = 10è¾“å‡ºï¼š4è§£é‡Šï¼šç¬¦åˆé¢„ç®—çš„é‡‡è´­æ–¹æ¡ˆå¦‚ä¸‹ï¼šnums[0] + nums[1] = 4nums[0] + nums[2] = 3nums[1] + nums[2] = 3nums[2] + nums[3] = 10</code></pre><p>æç¤ºï¼š</p><pre><code>2 &lt;= nums.length &lt;= 10^51 &lt;= nums[i], target &lt;= 10^5</code></pre><p>è¿™é“é¢˜æ˜¯leetcodeå‘¨èµ›çš„é¢˜ç›®ï¼Œä¸€å¼€å§‹ç”¨åŒå¾ªç¯æˆ–TreeMapå­˜å‚¨çš„åŠæ³•æ¥åšéƒ½æ˜¯è¶…æ—¶ã€‚<br>å…ˆï¼Œä¸ºäº†ä¾¿äºè®¡ç®—ï¼Œæˆ‘ä»¬å…ˆå¯¹ numsnums åšå‡åºæ’åºã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numsï¼š[<span class="number">2</span>ï¼Œ<span class="number">2</span>ï¼Œ<span class="number">1</span>ï¼Œ<span class="number">9</span>]     target: <span class="number">10</span></span><br></pre></td></tr></table></figure><p>é¦–å…ˆï¼Œè·å–ä¸¤ä¸ªæ•°ï¼Œæ±‚å’Œä¹‹åå†å’ŒæŸä¸ªæ•°åšæ¯”è¾ƒï¼Œè¿™ä¸ªé¢˜å…¶å®å’Œ <a href="https://leetcode-cn.com/problems/he-wei-sde-liang-ge-shu-zi-lcof/solution/shuang-zhi-zhen-he-wei-sde-liang-ge-shu-wy7r4/" target="_blank" rel="noopener">å‰‘æŒ‡ Offer 57. å’Œä¸ºsçš„ä¸¤ä¸ªæ•°å­—</a> æä¸ºç›¸ä¼¼ï¼Œä¸çŸ¥é“çš„å°ä¼™ä¼´å¯ä»¥å…ˆè¡Œçœ‹çœ‹è¿™é“é¢˜ç†Ÿæ‚‰ä¸€ä¸‹æ€è·¯ã€‚</p><p>é¦–å…ˆï¼Œä¸ºäº†ä¾¿äºè®¡ç®—ï¼Œæˆ‘ä»¬å…ˆå¯¹ <em>nums</em> åšå‡åºæ’åºã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numsï¼š[<span class="number">1</span>ï¼Œ<span class="number">2</span>ï¼Œ<span class="number">2</span>ï¼Œ<span class="number">9</span>]     target: <span class="number">10</span></span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œåˆ›å»ºä¸€ä¸ªæŒ‡é’ˆ <em>i</em> æŒ‡é’ˆæŒ‡å‘ <em>nums</em> é¦–ä½ï¼Œå†åˆ›å»ºä¸€ä¸ªæŒ‡é’ˆ <em>j</em> æŒ‡å‘ <em>nums</em> æœ«ä½ï¼Œç„¶åé€šè¿‡éå†ï¼Œæ‰¾åˆ°ç¬¦åˆ <em>nums[i] + nums[j] &lt;= target</em> æ¡ä»¶çš„ <em>i</em>ï¼Œ<em>j</em> åŒºé—´èŒƒå›´ã€‚</p><p>æ—¢ç„¶è¯¥èŒƒå›´çš„è¾¹ç•Œå€¼ä¹‹å’Œéƒ½æ»¡è¶³äº†æ¡ä»¶ï¼Œé‚£ä¹ˆä»£è¡¨è¯¥åŒºé—´å†…çš„æ‰€æœ‰æ•°å­—å’Œ <em>nums[i]</em> ç›¸åŠ éƒ½æ»¡è¶³æ¡ä»¶ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ <em>j - i</em> æ¥è·å–åˆ°å½“å‰æœ‰å¤šå°‘ä¸ªæ•°ï¼Œå¯ä»¥å’Œ <em>nums[i]</em> ç›¸åŠ åæ»¡è¶³æ¡ä»¶ï¼</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">iï¼š<span class="number">0</span>    jï¼š<span class="number">3</span>    nums[<span class="number">0</span>] + nums[<span class="number">3</span>] = <span class="number">10</span>ï¼Œæ»¡è¶³æ¡ä»¶ &lt;= <span class="number">10</span></span><br><span class="line"></span><br><span class="line">æ‰€ä»¥ï¼Œå½“ i = <span class="number">0</span> æ—¶ï¼Œå­˜åœ¨ j - i = <span class="number">3</span> ç§æ–¹æ¡ˆï¼Œå³ï¼š[<span class="number">0</span>,<span class="number">1</span>],[<span class="number">0</span>,<span class="number">2</span>],[<span class="number">0</span>,<span class="number">3</span>]</span><br><span class="line"></span><br><span class="line">------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">ç„¶å i æŒ‡é’ˆå³ç§»ä¸€ä½ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</span><br><span class="line"></span><br><span class="line">iï¼š<span class="number">1</span>    jï¼š<span class="number">3</span>    nums[<span class="number">1</span>] + nums[<span class="number">3</span>] = <span class="number">11</span>ï¼Œä¸æ»¡è¶³æ¡ä»¶ &lt;= <span class="number">10</span></span><br><span class="line"></span><br><span class="line">------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">æ‰€ä»¥ j æŒ‡é’ˆå·¦ç§»ä¸€ä½ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</span><br><span class="line"></span><br><span class="line">iï¼š<span class="number">1</span>    jï¼š<span class="number">2</span>    nums[<span class="number">1</span>] + nums[<span class="number">2</span>] = <span class="number">4</span>ï¼Œæ»¡è¶³æ¡ä»¶ &lt;= <span class="number">10</span></span><br><span class="line"></span><br><span class="line">------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">æ‰€ä»¥ï¼Œå½“ i = <span class="number">1</span> æ—¶ï¼Œå­˜åœ¨ j - i = <span class="number">1</span> ç§æ–¹æ¡ˆï¼Œå³ï¼š[<span class="number">1</span>,<span class="number">2</span>]</span><br><span class="line"></span><br><span class="line">æœ€åï¼Œæ»¡è¶³æ¡ä»¶çš„æ–¹æ¡ˆæ€»å…±å°±æ˜¯ [<span class="number">0</span>,<span class="number">1</span>],[<span class="number">0</span>,<span class="number">2</span>],[<span class="number">0</span>,<span class="number">3</span>],[<span class="number">1</span>,<span class="number">2</span>] è¿™ <span class="number">4</span> ç§æ–¹æ¡ˆï¼</span><br></pre></td></tr></table></figure><h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><details>    <summary>Javascript</summary><figure class="highlight javascript"><figcaption><span>[]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> purchasePlans = <span class="function"><span class="keyword">function</span>(<span class="params">nums, target</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> i = <span class="number">0</span>, j = nums.length - <span class="number">1</span>, ans = <span class="number">0</span>;</span><br><span class="line">    nums.sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a - b);</span><br><span class="line">    <span class="keyword">while</span>(i &lt; j)&#123;</span><br><span class="line">        <span class="keyword">if</span>(nums[i] + nums[j] &gt; target) j--;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            ans += j - i;</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans % <span class="number">1000000007</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></details><details>    <summary>Java</summary><figure class="highlight java"><figcaption><span>[]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">purchasePlans</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> mod = <span class="number">1_000_000_007</span>;</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        Arrays.sort(nums);</span><br><span class="line">        <span class="keyword">int</span> left = <span class="number">0</span>, right = nums.length - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (left &lt; right) &#123;</span><br><span class="line">            <span class="keyword">if</span> (nums[left] + nums[right] &gt; target) right--;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                ans += right - left;</span><br><span class="line">                left++;</span><br><span class="line">            &#125;</span><br><span class="line">            ans %= mod;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans % mod;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>C++</summary><figure class="highlight c++"><figcaption><span>[]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">purchasePlans</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums, <span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> <span class="keyword">long</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">long</span> <span class="keyword">long</span> mod = <span class="number">1000000007</span>;</span><br><span class="line">        sort(nums.begin(),nums.end());</span><br><span class="line">        <span class="keyword">int</span> i=<span class="number">0</span>,j = nums.size()<span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;j;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">while</span>(j&gt;i&amp;&amp;nums[i]+nums[j]&gt;target)</span><br><span class="line">            &#123;</span><br><span class="line">                j--;</span><br><span class="line">            &#125;</span><br><span class="line">            res += j-i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res%mod;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></details><details>    <summary>C</summary><figure class="highlight c"><figcaption><span>[]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">comp</span><span class="params">(<span class="keyword">const</span> <span class="keyword">void</span>* a,<span class="keyword">const</span> <span class="keyword">void</span>* b)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> *(<span class="keyword">int</span>*)a - *(<span class="keyword">int</span>*)b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">purchasePlans</span><span class="params">(<span class="keyword">int</span>* nums, <span class="keyword">int</span> numsSize, <span class="keyword">int</span> target)</span></span>&#123;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> sum = <span class="number">0</span>;</span><br><span class="line">    qsort(nums,numsSize,<span class="keyword">sizeof</span>(<span class="keyword">int</span>),comp);</span><br><span class="line">    <span class="keyword">unsigned</span> left = <span class="number">0</span>,right = numsSize - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(left &lt; right)&#123;</span><br><span class="line">        <span class="keyword">if</span>((nums[left] + nums[right]) &gt; target)&#123;</span><br><span class="line">            right--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            sum += right - left;</span><br><span class="line">            left++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sum%(<span class="number">1000000007</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>Golang</summary><figure class="highlight golang"><figcaption><span>[]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">purchasePlans</span><span class="params">(nums []<span class="keyword">int</span>, target <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">sort.Ints(nums)</span><br><span class="line">j := <span class="built_in">len</span>(nums) - <span class="number">1</span></span><br><span class="line">ans := <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(nums); i++ &#123;</span><br><span class="line"><span class="keyword">for</span> ; j &gt; i; j-- &#123;</span><br><span class="line"><span class="keyword">if</span> nums[i]+nums[j] &lt;= target &#123;</span><br><span class="line"><span class="keyword">break</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> j &gt; i &#123;</span><br><span class="line">ans = ans + (j - i)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ans % <span class="number">1000000007</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>Python3</summary><figure class="highlight plain"><figcaption><span>[]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">class Solution:</span><br><span class="line">    def purchasePlans(self, nums: List[int], target: int) -&gt; int:</span><br><span class="line">        nums.sort()</span><br><span class="line">        ans = 0</span><br><span class="line">        i = 0</span><br><span class="line">        j = len(nums)-1</span><br><span class="line">        while i &lt; j:</span><br><span class="line">            if nums[i] + nums[j] &gt; target:</span><br><span class="line">                j -= 1</span><br><span class="line">            else:</span><br><span class="line">                ans += (j-i)</span><br><span class="line">                i += 1</span><br><span class="line">        if ans&lt;=1000000007:</span><br><span class="line">            return ans</span><br><span class="line">        else:</span><br><span class="line">            return ans%1000000007</span><br></pre></td></tr></table></figure></details><hr>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å°åŠ›å°† N ä¸ªé›¶ä»¶çš„æŠ¥ä»·å­˜äºæ•°ç»„ numsã€‚å°åŠ›é¢„ç®—ä¸º targetï¼Œå‡å®šå°åŠ›ä»…è´­ä¹°ä¸¤ä¸ªé›¶ä»¶ï¼Œè¦æ±‚è´­ä¹°é›¶ä»¶çš„èŠ±è´¹ä¸è¶…è¿‡é¢„ç®—ï¼Œè¯·é—®ä»–æœ‰å¤šå°‘ç§é‡‡è´­æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;p&gt;æ³¨æ„ï¼šç­”æ¡ˆéœ€è¦ä»¥ 1e9 + 7 (1000000007) ä¸ºåº•å–æ¨¡ï¼Œå¦‚ï¼šè®¡ç®—åˆå§‹ç»“æœä¸ºï¼š1000000008ï¼Œè¯·è¿”å› 1&lt;/p&gt;
    
    </summary>
    
      <category term="2021å¹´4æœˆ" scheme="http://yoursite.com/categories/2021%E5%B9%B44%E6%9C%88/"/>
    
    
      <category term="LeetCode" scheme="http://yoursite.com/tags/LeetCode/"/>
    
      <category term="Linked List" scheme="http://yoursite.com/tags/Linked-List/"/>
    
      <category term="Simulation" scheme="http://yoursite.com/tags/Simulation/"/>
    
  </entry>
  
  <entry>
    <title>294 Â· ç®€åŒ–é“¾è¡¨</title>
    <link href="http://yoursite.com/2021/03/31/294%20%C2%B7%20%E7%AE%80%E5%8C%96%E9%93%BE%E8%A1%A8/"/>
    <id>http://yoursite.com/2021/03/31/294 Â· ç®€åŒ–é“¾è¡¨/</id>
    <published>2021-03-31T13:31:12.000Z</published>
    <updated>2021-04-01T00:00:20.757Z</updated>
    
    <content type="html"><![CDATA[<p>ç»™å‡ºä¸€ä¸ªå­—ç¬¦é“¾è¡¨ï¼Œå¯¹å…¶è¿›è¡Œç®€åŒ–ã€‚<br>ç®€åŒ–çš„è¿‡ç¨‹ä¸ºï¼Œä¿ç•™é“¾è¡¨çš„å¤´å°¾èŠ‚ç‚¹ï¼Œç”¨æ•°å­—ä»£æ›¿æ‰ä¸­é—´çš„éƒ¨åˆ†ã€‚æ•°å­—ä¹Ÿè¦ç”¨å­—ç¬¦é“¾è¡¨è¡¨ç¤ºã€‚</p><a id="more"></a><p>è¾“å…¥çš„å­—ç¬¦é“¾è¡¨ç”¨ä¸€ä¸ªæ•´å‹é“¾è¡¨è¡¨ç¤ºï¼Œé“¾è¡¨çš„æ¯ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½æ˜¯å…¶å¯¹åº”çš„ASCIIç ã€‚<br>è¾“å…¥çš„å­—ç¬¦é“¾è¡¨çš„èŠ‚ç‚¹æ•°ä¸º nï¼Œ3â‰¤nâ‰¤10^4</p><p>è¯´æ˜</p><pre><code>åŸé“¾è¡¨æ˜¯ &apos;h&apos;-&gt;&apos;e&apos;-&gt;&apos;l&apos;-&gt;&apos;l&apos;-&gt;&apos;o&apos;-&gt;nullã€‚ç®€åŒ–åå˜ä¸º &apos;h&apos;-&gt;&apos;3&apos;-&gt;&apos;o&apos;-&gt;nullã€‚ç¬¬äºŒç»„æ ·ä¾‹ä¸­ï¼šåŸé“¾è¡¨æ˜¯ &apos;a&apos;-&gt;&apos;b&apos;-&gt;...-&gt;&apos;z&apos;-&gt;nullã€‚ç®€åŒ–åå˜ä¸º &apos;a&apos;-&gt;&apos;2&apos;-&gt;&apos;4&apos;-&gt;&apos;z&apos;-&gt;nullã€‚</code></pre><p>æ ·ä¾‹</p><pre><code>è¾“å…¥1ï¼š    104-&gt;101-&gt;108-&gt;108-&gt;111-&gt;nullè¾“å‡º1ï¼š    104-&gt;51-&gt;111-&gt;nullè¾“å…¥2ï¼š    97-&gt;98-&gt;...-&gt;122-&gt;nullè¾“å‡º2ï¼š    97-&gt;50-&gt;52-&gt;122-&gt;null</code></pre><details>    <summary>Java</summary><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Definition for ListNode</span><br><span class="line"> * public class ListNode &#123;</span><br><span class="line"> *     int val;</span><br><span class="line"> *     ListNode next;</span><br><span class="line"> *     ListNode(int x) &#123;</span><br><span class="line"> *         val = x;</span><br><span class="line"> *         next = null;</span><br><span class="line"> *     &#125;</span><br><span class="line"> * &#125;</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">public class Solution &#123;</span><br><span class="line">    /**</span><br><span class="line">     * @param head: the linked list to be simplify.</span><br><span class="line">     * @return: return the linked list after simplifiction.</span><br><span class="line">     */</span><br><span class="line">    public ListNode simplify(ListNode head) &#123;</span><br><span class="line">        // write your code here</span><br><span class="line">        ListNode cur=head.next;</span><br><span class="line">        if(head == null || cur == null || cur.next == null)&#123;</span><br><span class="line">          return head;</span><br><span class="line">        &#125;</span><br><span class="line">        int cnt=0;</span><br><span class="line">        while(cur.next!=null)&#123;</span><br><span class="line">          cur=cur.next;</span><br><span class="line">          cnt++;</span><br><span class="line">        &#125;</span><br><span class="line">        ListNode pre=head;</span><br><span class="line">        if(cnt!=0)&#123;</span><br><span class="line">            ListNode p = new ListNode(Integer.valueOf(&apos;0&apos;)+cnt%10);</span><br><span class="line">            cnt/=10;</span><br><span class="line">            p.next = cur;</span><br><span class="line">            while(cnt != 0)&#123;</span><br><span class="line">              ListNode temp=p;</span><br><span class="line">              p = new ListNode(Integer.valueOf(&apos;0&apos;)+cnt%10);</span><br><span class="line">              p.next=temp;</span><br><span class="line">              cnt/=10;</span><br><span class="line">          &#125;</span><br><span class="line">          head.next=p;</span><br><span class="line">        &#125;</span><br><span class="line">        return head;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç»™å‡ºä¸€ä¸ªå­—ç¬¦é“¾è¡¨ï¼Œå¯¹å…¶è¿›è¡Œç®€åŒ–ã€‚&lt;br&gt;ç®€åŒ–çš„è¿‡ç¨‹ä¸ºï¼Œä¿ç•™é“¾è¡¨çš„å¤´å°¾èŠ‚ç‚¹ï¼Œç”¨æ•°å­—ä»£æ›¿æ‰ä¸­é—´çš„éƒ¨åˆ†ã€‚æ•°å­—ä¹Ÿè¦ç”¨å­—ç¬¦é“¾è¡¨è¡¨ç¤ºã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="2021å¹´3æœˆ" scheme="http://yoursite.com/categories/2021%E5%B9%B43%E6%9C%88/"/>
    
    
      <category term="LeetCode" scheme="http://yoursite.com/tags/LeetCode/"/>
    
      <category term="Linked List" scheme="http://yoursite.com/tags/Linked-List/"/>
    
      <category term="Simulation" scheme="http://yoursite.com/tags/Simulation/"/>
    
  </entry>
  
</feed>
