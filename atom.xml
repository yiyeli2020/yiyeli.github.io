<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Yiye Li</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2021-11-15T08:32:57.800Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>Yiye Li</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>904. æ°´æœæˆç¯®</title>
    <link href="http://yoursite.com/2021/11/15/904.%20%E6%B0%B4%E6%9E%9C%E6%88%90%E7%AF%AE/"/>
    <id>http://yoursite.com/2021/11/15/904. æ°´æœæˆç¯®/</id>
    <published>2021-11-15T03:12:12.000Z</published>
    <updated>2021-11-15T08:32:57.800Z</updated>
    
    <content type="html"><![CDATA[<p>èƒ½æ”¶é›†çš„æ°´æœæ ‘çš„æœ€å¤§æ€»é‡æ˜¯å¤šå°‘</p><a id="more"></a><p>[TOC]</p><p>åœ¨ä¸€æ’æ ‘ä¸­ï¼Œç¬¬ i æ£µæ ‘äº§ç”Ÿ tree[i] å‹çš„æ°´æœã€‚<br>ä½ å¯ä»¥ä»ä½ é€‰æ‹©çš„ä»»ä½•æ ‘å¼€å§‹ï¼Œç„¶åé‡å¤æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š</p><p>æŠŠè¿™æ£µæ ‘ä¸Šçš„æ°´æœæ”¾è¿›ä½ çš„ç¯®å­é‡Œã€‚å¦‚æœä½ åšä¸åˆ°ï¼Œå°±åœä¸‹æ¥ã€‚<br>ç§»åŠ¨åˆ°å½“å‰æ ‘å³ä¾§çš„ä¸‹ä¸€æ£µæ ‘ã€‚å¦‚æœå³è¾¹æ²¡æœ‰æ ‘ï¼Œå°±åœä¸‹æ¥ã€‚<br>è¯·æ³¨æ„ï¼Œåœ¨é€‰æ‹©ä¸€é¢—æ ‘åï¼Œä½ æ²¡æœ‰ä»»ä½•é€‰æ‹©ï¼šä½ å¿…é¡»æ‰§è¡Œæ­¥éª¤ 1ï¼Œç„¶åæ‰§è¡Œæ­¥éª¤ 2ï¼Œç„¶åè¿”å›æ­¥éª¤ 1ï¼Œç„¶åæ‰§è¡Œæ­¥éª¤ 2ï¼Œä¾æ­¤ç±»æ¨ï¼Œç›´è‡³åœæ­¢ã€‚</p><p>ä½ æœ‰ä¸¤ä¸ªç¯®å­ï¼Œæ¯ä¸ªç¯®å­å¯ä»¥æºå¸¦ä»»ä½•æ•°é‡çš„æ°´æœï¼Œä½†ä½ å¸Œæœ›æ¯ä¸ªç¯®å­åªæºå¸¦ä¸€ç§ç±»å‹çš„æ°´æœã€‚</p><p>ç”¨è¿™ä¸ªç¨‹åºä½ èƒ½æ”¶é›†çš„æ°´æœæ ‘çš„æœ€å¤§æ€»é‡æ˜¯å¤šå°‘ï¼Ÿ</p><p>ç¤ºä¾‹ 1ï¼š</p><pre><code>è¾“å…¥ï¼š[1,2,1]è¾“å‡ºï¼š3è§£é‡Šï¼šæˆ‘ä»¬å¯ä»¥æ”¶é›† [1,2,1]ã€‚</code></pre><p>ç¤ºä¾‹ 2ï¼š</p><pre><code>è¾“å…¥ï¼š[0,1,2,2]è¾“å‡ºï¼š3è§£é‡Šï¼šæˆ‘ä»¬å¯ä»¥æ”¶é›† [1,2,2]å¦‚æœæˆ‘ä»¬ä»ç¬¬ä¸€æ£µæ ‘å¼€å§‹ï¼Œæˆ‘ä»¬å°†åªèƒ½æ”¶é›†åˆ° [0, 1]ã€‚</code></pre><p>ç¤ºä¾‹ 3ï¼š</p><pre><code>è¾“å…¥ï¼š[1,2,3,2,2]è¾“å‡ºï¼š4è§£é‡Šï¼šæˆ‘ä»¬å¯ä»¥æ”¶é›† [2,3,2,2]å¦‚æœæˆ‘ä»¬ä»ç¬¬ä¸€æ£µæ ‘å¼€å§‹ï¼Œæˆ‘ä»¬å°†åªèƒ½æ”¶é›†åˆ° [1, 2]ã€‚</code></pre><p>ç¤ºä¾‹ 4ï¼š</p><pre><code>è¾“å…¥ï¼š[3,3,3,1,2,1,1,2,3,3,4]è¾“å‡ºï¼š5è§£é‡Šï¼šæˆ‘ä»¬å¯ä»¥æ”¶é›† [1,2,1,1,2]å¦‚æœæˆ‘ä»¬ä»ç¬¬ä¸€æ£µæ ‘æˆ–ç¬¬å…«æ£µæ ‘å¼€å§‹ï¼Œæˆ‘ä»¬å°†åªèƒ½æ”¶é›†åˆ° 4 æ£µæ°´æœæ ‘ã€‚</code></pre><p>æç¤ºï¼š</p><pre><code>1 &lt;= tree.length &lt;= 400000 &lt;= tree[i] &lt; tree.length</code></pre><h1 id="æ–¹æ³•-1ï¼šæŒ‰å—æ‰«æ"><a href="#æ–¹æ³•-1ï¼šæŒ‰å—æ‰«æ" class="headerlink" title="æ–¹æ³• 1ï¼šæŒ‰å—æ‰«æ"></a>æ–¹æ³• 1ï¼šæŒ‰å—æ‰«æ</h1><p><strong>æƒ³æ³•</strong></p><p>é—®é¢˜ç­‰ä»·äºï¼Œæ‰¾åˆ°æœ€é•¿çš„å­åºåˆ—ï¼Œæœ€å¤šå«æœ‰ä¸¤ç§â€œç±»å‹â€ï¼ˆ<code>tree[i]</code> çš„å€¼ï¼‰ã€‚</p><p>ä¸å•ç‹¬è€ƒè™‘æ¯ä¸ªå…ƒç´ ï¼Œè½¬è€Œè€ƒè™‘ç›¸åŒç±»å‹çš„ç›¸è¿å—ã€‚</p><p>æ¯”å¦‚è¯´ï¼Œ<code>tree = [1, 1, 1, 1, 2, 2, 3, 3, 3]</code> å¯ä»¥çœ‹æˆæ˜¯ <code>blocks = [(1, weight = 4), (2, weight = 2), (3, weight = 3)]</code>ã€‚</p><p>ç°åœ¨å¯ä»¥ä½¿ç”¨æš´åŠ›ï¼Œä»å·¦å¾€å³æ‰«æã€‚æˆ‘ä»¬ä¼šæœ‰ç±»ä¼¼äº <code>blocks = [1, _2_, 1, 2, 1, 2, _1_, 3, ...]</code> ä»¥åŠå¯¹åº”æƒé‡ã€‚</p><p>å¤„ç†çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼Œå½“æˆ‘ä»¬è€ƒè™‘ <code>3</code> çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸éœ€è¦ä»ç¬¬äºŒä¸ªå…ƒç´  <code>2</code> ï¼ˆä¹Ÿå°±æ˜¯æ ‡è®°æˆ <code>_2_</code> çš„æ•°å­—ï¼‰å¼€å§‹è€ƒè™‘ï¼Œæˆ‘ä»¬å¯ä»¥ä» <code>3</code> ä¹‹å‰çš„ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹è€ƒè™‘ï¼ˆ<code>_1_</code>ï¼‰ã€‚è¿™æ˜¯å› ä¸ºå¦‚æœæˆ‘ä»¬ä»å‰ä¸¤ä¸ªæˆ–æ›´å¤šå…ƒç´ å¼€å§‹ï¼Œè¿™ä¸ªåºåˆ—ä¸€å®šåŒ…å«ç±»å‹ <code>1</code> å’Œ <code>2</code>ï¼Œæ‰€ä»¥åºåˆ—ä¸€å®šä¼šåœ¨ <code>3</code> å¤„åœæ­¢ï¼Œè¿™å°±æ¯”å·²ç»è€ƒè™‘çš„åºåˆ—æ›´çŸ­äº†ã€‚</p><p>ä»æ¯ä¸ªå¼€å§‹ç‚¹ï¼ˆå—çš„æœ€å·¦ç«¯ç‚¹ï¼‰å¼€å§‹è€ƒè™‘ï¼Œè¿™ä¸ªç»“æœä¸€å®šæ˜¯å¯¹çš„ã€‚</p><p><strong>ç®—æ³•</strong></p><p>Python å’Œ Java çš„å®ç°æ–¹æ³•ï¼Œç¬¦å·å’Œç­–ç•¥æœ‰æ‰€ä¸åŒï¼Œå¯ä»¥æŸ¥çœ‹ä»£ç å†…çš„æ³¨é‡Šã€‚</p><details>    <summary>Java</summary><figure class="highlight java"><figcaption><span>[]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">totalFruit</span><span class="params">(<span class="keyword">int</span>[] tree)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// We'll make a list of indexes for which a block starts.</span></span><br><span class="line">        List&lt;Integer&gt; blockLefts = <span class="keyword">new</span> ArrayList();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Add the left boundary of each block</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; tree.length; ++i)</span><br><span class="line">            <span class="keyword">if</span> (i == <span class="number">0</span> || tree[i-<span class="number">1</span>] != tree[i])</span><br><span class="line">                blockLefts.add(i);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Add tree.length as a sentinel for convenience</span></span><br><span class="line">        blockLefts.add(tree.length);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>, i = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">//è·³è½¬æ ‡è¯†ï¼Œé‡Œå±‚å¾ªç¯ continueç›´æ¥è·³å‡ºå¤–å±‚å¾ªç¯ï¼Œç»§ç»­æ‰§è¡Œå¤–å±‚å¾ªç¯</span></span><br><span class="line">        search: <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            <span class="comment">// We'll start our scan at block[i].</span></span><br><span class="line">            <span class="comment">// types : the different values of tree[i] seen</span></span><br><span class="line">            <span class="comment">// weight : the total number of trees represented</span></span><br><span class="line">            <span class="comment">//          by blocks under consideration</span></span><br><span class="line">            Set&lt;Integer&gt; types = <span class="keyword">new</span> HashSet();</span><br><span class="line">            <span class="keyword">int</span> weight = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// For each block from the i-th and going forward,</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = i; j &lt; blockLefts.size() - <span class="number">1</span>; ++j) &#123;</span><br><span class="line">                <span class="comment">// Add each block to consideration</span></span><br><span class="line">                types.add(tree[blockLefts.get(j)]);</span><br><span class="line">                weight += blockLefts.get(j+<span class="number">1</span>) - blockLefts.get(j);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// If we have 3+ types, this is an illegal subarray</span></span><br><span class="line">                <span class="keyword">if</span> (types.size() &gt;= <span class="number">3</span>) &#123;</span><br><span class="line">                    i = j - <span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">continue</span> search;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// If it is a legal subarray, record the answer</span></span><br><span class="line">                ans = Math.max(ans, weight);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>Python</summary><figure class="highlight python"><figcaption><span>[]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">totalFruit</span><span class="params">(self, tree)</span>:</span></span><br><span class="line">        blocks = [(k, len(list(v)))</span><br><span class="line">                  <span class="keyword">for</span> k, v <span class="keyword">in</span> itertools.groupby(tree)]</span><br><span class="line"></span><br><span class="line">        ans = i = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> i &lt; len(blocks):</span><br><span class="line">            <span class="comment"># We'll start our scan at block[i].</span></span><br><span class="line">            <span class="comment"># types : the different values of tree[i] seen</span></span><br><span class="line">            <span class="comment"># weight : the total number of trees represented</span></span><br><span class="line">            <span class="comment">#          by blocks under consideration</span></span><br><span class="line">            types, weight = set(), <span class="number">0</span></span><br><span class="line"></span><br><span class="line">            <span class="comment"># For each block from i and going forward,</span></span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> xrange(i, len(blocks)):</span><br><span class="line">                <span class="comment"># Add each block to consideration</span></span><br><span class="line">                types.add(blocks[j][<span class="number">0</span>])</span><br><span class="line">                weight += blocks[j][<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">                <span class="comment"># If we have 3 types, this is not a legal subarray</span></span><br><span class="line">                <span class="keyword">if</span> len(types) &gt;= <span class="number">3</span>:</span><br><span class="line">                    i = j<span class="number">-1</span></span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">                ans = max(ans, weight)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># If we go to the last block, then stop</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure></details><p><strong>å¤æ‚åº¦åˆ†æ</strong></p><ul><li>æ—¶é—´å¤æ‚åº¦ï¼š<em>O(N)*ï¼Œå…¶ä¸­ *N</em> æ˜¯ <code>tree</code> çš„é•¿åº¦ã€‚</li><li>ç©ºé—´å¤æ‚åº¦ï¼š<em>O(N)</em>ã€‚</li></ul><h1 id="æ–¹æ³•-2ï¼šæ»‘åŠ¨çª—å£"><a href="#æ–¹æ³•-2ï¼šæ»‘åŠ¨çª—å£" class="headerlink" title="æ–¹æ³• 2ï¼šæ»‘åŠ¨çª—å£"></a>æ–¹æ³• 2ï¼šæ»‘åŠ¨çª—å£</h1><p><strong>æƒ³æ³•</strong></p><p>åœ¨<em>æ–¹æ³• 1</em>ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›æ‰¾åˆ°æœ€é•¿çš„åŒ…å«ä¸¤ç§ä¸åŒâ€œç±»å‹â€çš„å­åºåˆ—ï¼Œæˆ‘ä»¬ç§°è¿™æ ·çš„å­åºåˆ—ä¸º<em>åˆæ³•çš„</em>ã€‚</p><p>å‡è®¾æˆ‘ä»¬è€ƒè™‘æ‰€æœ‰ä»¥ä¸‹æ ‡ <code>j</code> ä¸ºç»“å°¾çš„åˆæ³•å­åºåˆ—ï¼Œé‚£ä¹ˆä¸€å®šæœ‰ä¸€ä¸ªæœ€å°çš„å¼€å§‹ä¸‹æ ‡ <code>i</code>ï¼šç§°ä¹‹ä¸º <code>opt(j) = i</code>ã€‚</p><p>æˆ‘ä»¬ä¼šå‘ç°è¿™ä¸ª <code>opt(j)</code> æ˜¯ä¸€ä¸ªå•è°ƒé€’å¢çš„å‡½æ•°ï¼Œè¿™æ˜¯å› ä¸ºæ‰€æœ‰åˆæ³•å­åºåˆ—çš„å­åºåˆ—ä¸€å®šä¹Ÿæ˜¯åˆæ³•çš„ã€‚</p><p><strong>ç®—æ³•</strong></p><p>æ¨¡æ‹Ÿä¸€ä¸ªæ»‘åŠ¨çª—å£ï¼Œç»´æŠ¤å˜é‡ <code>i</code> æ˜¯æœ€å°çš„ä¸‹æ ‡æ»¡è¶³ <code>[i, j]</code> æ˜¯åˆæ³•çš„å­åºåˆ—ã€‚</p><p>ç»´æŠ¤ <code>count</code> æ˜¯åºåˆ—ä¸­å„ç§ç±»å‹çš„ä¸ªæ•°ï¼Œè¿™ä½¿å¾—æˆ‘ä»¬å¯ä»¥å¾ˆå¿«çŸ¥é“å­åºåˆ—ä¸­æ˜¯å¦å«æœ‰ 3 ä¸­ç±»å‹ã€‚</p><details>    <summary>Java</summary><figure class="highlight java"><figcaption><span>[]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">totalFruit</span><span class="params">(<span class="keyword">int</span>[] tree)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>, i = <span class="number">0</span>;</span><br><span class="line">        Counter count = <span class="keyword">new</span> Counter();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; tree.length; ++j) &#123;</span><br><span class="line">            count.add(tree[j], <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">while</span> (count.size() &gt;= <span class="number">3</span>) &#123;</span><br><span class="line">                count.add(tree[i], -<span class="number">1</span>);</span><br><span class="line">                <span class="keyword">if</span> (count.get(tree[i]) == <span class="number">0</span>)</span><br><span class="line">                    count.remove(tree[i]);</span><br><span class="line">                i++;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            ans = Math.max(ans, j - i + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Counter</span> <span class="keyword">extends</span> <span class="title">HashMap</span>&lt;<span class="title">Integer</span>, <span class="title">Integer</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">get</span><span class="params">(<span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> containsKey(k) ? <span class="keyword">super</span>.get(k) : <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> k, <span class="keyword">int</span> v)</span> </span>&#123;</span><br><span class="line">        put(k, get(k) + v);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>æˆ‘çš„æ»‘åŠ¨çª—å£å†™æ³•Java</summary><figure class="highlight java"><figcaption><span>[]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">totalFruit</span><span class="params">(<span class="keyword">int</span>[] fruits)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//æ‰¾æœ€å¤šåªå«ä¸¤ç§å…ƒç´ çš„æœ€é•¿è¿ç»­å­æ•°ç»„é•¿åº¦</span></span><br><span class="line">        Map&lt;Integer, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">int</span> left = <span class="number">0</span>, right = <span class="number">0</span>, maxlen = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; fruits.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (map.size() &lt;= <span class="number">2</span>) &#123;</span><br><span class="line">                map.put(fruits[i], map.getOrDefault(fruits[i], <span class="number">0</span>) + <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">while</span> (map.size() &gt; <span class="number">2</span>) &#123;</span><br><span class="line">                map.put(fruits[left], map.getOrDefault(fruits[left], <span class="number">0</span>) - <span class="number">1</span>);</span><br><span class="line">                <span class="keyword">if</span> (map.getOrDefault(fruits[left], <span class="number">0</span>) &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">                    map.remove(fruits[left]);</span><br><span class="line">                &#125;</span><br><span class="line">                left++;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            maxlen = Math.max(maxlen, i - left + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> maxlen;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>Python</summary><figure class="highlight python"><figcaption><span>[]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">totalFruit</span><span class="params">(self, tree)</span>:</span></span><br><span class="line">        ans = i = <span class="number">0</span></span><br><span class="line">        count = collections.Counter()</span><br><span class="line">        <span class="keyword">for</span> j, x <span class="keyword">in</span> enumerate(tree):</span><br><span class="line">            count[x] += <span class="number">1</span></span><br><span class="line">            <span class="keyword">while</span> len(count) &gt;= <span class="number">3</span>:</span><br><span class="line">                count[tree[i]] -= <span class="number">1</span></span><br><span class="line">                <span class="keyword">if</span> count[tree[i]] == <span class="number">0</span>:</span><br><span class="line">                    <span class="keyword">del</span> count[tree[i]]</span><br><span class="line">                i += <span class="number">1</span></span><br><span class="line">            ans = max(ans, j - i + <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure></details><p><strong>å¤æ‚åº¦åˆ†æ</strong></p><ul><li>æ—¶é—´å¤æ‚åº¦ï¼š<em>O(N)*ï¼Œå…¶ä¸­ *N</em> æ˜¯ <code>tree</code> çš„é•¿åº¦ã€‚</li><li>ç©ºé—´å¤æ‚åº¦ï¼š<em>O(N)</em>ã€‚</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;èƒ½æ”¶é›†çš„æ°´æœæ ‘çš„æœ€å¤§æ€»é‡æ˜¯å¤šå°‘&lt;/p&gt;
    
    </summary>
    
      <category term="2021å¹´11æœˆ" scheme="http://yoursite.com/categories/2021%E5%B9%B411%E6%9C%88/"/>
    
    
      <category term="Hash Table" scheme="http://yoursite.com/tags/Hash-Table/"/>
    
      <category term="Leetcode" scheme="http://yoursite.com/tags/Leetcode/"/>
    
      <category term="Sliding Window" scheme="http://yoursite.com/tags/Sliding-Window/"/>
    
  </entry>
  
  <entry>
    <title>795. åŒºé—´å­æ•°ç»„ä¸ªæ•°</title>
    <link href="http://yoursite.com/2021/11/12/795.%20%E5%8C%BA%E9%97%B4%E5%AD%90%E6%95%B0%E7%BB%84%E4%B8%AA%E6%95%B0/"/>
    <id>http://yoursite.com/2021/11/12/795. åŒºé—´å­æ•°ç»„ä¸ªæ•°/</id>
    <published>2021-11-12T12:12:12.000Z</published>
    <updated>2021-11-14T01:16:35.388Z</updated>
    
    <content type="html"><![CDATA[<p>ç»™å®šä¸€ä¸ªå…ƒç´ éƒ½æ˜¯æ­£æ•´æ•°çš„æ•°ç»„Aï¼Œæ­£æ•´æ•° Lä»¥åŠR(L&lt;= R)ã€‚</p><a id="more"></a><p>[TOC]</p><p>æ±‚è¿ç»­ã€éç©ºä¸”å…¶ä¸­æœ€å¤§å…ƒç´ æ»¡è¶³å¤§äºç­‰äºL å°äºç­‰äºRçš„å­æ•°ç»„ä¸ªæ•°ã€‚</p><p>ä¾‹å¦‚ :</p><pre><code>è¾“å…¥: A = [2, 1, 4, 3]L = 2R = 3è¾“å‡º: 3è§£é‡Š: æ»¡è¶³æ¡ä»¶çš„å­æ•°ç»„: [2], [2, 1], [3].æ³¨æ„:L, R  å’Œ A[i] éƒ½æ˜¯æ•´æ•°ï¼ŒèŒƒå›´åœ¨ [0, 10^9]ã€‚æ•°ç»„ A çš„é•¿åº¦èŒƒå›´åœ¨[1, 50000]ã€‚</code></pre><h1 id="æ–¹æ³•ä¸€ï¼šè®¡æ•°"><a href="#æ–¹æ³•ä¸€ï¼šè®¡æ•°" class="headerlink" title="æ–¹æ³•ä¸€ï¼šè®¡æ•°"></a>æ–¹æ³•ä¸€ï¼šè®¡æ•°</h1><p><strong>æ€æƒ³</strong></p><p>æ ¹æ®ä»¥ä¸‹æ­¥éª¤æ¨å¯¼å‡ºè§£å†³æ–¹æ¡ˆï¼š</p><p>å…¶å®æˆ‘ä»¬åªå…³å¿ƒæ•°ç»„ä¸­çš„å…ƒç´ æ˜¯å¦å°äº <code>L</code>ï¼Œå¤§äº <code>R</code>ï¼Œæˆ–è€…ä½äº <code>[L, R]</code> ä¹‹é—´ã€‚å‡è®¾ä¸€ä¸ªå…ƒç´ å°äº <code>L</code> æ ‡è®°ä¸º <code>0</code>ï¼Œä½äº <code>[L, R]</code> ä¹‹é—´æ ‡è®°ä¸º <code>1</code>ï¼Œå¤§äº <code>R</code> æ ‡è®°ä¸º <code>2</code>ã€‚</p><p>æˆ‘ä»¬å¸Œæœ›æ‰¾å‡ºä¸åŒ…å« <code>2</code> ä¸”è‡³å°‘åŒ…å«ä¸€ä¸ª <code>1</code> çš„å­æ•°ç»„æ•°é‡ã€‚å› æ­¤å¯ä»¥çœ‹ä½œæ˜¯æ‰€æœ‰çš„ <code>2</code> å°†æ•°ç»„æ‹†åˆ†ä¸ºä»…åŒ…å« <code>0</code> æˆ– <code>1</code> çš„å­æ•°ç»„ã€‚ä¾‹å¦‚åœ¨æ•°ç»„ <code>[0, 0, 1, 2, 2, 1, 0, 2, 0]</code>ï¼Œ<code>2</code> å°†æ•°ç»„æ‹†åˆ†ä¸º <code>[0, 0, 1]</code>ã€<code>[1, 0]</code> å’Œ <code>[0]</code> ä¸‰ä¸ªå­æ•°ç»„ã€‚ </p><p>æ¥ä¸‹æ¥ï¼Œéœ€è¦è®¡ç®—æ¯ä¸ªåªåŒ…å« <code>0</code> æˆ– <code>1</code> çš„æ•°ç»„ä¸­ï¼Œè‡³å°‘åŒ…å«ä¸€ä¸ª <code>1</code> çš„å­æ•°ç»„æ•°é‡ã€‚é‚£ä¹ˆé—®é¢˜å¯ä»¥è½¬æ¢ä¸ºå…ˆæ‰¾å‡ºæ‰€æœ‰çš„å­æ•°ç»„ï¼Œå†ä»ä¸­å‡å»åªåŒ…å« <code>0</code> çš„å­æ•°ç»„ã€‚</p><p>ä¾‹å¦‚ï¼Œ<code>[0, 0, 1]</code> æœ‰ 6 ä¸ªå­æ•°ç»„ï¼Œå…¶ä¸­ 3 ä¸ªå­æ•°ç»„åªåŒ…å« <code>0</code>ï¼Œ3 ä¸ªå­æ•°ç»„è‡³å°‘åŒ…å«ä¸€ä¸ª <code>1</code>ï¼›<code>[1, 0]</code> æœ‰ 3 ä¸ªå­æ•°ç»„ï¼Œå…¶ä¸­ 1 ä¸ªå­æ•°ç»„åªåŒ…å« <code>0</code>ï¼Œ2 ä¸ªå­æ•°ç»„è‡³å°‘åŒ…å«ä¸€ä¸ª <code>1</code>ï¼›<code>[0]</code> åªæœ‰ 1 ä¸ªå­æ•°ç»„ï¼Œä¸”è¿™ä¸ªå­æ•°ç»„åªåŒ…å« <code>0</code>ã€‚å› æ­¤æ•°ç»„ <code>A = [0, 0, 1, 2, 2, 1, 0, 2, 0]</code> ä¸­ä¸åŒ…å« <code>2</code>ï¼Œä¸”è‡³å°‘åŒ…å«ä¸€ä¸ª <code>1</code> çš„å­æ•°ç»„çš„æ•°é‡æ˜¯ <code>3 + 2 + 0 = 5</code>ã€‚</p><p><strong>ç®—æ³•</strong></p><p>å‡è®¾ <code>count(B)</code> ç”¨äºè®¡ç®—æ‰€æœ‰å…ƒç´ éƒ½å°äºç­‰äº <code>B</code> çš„å­æ•°ç»„æ•°é‡ã€‚æ ¹æ®ä¸Šé¢åˆ†æï¼Œæœ¬é¢˜ç­”æ¡ˆä¸º <code>count(R) - count(L-1)</code>ã€‚</p><p>é‚£ä¹ˆå¦‚ä½•è®¡ç®— <code>count(B)</code>ï¼Ÿä½¿ç”¨ <code>cur</code> è®°å½•åœ¨ <code>B</code> çš„å·¦è¾¹ï¼Œå°äºç­‰äº <code>B</code> çš„è¿ç»­å…ƒç´ æ•°é‡ã€‚å½“æ‰¾åˆ°ä¸€ä¸ªè¿™æ ·çš„å…ƒç´ æ—¶ï¼Œåœ¨æ­¤ä½ç½®ä¸Šç»“æŸçš„æœ‰æ•ˆå­æ•°ç»„çš„æ•°é‡ä¸º <code>cur + 1</code>ã€‚å½“é‡åˆ°ä¸€ä¸ªå…ƒç´ å¤§äº <code>B</code> æ—¶ï¼Œåˆ™åœ¨æ­¤ä½ç½®ç»“æŸçš„æœ‰æ•ˆå­æ•°ç»„çš„æ•°é‡ä¸º 0ã€‚</p><details>    <summary>Java</summary><figure class="highlight java"><figcaption><span>[solution1-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">numSubarrayBoundedMax</span><span class="params">(<span class="keyword">int</span>[] A, <span class="keyword">int</span> L, <span class="keyword">int</span> R)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> count(A, R) - count(A, L-<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">count</span><span class="params">(<span class="keyword">int</span>[] A, <span class="keyword">int</span> bound)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>, cur = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> x: A) &#123;</span><br><span class="line">            cur = x &lt;= bound ? cur + <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">            ans += cur;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>Python</summary><figure class="highlight python"><figcaption><span>[solution1-Python]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">numSubarrayBoundedMax</span><span class="params">(self, A, L, R)</span>:</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">count</span><span class="params">(bound)</span>:</span></span><br><span class="line">            ans = cur = <span class="number">0</span></span><br><span class="line">            <span class="keyword">for</span> x <span class="keyword">in</span> A :</span><br><span class="line">                cur = cur + <span class="number">1</span> <span class="keyword">if</span> x &lt;= bound <span class="keyword">else</span> <span class="number">0</span></span><br><span class="line">                ans += cur</span><br><span class="line">            <span class="keyword">return</span> ans</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> count(R) - count(L - <span class="number">1</span>)</span><br></pre></td></tr></table></figure></details><p><strong>å¤æ‚åº¦åˆ†æ</strong></p><ul><li><p>æ—¶é—´å¤æ‚åº¦ï¼š<em>O(N)</em>ï¼Œå…¶ä¸­ <code>N</code> æ˜¯ <code>A</code> çš„é•¿åº¦ã€‚</p></li><li><p>ç©ºé—´å¤æ‚åº¦ï¼š<em>O(1)</em>ã€‚</p></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç»™å®šä¸€ä¸ªå…ƒç´ éƒ½æ˜¯æ­£æ•´æ•°çš„æ•°ç»„Aï¼Œæ­£æ•´æ•° Lä»¥åŠR(L&amp;lt;= R)ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="2021å¹´11æœˆ" scheme="http://yoursite.com/categories/2021%E5%B9%B411%E6%9C%88/"/>
    
    
      <category term="Leetcode" scheme="http://yoursite.com/tags/Leetcode/"/>
    
      <category term="Dynamic Programming" scheme="http://yoursite.com/tags/Dynamic-Programming/"/>
    
  </entry>
  
  <entry>
    <title>467. ç¯ç»•å­—ç¬¦ä¸²ä¸­å”¯ä¸€çš„å­å­—ç¬¦ä¸²</title>
    <link href="http://yoursite.com/2021/11/10/467.%20%E7%8E%AF%E7%BB%95%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%AD%E5%94%AF%E4%B8%80%E7%9A%84%E5%AD%90%E5%AD%97%E7%AC%A6%E4%B8%B2/"/>
    <id>http://yoursite.com/2021/11/10/467. ç¯ç»•å­—ç¬¦ä¸²ä¸­å”¯ä¸€çš„å­å­—ç¬¦ä¸²/</id>
    <published>2021-11-10T08:12:12.000Z</published>
    <updated>2021-11-12T10:05:45.222Z</updated>
    
    <content type="html"><![CDATA[<p>ä½ éœ€è¦è¾“å‡ºå­—ç¬¦ä¸²s ä¸­ p çš„ä¸åŒçš„éç©ºå­ä¸²çš„æ•°ç›®ã€‚</p><a id="more"></a><p>[TOC]</p><p>æŠŠå­—ç¬¦ä¸² s çœ‹ä½œæ˜¯â€œabcdefghijklmnopqrstuvwxyzâ€çš„æ— é™ç¯ç»•å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥sçœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ï¼šâ€â€¦zabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdâ€¦.â€.</p><p>ç°åœ¨æˆ‘ä»¬æœ‰äº†å¦ä¸€ä¸ªå­—ç¬¦ä¸² p ã€‚ä½ éœ€è¦çš„æ˜¯æ‰¾å‡º s ä¸­æœ‰å¤šå°‘ä¸ªå”¯ä¸€çš„ p çš„éç©ºå­ä¸²ï¼Œå°¤å…¶æ˜¯å½“ä½ çš„è¾“å…¥æ˜¯å­—ç¬¦ä¸² p ï¼Œä½ éœ€è¦è¾“å‡ºå­—ç¬¦ä¸²s ä¸­ p çš„ä¸åŒçš„éç©ºå­ä¸²çš„æ•°ç›®ã€‚</p><p>æ³¨æ„: pä»…ç”±å°å†™çš„è‹±æ–‡å­—æ¯ç»„æˆï¼Œp çš„å¤§å°å¯èƒ½è¶…è¿‡ 10000ã€‚</p><p>ç¤ºä¾‹ 1:</p><pre><code>è¾“å…¥: &quot;a&quot;è¾“å‡º: 1è§£é‡Š: å­—ç¬¦ä¸² S ä¸­åªæœ‰ä¸€ä¸ª&quot;a&quot;å­å­—ç¬¦ã€‚</code></pre><p>ç¤ºä¾‹ 2:</p><pre><code>è¾“å…¥: &quot;cac&quot;è¾“å‡º: 2è§£é‡Š: å­—ç¬¦ä¸² S ä¸­çš„å­—ç¬¦ä¸²â€œcacâ€åªæœ‰ä¸¤ä¸ªå­ä¸²â€œaâ€ã€â€œcâ€ã€‚.</code></pre><p>ç¤ºä¾‹ 3:</p><pre><code>è¾“å…¥: &quot;zab&quot;è¾“å‡º: 6è§£é‡Š: åœ¨å­—ç¬¦ä¸² S ä¸­æœ‰å…­ä¸ªå­ä¸²â€œzâ€ã€â€œaâ€ã€â€œbâ€ã€â€œzaâ€ã€â€œabâ€ã€â€œzabâ€ã€‚.</code></pre><h1 id="æ–¹æ³•ä¸€ï¼šç»Ÿè®¡æ‰€æœ‰ä»¥æ¯ä¸ªå­—ç¬¦ç»“å°¾çš„æœ€é•¿è¿ç»­å­ä¸²çš„é•¿åº¦"><a href="#æ–¹æ³•ä¸€ï¼šç»Ÿè®¡æ‰€æœ‰ä»¥æ¯ä¸ªå­—ç¬¦ç»“å°¾çš„æœ€é•¿è¿ç»­å­ä¸²çš„é•¿åº¦" class="headerlink" title="æ–¹æ³•ä¸€ï¼šç»Ÿè®¡æ‰€æœ‰ä»¥æ¯ä¸ªå­—ç¬¦ç»“å°¾çš„æœ€é•¿è¿ç»­å­ä¸²çš„é•¿åº¦"></a>æ–¹æ³•ä¸€ï¼šç»Ÿè®¡æ‰€æœ‰ä»¥æ¯ä¸ªå­—ç¬¦ç»“å°¾çš„æœ€é•¿è¿ç»­å­ä¸²çš„é•¿åº¦</h1><p>é¢˜æ„ï¼Œå‡è®¾æœ‰ä¸€ä¸ª a-z æ— é™å¾ªç¯çš„å­—ç¬¦ä¸² sï¼Œè®¡ç®—å®ƒå’Œå­—ç¬¦ä¸² p ä¸­æœ‰å¤šå°‘ä¸ªç›¸ç­‰çš„éç©ºå­ä¸²ã€‚é¢˜ç›®ä¸­å”¯ä¸€çš„æ„æ€æ˜¯ï¼Œå‡è®¾ <code>p=aa</code>ï¼Œå­—ç¬¦ä¸² p ä¸­æœ‰ä¸¤ä¸ª <code>a</code>ï¼Œç›¸ç­‰çš„å­ä¸²è®°ä½œä¸€ä¸ªï¼Œå³ <code>a</code>ã€‚</p><p>å½“ <code>p=cac</code> æ—¶ï¼Œæœ‰ <code>a å’Œ c</code>ï¼Œå› ä¸º <code>acã€caã€cac</code> ä¸æ˜¯ s çš„å­ä¸²ã€‚å½“ <code>p=bcabc</code> æ—¶ï¼Œæœ‰ <code>aã€bã€abã€cã€bcã€abc</code>ã€‚</p><ul><li>è¿ç»­å­ä¸²<code>a</code> ä¸­ä»¥å­—ç¬¦<code>a</code> ç»“å°¾çš„è¿ç»­å­ä¸²æœ‰<code>a</code>ã€‚</li><li>è¿ç»­å­ä¸²<code>b</code> ä¸­ä»¥å­—ç¬¦<code>b</code> ç»“å°¾çš„è¿ç»­å­ä¸²æœ‰<code>b</code>ï¼›è€Œè¿ç»­å­ä¸²<code>ab</code> ä»¥å­—ç¬¦<code>b</code> ç»“å°¾çš„è¿ç»­å­ä¸²æœ‰<code>bã€ab</code>ã€‚</li><li>è¿ç»­å­ä¸²<code>c</code> ä¸­ä»¥å­—ç¬¦<code>c</code> ç»“å°¾çš„è¿ç»­å­ä¸²æœ‰<code>c</code>ï¼Œè¿ç»­å­ä¸²<code>bc</code> ä¸­ä»¥å­—ç¬¦<code>c</code> ç»“å°¾çš„è¿ç»­å­ä¸²æœ‰<code>cã€bc</code>ï¼›è¿ç»­å­ä¸²<code>abc</code> ä¸­ä»¥å­—ç¬¦<code>c</code> ç»“å°¾çš„è¿ç»­å­ä¸²æœ‰<code>cã€bcã€abc</code>ã€‚</li><li>ä¸éš¾å‘ç°ä»¥è¯¥å­—ç¬¦ç»“å°¾çš„è¿ç»­å­ä¸²çš„é•¿åº¦ï¼Œå°±ç­‰äºä»¥è¯¥å­—ç¬¦ç»“å°¾çš„ç›¸ç­‰å­ä¸²çš„ä¸ªæ•°ã€‚</li></ul><p>æ‰€ä»¥æˆ‘ä»¬åªéœ€æ±‚å‡ºpä¸­ä»¥æ¯ä¸ªå­—ç¬¦ç»“å°¾çš„æœ€é•¿è¿ç»­å­ä¸²çš„é•¿åº¦å³å¯ã€‚ç»Ÿè®¡æ‰€æœ‰ä»¥æ¯ä¸ªå­—ç¬¦ç»“å°¾çš„æœ€é•¿è¿ç»­å­ä¸²çš„é•¿åº¦ï¼Œå°±æ˜¯å”¯ä¸€ç›¸ç­‰å­ä¸²çš„ä¸ªæ•°ã€‚æ³¨æ„ï¼šå› ä¸º s æ˜¯ä¸€ä¸ªå¾ªç¯å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥ <code>za</code> ä¹Ÿæ˜¯è¿ç»­å­ä¸²ã€‚</p><details>    <summary>Java</summary><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">    public int findSubstringInWraproundString(String p) &#123;</span><br><span class="line">        // è®°å½• p ä¸­ä»¥æ¯ä¸ªå­—ç¬¦ç»“å°¾çš„æœ€é•¿è¿ç»­å­ä¸²çš„é•¿åº¦</span><br><span class="line">        int[] dp = new int[26];</span><br><span class="line">        char[] array = p.toCharArray();</span><br><span class="line">        // è®°å½•å½“å‰è¿ç»­å­ä¸²çš„é•¿åº¦</span><br><span class="line">        int count = 0;</span><br><span class="line">        // éå† p ä¸­çš„æ‰€æœ‰å­—ç¬¦</span><br><span class="line">        for (int i = 0; i &lt; array.length; i++) &#123;</span><br><span class="line">            // åˆ¤æ–­å­—ç¬¦æ˜¯å¦è¿ç»­</span><br><span class="line">            if (i &gt; 0 &amp;&amp; (array[i] - array[i - 1] - 1) % 26 == 0) &#123;</span><br><span class="line">                // è¿ç»­åˆ™è‡ªåŠ </span><br><span class="line">                count++;</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                // ä¸è¿ç»­åˆ™åˆ·æ–°</span><br><span class="line">                count = 1;</span><br><span class="line">            &#125;</span><br><span class="line">            // åªå­˜å‚¨æœ€é•¿çš„è¿ç»­é•¿åº¦</span><br><span class="line">            dp[array[i] - &apos;a&apos;] = Math.max(dp[array[i] - &apos;a&apos;], count);</span><br><span class="line">        &#125;</span><br><span class="line">        int result = 0;</span><br><span class="line">        // ç»Ÿè®¡æ‰€æœ‰ä»¥æ¯ä¸ªå­—ç¬¦ç»“å°¾çš„æœ€é•¿è¿ç»­å­ä¸²çš„é•¿åº¦ï¼Œå°±æ˜¯å”¯ä¸€ç›¸ç­‰å­ä¸²çš„ä¸ªæ•°</span><br><span class="line">        for (int i : dp) &#123;</span><br><span class="line">            result += i;</span><br><span class="line">        &#125;</span><br><span class="line">        return result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><p><strong>ä»£ç ä¼˜åŒ–</strong></p><p>ä¸Šé¢çš„ä»£ç ä¸­ï¼Œå¯¹äºæ¯ä¸€ä¸ªå­—ç¬¦éƒ½è¿›è¡Œäº†ä¸€æ¬¡åˆ¤æ–­ã€èµ‹å€¼ã€‚æˆ‘ä»¬å¯ä»¥å…ˆè®¡ç®—å‡ºå½“å‰æœ€é•¿çš„è¿ç»­å­ä¸²ï¼Œç„¶åå†è®¡ç®—å…¶ä¸­æ‰€æœ‰è¿ç»­å­ä¸²çš„é•¿åº¦ã€‚</p><details>    <summary>Java</summary><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">    public int findSubstringInWraproundString(String p) &#123;</span><br><span class="line">        // // è®°å½• p ä¸­ä»¥æ¯ä¸ªå­—ç¬¦ç»“å°¾çš„æœ€é•¿è¿ç»­å­ä¸²çš„é•¿åº¦</span><br><span class="line">        int[] dp = new int[26];</span><br><span class="line">        char[] array = p.toCharArray();</span><br><span class="line">        // è¿ç»­å­ä¸²çš„å¼€å§‹ä¸‹æ ‡</span><br><span class="line">        int start = 0;</span><br><span class="line">        while (start &lt; array.length) &#123;</span><br><span class="line">            // è¿ç»­å­ä¸²çš„ç»“æŸä¸‹æ ‡</span><br><span class="line">            int end = start + 1;</span><br><span class="line">            // ç»“æŸä¸‹æ ‡å‘åç§»åŠ¨ï¼Œå¯»æ‰¾å½“å‰æœ€é•¿çš„è¿ç»­å­ä¸²</span><br><span class="line">            while (end &lt; array.length &amp;&amp; (array[end] - array[end-1] - 1) % 26 == 0) &#123;</span><br><span class="line">                end++;</span><br><span class="line">            &#125;</span><br><span class="line">            // è®¡ç®—è¿ç»­å­ä¸²çš„é•¿åº¦</span><br><span class="line">            int length = end - start;</span><br><span class="line">            // éå†è¿ç»­å­ä¸²çš„æ‰€æœ‰å­—ç¬¦</span><br><span class="line">            for (int i = start; i &lt; end; i++) &#123;</span><br><span class="line">                // è®¡ç®—å½“å‰å­—ç¬¦åœ¨æ•°ç»„çš„ä¸‹æ ‡</span><br><span class="line">                int index = array[i] - &apos;a&apos;;</span><br><span class="line">                // è®¡ç®—å½“å‰è¿ç»­å­ä¸²çš„é•¿åº¦</span><br><span class="line">                int l = length - (i - start);</span><br><span class="line">                dp[index] = Math.max(dp[index], l);</span><br><span class="line">            &#125;</span><br><span class="line">            start = end;</span><br><span class="line">        &#125;</span><br><span class="line">        int result = 0;</span><br><span class="line">        for (int i : dp) &#123;</span><br><span class="line">            result += i;</span><br><span class="line">        &#125;</span><br><span class="line">        return result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><h1 id="æ‹“å±•"><a href="#æ‹“å±•" class="headerlink" title="æ‹“å±•"></a>æ‹“å±•</h1><ul><li><a href="https://leetcode-cn.com/problems/unique-substrings-in-wraparound-string/" target="_blank" rel="noopener">467. ç¯ç»•å­—ç¬¦ä¸²ä¸­å”¯ä¸€çš„å­å­—ç¬¦ä¸²</a>(ä¸­ç­‰)</li><li><a href="https://leetcode-cn.com/problems/number-of-subarrays-with-bounded-maximum/" target="_blank" rel="noopener">795. åŒºé—´å­æ•°ç»„ä¸ªæ•°</a>(ä¸­ç­‰)</li><li><a href="https://leetcode-cn.com/problems/fruit-into-baskets/" target="_blank" rel="noopener">904. æ°´æœæˆç¯®</a>(ä¸­ç­‰)</li><li><a href="https://leetcode-cn.com/problems/subarrays-with-k-different-integers/" target="_blank" rel="noopener">992. K ä¸ªä¸åŒæ•´æ•°çš„å­æ•°ç»„</a>ï¼ˆå›°éš¾ï¼‰</li><li><a href="https://leetcode-cn.com/problems/corporate-flight-bookings/" target="_blank" rel="noopener">1109. èˆªç­é¢„è®¢ç»Ÿè®¡</a>(ä¸­ç­‰)</li></ul><p>å‰å››é“é¢˜éƒ½æ˜¯æ»‘åŠ¨çª—å£çš„å­ç±»å‹ï¼Œæˆ‘ä»¬çŸ¥é“æ»‘åŠ¨çª—å£é€‚åˆåœ¨é¢˜ç›®è¦æ±‚è¿ç»­çš„æƒ…å†µä¸‹ä½¿ç”¨ï¼Œ è€Œ<a href="https://oi-wiki.org/basic/prefix-sum/" target="_blank" rel="noopener">å‰ç¼€å’Œ</a>ä¹Ÿæ˜¯å¦‚æ­¤ã€‚äºŒè€…åœ¨è¿ç»­é—®é¢˜ä¸­ï¼Œå¯¹äº<strong>ä¼˜åŒ–æ—¶é—´å¤æ‚åº¦</strong>æœ‰ç€å¾ˆé‡è¦çš„æ„ä¹‰ã€‚ å› æ­¤å¦‚æœä¸€é“é¢˜ä½ å¯ä»¥ç”¨æš´åŠ›è§£å†³å‡ºæ¥ï¼Œè€Œä¸”é¢˜ç›®æ°å¥½æœ‰è¿ç»­çš„é™åˆ¶ï¼Œ é‚£ä¹ˆæ»‘åŠ¨çª—å£å’Œå‰ç¼€å’Œç­‰æŠ€å·§å°±åº”è¯¥è¢«æƒ³åˆ°ã€‚</p><p>é™¤äº†è¿™å‡ é“é¢˜ï¼Œ è¿˜æœ‰å¾ˆå¤šé¢˜ç›®éƒ½æ˜¯ç±»ä¼¼çš„å¥—è·¯ï¼Œ å¤§å®¶å¯ä»¥åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­è¿›è¡Œä½“ä¼šã€‚ä»Šå¤©æˆ‘ä»¬å°±æ¥ä¸€èµ·å­¦ä¹ ä¸€ä¸‹ã€‚</p><h2 id="å‰æƒ…æ‘˜è¦"><a href="#å‰æƒ…æ‘˜è¦" class="headerlink" title="å‰æƒ…æ‘˜è¦"></a>å‰æƒ…æ‘˜è¦</h2><p>æˆ‘ä»¬ä»ä¸€ä¸ªç®€å•çš„é—®é¢˜å…¥æ‰‹ï¼Œè¯†åˆ«ä¸€ä¸‹è¿™ç§é¢˜çš„åŸºæœ¬å½¢å¼å’Œå¥—è·¯ï¼Œä¸ºä¹‹åçš„å››é“é¢˜æ‰“åŸºç¡€ã€‚å½“ä½ äº†è§£äº†è¿™ä¸ªå¥—è·¯ä¹‹åï¼Œ ä¹‹ååšè¿™ç§é¢˜å°±å¯ä»¥ç›´æ¥å¥—ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯è¿™å››é“é¢˜çš„å‰ç½®çŸ¥è¯†éƒ½æ˜¯ <code>æ»‘åŠ¨çª—å£</code>ï¼Œ ä¸ç†Ÿæ‚‰çš„åŒå­¦å¯ä»¥å…ˆçœ‹ä¸‹ä¹‹å‰å†™çš„ <a href="https://github.com/azl397985856/leetcode/blob/master/thinkings/slide-window.md" target="_blank" rel="noopener">æ»‘åŠ¨çª—å£ä¸“é¢˜ï¼ˆæ€è·¯ + æ¨¡æ¿ï¼‰</a></p><h3 id="æ¯é¢˜-0"><a href="#æ¯é¢˜-0" class="headerlink" title="æ¯é¢˜ 0"></a>æ¯é¢˜ 0</h3><p>æœ‰ N ä¸ªçš„æ­£æ•´æ•°æ”¾åˆ°æ•°ç»„ A é‡Œï¼Œç°åœ¨è¦æ±‚ä¸€ä¸ªæ–°çš„æ•°ç»„ Bï¼Œæ–°æ•°ç»„çš„ç¬¬ i ä¸ªæ•° B[i]æ˜¯åŸæ•°ç»„ A ç¬¬ 0 åˆ°ç¬¬ i ä¸ªæ•°çš„å’Œã€‚</p><p>è¿™é“é¢˜å¯ä»¥ä½¿ç”¨å‰ç¼€å’Œæ¥è§£å†³ã€‚ å‰ç¼€å’Œæ˜¯ä¸€ç§é‡è¦çš„é¢„å¤„ç†ï¼Œèƒ½å¤§å¤§é™ä½æŸ¥è¯¢çš„æ—¶é—´å¤æ‚åº¦ã€‚æˆ‘ä»¬å¯ä»¥ç®€å•ç†è§£ä¸ºâ€œæ•°åˆ—çš„å‰ n é¡¹çš„å’Œâ€ã€‚è¿™ä¸ªæ¦‚å¿µå…¶å®å¾ˆå®¹æ˜“ç†è§£ï¼Œå³ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œç¬¬ n ä½å­˜å‚¨çš„æ˜¯æ•°ç»„å‰ n ä¸ªæ•°å­—çš„å’Œã€‚</p><p>å¯¹ [1,2,3,4,5,6] æ¥è¯´ï¼Œå…¶å‰ç¼€å’Œå¯ä»¥æ˜¯ pre=[1,3,6,10,15,21]ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å…¬å¼ pre[ğ‘–]=pre[ğ‘–âˆ’1]+nums[ğ‘–]å¾—åˆ°æ¯ä¸€ä½å‰ç¼€å’Œçš„å€¼ï¼Œä»è€Œé€šè¿‡å‰ç¼€å’Œè¿›è¡Œç›¸åº”çš„è®¡ç®—å’Œè§£é¢˜ã€‚å…¶å®å‰ç¼€å’Œçš„æ¦‚å¿µå¾ˆç®€å•ï¼Œä½†å›°éš¾çš„æ˜¯å¦‚ä½•åœ¨é¢˜ç›®ä¸­ä½¿ç”¨å‰ç¼€å’Œä»¥åŠå¦‚ä½•ä½¿ç”¨å‰ç¼€å’Œçš„å…³ç³»æ¥è¿›è¡Œè§£é¢˜ã€‚</p><h3 id="æ¯é¢˜-1"><a href="#æ¯é¢˜-1" class="headerlink" title="æ¯é¢˜ 1"></a>æ¯é¢˜ 1</h3><p>å¦‚æœè®©ä½ æ±‚ä¸€ä¸ªæ•°ç»„çš„è¿ç»­å­æ•°ç»„æ€»ä¸ªæ•°ï¼Œä½ ä¼šå¦‚ä½•æ±‚ï¼Ÿå…¶ä¸­è¿ç»­æŒ‡çš„æ˜¯æ•°ç»„çš„ç´¢å¼•è¿ç»­ã€‚ æ¯”å¦‚ [1,3,4]ï¼Œå…¶è¿ç»­å­æ•°ç»„æœ‰ï¼š<code>[1], [3], [4], [1,3], [3,4] , [1,3,4]</code>ï¼Œä½ éœ€è¦è¿”å› 6ã€‚</p><p>ä¸€ç§æ€è·¯æ˜¯æ€»çš„è¿ç»­å­æ•°ç»„ä¸ªæ•°ç­‰äºï¼š<strong>ä»¥ç´¢å¼•ä¸º 0 ç»“å°¾çš„å­æ•°ç»„ä¸ªæ•° + ä»¥ç´¢å¼•ä¸º 1 ç»“å°¾çš„å­æ•°ç»„ä¸ªæ•° + â€¦ + ä»¥ç´¢å¼•ä¸º n - 1 ç»“å°¾çš„å­æ•°ç»„ä¸ªæ•°</strong>ï¼Œè¿™æ— ç–‘æ˜¯å®Œå¤‡çš„ã€‚</p><p>åŒæ—¶<strong>åˆ©ç”¨æ¯é¢˜ 0 çš„å‰ç¼€å’Œæ€è·¯ï¼Œ è¾¹éå†è¾¹æ±‚å’Œã€‚</strong></p><p>å‚è€ƒä»£ç (JS)ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">countSubArray</span>(<span class="params">nums</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> ans = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> pre = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (_ <span class="keyword">in</span> nums) &#123;</span><br><span class="line">    pre += <span class="number">1</span>;</span><br><span class="line">    ans += pre;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>å¤æ‚åº¦åˆ†æ</strong></p><ul><li>æ—¶é—´å¤æ‚åº¦ï¼š<em>O(N)</em>ï¼Œå…¶ä¸­ N ä¸ºæ•°ç»„é•¿åº¦ã€‚</li><li>ç©ºé—´å¤æ‚åº¦ï¼š<em>O(1)</em></li></ul><p>è€Œç”±äºä»¥ç´¢å¼•ä¸º i ç»“å°¾çš„å­æ•°ç»„ä¸ªæ•°å°±æ˜¯ i + 1ï¼Œå› æ­¤è¿™é“é¢˜å¯ä»¥ç›´æ¥ç”¨ç­‰å·®æ•°åˆ—æ±‚å’Œå…¬å¼ <code>(1 + n) * n / 2</code>ï¼Œå…¶ä¸­ n æ•°ç»„é•¿åº¦ã€‚</p><h3 id="æ¯é¢˜-2"><a href="#æ¯é¢˜-2" class="headerlink" title="æ¯é¢˜ 2"></a>æ¯é¢˜ 2</h3><p>æˆ‘ç»§ç»­ä¿®æ”¹ä¸‹é¢˜ç›®ï¼Œ å¦‚æœè®©ä½ æ±‚ä¸€ä¸ªæ•°ç»„ç›¸é‚»å·®ä¸º 1 è¿ç»­å­æ•°ç»„çš„æ€»ä¸ªæ•°å‘¢ï¼Ÿå…¶å®å°±æ˜¯<strong>ç´¢å¼•å·® 1 çš„åŒæ—¶ï¼Œå€¼ä¹Ÿå·® 1ã€‚</strong></p><p>å’Œä¸Šé¢æ€è·¯ç±»ä¼¼ï¼Œæ— éå°±æ˜¯å¢åŠ å·®å€¼çš„åˆ¤æ–­ã€‚</p><p>å‚è€ƒä»£ç (JS)ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">countSubArray</span>(<span class="params">nums</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> ans = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">let</span> pre = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (nums[i] - nums[i - <span class="number">1</span>] == <span class="number">1</span>) &#123;</span><br><span class="line">      pre += <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      pre = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ans += pre;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>å¤æ‚åº¦åˆ†æ</strong></p><ul><li>æ—¶é—´å¤æ‚åº¦ï¼š<em>O(N)</em>ï¼Œå…¶ä¸­ N ä¸ºæ•°ç»„é•¿åº¦ã€‚</li><li>ç©ºé—´å¤æ‚åº¦ï¼š<em>O(1)</em></li></ul><p>å¦‚æœæˆ‘å€¼å·®åªè¦å¤§äº 1 å°±è¡Œå‘¢ï¼Ÿå…¶å®æ”¹ä¸‹ç¬¦å·å°±è¡Œäº†ï¼Œè¿™ä¸å°±æ˜¯æ±‚ä¸Šå‡å­åºåˆ—ä¸ªæ•°ä¹ˆï¼Ÿè¿™é‡Œä¸å†ç»§ç»­èµ˜è¿°ï¼Œ å¤§å®¶å¯ä»¥è‡ªå·±è¯•è¯•ã€‚</p><h3 id="æ¯é¢˜-3"><a href="#æ¯é¢˜-3" class="headerlink" title="æ¯é¢˜ 3"></a>æ¯é¢˜ 3</h3><p>æˆ‘ä»¬ç»§ç»­æ‰©å±•ã€‚</p><p>å¦‚æœæˆ‘è®©ä½ æ±‚å‡ºä¸å¤§äº k çš„å­æ•°ç»„çš„ä¸ªæ•°å‘¢ï¼Ÿä¸å¤§äº k æŒ‡çš„æ˜¯å­æ•°ç»„çš„å…¨éƒ¨å…ƒç´ éƒ½ä¸å¤§äº kã€‚ æ¯”å¦‚ [1,3,4] å­æ•°ç»„æœ‰ <code>[1], [3], [4], [1,3], [3,4] , [1,3,4]</code>ï¼Œä¸å¤§äº 3 çš„å­æ•°ç»„æœ‰ <code>[1], [3], [1,3]</code> ï¼Œé‚£ä¹ˆ [1,3,4] ä¸å¤§äº 3 çš„å­æ•°ç»„ä¸ªæ•°å°±æ˜¯ 3ã€‚ å®ç°å‡½æ•° atMostK(k, nums)ã€‚</p><p>å‚è€ƒä»£ç ï¼ˆJSï¼‰:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">countSubArray</span>(<span class="params">k, nums</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> ans = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> pre = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (nums[i] &lt;= k) &#123;</span><br><span class="line">      pre += <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      pre = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ans += pre;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>å¤æ‚åº¦åˆ†æ</strong></p><ul><li>æ—¶é—´å¤æ‚åº¦ï¼š<em>O(N)</em>ï¼Œå…¶ä¸­ N ä¸ºæ•°ç»„é•¿åº¦ã€‚</li><li>ç©ºé—´å¤æ‚åº¦ï¼š<em>O(1)</em></li></ul><h3 id="æ¯é¢˜-4"><a href="#æ¯é¢˜-4" class="headerlink" title="æ¯é¢˜ 4"></a>æ¯é¢˜ 4</h3><p>å¦‚æœæˆ‘è®©ä½ æ±‚å‡ºå­æ•°ç»„æœ€å¤§å€¼åˆšå¥½æ˜¯ k çš„å­æ•°ç»„çš„ä¸ªæ•°å‘¢ï¼Ÿ æ¯”å¦‚ [1,3,4] å­æ•°ç»„æœ‰ <code>[1], [3], [4], [1,3], [3,4] , [1,3,4]</code>ï¼Œå­æ•°ç»„æœ€å¤§å€¼åˆšå¥½æ˜¯ 3 çš„å­æ•°ç»„æœ‰ <code>[3], [1,3]</code> ï¼Œé‚£ä¹ˆ [1,3,4] å­æ•°ç»„æœ€å¤§å€¼åˆšå¥½æ˜¯ 3 çš„å­æ•°ç»„ä¸ªæ•°å°±æ˜¯ 2ã€‚å®ç°å‡½æ•° exactK(k, nums)ã€‚</p><p>å®é™…ä¸Šæ˜¯ exactK å¯ä»¥ç›´æ¥åˆ©ç”¨ atMostKï¼Œå³ atMostK(k) - atMostK(k - 1)ï¼ŒåŸå› è§ä¸‹æ–¹æ¯é¢˜ 5 éƒ¨åˆ†ã€‚</p><h3 id="æ¯é¢˜-5"><a href="#æ¯é¢˜-5" class="headerlink" title="æ¯é¢˜ 5"></a>æ¯é¢˜ 5</h3><p>å¦‚æœæˆ‘è®©ä½ æ±‚å‡ºå­æ•°ç»„æœ€å¤§å€¼åˆšå¥½æ˜¯ ä»‹äº k1 å’Œ k2 çš„å­æ•°ç»„çš„ä¸ªæ•°å‘¢ï¼Ÿå®ç°å‡½æ•° betweenK(k1, k2, nums)ã€‚</p><p>å®é™…ä¸Šæ˜¯ betweenK å¯ä»¥ç›´æ¥åˆ©ç”¨ atMostKï¼Œå³ atMostK(k1, nums) - atMostK(k2 - 1, nums)ï¼Œå…¶ä¸­ k1 &gt; k2ã€‚å‰ææ˜¯å€¼æ˜¯ç¦»æ•£çš„ï¼Œ æ¯”å¦‚ä¸Šé¢æˆ‘å‡ºçš„é¢˜éƒ½æ˜¯æ•´æ•°ã€‚ å› æ­¤æˆ‘å¯ä»¥ç›´æ¥ å‡ 1ï¼Œå› ä¸º <strong>1 æ˜¯ä¸¤ä¸ªæ•´æ•°æœ€å°çš„é—´éš”</strong>ã€‚</p><p>å¦‚ä¸Šï¼Œ<code>å°äºç­‰äº 10 çš„åŒºåŸŸ</code>å‡å» <code>å°äº 5 çš„åŒºåŸŸ</code>å°±æ˜¯ <code>å¤§äºç­‰äº 5 ä¸”å°äºç­‰äº 10 çš„åŒºåŸŸ</code>ã€‚</p><p>æ³¨æ„æˆ‘è¯´çš„æ˜¯å°äº 5ï¼Œ ä¸æ˜¯å°äºç­‰äº 5ã€‚ ç”±äºæ•´æ•°æ˜¯ç¦»æ•£çš„ï¼Œæœ€å°é—´éš”æ˜¯ 1ã€‚å› æ­¤å°äº 5 åœ¨è¿™é‡Œå°±ç­‰ä»·äº å°äºç­‰äº 4ã€‚è¿™å°±æ˜¯ betweenK(k1, k2, nums) = atMostK(k1) - atMostK(k2 - 1) çš„åŸå› ã€‚</p><p>å› æ­¤ä¸éš¾çœ‹å‡º exactK å…¶å®å°±æ˜¯ betweenK çš„ç‰¹æ®Šå½¢å¼ã€‚ å½“ k1 == k2 çš„æ—¶å€™ï¼Œ betweenK ç­‰ä»·äº exactKã€‚</p><p>å› æ­¤ atMostK å°±æ˜¯çµé­‚æ–¹æ³•ï¼Œä¸€å®šè¦æŒæ¡ï¼Œä¸æ˜ç™½å»ºè®®å¤šçœ‹å‡ éã€‚</p><p>æœ‰äº†ä¸Šé¢çš„é“ºå«ï¼Œ æˆ‘ä»¬æ¥çœ‹ä¸‹ç¬¬ä¸€é“é¢˜ã€‚</p><h2 id="467-ç¯ç»•å­—ç¬¦ä¸²ä¸­å”¯ä¸€çš„å­å­—ç¬¦ä¸²ï¼ˆä¸­ç­‰ï¼‰"><a href="#467-ç¯ç»•å­—ç¬¦ä¸²ä¸­å”¯ä¸€çš„å­å­—ç¬¦ä¸²ï¼ˆä¸­ç­‰ï¼‰" class="headerlink" title="467. ç¯ç»•å­—ç¬¦ä¸²ä¸­å”¯ä¸€çš„å­å­—ç¬¦ä¸²ï¼ˆä¸­ç­‰ï¼‰"></a>467. ç¯ç»•å­—ç¬¦ä¸²ä¸­å”¯ä¸€çš„å­å­—ç¬¦ä¸²ï¼ˆä¸­ç­‰ï¼‰</h2><h3 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><details>    <summary>é¢˜ç›®æè¿°</summary><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">æŠŠå­—ç¬¦ä¸² s çœ‹ä½œæ˜¯â€œabcdefghijklmnopqrstuvwxyzâ€çš„æ— é™ç¯ç»•å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥Â s çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ï¼š&quot;...zabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcd....&quot;.Â </span><br><span class="line"></span><br><span class="line">ç°åœ¨æˆ‘ä»¬æœ‰äº†å¦ä¸€ä¸ªå­—ç¬¦ä¸² p ã€‚ä½ éœ€è¦çš„æ˜¯æ‰¾å‡º s ä¸­æœ‰å¤šå°‘ä¸ªå”¯ä¸€çš„ p çš„éç©ºå­ä¸²ï¼Œå°¤å…¶æ˜¯å½“ä½ çš„è¾“å…¥æ˜¯å­—ç¬¦ä¸² p ï¼Œä½ éœ€è¦è¾“å‡ºå­—ç¬¦ä¸²Â s ä¸­ p çš„ä¸åŒçš„éç©ºå­ä¸²çš„æ•°ç›®ã€‚Â </span><br><span class="line"></span><br><span class="line">æ³¨æ„: pÂ ä»…ç”±å°å†™çš„è‹±æ–‡å­—æ¯ç»„æˆï¼Œp çš„å¤§å°å¯èƒ½è¶…è¿‡ 10000ã€‚</span><br><span class="line"></span><br><span class="line">Â </span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹Â 1:</span><br><span class="line"></span><br><span class="line">è¾“å…¥: &quot;a&quot;</span><br><span class="line">è¾“å‡º: 1</span><br><span class="line">è§£é‡Š: å­—ç¬¦ä¸² S ä¸­åªæœ‰ä¸€ä¸ª&quot;a&quot;å­å­—ç¬¦ã€‚</span><br><span class="line">Â </span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹ 2:</span><br><span class="line"></span><br><span class="line">è¾“å…¥: &quot;cac&quot;</span><br><span class="line">è¾“å‡º: 2</span><br><span class="line">è§£é‡Š: å­—ç¬¦ä¸² S ä¸­çš„å­—ç¬¦ä¸²â€œcacâ€åªæœ‰ä¸¤ä¸ªå­ä¸²â€œaâ€ã€â€œcâ€ã€‚.</span><br><span class="line">Â </span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹ 3:</span><br><span class="line"></span><br><span class="line">è¾“å…¥: &quot;zab&quot;</span><br><span class="line">è¾“å‡º: 6</span><br><span class="line">è§£é‡Š: åœ¨å­—ç¬¦ä¸² S ä¸­æœ‰å…­ä¸ªå­ä¸²â€œzâ€ã€â€œaâ€ã€â€œbâ€ã€â€œzaâ€ã€â€œabâ€ã€â€œzabâ€ã€‚.</span><br></pre></td></tr></table></figure></details><h3 id="å‰ç½®çŸ¥è¯†"><a href="#å‰ç½®çŸ¥è¯†" class="headerlink" title="å‰ç½®çŸ¥è¯†"></a>å‰ç½®çŸ¥è¯†</h3><ul><li>æ»‘åŠ¨çª—å£</li></ul><h3 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p>é¢˜ç›®æ˜¯è®©æˆ‘ä»¬æ‰¾ p åœ¨ s ä¸­å‡ºç°çš„éç©ºå­ä¸²æ•°ç›®ï¼Œè€Œ s æ˜¯å›ºå®šçš„ä¸€ä¸ªæ— é™å¾ªç¯å­—ç¬¦ä¸²ã€‚ç”±äº p çš„æ•°æ®èŒƒå›´æ˜¯ 10^5 ï¼Œå› æ­¤æš´åŠ›æ‰¾å‡ºæ‰€æœ‰å­ä¸²å°±éœ€è¦ 10^10 æ¬¡æ“ä½œäº†ï¼Œåº”è¯¥ä¼šè¶…æ—¶ã€‚è€Œä¸”é¢˜ç›®å¾ˆå¤šä¿¡æ¯éƒ½æ²¡ç”¨åˆ°ï¼Œè‚¯å®šä¸å¯¹ã€‚</p><p>ä»”ç»†çœ‹ä¸‹é¢˜ç›®å‘ç°ï¼Œè¿™ä¸å°±æ˜¯æ¯é¢˜ 2 çš„å˜ç§ä¹ˆï¼Ÿè¯ä¸å¤šè¯´ï¼Œ ç›´æ¥ä¸Šä»£ç ï¼Œçœ‹çœ‹æœ‰å¤šåƒã€‚</p><blockquote><p>ä¸ºäº†å‡å°‘åˆ¤æ–­ï¼Œ æˆ‘è¿™é‡Œç”¨äº†ä¸€ä¸ªé»‘ç§‘æŠ€ï¼Œ p å‰é¢åŠ äº†ä¸ª <code>^</code>ã€‚</p></blockquote><details>    <summary>Python</summary><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">findSubstringInWraproundString</span><span class="params">(self, p: str)</span> -&gt; int:</span></span><br><span class="line">        p = <span class="string">'^'</span> + p</span><br><span class="line">        w = <span class="number">1</span></span><br><span class="line">        ans = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,len(p)):</span><br><span class="line">            <span class="keyword">if</span> ord(p[i])-ord(p[i<span class="number">-1</span>]) == <span class="number">1</span> <span class="keyword">or</span> ord(p[i])-ord(p[i<span class="number">-1</span>]) == <span class="number">-25</span>:</span><br><span class="line">                w += <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                w = <span class="number">1</span></span><br><span class="line">            ans += w</span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure></details><p>å¦‚ä¸Šä»£ç æ˜¯æœ‰é—®é¢˜ã€‚ æ¯”å¦‚ <code>cac</code>ä¼šè¢«è®¡ç®—ä¸º 3ï¼Œå®é™…ä¸Šåº”è¯¥æ˜¯ 2ã€‚æ ¹æœ¬åŸå› åœ¨äº c è¢«é”™è¯¯åœ°è®¡ç®—äº†ä¸¤æ¬¡ã€‚å› æ­¤ä¸€ä¸ªç®€å•çš„æ€è·¯å°±æ˜¯ç”¨ set è®°å½•ä¸€ä¸‹è®¿é—®è¿‡çš„å­å­—ç¬¦ä¸²å³å¯ã€‚æ¯”å¦‚ï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    c,</span><br><span class="line">    abc,</span><br><span class="line">    ab,</span><br><span class="line">    abcd</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è€Œç”±äº set ä¸­çš„å…ƒç´ ä¸€å®šæ˜¯è¿ç»­çš„ï¼Œå› æ­¤ä¸Šé¢çš„æ•°æ®ä¹Ÿå¯ä»¥ç”¨ hashmap å­˜ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    c: 3</span><br><span class="line">    d: 4</span><br><span class="line">    b: 1</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å«ä¹‰æ˜¯ï¼š</p><ul><li>ä»¥ b ç»“å°¾çš„å­ä¸²æœ€å¤§é•¿åº¦ä¸º 1ï¼Œä¹Ÿå°±æ˜¯ bã€‚</li><li>ä»¥ c ç»“å°¾çš„å­ä¸²æœ€å¤§é•¿åº¦ä¸º 3ï¼Œä¹Ÿå°±æ˜¯ abcã€‚</li><li>ä»¥ d ç»“å°¾çš„å­ä¸²æœ€å¤§é•¿åº¦ä¸º 4ï¼Œä¹Ÿå°±æ˜¯ abcdã€‚</li></ul><p>è‡³äº c ï¼Œæ˜¯æ²¡æœ‰å¿…è¦å­˜çš„ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æ¯é¢˜ 2 çš„æ–¹å¼ç®—å‡ºæ¥ã€‚</p><p>å…·ä½“ç®—æ³•ï¼š</p><ul><li>å®šä¹‰ä¸€ä¸ª len_mapperã€‚key æ˜¯ å­—æ¯ï¼Œ value æ˜¯ é•¿åº¦ã€‚ å«ä¹‰æ˜¯ä»¥ key ç»“å°¾çš„æœ€é•¿è¿ç»­å­ä¸²çš„é•¿åº¦ã€‚</li></ul><blockquote><p>å…³é”®å­—æ˜¯ï¼šæœ€é•¿</p></blockquote><ul><li>ç”¨ä¸€ä¸ªå˜é‡ w è®°å½•è¿ç»­å­ä¸²çš„é•¿åº¦ï¼Œéå†è¿‡ç¨‹æ ¹æ® w çš„å€¼æ›´æ–° len_mapper</li><li>è¿”å› len_mapper ä¸­æ‰€æœ‰ value çš„å’Œã€‚</li></ul><p>æ¯”å¦‚: abcï¼Œæ­¤æ—¶çš„ len_mapper ä¸º:</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    c: <span class="number">3</span></span><br><span class="line">    b: <span class="number">2</span></span><br><span class="line">    a: <span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å†æ¯”å¦‚ï¼šabcabï¼Œæ­¤æ—¶çš„ len_mapper ä¾æ—§ã€‚</p><p>å†æ¯”å¦‚: abcazabcï¼Œæ­¤æ—¶çš„ len_mapperï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    c: <span class="number">4</span></span><br><span class="line">    b: <span class="number">3</span></span><br><span class="line">    a: <span class="number">2</span></span><br><span class="line">    z: <span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™å°±å¾—åˆ°äº†å»é‡çš„ç›®çš„ã€‚è¿™ç§ç®—æ³•æ˜¯ä¸é‡ä¸æ¼çš„ï¼Œå› ä¸ºæœ€é•¿çš„è¿ç»­å­ä¸²ä¸€å®šæ˜¯åŒ…å«äº†æ¯”å®ƒçŸ­çš„è¿ç»­å­ä¸²ï¼Œè¿™ä¸ªæ€æƒ³å’Œ <a href="https://github.com/azl397985856/leetcode/issues/266" target="_blank" rel="noopener">1297. å­ä¸²çš„æœ€å¤§å‡ºç°æ¬¡æ•°</a> å‰ªæçš„æ–¹æ³•æœ‰å¼‚æ›²åŒå·¥ä¹‹å¦™ã€‚</p><h3 id="ä»£ç ï¼ˆPythonï¼‰"><a href="#ä»£ç ï¼ˆPythonï¼‰" class="headerlink" title="ä»£ç ï¼ˆPythonï¼‰"></a>ä»£ç ï¼ˆPythonï¼‰</h3><details>    <summary>Python</summary><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">findSubstringInWraproundString</span><span class="params">(self, p: str)</span> -&gt; int:</span></span><br><span class="line">        p = <span class="string">'^'</span> + p</span><br><span class="line">        len_mapper = collections.defaultdict(<span class="keyword">lambda</span>: <span class="number">0</span>)</span><br><span class="line">        w = <span class="number">1</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,len(p)):</span><br><span class="line">            <span class="keyword">if</span> ord(p[i])-ord(p[i<span class="number">-1</span>]) == <span class="number">1</span> <span class="keyword">or</span> ord(p[i])-ord(p[i<span class="number">-1</span>]) == <span class="number">-25</span>:</span><br><span class="line">                w += <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                w = <span class="number">1</span></span><br><span class="line">            len_mapper[p[i]] = max(len_mapper[p[i]], w)</span><br><span class="line">        <span class="keyword">return</span> sum(len_mapper.values())</span><br></pre></td></tr></table></figure></details><p><strong>å¤æ‚åº¦åˆ†æ</strong></p><ul><li>æ—¶é—´å¤æ‚åº¦ï¼š<em>O(N)*ï¼Œå…¶ä¸­ *N</em> ä¸ºå­—ç¬¦ä¸² p çš„é•¿åº¦ã€‚</li><li>ç©ºé—´å¤æ‚åº¦ï¼šç”±äºæœ€å¤šå­˜å‚¨ 26 ä¸ªå­—æ¯ï¼Œ å› æ­¤ç©ºé—´å®é™…ä¸Šæ˜¯å¸¸æ•°ï¼Œæ•…ç©ºé—´å¤æ‚åº¦ä¸º <em>O(1)</em>ã€‚</li></ul><h2 id="795-åŒºé—´å­æ•°ç»„ä¸ªæ•°ï¼ˆä¸­ç­‰ï¼‰"><a href="#795-åŒºé—´å­æ•°ç»„ä¸ªæ•°ï¼ˆä¸­ç­‰ï¼‰" class="headerlink" title="795. åŒºé—´å­æ•°ç»„ä¸ªæ•°ï¼ˆä¸­ç­‰ï¼‰"></a>795. åŒºé—´å­æ•°ç»„ä¸ªæ•°ï¼ˆä¸­ç­‰ï¼‰</h2><h3 id="é¢˜ç›®æè¿°-1"><a href="#é¢˜ç›®æè¿°-1" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ç»™å®šä¸€ä¸ªå…ƒç´ éƒ½æ˜¯æ­£æ•´æ•°çš„æ•°ç»„ AÂ ï¼Œæ­£æ•´æ•° LÂ  ä»¥åŠ Â RÂ (L &lt;= R)ã€‚</span><br><span class="line"></span><br><span class="line">æ±‚è¿ç»­ã€éç©ºä¸”å…¶ä¸­æœ€å¤§å…ƒç´ æ»¡è¶³å¤§äºç­‰äº LÂ  å°äºç­‰äº R çš„å­æ•°ç»„ä¸ªæ•°ã€‚</span><br><span class="line"></span><br><span class="line">ä¾‹å¦‚ :</span><br><span class="line">è¾“å…¥:</span><br><span class="line">A = [2, 1, 4, 3]</span><br><span class="line">L = 2</span><br><span class="line">R = 3</span><br><span class="line">è¾“å‡º: 3</span><br><span class="line">è§£é‡Š: æ»¡è¶³æ¡ä»¶çš„å­æ•°ç»„: [2], [2, 1], [3].</span><br><span class="line">æ³¨æ„:</span><br><span class="line"></span><br><span class="line">L, RÂ  å’Œ Â A[i] éƒ½æ˜¯æ•´æ•°ï¼ŒèŒƒå›´åœ¨ Â [0, 10^9]ã€‚</span><br><span class="line">æ•°ç»„ Â AÂ  çš„é•¿åº¦èŒƒå›´åœ¨[1, 50000]ã€‚</span><br></pre></td></tr></table></figure><h3 id="å‰ç½®çŸ¥è¯†-1"><a href="#å‰ç½®çŸ¥è¯†-1" class="headerlink" title="å‰ç½®çŸ¥è¯†"></a>å‰ç½®çŸ¥è¯†</h3><ul><li>æ»‘åŠ¨çª—å£</li></ul><h3 id="æ€è·¯-1"><a href="#æ€è·¯-1" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p>ç”±æ¯é¢˜ 5ï¼Œæˆ‘ä»¬çŸ¥é“ <strong>betweenK å¯ä»¥ç›´æ¥åˆ©ç”¨ atMostKï¼Œå³ atMostK(k1) - atMostK(k2 - 1)ï¼Œå…¶ä¸­ k1 &gt; k2</strong>ã€‚</p><p>ç”±æ¯é¢˜ 2ï¼Œæˆ‘ä»¬çŸ¥é“å¦‚ä½•æ±‚æ»¡è¶³ä¸€å®šæ¡ä»¶ï¼ˆè¿™é‡Œæ˜¯å…ƒç´ éƒ½å°äºç­‰äº Rï¼‰å­æ•°ç»„çš„ä¸ªæ•°ã€‚</p><p>è¿™ä¸¤ä¸ªç»“åˆä¸€ä¸‹ï¼Œ å°±å¯ä»¥è§£å†³ã€‚</p><h3 id="ä»£ç ï¼ˆPythonï¼‰-1"><a href="#ä»£ç ï¼ˆPythonï¼‰-1" class="headerlink" title="ä»£ç ï¼ˆPythonï¼‰"></a>ä»£ç ï¼ˆPythonï¼‰</h3><blockquote><p>ä»£ç æ˜¯ä¸æ˜¯å¾ˆåƒ</p></blockquote><details>    <summary>Python</summary><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">numSubarrayBoundedMax</span><span class="params">(self, A: List[int], L: int, R: int)</span> -&gt; int:</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">notGreater</span><span class="params">(R)</span>:</span></span><br><span class="line">            ans = cnt = <span class="number">0</span></span><br><span class="line">            <span class="keyword">for</span> a <span class="keyword">in</span> A:</span><br><span class="line">                <span class="keyword">if</span> a &lt;= R: cnt += <span class="number">1</span></span><br><span class="line">                <span class="keyword">else</span>: cnt = <span class="number">0</span></span><br><span class="line">                ans += cnt</span><br><span class="line">            <span class="keyword">return</span>  ans</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> notGreater(R) - notGreater(L - <span class="number">1</span>)</span><br></pre></td></tr></table></figure></details><p><strong><em>å¤æ‚åº¦åˆ†æ</em></strong></p><ul><li>æ—¶é—´å¤æ‚åº¦ï¼š<em>O(N)*ï¼Œå…¶ä¸­ *N</em> ä¸ºæ•°ç»„é•¿åº¦ã€‚</li><li>ç©ºé—´å¤æ‚åº¦ï¼š<em>O(1)</em>ã€‚</li></ul><h2 id="904-æ°´æœæˆç¯®ï¼ˆä¸­ç­‰ï¼‰"><a href="#904-æ°´æœæˆç¯®ï¼ˆä¸­ç­‰ï¼‰" class="headerlink" title="904. æ°´æœæˆç¯®ï¼ˆä¸­ç­‰ï¼‰"></a>904. æ°´æœæˆç¯®ï¼ˆä¸­ç­‰ï¼‰</h2><h3 id="é¢˜ç›®æè¿°-2"><a href="#é¢˜ç›®æè¿°-2" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">åœ¨ä¸€æ’æ ‘ä¸­ï¼Œç¬¬ i æ£µæ ‘äº§ç”ŸÂ tree[i] å‹çš„æ°´æœã€‚</span><br><span class="line">ä½ å¯ä»¥ä»ä½ é€‰æ‹©çš„ä»»ä½•æ ‘å¼€å§‹ï¼Œç„¶åé‡å¤æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š</span><br><span class="line"></span><br><span class="line">æŠŠè¿™æ£µæ ‘ä¸Šçš„æ°´æœæ”¾è¿›ä½ çš„ç¯®å­é‡Œã€‚å¦‚æœä½ åšä¸åˆ°ï¼Œå°±åœä¸‹æ¥ã€‚</span><br><span class="line">ç§»åŠ¨åˆ°å½“å‰æ ‘å³ä¾§çš„ä¸‹ä¸€æ£µæ ‘ã€‚å¦‚æœå³è¾¹æ²¡æœ‰æ ‘ï¼Œå°±åœä¸‹æ¥ã€‚</span><br><span class="line">è¯·æ³¨æ„ï¼Œåœ¨é€‰æ‹©ä¸€é¢—æ ‘åï¼Œä½ æ²¡æœ‰ä»»ä½•é€‰æ‹©ï¼šä½ å¿…é¡»æ‰§è¡Œæ­¥éª¤ 1ï¼Œç„¶åæ‰§è¡Œæ­¥éª¤ 2ï¼Œç„¶åè¿”å›æ­¥éª¤ 1ï¼Œç„¶åæ‰§è¡Œæ­¥éª¤ 2ï¼Œä¾æ­¤ç±»æ¨ï¼Œç›´è‡³åœæ­¢ã€‚</span><br><span class="line"></span><br><span class="line">ä½ æœ‰ä¸¤ä¸ªç¯®å­ï¼Œæ¯ä¸ªç¯®å­å¯ä»¥æºå¸¦ä»»ä½•æ•°é‡çš„æ°´æœï¼Œä½†ä½ å¸Œæœ›æ¯ä¸ªç¯®å­åªæºå¸¦ä¸€ç§ç±»å‹çš„æ°´æœã€‚</span><br><span class="line"></span><br><span class="line">ç”¨è¿™ä¸ªç¨‹åºä½ èƒ½æ”¶é›†çš„æ°´æœæ ‘çš„æœ€å¤§æ€»é‡æ˜¯å¤šå°‘ï¼Ÿ</span><br><span class="line"></span><br><span class="line">Â </span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹ 1ï¼š</span><br><span class="line"></span><br><span class="line">è¾“å…¥ï¼š[1,2,1]</span><br><span class="line">è¾“å‡ºï¼š3</span><br><span class="line">è§£é‡Šï¼šæˆ‘ä»¬å¯ä»¥æ”¶é›† [1,2,1]ã€‚</span><br><span class="line">ç¤ºä¾‹ 2ï¼š</span><br><span class="line"></span><br><span class="line">è¾“å…¥ï¼š[0,1,2,2]</span><br><span class="line">è¾“å‡ºï¼š3</span><br><span class="line">è§£é‡Šï¼šæˆ‘ä»¬å¯ä»¥æ”¶é›† [1,2,2]</span><br><span class="line">å¦‚æœæˆ‘ä»¬ä»ç¬¬ä¸€æ£µæ ‘å¼€å§‹ï¼Œæˆ‘ä»¬å°†åªèƒ½æ”¶é›†åˆ° [0, 1]ã€‚</span><br><span class="line">ç¤ºä¾‹ 3ï¼š</span><br><span class="line"></span><br><span class="line">è¾“å…¥ï¼š[1,2,3,2,2]</span><br><span class="line">è¾“å‡ºï¼š4</span><br><span class="line">è§£é‡Šï¼šæˆ‘ä»¬å¯ä»¥æ”¶é›† [2,3,2,2]</span><br><span class="line">å¦‚æœæˆ‘ä»¬ä»ç¬¬ä¸€æ£µæ ‘å¼€å§‹ï¼Œæˆ‘ä»¬å°†åªèƒ½æ”¶é›†åˆ° [1, 2]ã€‚</span><br><span class="line">ç¤ºä¾‹ 4ï¼š</span><br><span class="line"></span><br><span class="line">è¾“å…¥ï¼š[3,3,3,1,2,1,1,2,3,3,4]</span><br><span class="line">è¾“å‡ºï¼š5</span><br><span class="line">è§£é‡Šï¼šæˆ‘ä»¬å¯ä»¥æ”¶é›† [1,2,1,1,2]</span><br><span class="line">å¦‚æœæˆ‘ä»¬ä»ç¬¬ä¸€æ£µæ ‘æˆ–ç¬¬å…«æ£µæ ‘å¼€å§‹ï¼Œæˆ‘ä»¬å°†åªèƒ½æ”¶é›†åˆ° 4 æ£µæ°´æœæ ‘ã€‚</span><br><span class="line">Â </span><br><span class="line"></span><br><span class="line">æç¤ºï¼š</span><br><span class="line"></span><br><span class="line">1 &lt;= tree.length &lt;= 40000</span><br><span class="line">0 &lt;= tree[i] &lt; tree.length</span><br></pre></td></tr></table></figure><h3 id="å‰ç½®çŸ¥è¯†-2"><a href="#å‰ç½®çŸ¥è¯†-2" class="headerlink" title="å‰ç½®çŸ¥è¯†"></a>å‰ç½®çŸ¥è¯†</h3><ul><li>æ»‘åŠ¨çª—å£</li></ul><h3 id="æ€è·¯-2"><a href="#æ€è·¯-2" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p>é¢˜ç›®èŠ±é‡Œèƒ¡å“¨çš„ã€‚æˆ‘ä»¬æ¥æŠ½è±¡ä¸€ä¸‹ï¼Œå°±æ˜¯ç»™ä½ ä¸€ä¸ªæ•°ç»„ï¼Œ è®©ä½ <strong>é€‰å®šä¸€ä¸ªå­æ•°ç»„ï¼Œ è¿™ä¸ªå­æ•°ç»„æœ€å¤šåªæœ‰ä¸¤ç§æ•°å­—</strong>ï¼Œè¿™ä¸ªé€‰å®šçš„å­æ•°ç»„æœ€å¤§å¯ä»¥æ˜¯å¤šå°‘ã€‚</p><p>è¿™ä¸å°±å’Œæ¯é¢˜ 3 ä¸€æ ·ä¹ˆï¼Ÿåªä¸è¿‡ k å˜æˆäº†å›ºå®šå€¼ 2ã€‚å¦å¤–ç”±äºé¢˜ç›®è¦æ±‚æ•´ä¸ªçª—å£æœ€å¤šä¸¤ç§æ•°å­—ï¼Œæˆ‘ä»¬ç”¨å“ˆå¸Œè¡¨å­˜ä¸€ä¸‹ä¸å°±å¥½äº†å—ï¼Ÿ</p><blockquote><p>set æ˜¯ä¸è¡Œäº†çš„ã€‚ å› æ­¤æˆ‘ä»¬ä¸ä½†éœ€è¦çŸ¥é“å‡ ä¸ªæ•°å­—åœ¨çª—å£ï¼Œ æˆ‘ä»¬è¿˜è¦çŸ¥é“æ¯ä¸ªæ•°å­—å‡ºç°çš„æ¬¡æ•°ï¼Œè¿™æ ·æ‰å¯ä»¥ä½¿ç”¨æ»‘åŠ¨çª—å£ä¼˜åŒ–æ—¶é—´å¤æ‚åº¦ã€‚</p></blockquote><h3 id="ä»£ç ï¼ˆPythonï¼‰-2"><a href="#ä»£ç ï¼ˆPythonï¼‰-2" class="headerlink" title="ä»£ç ï¼ˆPythonï¼‰"></a>ä»£ç ï¼ˆPythonï¼‰</h3><details>    <summary>Python</summary><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">totalFruit</span><span class="params">(self, tree: List[int])</span> -&gt; int:</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">atMostK</span><span class="params">(k, nums)</span>:</span></span><br><span class="line">            i = ans = <span class="number">0</span></span><br><span class="line">            win = defaultdict(<span class="keyword">lambda</span>: <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(len(nums)):</span><br><span class="line">                <span class="keyword">if</span> win[nums[j]] == <span class="number">0</span>: k -= <span class="number">1</span></span><br><span class="line">                win[nums[j]] += <span class="number">1</span></span><br><span class="line">                <span class="keyword">while</span> k &lt; <span class="number">0</span>:</span><br><span class="line">                    win[nums[i]] -= <span class="number">1</span></span><br><span class="line">                    <span class="keyword">if</span> win[nums[i]] == <span class="number">0</span>: k += <span class="number">1</span></span><br><span class="line">                    i += <span class="number">1</span></span><br><span class="line">                ans = max(ans, j - i + <span class="number">1</span>)</span><br><span class="line">            <span class="keyword">return</span> ans</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> atMostK(<span class="number">2</span>, tree)</span><br></pre></td></tr></table></figure></details><p><strong>å¤æ‚åº¦åˆ†æ</strong></p><ul><li>æ—¶é—´å¤æ‚åº¦ï¼š<em>O(N)*ï¼Œå…¶ä¸­ *N</em> ä¸ºæ•°ç»„é•¿åº¦ã€‚</li><li>ç©ºé—´å¤æ‚åº¦ï¼š<em>O(k)</em>ã€‚</li></ul><h2 id="992-K-ä¸ªä¸åŒæ•´æ•°çš„å­æ•°ç»„ï¼ˆå›°éš¾ï¼‰"><a href="#992-K-ä¸ªä¸åŒæ•´æ•°çš„å­æ•°ç»„ï¼ˆå›°éš¾ï¼‰" class="headerlink" title="992. K ä¸ªä¸åŒæ•´æ•°çš„å­æ•°ç»„ï¼ˆå›°éš¾ï¼‰"></a>992. K ä¸ªä¸åŒæ•´æ•°çš„å­æ•°ç»„ï¼ˆå›°éš¾ï¼‰</h2><h3 id="é¢˜ç›®æè¿°-3"><a href="#é¢˜ç›®æè¿°-3" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">ç»™å®šä¸€ä¸ªæ­£æ•´æ•°æ•°ç»„ Aï¼Œå¦‚æœ AÂ çš„æŸä¸ªå­æ•°ç»„ä¸­ä¸åŒæ•´æ•°çš„ä¸ªæ•°æ°å¥½ä¸º Kï¼Œåˆ™ç§° A çš„è¿™ä¸ªè¿ç»­ã€ä¸ä¸€å®šç‹¬ç«‹çš„å­æ•°ç»„ä¸ºå¥½å­æ•°ç»„ã€‚</span><br><span class="line"></span><br><span class="line">ï¼ˆä¾‹å¦‚ï¼Œ[1,2,3,1,2] ä¸­æœ‰Â 3Â ä¸ªä¸åŒçš„æ•´æ•°ï¼š1ï¼Œ2ï¼Œä»¥åŠÂ 3ã€‚ï¼‰</span><br><span class="line"></span><br><span class="line">è¿”å›Â AÂ ä¸­å¥½å­æ•°ç»„çš„æ•°ç›®ã€‚</span><br><span class="line"></span><br><span class="line">Â </span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹ 1ï¼š</span><br><span class="line"></span><br><span class="line">è¾“å…¥ï¼šA = [1,2,1,2,3], K = 2</span><br><span class="line">è¾“å‡ºï¼š7</span><br><span class="line">è§£é‡Šï¼šæ°å¥½ç”± 2 ä¸ªä¸åŒæ•´æ•°ç»„æˆçš„å­æ•°ç»„ï¼š[1,2], [2,1], [1,2], [2,3], [1,2,1], [2,1,2], [1,2,1,2].</span><br><span class="line">ç¤ºä¾‹ 2ï¼š</span><br><span class="line"></span><br><span class="line">è¾“å…¥ï¼šA = [1,2,1,3,4], K = 3</span><br><span class="line">è¾“å‡ºï¼š3</span><br><span class="line">è§£é‡Šï¼šæ°å¥½ç”± 3 ä¸ªä¸åŒæ•´æ•°ç»„æˆçš„å­æ•°ç»„ï¼š[1,2,1,3], [2,1,3], [1,3,4].</span><br><span class="line">Â </span><br><span class="line"></span><br><span class="line">æç¤ºï¼š</span><br><span class="line"></span><br><span class="line">1 &lt;= A.length &lt;= 20000</span><br><span class="line">1 &lt;= A[i] &lt;= A.length</span><br><span class="line">1 &lt;= K &lt;= A.length</span><br></pre></td></tr></table></figure><h3 id="å‰ç½®çŸ¥è¯†-3"><a href="#å‰ç½®çŸ¥è¯†-3" class="headerlink" title="å‰ç½®çŸ¥è¯†"></a>å‰ç½®çŸ¥è¯†</h3><ul><li>æ»‘åŠ¨çª—å£</li></ul><h3 id="æ€è·¯-3"><a href="#æ€è·¯-3" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p>ç”±æ¯é¢˜ 5ï¼ŒçŸ¥ï¼šexactK = atMostK(k) - atMostK(k - 1)ï¼Œ å› æ­¤ç­”æ¡ˆä¾¿å‘¼ä¹‹æ¬²å‡ºäº†ã€‚å…¶ä»–éƒ¨åˆ†å’Œä¸Šé¢çš„é¢˜ç›® <code>904. æ°´æœæˆç¯®</code> ä¸€æ ·ã€‚</p><blockquote><p>å®é™…ä¸Šå’Œæ‰€æœ‰çš„æ»‘åŠ¨çª—å£é¢˜ç›®éƒ½å·®ä¸å¤šã€‚</p></blockquote><h3 id="ä»£ç ï¼ˆPythonï¼‰-3"><a href="#ä»£ç ï¼ˆPythonï¼‰-3" class="headerlink" title="ä»£ç ï¼ˆPythonï¼‰"></a>ä»£ç ï¼ˆPythonï¼‰</h3><details>    <summary>Python</summary><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">subarraysWithKDistinct</span><span class="params">(self, A, K)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.atMostK(A, K) - self.atMostK(A, K - <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">atMostK</span><span class="params">(self, A, K)</span>:</span></span><br><span class="line">        counter = collections.Counter()</span><br><span class="line">        res = i = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(len(A)):</span><br><span class="line">            <span class="keyword">if</span> counter[A[j]] == <span class="number">0</span>:</span><br><span class="line">                K -= <span class="number">1</span></span><br><span class="line">            counter[A[j]] += <span class="number">1</span></span><br><span class="line">            <span class="keyword">while</span> K &lt; <span class="number">0</span>:</span><br><span class="line">                counter[A[i]] -= <span class="number">1</span></span><br><span class="line">                <span class="keyword">if</span> counter[A[i]] == <span class="number">0</span>:</span><br><span class="line">                    K += <span class="number">1</span></span><br><span class="line">                i += <span class="number">1</span></span><br><span class="line">            res += j - i + <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure></details><p><strong>å¤æ‚åº¦åˆ†æ</strong></p><ul><li>æ—¶é—´å¤æ‚åº¦ï¼š<em>O(N)*ï¼Œä¸­ *N</em> ä¸ºæ•°ç»„é•¿åº¦ã€‚</li><li>ç©ºé—´å¤æ‚åº¦ï¼š<em>O(k)</em>ã€‚</li></ul><h2 id="1109-èˆªç­é¢„è®¢ç»Ÿè®¡ï¼ˆä¸­ç­‰ï¼‰"><a href="#1109-èˆªç­é¢„è®¢ç»Ÿè®¡ï¼ˆä¸­ç­‰ï¼‰" class="headerlink" title="1109. èˆªç­é¢„è®¢ç»Ÿè®¡ï¼ˆä¸­ç­‰ï¼‰"></a>1109. èˆªç­é¢„è®¢ç»Ÿè®¡ï¼ˆä¸­ç­‰ï¼‰</h2><h3 id="é¢˜ç›®æè¿°-4"><a href="#é¢˜ç›®æè¿°-4" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">è¿™é‡Œæœ‰ Â nÂ  ä¸ªèˆªç­ï¼Œå®ƒä»¬åˆ†åˆ«ä» 1 åˆ° n è¿›è¡Œç¼–å·ã€‚</span><br><span class="line"></span><br><span class="line">æˆ‘ä»¬è¿™å„¿æœ‰ä¸€ä»½èˆªç­é¢„è®¢è¡¨ï¼Œè¡¨ä¸­ç¬¬ Â iÂ  æ¡é¢„è®¢è®°å½• Â bookings[i] = [i, j, k]Â  æ„å‘³ç€æˆ‘ä»¬åœ¨ä» Â iÂ  åˆ° Â jÂ  çš„æ¯ä¸ªèˆªç­ä¸Šé¢„è®¢äº† k ä¸ªåº§ä½ã€‚</span><br><span class="line"></span><br><span class="line">è¯·ä½ è¿”å›ä¸€ä¸ªé•¿åº¦ä¸º n çš„æ•°ç»„ Â answerï¼ŒæŒ‰èˆªç­ç¼–å·é¡ºåºè¿”å›æ¯ä¸ªèˆªç­ä¸Šé¢„è®¢çš„åº§ä½æ•°ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ç¤ºä¾‹ï¼š</span><br><span class="line"></span><br><span class="line">è¾“å…¥ï¼šbookings = [[1,2,10],[2,3,20],[2,5,25]], n = 5</span><br><span class="line">è¾“å‡ºï¼š[10,55,45,25,25]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">æç¤ºï¼š</span><br><span class="line"></span><br><span class="line">1 &lt;= bookings.length &lt;= 20000</span><br><span class="line">1 &lt;= bookings[i][0] &lt;= bookings[i][1] &lt;= n &lt;= 20000</span><br><span class="line">1 &lt;= bookings[i][2] &lt;= 10000</span><br></pre></td></tr></table></figure><h3 id="å‰ç½®çŸ¥è¯†-4"><a href="#å‰ç½®çŸ¥è¯†-4" class="headerlink" title="å‰ç½®çŸ¥è¯†"></a>å‰ç½®çŸ¥è¯†</h3><ul><li>å‰ç¼€å’Œ</li></ul><h3 id="æ€è·¯-4"><a href="#æ€è·¯-4" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p>è¿™é“é¢˜çš„é¢˜ç›®æè¿°ä¸æ˜¯å¾ˆæ¸…æ¥šã€‚æˆ‘ç®€å•åˆ†æä¸€ä¸‹é¢˜ç›®ï¼š</p><p>[i, j, k] å…¶å®ä»£è¡¨çš„æ˜¯ ç¬¬ i ç«™ä¸Šæ¥äº† k ä¸ªäººï¼Œ ä¸€ç›´åˆ° ç¬¬ j ç«™éƒ½åœ¨é£æœºä¸Šï¼Œåˆ°ç¬¬ j + 1 å°±ä¸åœ¨é£æœºä¸Šäº†ã€‚æ‰€ä»¥ç¬¬ i ç«™åˆ°ç¬¬ j ç«™çš„<strong>æ¯ä¸€ç«™</strong>éƒ½ä¼šå› æ­¤å¤š k ä¸ªäººã€‚</p><p>ç†è§£äº†é¢˜ç›®åªä¼šä¸éš¾å†™å‡ºä¸‹é¢çš„ä»£ç ã€‚</p><details>    <summary>Python</summary><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">corpFlightBookings</span><span class="params">(self, bookings: List[List[int]], n: int)</span> -&gt; List[int]:</span></span><br><span class="line">        counter = [<span class="number">0</span>] * n</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i, j, k <span class="keyword">in</span> bookings:</span><br><span class="line">            <span class="keyword">while</span> i &lt;= j:</span><br><span class="line">                counter[i - <span class="number">1</span>] += k</span><br><span class="line">                i += <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> counter</span><br></pre></td></tr></table></figure></details><p>å¦‚ä¸Šçš„ä»£ç å¤æ‚åº¦å¤ªé«˜ï¼Œæ— æ³•é€šè¿‡å…¨éƒ¨çš„æµ‹è¯•ç”¨ä¾‹ã€‚</p><p><strong>æ³¨æ„åˆ°é‡Œå±‚çš„ while å¾ªç¯æ˜¯è¿ç»­çš„æ•°ç»„å…¨éƒ¨åŠ ä¸Šä¸€ä¸ªæ•°å­—ï¼Œä¸éš¾æƒ³åˆ°å¯ä»¥åˆ©ç”¨æ¯é¢˜ 0 çš„å‰ç¼€å’Œæ€è·¯ä¼˜åŒ–ã€‚</strong></p><p>ä¸€ç§æ€è·¯å°±æ˜¯åœ¨ i çš„ä½ç½® + kï¼Œ ç„¶ååˆ©ç”¨å‰ç¼€å’Œçš„æŠ€å·§ç»™ i åˆ° n çš„å…ƒç´ éƒ½åŠ ä¸Š kã€‚ä½†æ˜¯é¢˜ç›®éœ€è¦åŠ çš„æ˜¯ä¸€ä¸ªåŒºé—´ï¼Œ j + 1 åŠå…¶ä¹‹åçš„å…ƒç´ ä¼šè¢«å¤šåŠ ä¸€ä¸ª kã€‚ä¸€ä¸ªç®€å•çš„æŠ€å·§å°±æ˜¯ç»™ j + 1 çš„å…ƒç´ å‡å» kï¼Œè¿™æ ·æ­£è´Ÿå°±å¯ä»¥æŠµæ¶ˆã€‚</p><h3 id="ä»£ç ï¼ˆPythonï¼‰-4"><a href="#ä»£ç ï¼ˆPythonï¼‰-4" class="headerlink" title="ä»£ç ï¼ˆPythonï¼‰"></a>ä»£ç ï¼ˆPythonï¼‰</h3><details>    <summary>Python</summary><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">corpFlightBookings</span><span class="params">(self, bookings: List[List[int]], n: int)</span> -&gt; List[int]:</span></span><br><span class="line">        counter = [<span class="number">0</span>] * (n + <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i, j, k <span class="keyword">in</span> bookings:</span><br><span class="line">            counter[i - <span class="number">1</span>] += k</span><br><span class="line">            <span class="keyword">if</span> j &lt; n: counter[j] -= k</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n + <span class="number">1</span>):</span><br><span class="line">            counter[i] += counter[i - <span class="number">1</span>]</span><br><span class="line">        <span class="keyword">return</span> counter[:<span class="number">-1</span>]</span><br></pre></td></tr></table></figure></details><p><strong>å¤æ‚åº¦åˆ†æ</strong></p><ul><li>æ—¶é—´å¤æ‚åº¦ï¼š<em>O(N)*ï¼Œä¸­ *N</em> ä¸ºæ•°ç»„é•¿åº¦ã€‚</li><li>ç©ºé—´å¤æ‚åº¦ï¼š<em>O(N)</em>ã€‚</li></ul><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>è¿™å‡ é“é¢˜éƒ½æ˜¯æ»‘åŠ¨çª—å£å’Œå‰ç¼€å’Œçš„æ€è·¯ã€‚åŠ›æ‰£ç±»ä¼¼çš„é¢˜ç›®è¿˜çœŸä¸å°‘ï¼Œå¤§å®¶åªæœ‰å¤šç•™å¿ƒï¼Œå°±ä¼šå‘ç°è¿™ä¸ªå¥—è·¯ã€‚</p><p>å‰ç¼€å’Œçš„æŠ€å·§ä»¥åŠæ»‘åŠ¨çª—å£çš„æŠ€å·§éƒ½æ¯”è¾ƒå›ºå®šï¼Œä¸”æœ‰æ¨¡æ¿å¯å¥—ã€‚ éš¾ç‚¹å°±åœ¨äºæˆ‘æ€ä¹ˆæ‰èƒ½æƒ³åˆ°å¯ä»¥ç”¨è¿™ä¸ªæŠ€å·§å‘¢ï¼Ÿ</p><p>æˆ‘è¿™é‡Œæ€»ç»“äº†ä¸¤ç‚¹ï¼š</p><ol><li>æ‰¾å…³é”®å­—ã€‚æ¯”å¦‚é¢˜ç›®ä¸­æœ‰è¿ç»­ï¼Œå°±åº”è¯¥æ¡ä»¶åå°„æƒ³åˆ°æ»‘åŠ¨çª—å£å’Œå‰ç¼€å’Œã€‚æ¯”å¦‚é¢˜ç›®æ±‚æœ€å¤§æœ€å°å°±æƒ³åˆ°åŠ¨æ€è§„åˆ’å’Œè´ªå¿ƒç­‰ç­‰ã€‚æƒ³åˆ°ä¹‹åï¼Œå°±å¯ä»¥å’Œé¢˜ç›®ä¿¡æ¯å¯¹æ¯”å¿«é€Ÿæ’é™¤é”™è¯¯çš„ç®—æ³•ï¼Œæ‰¾åˆ°å¯è¡Œè§£ã€‚è¿™ä¸ªæ€è€ƒçš„æ—¶é—´ä¼šéšç€ä½ çš„é¢˜æ„Ÿå¢åŠ è€Œé™ä½ã€‚</li><li>å…ˆå†™å‡ºæš´åŠ›è§£ï¼Œç„¶åæ‰¾æš´åŠ›è§£çš„ç“¶é¢ˆï¼Œ æ ¹æ®ç“¶é¢ˆå°±å¾ˆå®¹æ˜“çŸ¥é“åº”è¯¥ç”¨ä»€ä¹ˆæ•°æ®ç»“æ„å’Œç®—æ³•å»ä¼˜åŒ–ã€‚</li></ol><p>æœ€åæ¨èå‡ é“ç±»ä¼¼çš„é¢˜ç›®ï¼Œ ä¾›å¤§å®¶ç»ƒä¹ ï¼Œä¸€å®šè¦è‡ªå·±å†™å‡ºæ¥æ‰è¡Œå“¦ã€‚</p><ul><li><a href="https://leetcode-cn.com/problems/range-sum-query-immutable/description/" target="_blank" rel="noopener">303. åŒºåŸŸå’Œæ£€ç´¢ - æ•°ç»„ä¸å¯å˜</a></li><li><a href="https://lucifer.ren/blog/2019/12/11/leetcode-1186/" target="_blank" rel="noopener">1186.åˆ é™¤ä¸€æ¬¡å¾—åˆ°å­æ•°ç»„æœ€å¤§å’Œ</a></li><li><a href="https://lucifer.ren/blog/2020/01/09/1310.xor-queries-of-a-subarray/" target="_blank" rel="noopener">1310. å­æ•°ç»„å¼‚æˆ–æŸ¥è¯¢</a></li><li><a href="https://github.com/azl397985856/leetcode/blob/master/problems/1371.find-the-longest-substring-containing-vowels-in-even-counts.md" target="_blank" rel="noopener">1371. æ¯ä¸ªå…ƒéŸ³åŒ…å«å¶æ•°æ¬¡çš„æœ€é•¿å­å­—ç¬¦ä¸²</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä½ éœ€è¦è¾“å‡ºå­—ç¬¦ä¸²s ä¸­ p çš„ä¸åŒçš„éç©ºå­ä¸²çš„æ•°ç›®ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="2021å¹´11æœˆ" scheme="http://yoursite.com/categories/2021%E5%B9%B411%E6%9C%88/"/>
    
    
      <category term="Leetcode" scheme="http://yoursite.com/tags/Leetcode/"/>
    
      <category term="Dynamic Programming" scheme="http://yoursite.com/tags/Dynamic-Programming/"/>
    
  </entry>
  
  <entry>
    <title>992. K ä¸ªä¸åŒæ•´æ•°çš„å­æ•°ç»„</title>
    <link href="http://yoursite.com/2021/11/07/992.%20K%20%E4%B8%AA%E4%B8%8D%E5%90%8C%E6%95%B4%E6%95%B0%E7%9A%84%E5%AD%90%E6%95%B0%E7%BB%84/"/>
    <id>http://yoursite.com/2021/11/07/992. K ä¸ªä¸åŒæ•´æ•°çš„å­æ•°ç»„/</id>
    <published>2021-11-07T04:12:12.000Z</published>
    <updated>2021-11-08T06:37:41.364Z</updated>
    
    <content type="html"><![CDATA[<p>è¿”å›Aä¸­å¥½å­æ•°ç»„çš„æ•°ç›®ã€‚</p><a id="more"></a><p>[TOC]</p><p>ç»™å®šä¸€ä¸ªæ­£æ•´æ•°æ•°ç»„ Aï¼Œå¦‚æœ Açš„æŸä¸ªå­æ•°ç»„ä¸­ä¸åŒæ•´æ•°çš„ä¸ªæ•°æ°å¥½ä¸º Kï¼Œåˆ™ç§° A çš„è¿™ä¸ªè¿ç»­ã€ä¸ä¸€å®šä¸åŒçš„å­æ•°ç»„ä¸ºå¥½å­æ•°ç»„ã€‚</p><p>ï¼ˆä¾‹å¦‚ï¼Œ[1,2,3,1,2] ä¸­æœ‰3ä¸ªä¸åŒçš„æ•´æ•°ï¼š1ï¼Œ2ï¼Œä»¥åŠ3ã€‚ï¼‰</p><p>è¿”å›Aä¸­å¥½å­æ•°ç»„çš„æ•°ç›®ã€‚</p><p>ç¤ºä¾‹ 1ï¼š</p><pre><code>è¾“å…¥ï¼šA = [1,2,1,2,3], K = 2è¾“å‡ºï¼š7è§£é‡Šï¼šæ°å¥½ç”± 2 ä¸ªä¸åŒæ•´æ•°ç»„æˆçš„å­æ•°ç»„ï¼š[1,2], [2,1], [1,2], [2,3], [1,2,1], [2,1,2], [1,2,1,2].</code></pre><p>ç¤ºä¾‹ 2ï¼š</p><pre><code>è¾“å…¥ï¼šA = [1,2,1,3,4], K = 3è¾“å‡ºï¼š3è§£é‡Šï¼šæ°å¥½ç”± 3 ä¸ªä¸åŒæ•´æ•°ç»„æˆçš„å­æ•°ç»„ï¼š[1,2,1,3], [2,1,3], [1,3,4].</code></pre><p>æç¤ºï¼š</p><pre><code>1 &lt;= A.length &lt;= 200001 &lt;= A[i] &lt;= A.length1 &lt;= K &lt;= A.length</code></pre><h1 id="ğŸ“º-è§†é¢‘è®²è§£"><a href="#ğŸ“º-è§†é¢‘è®²è§£" class="headerlink" title="ğŸ“º è§†é¢‘è®²è§£"></a>ğŸ“º è§†é¢‘è®²è§£</h1><p><a href="21472c3c-27ea-4ecf-9093-862f9b2f8e8b">992. K ä¸ªä¸åŒæ•´æ•°çš„å­æ•°ç»„.mp4</a></p><h1 id="æœ€åˆç›´è§‰ä½¿ç”¨åŒæŒ‡é’ˆç®—æ³•é‡åˆ°çš„é—®é¢˜"><a href="#æœ€åˆç›´è§‰ä½¿ç”¨åŒæŒ‡é’ˆç®—æ³•é‡åˆ°çš„é—®é¢˜" class="headerlink" title="æœ€åˆç›´è§‰ä½¿ç”¨åŒæŒ‡é’ˆç®—æ³•é‡åˆ°çš„é—®é¢˜"></a>æœ€åˆç›´è§‰ä½¿ç”¨åŒæŒ‡é’ˆç®—æ³•é‡åˆ°çš„é—®é¢˜</h1><p>å¯¹äºä¸€ä¸ªå›ºå®šçš„å·¦è¾¹ç•Œæ¥è¯´ï¼Œæ»¡è¶³ã€Œæ°å¥½å­˜åœ¨ <code>K</code> ä¸ªä¸åŒæ•´æ•°çš„å­åŒºé—´ã€çš„å³è¾¹ç•Œ <strong>ä¸å”¯ä¸€</strong>ï¼Œä¸”å½¢æˆåŒºé—´ã€‚</p><p>ç¤ºä¾‹ 1ï¼šå·¦è¾¹ç•Œå›ºå®šçš„æ—¶å€™ï¼Œæ°å¥½å­˜åœ¨ <em>2</em> ä¸ªä¸åŒæ•´æ•°çš„å­åŒºé—´ä¸º <em>[1,2],[1,2,1],[1,2,1,2]</em> ï¼Œæ€»æ•°ä¸º <em>3</em>ã€‚å…¶å€¼ä¸ºä¸‹æ ‡ <em>3 - 1 + 1*ï¼Œå³åŒºé—´ *[1..3]</em> çš„é•¿åº¦ã€‚</p><p><a href="https://pic.leetcode-cn.com/1612775858-VWbhYR-image.png" target="_blank" rel="noopener">image.png</a></p><p>é¡»è¦æ‰¾åˆ°å·¦è¾¹ç•Œå›ºå®šçš„æƒ…å†µä¸‹ï¼Œæ»¡è¶³ã€Œæ°å¥½å­˜åœ¨ <code>K</code> ä¸ªä¸åŒæ•´æ•°çš„å­åŒºé—´ã€æœ€å°å³è¾¹ç•Œå’Œæœ€å¤§å³è¾¹ç•Œã€‚å¯¹æ¯”ä»¥å‰æˆ‘ä»¬åšè¿‡çš„ï¼Œä½¿ç”¨åŒæŒ‡é’ˆè§£å†³çš„é—®é¢˜çš„é—®æ³•åŸºæœ¬éƒ½ä¼šå‡ºç°ã€Œæœ€å°ã€ã€ã€Œæœ€å¤§ã€è¿™æ ·çš„å­—çœ¼ã€‚</p><ul><li><a href="/problems/minimum-window-substring/">76. æœ€å°è¦†ç›–å­ä¸²</a>ï¼›</li><li><a href="/problems/minimum-size-subarray-sum/">209. é•¿åº¦æœ€å°çš„å­æ•°ç»„</a>ï¼›</li><li><a href="/problems/longest-substring-with-at-most-two-distinct-characters/">159. è‡³å¤šåŒ…å«ä¸¤ä¸ªä¸åŒå­—ç¬¦çš„æœ€é•¿å­ä¸²</a>ï¼›</li><li><a href="/problems/longest-repeating-character-replacement/">424. æ›¿æ¢åçš„æœ€é•¿é‡å¤å­—ç¬¦</a>ã€‚</li></ul><h1 id="æŠŠåŸé—®é¢˜è½¬æ¢æˆä¸ºå®¹æ˜“æ±‚è§£çš„é—®é¢˜"><a href="#æŠŠåŸé—®é¢˜è½¬æ¢æˆä¸ºå®¹æ˜“æ±‚è§£çš„é—®é¢˜" class="headerlink" title="æŠŠåŸé—®é¢˜è½¬æ¢æˆä¸ºå®¹æ˜“æ±‚è§£çš„é—®é¢˜"></a>æŠŠåŸé—®é¢˜è½¬æ¢æˆä¸ºå®¹æ˜“æ±‚è§£çš„é—®é¢˜</h1><blockquote><p>å‹æƒ…æç¤ºï¼šè¿™é‡ŒæŠŠ ã€Œæ°å¥½ã€ è½¬æ¢æˆä¸º ã€Œæœ€å¤šã€é¡»è¦ä¸€ç‚¹æ±‚è§£ã€ŒåŒæŒ‡é’ˆï¼ˆæ»‘åŠ¨çª—å£ï¼‰ã€é—®é¢˜çš„ç»éªŒã€‚å»ºç«‹åœ¨ç†Ÿç»ƒæŒæ¡è¿™ä¸€ç±»é—®é¢˜æ±‚è§£æ€è·¯çš„åŸºç¡€ä¸Šã€‚</p></blockquote><p>æŠŠã€Œ<strong>æ°å¥½</strong>ã€æ”¹æˆã€Œ<strong>æœ€å¤š</strong>ã€å°±å¯ä»¥ä½¿ç”¨åŒæŒ‡é’ˆä¸€å‰ä¸€åäº¤æ›¿å‘å³çš„æ–¹æ³•å®Œæˆï¼Œè¿™æ˜¯å› ä¸º <strong>å¯¹äºæ¯ä¸€ä¸ªç¡®å®šçš„å·¦è¾¹ç•Œï¼Œæœ€å¤šåŒ…å« <em>K</em> ç§ä¸åŒæ•´æ•°çš„å³è¾¹ç•Œæ˜¯å”¯ä¸€ç¡®å®šçš„</strong>ï¼Œå¹¶ä¸”åœ¨å·¦è¾¹ç•Œå‘å³ç§»åŠ¨çš„è¿‡ç¨‹ä¸­ï¼Œå³è¾¹ç•Œæˆ–è€…åœ¨åŸæ¥çš„åœ°æ–¹ï¼Œæˆ–è€…åœ¨åŸæ¥åœ°æ–¹çš„å³è¾¹ã€‚</p><p>è€Œã€Œæœ€å¤šå­˜åœ¨ <em>K</em> ä¸ªä¸åŒæ•´æ•°çš„å­åŒºé—´çš„ä¸ªæ•°ã€ä¸ã€Œæ°å¥½å­˜åœ¨ <code>K</code> ä¸ªä¸åŒæ•´æ•°çš„å­åŒºé—´çš„ä¸ªæ•°ã€çš„å·®æ°å¥½ç­‰äºã€Œæœ€å¤šå­˜åœ¨ <em>K - 1</em> ä¸ªä¸åŒæ•´æ•°çš„å­åŒºé—´çš„ä¸ªæ•°ã€ã€‚</p><p><a href="https://pic.leetcode-cn.com/1612776085-sZFGqE-image.png" target="_blank" rel="noopener">image.png</a></p><p>å› ä¸ºåŸé—®é¢˜å°±è½¬æ¢æˆä¸ºæ±‚è§£ã€Œæœ€å¤šå­˜åœ¨ <em>K</em> ä¸ªä¸åŒæ•´æ•°çš„å­åŒºé—´çš„ä¸ªæ•°ã€ä¸ ã€Œæœ€å¤šå­˜åœ¨ <em>K - 1</em> ä¸ªä¸åŒæ•´æ•°çš„å­åŒºé—´çš„ä¸ªæ•°ã€ï¼Œå®ƒä»¬å…¶å®æ˜¯ä¸€ä¸ªé—®é¢˜ã€‚</p><h1 id="æ–¹æ³•ï¼šåŒæŒ‡é’ˆï¼ˆæ»‘åŠ¨çª—å£ï¼‰"><a href="#æ–¹æ³•ï¼šåŒæŒ‡é’ˆï¼ˆæ»‘åŠ¨çª—å£ï¼‰" class="headerlink" title="æ–¹æ³•ï¼šåŒæŒ‡é’ˆï¼ˆæ»‘åŠ¨çª—å£ï¼‰"></a>æ–¹æ³•ï¼šåŒæŒ‡é’ˆï¼ˆæ»‘åŠ¨çª—å£ï¼‰</h1><p>å®ç°å‡½æ•° <code>atMostWithKDistinct(A, K)</code> ï¼Œè¡¨ç¤ºã€Œæœ€å¤šå­˜åœ¨ <em>K</em> ä¸ªä¸åŒæ•´æ•°çš„å­åŒºé—´çš„ä¸ªæ•°ã€ã€‚äºæ˜¯ <code>atMostWithKDistinct(A, K) - atMostWithKDistinct(A, K - 1)</code> å³ä¸ºæ‰€æ±‚ã€‚</p><p><strong>å‚è€ƒä»£ç </strong>ï¼š</p><details>    <summary>Java</summary><figure class="highlight java"><figcaption><span>[]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">subarraysWithKDistinct</span><span class="params">(<span class="keyword">int</span>[] A, <span class="keyword">int</span> K)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> atMostKDistinct(A, K) - atMostKDistinct(A, K - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> A</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> K</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æœ€å¤šåŒ…å« K ä¸ªä¸åŒæ•´æ•°çš„å­åŒºé—´çš„ä¸ªæ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">atMostKDistinct</span><span class="params">(<span class="keyword">int</span>[] A, <span class="keyword">int</span> K)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> len = A.length;</span><br><span class="line">        <span class="keyword">int</span>[] freq = <span class="keyword">new</span> <span class="keyword">int</span>[len + <span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> left = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> right = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// [left, right) é‡Œä¸åŒæ•´æ•°çš„ä¸ªæ•°</span></span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// [left, right) åŒ…å«ä¸åŒæ•´æ•°çš„ä¸ªæ•°å°äºç­‰äº K</span></span><br><span class="line">        <span class="keyword">while</span> (right &lt; len) &#123;</span><br><span class="line">            <span class="keyword">if</span> (freq[A[right]] == <span class="number">0</span>) &#123;</span><br><span class="line">                count++;</span><br><span class="line">            &#125;</span><br><span class="line">            freq[A[right]]++;</span><br><span class="line">            right++;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span> (count &gt; K) &#123;</span><br><span class="line">                freq[A[left]]--;</span><br><span class="line">                <span class="keyword">if</span> (freq[A[left]] == <span class="number">0</span>) &#123;</span><br><span class="line">                    count--;</span><br><span class="line">                &#125;</span><br><span class="line">                left++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// [left, right) åŒºé—´çš„é•¿åº¦å°±æ˜¯å¯¹ç»“æœçš„è´¡çŒ®</span></span><br><span class="line">            res += right - left;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><p><strong>è¯´æ˜</strong>ï¼š <code>res += right - left;</code> è¿™è¡Œä»£ç çš„æ„æ€ï¼š</p><p>ç”¨å…·ä½“çš„ä¾‹å­ç†è§£ï¼šæœ€å¤šåŒ…å« 3 ç§ä¸åŒæ•´æ•°çš„å­åŒºé—´  <code>[1, 3, 2, 3]</code> ï¼ˆåŒæŒ‡é’ˆç®—æ³•æ˜¯åœ¨å·¦è¾¹ç•Œå›ºå®šçš„å‰æä¸‹ï¼Œè®©å³è¾¹ç•Œèµ°åˆ°æœ€å³è¾¹ï¼‰ï¼Œå½“å‰å¯ä»¥ç¡®å®š <code>1</code> å¼€å§‹çš„æ»¡è¶³æœ€å¤šåŒ…å« 3 ç§ä¸åŒæ•´æ•°çš„å­åŒºé—´æœ‰ <code>[1]</code>ã€<code>[1, 3]</code>ã€<code>[1, 3, 2]</code>ã€<code>[1, 3, 2, 3]</code>ã€‚</p><p><strong>æ‰€æœ‰çš„</strong> å·¦è¾¹ç•Œå›ºå®šå‰æä¸‹ï¼Œæ ¹æ®å³è¾¹ç•Œæœ€å³çš„ä¸‹æ ‡ï¼Œè®¡ç®—å‡ºæ¥çš„å­åŒºé—´çš„ä¸ªæ•°å°±æ˜¯æ•´ä¸ªå‡½æ•°è¦è¿”å›çš„å€¼ã€‚ç”¨å³è¾¹ç•Œå›ºå®šçš„å‰æä¸‹ï¼Œå·¦è¾¹ç•Œæœ€å·¦è¾¹çš„ä¸‹æ ‡å»è®¡ç®—ä¹Ÿæ˜¯å®Œå…¨å¯ä»¥çš„ã€‚</p><p><strong>å¤æ‚åº¦åˆ†æ</strong>ï¼š</p><ul><li>æ—¶é—´å¤æ‚åº¦ï¼š<em>O(N)*ï¼Œè¿™é‡Œ *N</em> æ˜¯è¾“å…¥æ•°ç»„çš„é•¿åº¦ï¼›</li><li>ç©ºé—´å¤æ‚åº¦ï¼š<em>O(N)</em>ï¼Œä½¿ç”¨äº†å¸¸æ•°ä¸ªå˜é‡ã€é¢‘æ•°æ•°ç»„çš„é•¿åº¦ä¸º <em>N + 1</em>ã€‚</li></ul><hr><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>ä½¿ç”¨åŒæŒ‡é’ˆï¼ˆæ»‘åŠ¨çª—å£ã€ä¸¤ä¸ªå˜é‡ä¸€å‰ä¸€åäº¤æ›¿å‘åç§»åŠ¨ï¼‰è§£å†³çš„é—®é¢˜é€šå¸¸éƒ½å’Œè¿™ä¸ªé—®é¢˜è¦é—®çš„ç»“æœæœ‰å…³ã€‚ä»¥æˆ‘ä»¬åœ¨é¢˜è§£ä¸­ç»™å‡ºçš„ 5 é“ç»å…¸é—®é¢˜ä¸ºä¾‹ï¼š</p><ul><li><a href="/problems/longest-substring-without-repeating-characters/">3. æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²</a>ï¼šæ²¡æœ‰é‡å¤çš„å­ä¸²ï¼Œä¸€å®šåªä¼šé—®ã€Œæœ€é•¿ã€ï¼Œå› ä¸ºæœ€çŸ­çš„æ²¡æœ‰é‡å¤å­—ç¬¦çš„å­ä¸²æ˜¯åªæœ‰ä¸€ä¸ªå­—ç¬¦çš„å­ä¸²ï¼› </li><li><a href="/problems/minimum-window-substring/">76. æœ€å°è¦†ç›–å­ä¸²</a>ï¼šæ±‚ä¸€ä¸ªå­—ç¬¦ä¸²çš„å­ä¸²è¦†ç›–å¦ä¸€ä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦ä¸€å®šæ˜¯é—®ã€Œæœ€å°ã€ï¼Œè€Œä¸ä¼šé—®ã€Œæœ€å¤§ã€ï¼Œå› ä¸ºæœ€å¤§ä¸€å®šæ˜¯æ•´ä¸ªå­—ç¬¦ä¸²ï¼›</li><li><a href="/problems/minimum-size-subarray-sum/">209. é•¿åº¦æœ€å°çš„å­æ•°ç»„</a>ï¼šæ‰€æœ‰å…ƒç´ éƒ½æ˜¯æ­£æ•´æ•°ï¼Œä¸”å­åŒºé—´é‡Œæ‰€æœ‰å…ƒç´ çš„å’Œå¤§äºç­‰äºå®šå€¼ <code>s</code> çš„å­åŒºé—´ä¸€å®šæ˜¯é—®é•¿åº¦ã€Œæœ€å°ã€ï¼Œè€Œä¸ä¼šé—®ã€Œæœ€å¤šã€ï¼Œå› ä¸ºæœ€å¤šä¹Ÿä¸€å®šæ˜¯æ•´ä¸ªæ•°ç»„çš„é•¿åº¦ï¼›</li><li><a href="/problems/longest-substring-with-at-most-two-distinct-characters/">159. è‡³å¤šåŒ…å«ä¸¤ä¸ªä¸åŒå­—ç¬¦çš„æœ€é•¿å­ä¸²</a>ï¼šæœ€å¤šåŒ…å«ä¸¤ä¸ªä¸åŒå­—ç¬¦ä¸€å®šæ˜¯é—®ã€Œæœ€é•¿ã€æ‰æœ‰æ„ä¹‰ï¼Œå› ä¸ºé•¿åº¦æ›´é•¿çš„å­ä¸²å¯èƒ½ä¼šåŒ…å«æ›´å¤šçš„å­—ç¬¦ï¼›</li><li><a href="/problems/longest-repeating-character-replacement/">424. æ›¿æ¢åçš„æœ€é•¿é‡å¤å­—ç¬¦</a>ï¼šæ›¿æ¢çš„æ¬¡æ•° <code>k</code> æ˜¯å®šå€¼ï¼Œæ›¿æ¢ä»¥åå­—ç¬¦å…¨éƒ¨ç›¸ç­‰çš„å­ä¸²ä¹Ÿä¸€å®šåªä¼šé—®ã€Œæœ€é•¿ã€ã€‚</li></ul><hr><h1 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h1><p><strong>æç¤º</strong>ï¼šåœ¨åšè¿™äº›é—®é¢˜çš„æ—¶å€™ï¼Œ<strong>ä¸€å®šè¦æ€è€ƒæ¸…æ¥šä¸ºä»€ä¹ˆå¯ä»¥é‡‡ç”¨åŒæŒ‡é’ˆï¼ˆæ»‘åŠ¨çª—å£ï¼‰ç®—æ³•è§£å†³å¦‚ä¸Šçš„é—®é¢˜</strong>ï¼Œä¸ºä»€ä¹ˆ <strong>å·¦ã€å³æŒ‡é’ˆå‘å³ç§»åŠ¨çš„æ—¶å€™å¯ä»¥ä¸å›å¤´</strong>ã€‚å¦‚æœä¸å¤ªç†Ÿæ‚‰è¿™ä¸€ç±»é—®é¢˜æ€è·¯çš„æœ‹å‹ï¼Œä¸€å®šè¦æƒ³æ¸…æ¥šç®—æ³•ä¸ºä»€ä¹ˆæœ‰æ•ˆï¼Œæ¯”çŸ¥é“è¿™äº›é—®é¢˜å¯ä»¥ç”¨åŒæŒ‡é’ˆï¼ˆæ»‘åŠ¨çª—å£ï¼‰ç®—æ³•è§£å†³é‡è¦å¾—å¤šã€‚</p><p>æ€è·¯ä¸€èˆ¬æ˜¯è¿™æ ·ï¼šå›ºå®šå·¦è¾¹ç•Œçš„å‰æä¸‹ï¼Œå¦‚æœè¾ƒçŸ­çš„åŒºé—´æ€§è´¨æ˜¯ä»€ä¹ˆæ ·çš„ï¼Œè¾ƒé•¿çš„åŒºé—´çš„æ€§è´¨å…¶å®æˆ‘ä»¬ä¹Ÿå¯ä»¥æ¨æµ‹å‡ºæ¥ã€‚åœ¨å³è¾¹ç•Œå›ºå®šçš„å‰æä¸‹ï¼Œæˆ‘ä»¬é¡»è¦å°†å·¦è¾¹ç•Œå³ç§»ï¼Œå¦‚æ­¤åå¤ã€‚è¿™æ ·çš„ç®—æ³•åªéå†äº†æ•°ç»„ä¸¤æ¬¡ï¼Œä¸ç”¨æšä¸¾æ‰€æœ‰å¯èƒ½çš„åŒºé—´ï¼ŒæŠŠ <em>O(N^2)</em> çš„æ—¶é—´å¤æ‚åº¦é™åˆ°äº† <em>O(N)</em>ã€‚</p><ul><li><a href="/problems/subarray-product-less-than-k/">713. ä¹˜ç§¯å°äº K çš„å­æ•°ç»„</a>ï¼›</li><li><a href="/problems/fruit-into-baskets/">904. æ°´æœæˆç¯®</a> ï¼›</li><li><a href="/problems/number-of-subarrays-with-bounded-maximum/">795. åŒºé—´å­æ•°ç»„ä¸ªæ•°</a>ï¼›</li><li><a href="/problems/number-of-substrings-containing-all-three-characters/">1358. åŒ…å«æ‰€æœ‰ä¸‰ç§å­—ç¬¦çš„å­å­—ç¬¦ä¸²æ•°ç›®</a>ï¼›</li><li><a href="/problems/unique-substrings-in-wraparound-string/">467. ç¯ç»•å­—ç¬¦ä¸²ä¸­å”¯ä¸€çš„å­å­—ç¬¦ä¸²</a>ï¼›</li><li><a href="/problems/longest-substring-with-at-most-k-distinct-characters/">340. è‡³å¤šåŒ…å« K ä¸ªä¸åŒå­—ç¬¦çš„æœ€é•¿å­ä¸²</a>ã€‚</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è¿”å›Aä¸­å¥½å­æ•°ç»„çš„æ•°ç›®ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="2021å¹´11æœˆ" scheme="http://yoursite.com/categories/2021%E5%B9%B411%E6%9C%88/"/>
    
    
      <category term="Array" scheme="http://yoursite.com/tags/Array/"/>
    
      <category term="Hash Table" scheme="http://yoursite.com/tags/Hash-Table/"/>
    
      <category term="Leetcode" scheme="http://yoursite.com/tags/Leetcode/"/>
    
      <category term="Sliding Window" scheme="http://yoursite.com/tags/Sliding-Window/"/>
    
      <category term="Counting" scheme="http://yoursite.com/tags/Counting/"/>
    
  </entry>
  
  <entry>
    <title>340. è‡³å¤šåŒ…å« K ä¸ªä¸åŒå­—ç¬¦çš„æœ€é•¿å­ä¸²</title>
    <link href="http://yoursite.com/2021/11/07/340.%20%E8%87%B3%E5%A4%9A%E5%8C%85%E5%90%AB%20K%20%E4%B8%AA%E4%B8%8D%E5%90%8C%E5%AD%97%E7%AC%A6%E7%9A%84%E6%9C%80%E9%95%BF%E5%AD%90%E4%B8%B2/"/>
    <id>http://yoursite.com/2021/11/07/340. è‡³å¤šåŒ…å« K ä¸ªä¸åŒå­—ç¬¦çš„æœ€é•¿å­ä¸²/</id>
    <published>2021-11-07T03:12:12.000Z</published>
    <updated>2021-11-07T04:15:35.403Z</updated>
    
    <content type="html"><![CDATA[<p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²sï¼Œæ‰¾å‡ºè‡³å¤šåŒ…å«kä¸ªä¸åŒå­—ç¬¦çš„æœ€é•¿å­ä¸² Tã€‚</p><a id="more"></a><p>[TOC]</p><p>ç¤ºä¾‹ 1:</p><pre><code>è¾“å…¥: s = &quot;eceba&quot;, k = 2è¾“å‡º: 3è§£é‡Š: åˆ™ T ä¸º &quot;ece&quot;ï¼Œæ‰€ä»¥é•¿åº¦ä¸º 3ã€‚</code></pre><p>ç¤ºä¾‹ 2:</p><pre><code>è¾“å…¥: s = &quot;aa&quot;, k = 1è¾“å‡º: 2è§£é‡Š: åˆ™ T ä¸º &quot;aa&quot;ï¼Œæ‰€ä»¥é•¿åº¦ä¸º 2ã€‚</code></pre><h1 id="æ»‘åŠ¨çª—å£"><a href="#æ»‘åŠ¨çª—å£" class="headerlink" title="æ»‘åŠ¨çª—å£"></a>æ»‘åŠ¨çª—å£</h1><details>    <summary>Java</summary><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">public int lengthOfLongestSubstringTwoDistinct(String s,int k) &#123;</span><br><span class="line">       int i = 0, j = 0, n = s.length(), maxlen = 0;</span><br><span class="line">       Map&lt;Character,Integer&gt; map = new HashMap();</span><br><span class="line">       while (j &lt; n) &#123;</span><br><span class="line">           if (map.size() &lt;= k &amp;&amp; j &lt; n) &#123;</span><br><span class="line">               map.put(s.charAt(j), map.getOrDefault(s.charAt(j), 0) + 1);</span><br><span class="line">               j++;</span><br><span class="line">           &#125;</span><br><span class="line">           while (map.size() &gt; k) &#123;</span><br><span class="line">               map.put(s.charAt(i), map.getOrDefault(s.charAt(i), 0) - 1);</span><br><span class="line">               if (map.getOrDefault(s.charAt(i), 0) &lt;= 0) &#123;</span><br><span class="line">                   map.remove(s.charAt(i));</span><br><span class="line">               &#125;</span><br><span class="line">               i++;</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">           maxlen = Math.max(maxlen, j - i);</span><br><span class="line">       &#125;</span><br><span class="line">       return maxlen;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>C++</summary><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">    int lengthOfLongestSubstringTwoDistinct(string s,int k) &#123;</span><br><span class="line">    int i = 0, j = 0, maxlen = 0;</span><br><span class="line">    unordered_map&lt;char, int&gt; m;</span><br><span class="line">    while(j &lt; s.size())</span><br><span class="line">    &#123;</span><br><span class="line">    if(m.size() &lt;= k)</span><br><span class="line">                ++m[s[j++]];</span><br><span class="line">            while(m.size()&gt;k)</span><br><span class="line">            &#123;</span><br><span class="line">                if(--m[s[i]] == 0)</span><br><span class="line">                    m.erase(s[i]);</span><br><span class="line">                i++;</span><br><span class="line">            &#125;</span><br><span class="line">    maxlen = max(maxlen, j-i);</span><br><span class="line">    &#125;</span><br><span class="line">    return maxlen;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></details>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²sï¼Œæ‰¾å‡ºè‡³å¤šåŒ…å«kä¸ªä¸åŒå­—ç¬¦çš„æœ€é•¿å­ä¸² Tã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="2021å¹´11æœˆ" scheme="http://yoursite.com/categories/2021%E5%B9%B411%E6%9C%88/"/>
    
    
      <category term="Hash Table" scheme="http://yoursite.com/tags/Hash-Table/"/>
    
      <category term="Leetcode" scheme="http://yoursite.com/tags/Leetcode/"/>
    
      <category term="String" scheme="http://yoursite.com/tags/String/"/>
    
      <category term="Two Pointers" scheme="http://yoursite.com/tags/Two-Pointers/"/>
    
      <category term="Sliding Window" scheme="http://yoursite.com/tags/Sliding-Window/"/>
    
  </entry>
  
  <entry>
    <title>159. è‡³å¤šåŒ…å«ä¸¤ä¸ªä¸åŒå­—ç¬¦çš„æœ€é•¿å­ä¸²</title>
    <link href="http://yoursite.com/2021/11/07/159.%20%E8%87%B3%E5%A4%9A%E5%8C%85%E5%90%AB%E4%B8%A4%E4%B8%AA%E4%B8%8D%E5%90%8C%E5%AD%97%E7%AC%A6%E7%9A%84%E6%9C%80%E9%95%BF%E5%AD%90%E4%B8%B2/"/>
    <id>http://yoursite.com/2021/11/07/159. è‡³å¤šåŒ…å«ä¸¤ä¸ªä¸åŒå­—ç¬¦çš„æœ€é•¿å­ä¸²/</id>
    <published>2021-11-07T01:03:12.000Z</published>
    <updated>2021-11-07T03:49:25.926Z</updated>
    
    <content type="html"><![CDATA[<p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²sï¼Œæ‰¾å‡ºè‡³å¤šåŒ…å«ä¸¤ä¸ªä¸åŒå­—ç¬¦çš„æœ€é•¿å­ä¸² t ï¼Œå¹¶è¿”å›è¯¥å­ä¸²çš„é•¿åº¦ã€‚</p><a id="more"></a><p>[TOC]</p><p>ç¤ºä¾‹ 1:</p><pre><code>è¾“å…¥: &quot;eceba&quot;è¾“å‡º: 3è§£é‡Š: t æ˜¯ &quot;ece&quot;ï¼Œé•¿åº¦ä¸º3ã€‚</code></pre><p>ç¤ºä¾‹ 2:</p><pre><code>è¾“å…¥: &quot;ccaabbb&quot;è¾“å‡º: 5è§£é‡Š: t æ˜¯ &quot;aabbb&quot;ï¼Œé•¿åº¦ä¸º5ã€‚</code></pre><h1 id="æ»‘åŠ¨çª—å£"><a href="#æ»‘åŠ¨çª—å£" class="headerlink" title="æ»‘åŠ¨çª—å£"></a>æ»‘åŠ¨çª—å£</h1><details>    <summary>Java</summary><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">public int lengthOfLongestSubstringTwoDistinct(String s) &#123;</span><br><span class="line">       int k = 2, i = 0, j = 0, n = s.length(), maxlen = 0;</span><br><span class="line">       Map&lt;Character,Integer&gt; map = new HashMap();</span><br><span class="line">       while (j &lt; n) &#123;</span><br><span class="line">           if (map.size() &lt;= k &amp;&amp; j &lt; n) &#123;</span><br><span class="line">               map.put(s.charAt(j), map.getOrDefault(s.charAt(j), 0) + 1);</span><br><span class="line">               j++;</span><br><span class="line">           &#125;</span><br><span class="line">           while (map.size() &gt; k) &#123;</span><br><span class="line">               map.put(s.charAt(i), map.getOrDefault(s.charAt(i), 0) - 1);</span><br><span class="line">               if (map.getOrDefault(s.charAt(i), 0) &lt;= 0) &#123;</span><br><span class="line">                   map.remove(s.charAt(i));</span><br><span class="line">               &#125;</span><br><span class="line">               i++;</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">           maxlen = Math.max(maxlen, j - i);</span><br><span class="line">       &#125;</span><br><span class="line">       return maxlen;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>C++</summary><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">    int lengthOfLongestSubstringTwoDistinct(string s) &#123;</span><br><span class="line">    int k = 2, i = 0, j = 0, maxlen = 0;</span><br><span class="line">    unordered_map&lt;char, int&gt; m;</span><br><span class="line">    while(j &lt; s.size())</span><br><span class="line">    &#123;</span><br><span class="line">    if(m.size() &lt;= k)</span><br><span class="line">                ++m[s[j++]];</span><br><span class="line">            while(m.size()&gt;k)</span><br><span class="line">            &#123;</span><br><span class="line">                if(--m[s[i]] == 0)</span><br><span class="line">                    m.erase(s[i]);</span><br><span class="line">                i++;</span><br><span class="line">            &#125;</span><br><span class="line">    maxlen = max(maxlen, j-i);</span><br><span class="line">    &#125;</span><br><span class="line">    return maxlen;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></details>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²sï¼Œæ‰¾å‡ºè‡³å¤šåŒ…å«ä¸¤ä¸ªä¸åŒå­—ç¬¦çš„æœ€é•¿å­ä¸² t ï¼Œå¹¶è¿”å›è¯¥å­ä¸²çš„é•¿åº¦ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="2021å¹´11æœˆ" scheme="http://yoursite.com/categories/2021%E5%B9%B411%E6%9C%88/"/>
    
    
      <category term="Hash Table" scheme="http://yoursite.com/tags/Hash-Table/"/>
    
      <category term="Leetcode" scheme="http://yoursite.com/tags/Leetcode/"/>
    
      <category term="String" scheme="http://yoursite.com/tags/String/"/>
    
      <category term="Two Pointers" scheme="http://yoursite.com/tags/Two-Pointers/"/>
    
      <category term="Sliding Window" scheme="http://yoursite.com/tags/Sliding-Window/"/>
    
  </entry>
  
  <entry>
    <title>3. æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²</title>
    <link href="http://yoursite.com/2021/11/05/3.%20%E6%97%A0%E9%87%8D%E5%A4%8D%E5%AD%97%E7%AC%A6%E7%9A%84%E6%9C%80%E9%95%BF%E5%AD%90%E4%B8%B2/"/>
    <id>http://yoursite.com/2021/11/05/3. æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²/</id>
    <published>2021-11-05T04:03:12.000Z</published>
    <updated>2021-11-06T13:34:01.945Z</updated>
    
    <content type="html"><![CDATA[<p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¯·ä½ æ‰¾å‡ºå…¶ä¸­ä¸å«æœ‰é‡å¤å­—ç¬¦çš„ æœ€é•¿å­ä¸² çš„é•¿åº¦ã€‚</p><a id="more"></a><p>[TOC]</p><p>ç¤ºä¾‹ 1:</p><pre><code>è¾“å…¥: &quot;abcabcbb&quot;è¾“å‡º: 3 è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ &quot;abc&quot;ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 3ã€‚</code></pre><p>ç¤ºä¾‹ 2:</p><pre><code>è¾“å…¥: &quot;bbbbb&quot;è¾“å‡º: 1è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ &quot;b&quot;ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 1ã€‚</code></pre><p>ç¤ºä¾‹ 3:</p><pre><code>è¾“å…¥: &quot;pwwkew&quot;è¾“å‡º: 3è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ &quot;wke&quot;ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 3ã€‚     è¯·æ³¨æ„ï¼Œä½ çš„ç­”æ¡ˆå¿…é¡»æ˜¯ å­ä¸² çš„é•¿åº¦ï¼Œ&quot;pwke&quot; æ˜¯ä¸€ä¸ªå­åºåˆ—ï¼Œä¸æ˜¯å­ä¸²ã€‚</code></pre><h1 id="ğŸ“º-è§†é¢‘é¢˜è§£"><a href="#ğŸ“º-è§†é¢‘é¢˜è§£" class="headerlink" title="ğŸ“º è§†é¢‘é¢˜è§£"></a>ğŸ“º è§†é¢‘é¢˜è§£</h1><p><a href="fc6033f3-e9c6-41d7-b660-328fc288d2e2">3. æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²_2.mp4</a></p><h1 id="ğŸ“–-æ–‡å­—é¢˜è§£"><a href="#ğŸ“–-æ–‡å­—é¢˜è§£" class="headerlink" title="ğŸ“– æ–‡å­—é¢˜è§£"></a>ğŸ“– æ–‡å­—é¢˜è§£</h1><h2 id="æ–¹æ³•ä¸€ï¼šæš´åŠ›è§£æ³•"><a href="#æ–¹æ³•ä¸€ï¼šæš´åŠ›è§£æ³•" class="headerlink" title="æ–¹æ³•ä¸€ï¼šæš´åŠ›è§£æ³•"></a>æ–¹æ³•ä¸€ï¼šæš´åŠ›è§£æ³•</h2><p>æˆ‘ä¸€å¼€å§‹æƒ³åˆ°çš„æ˜¯ä¸€ä¸ªæ¯”è¾ƒç²—æš´çš„æ–¹æ³•ï¼Œéå†å­—ç¬¦ä¸²ä¸­çš„æ¯ä¸€ä¸ªä½ç½®ï¼Œç„¶ååœ¨è¯¥ä½ç½®å‘ä¸¤è¾¹æ‰©å±•ï¼Œç›´åˆ°é‡åˆ°é‡å¤çš„å­—ç¬¦ï¼Œæœ€åç»Ÿè®¡é•¿åº¦ï¼Œä½†è¿™ç§æ–¹æ³•æ•ˆç‡è¾ƒä½</p><details>    <summary>Javaæš´åŠ›è§£æ³•</summary><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">    public int lengthOfLongestSubstring(String s) &#123;</span><br><span class="line">        int maxlen = 0;</span><br><span class="line">        for (int i = 0; i &lt; s.length(); i++) &#123;</span><br><span class="line">            int j = i ;</span><br><span class="line">            int k = i ;</span><br><span class="line">            while (j &gt; 0) &#123;</span><br><span class="line">                if (s.substring(j, k + 1).contains(s.substring(j-1,j))) &#123;</span><br><span class="line">                    break;</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    j--;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            while (k &lt; s.length()-1) &#123;</span><br><span class="line">                if (s.substring(j, k+1).contains(s.substring(k + 1,k+2))) &#123;</span><br><span class="line">                    break;</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    k++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            maxlen = Math.max(maxlen, k - j + 1);</span><br><span class="line">        &#125;</span><br><span class="line">        return maxlen;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>C++æš´åŠ›è§£æ³•</summary><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">    int lengthOfLongestSubstring(string s)&#123;</span><br><span class="line">        long len=s.size();</span><br><span class="line">        int maxlen=0;</span><br><span class="line">        for(int i=0; i&lt;len; i++)&#123;</span><br><span class="line">            int j=i, k=i;</span><br><span class="line">            //å‘å·¦æœç´¢</span><br><span class="line">            while (j&gt;0) &#123;</span><br><span class="line">                string subs=s.substr(j, k-j+1);</span><br><span class="line">                string curs=s.substr(j-1, 1);</span><br><span class="line">                if(subs.find(curs) == string::npos)&#123;</span><br><span class="line">                    j--;</span><br><span class="line">                &#125;else&#123;</span><br><span class="line">                    break;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            //å‘å³æœç´¢</span><br><span class="line">            while (k&lt;len-1) &#123;</span><br><span class="line">                string subs=s.substr(j, k-j+1);</span><br><span class="line">                string curs=s.substr(k+1, 1);</span><br><span class="line">                if(subs.find(curs) == string::npos)&#123;</span><br><span class="line">                    k++;</span><br><span class="line">                &#125;else&#123;</span><br><span class="line">                    break;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            maxlen=max(maxlen, k-j+1);</span><br><span class="line">        &#125;</span><br><span class="line">        return maxlen;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><p>æ—¶é—´å¤æ‚åº¦ï¼šO(N^2)</p><p>ç©ºé—´å¤æ‚åº¦ï¼šO(1)</p><h2 id="æ–¹æ³•äºŒï¼šæ»‘åŠ¨çª—å£"><a href="#æ–¹æ³•äºŒï¼šæ»‘åŠ¨çª—å£" class="headerlink" title="æ–¹æ³•äºŒï¼šæ»‘åŠ¨çª—å£"></a>æ–¹æ³•äºŒï¼šæ»‘åŠ¨çª—å£</h2><p><strong>æ€è·¯å’Œç®—æ³•</strong></p><p>æˆ‘ä»¬å…ˆç”¨ä¸€ä¸ªä¾‹å­æ¥æƒ³ä¸€æƒ³å¦‚ä½•åœ¨è¾ƒä¼˜çš„æ—¶é—´å¤æ‚åº¦å†…é€šè¿‡æœ¬é¢˜ã€‚</p><p>æˆ‘ä»¬ä¸å¦¨ä»¥ç¤ºä¾‹ä¸€ä¸­çš„å­—ç¬¦ä¸² abcabcbb  ä¸ºä¾‹ï¼Œæ‰¾å‡º <strong>ä»æ¯ä¸€ä¸ªå­—ç¬¦å¼€å§‹çš„ï¼Œä¸åŒ…å«é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²</strong>ï¼Œé‚£ä¹ˆå…¶ä¸­æœ€é•¿çš„é‚£ä¸ªå­—ç¬¦ä¸²å³ä¸ºç­”æ¡ˆã€‚å¯¹äºç¤ºä¾‹ä¸€ä¸­çš„å­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬åˆ—ä¸¾å‡ºè¿™äº›ç»“æœï¼Œå…¶ä¸­æ‹¬å·ä¸­è¡¨ç¤ºé€‰ä¸­çš„å­—ç¬¦ä»¥åŠæœ€é•¿çš„å­—ç¬¦ä¸²ï¼š</p><ul><li>ä»¥ (a)bcabcbb å¼€å§‹çš„æœ€é•¿å­—ç¬¦ä¸²ä¸º (abc)abcbbï¼›</li><li>ä»¥ a(b)cabcbb å¼€å§‹çš„æœ€é•¿å­—ç¬¦ä¸²ä¸º a(bca)bcbb ï¼›</li><li>ä»¥ ab(c)abcbb å¼€å§‹çš„æœ€é•¿å­—ç¬¦ä¸²ä¸º ab(cab)cbb ï¼›</li><li>ä»¥ abc(a)bcbb  å¼€å§‹çš„æœ€é•¿å­—ç¬¦ä¸²ä¸º abc(abc)bb ï¼›</li><li>ä»¥ abca(b)cbb å¼€å§‹çš„æœ€é•¿å­—ç¬¦ä¸²ä¸º abca(bc)bbï¼›</li><li>ä»¥ abcab(c)bb  å¼€å§‹çš„æœ€é•¿å­—ç¬¦ä¸²ä¸ºabcab(cb)b ï¼›</li><li>ä»¥ abcabc(b)b  å¼€å§‹çš„æœ€é•¿å­—ç¬¦ä¸²ä¸º abcabc(b)b ï¼›</li><li>ä»¥ abcabcb(b) å¼€å§‹çš„æœ€é•¿å­—ç¬¦ä¸²ä¸º abcabcb(b) ã€‚</li></ul><p>å‘ç°äº†ä»€ä¹ˆï¼Ÿå¦‚æœæˆ‘ä»¬ä¾æ¬¡é€’å¢åœ°æšä¸¾å­ä¸²çš„èµ·å§‹ä½ç½®ï¼Œé‚£ä¹ˆå­ä¸²çš„ç»“æŸä½ç½®ä¹Ÿæ˜¯é€’å¢çš„ï¼è¿™é‡Œçš„åŸå› åœ¨äºï¼Œå‡è®¾æˆ‘ä»¬é€‰æ‹©å­—ç¬¦ä¸²ä¸­çš„ç¬¬ <em>k</em> ä¸ªå­—ç¬¦ä½œä¸ºèµ·å§‹ä½ç½®ï¼Œå¹¶ä¸”å¾—åˆ°äº†ä¸åŒ…å«é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²çš„ç»“æŸä½ç½®ä¸º <em>r_k*ã€‚é‚£ä¹ˆå½“æˆ‘ä»¬é€‰æ‹©ç¬¬ *k+1</em> ä¸ªå­—ç¬¦ä½œä¸ºèµ·å§‹ä½ç½®æ—¶ï¼Œé¦–å…ˆä» <em>k+1</em> åˆ° <em>r_k</em> çš„å­—ç¬¦æ˜¾ç„¶æ˜¯ä¸é‡å¤çš„ï¼Œå¹¶ä¸”ç”±äºå°‘äº†åŸæœ¬çš„ç¬¬ <em>k</em> ä¸ªå­—ç¬¦ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•ç»§ç»­å¢å¤§ <em>r_k</em>ï¼Œç›´åˆ°å³ä¾§å‡ºç°äº†é‡å¤å­—ç¬¦ä¸ºæ­¢ã€‚</p><p>è¿™æ ·ä»¥æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ã€Œæ»‘åŠ¨çª—å£ã€æ¥è§£å†³è¿™ä¸ªé—®é¢˜äº†ï¼š</p><ul><li><p>æˆ‘ä»¬ä½¿ç”¨ä¸¤ä¸ªæŒ‡é’ˆè¡¨ç¤ºå­—ç¬¦ä¸²ä¸­çš„æŸä¸ªå­ä¸²ï¼ˆçš„å·¦å³è¾¹ç•Œï¼‰ã€‚å…¶ä¸­å·¦æŒ‡é’ˆä»£è¡¨ç€ä¸Šæ–‡ä¸­ã€Œæšä¸¾å­ä¸²çš„èµ·å§‹ä½ç½®ã€ï¼Œè€Œå³æŒ‡é’ˆå³ä¸ºä¸Šæ–‡ä¸­çš„ <em>r_k</em>ï¼›</p></li><li><p>åœ¨æ¯ä¸€æ­¥çš„æ“ä½œä¸­ï¼Œæˆ‘ä»¬ä¼šå°†å·¦æŒ‡é’ˆå‘å³ç§»åŠ¨ä¸€æ ¼ï¼Œè¡¨ç¤º <strong>æˆ‘ä»¬å¼€å§‹æšä¸¾ä¸‹ä¸€ä¸ªå­—ç¬¦ä½œä¸ºèµ·å§‹ä½ç½®</strong>ï¼Œç„¶åæˆ‘ä»¬å¯ä»¥ä¸æ–­åœ°å‘å³ç§»åŠ¨å³æŒ‡é’ˆï¼Œä½†éœ€è¦ä¿è¯è¿™ä¸¤ä¸ªæŒ‡é’ˆå¯¹åº”çš„å­ä¸²ä¸­æ²¡æœ‰é‡å¤çš„å­—ç¬¦ã€‚åœ¨ç§»åŠ¨ç»“æŸåï¼Œè¿™ä¸ªå­ä¸²å°±å¯¹åº”ç€ <strong>ä»¥å·¦æŒ‡é’ˆå¼€å§‹çš„ï¼Œä¸åŒ…å«é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²</strong>ã€‚æˆ‘ä»¬è®°å½•ä¸‹è¿™ä¸ªå­ä¸²çš„é•¿åº¦ï¼›</p></li><li><p>åœ¨æšä¸¾ç»“æŸåï¼Œæˆ‘ä»¬æ‰¾åˆ°çš„æœ€é•¿çš„å­ä¸²çš„é•¿åº¦å³ä¸ºç­”æ¡ˆã€‚</p></li></ul><p><strong>åˆ¤æ–­é‡å¤å­—ç¬¦</strong></p><p>åœ¨ä¸Šé¢çš„æµç¨‹ä¸­ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä½¿ç”¨ä¸€ç§æ•°æ®ç»“æ„æ¥åˆ¤æ–­ <strong>æ˜¯å¦æœ‰é‡å¤çš„å­—ç¬¦</strong>ï¼Œå¸¸ç”¨çš„æ•°æ®ç»“æ„ä¸ºå“ˆå¸Œé›†åˆï¼ˆå³ <code>C++</code> ä¸­çš„ <code>std::unordered_set</code>ï¼Œ<code>Java</code> ä¸­çš„ <code>HashSet</code>ï¼Œ<code>Python</code> ä¸­çš„ <code>set</code>, <code>JavaScript</code> ä¸­çš„ <code>Set</code>ï¼‰ã€‚åœ¨å·¦æŒ‡é’ˆå‘å³ç§»åŠ¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä»å“ˆå¸Œé›†åˆä¸­ç§»é™¤ä¸€ä¸ªå­—ç¬¦ï¼Œåœ¨å³æŒ‡é’ˆå‘å³ç§»åŠ¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¾€å“ˆå¸Œé›†åˆä¸­æ·»åŠ ä¸€ä¸ªå­—ç¬¦ã€‚</p><p>è‡³æ­¤ï¼Œæˆ‘ä»¬å°±å®Œç¾è§£å†³äº†æœ¬é¢˜ã€‚</p><details>    <summary>æ»‘åŠ¨çª—å£C++</summary><figure class="highlight c++"><figcaption><span>[sol1-C++]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(<span class="built_in">string</span> s)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// å“ˆå¸Œé›†åˆï¼Œè®°å½•æ¯ä¸ªå­—ç¬¦æ˜¯å¦å‡ºç°è¿‡</span></span><br><span class="line">        <span class="built_in">unordered_set</span>&lt;<span class="keyword">char</span>&gt; occ;</span><br><span class="line">        <span class="keyword">int</span> n = s.size();</span><br><span class="line">        <span class="comment">// å³æŒ‡é’ˆï¼Œåˆå§‹å€¼ä¸º -1ï¼Œç›¸å½“äºæˆ‘ä»¬åœ¨å­—ç¬¦ä¸²çš„å·¦è¾¹ç•Œçš„å·¦ä¾§ï¼Œè¿˜æ²¡æœ‰å¼€å§‹ç§»åŠ¨</span></span><br><span class="line">        <span class="keyword">int</span> rk = <span class="number">-1</span>, ans = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">// æšä¸¾å·¦æŒ‡é’ˆçš„ä½ç½®ï¼Œåˆå§‹å€¼éšæ€§åœ°è¡¨ç¤ºä¸º -1</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i != <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">// å·¦æŒ‡é’ˆå‘å³ç§»åŠ¨ä¸€æ ¼ï¼Œç§»é™¤ä¸€ä¸ªå­—ç¬¦</span></span><br><span class="line">                occ.erase(s[i - <span class="number">1</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">while</span> (rk + <span class="number">1</span> &lt; n &amp;&amp; !occ.count(s[rk + <span class="number">1</span>])) &#123;</span><br><span class="line">                <span class="comment">// ä¸æ–­åœ°ç§»åŠ¨å³æŒ‡é’ˆ</span></span><br><span class="line">                occ.insert(s[rk + <span class="number">1</span>]);</span><br><span class="line">                ++rk;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// ç¬¬ i åˆ° rk ä¸ªå­—ç¬¦æ˜¯ä¸€ä¸ªæé•¿çš„æ— é‡å¤å­—ç¬¦å­ä¸²</span></span><br><span class="line">            ans = max(ans, rk - i + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></details><details>    <summary>æ»‘åŠ¨çª—å£Java</summary><figure class="highlight java"><figcaption><span>[sol1-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// å“ˆå¸Œé›†åˆï¼Œè®°å½•æ¯ä¸ªå­—ç¬¦æ˜¯å¦å‡ºç°è¿‡</span></span><br><span class="line">        Set&lt;Character&gt; occ = <span class="keyword">new</span> HashSet&lt;Character&gt;();</span><br><span class="line">        <span class="keyword">int</span> n = s.length();</span><br><span class="line">        <span class="comment">// å³æŒ‡é’ˆï¼Œåˆå§‹å€¼ä¸º -1ï¼Œç›¸å½“äºæˆ‘ä»¬åœ¨å­—ç¬¦ä¸²çš„å·¦è¾¹ç•Œçš„å·¦ä¾§ï¼Œè¿˜æ²¡æœ‰å¼€å§‹ç§»åŠ¨</span></span><br><span class="line">        <span class="keyword">int</span> rk = -<span class="number">1</span>, ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i != <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">// å·¦æŒ‡é’ˆå‘å³ç§»åŠ¨ä¸€æ ¼ï¼Œç§»é™¤ä¸€ä¸ªå­—ç¬¦</span></span><br><span class="line">                occ.remove(s.charAt(i - <span class="number">1</span>));</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">while</span> (rk + <span class="number">1</span> &lt; n &amp;&amp; !occ.contains(s.charAt(rk + <span class="number">1</span>))) &#123;</span><br><span class="line">                <span class="comment">// ä¸æ–­åœ°ç§»åŠ¨å³æŒ‡é’ˆ</span></span><br><span class="line">                occ.add(s.charAt(rk + <span class="number">1</span>));</span><br><span class="line">                ++rk;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// ç¬¬ i åˆ° rk ä¸ªå­—ç¬¦æ˜¯ä¸€ä¸ªæé•¿çš„æ— é‡å¤å­—ç¬¦å­ä¸²</span></span><br><span class="line">            ans = Math.max(ans, rk - i + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>æ»‘åŠ¨çª—å£Python3</summary><figure class="highlight python"><figcaption><span>[sol1-Python3]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(self, s: str)</span> -&gt; int:</span></span><br><span class="line">        <span class="comment"># å“ˆå¸Œé›†åˆï¼Œè®°å½•æ¯ä¸ªå­—ç¬¦æ˜¯å¦å‡ºç°è¿‡</span></span><br><span class="line">        occ = set()</span><br><span class="line">        n = len(s)</span><br><span class="line">        <span class="comment"># å³æŒ‡é’ˆï¼Œåˆå§‹å€¼ä¸º -1ï¼Œç›¸å½“äºæˆ‘ä»¬åœ¨å­—ç¬¦ä¸²çš„å·¦è¾¹ç•Œçš„å·¦ä¾§ï¼Œè¿˜æ²¡æœ‰å¼€å§‹ç§»åŠ¨</span></span><br><span class="line">        rk, ans = <span class="number">-1</span>, <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            <span class="keyword">if</span> i != <span class="number">0</span>:</span><br><span class="line">                <span class="comment"># å·¦æŒ‡é’ˆå‘å³ç§»åŠ¨ä¸€æ ¼ï¼Œç§»é™¤ä¸€ä¸ªå­—ç¬¦</span></span><br><span class="line">                occ.remove(s[i - <span class="number">1</span>])</span><br><span class="line">            <span class="keyword">while</span> rk + <span class="number">1</span> &lt; n <span class="keyword">and</span> s[rk + <span class="number">1</span>] <span class="keyword">not</span> <span class="keyword">in</span> occ:</span><br><span class="line">                <span class="comment"># ä¸æ–­åœ°ç§»åŠ¨å³æŒ‡é’ˆ</span></span><br><span class="line">                occ.add(s[rk + <span class="number">1</span>])</span><br><span class="line">                rk += <span class="number">1</span></span><br><span class="line">            <span class="comment"># ç¬¬ i åˆ° rk ä¸ªå­—ç¬¦æ˜¯ä¸€ä¸ªæé•¿çš„æ— é‡å¤å­—ç¬¦å­ä¸²</span></span><br><span class="line">            ans = max(ans, rk - i + <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure></details><details>    <summary>æ»‘åŠ¨çª—å£JavaScript</summary><figure class="highlight javascript"><figcaption><span>[sol1-JavaScript]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> lengthOfLongestSubstring = <span class="function"><span class="keyword">function</span>(<span class="params">s</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// å“ˆå¸Œé›†åˆï¼Œè®°å½•æ¯ä¸ªå­—ç¬¦æ˜¯å¦å‡ºç°è¿‡</span></span><br><span class="line">    <span class="keyword">const</span> occ = <span class="keyword">new</span> <span class="built_in">Set</span>();</span><br><span class="line">    <span class="keyword">const</span> n = s.length;</span><br><span class="line">    <span class="comment">// å³æŒ‡é’ˆï¼Œåˆå§‹å€¼ä¸º -1ï¼Œç›¸å½“äºæˆ‘ä»¬åœ¨å­—ç¬¦ä¸²çš„å·¦è¾¹ç•Œçš„å·¦ä¾§ï¼Œè¿˜æ²¡æœ‰å¼€å§‹ç§»åŠ¨</span></span><br><span class="line">    <span class="keyword">let</span> rk = <span class="number">-1</span>, ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (i != <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">// å·¦æŒ‡é’ˆå‘å³ç§»åŠ¨ä¸€æ ¼ï¼Œç§»é™¤ä¸€ä¸ªå­—ç¬¦</span></span><br><span class="line">            occ.delete(s.charAt(i - <span class="number">1</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (rk + <span class="number">1</span> &lt; n &amp;&amp; !occ.has(s.charAt(rk + <span class="number">1</span>))) &#123;</span><br><span class="line">            <span class="comment">// ä¸æ–­åœ°ç§»åŠ¨å³æŒ‡é’ˆ</span></span><br><span class="line">            occ.add(s.charAt(rk + <span class="number">1</span>));</span><br><span class="line">            ++rk;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// ç¬¬ i åˆ° rk ä¸ªå­—ç¬¦æ˜¯ä¸€ä¸ªæé•¿çš„æ— é‡å¤å­—ç¬¦å­ä¸²</span></span><br><span class="line">        ans = <span class="built_in">Math</span>.max(ans, rk - i + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></details><details>    <summary>æ»‘åŠ¨çª—å£Golang</summary><figure class="highlight golang"><figcaption><span>[sol1-Golang]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(s <span class="keyword">string</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="comment">// å“ˆå¸Œé›†åˆï¼Œè®°å½•æ¯ä¸ªå­—ç¬¦æ˜¯å¦å‡ºç°è¿‡</span></span><br><span class="line">    m := <span class="keyword">map</span>[<span class="keyword">byte</span>]<span class="keyword">int</span>&#123;&#125;</span><br><span class="line">    n := <span class="built_in">len</span>(s)</span><br><span class="line">    <span class="comment">// å³æŒ‡é’ˆï¼Œåˆå§‹å€¼ä¸º -1ï¼Œç›¸å½“äºæˆ‘ä»¬åœ¨å­—ç¬¦ä¸²çš„å·¦è¾¹ç•Œçš„å·¦ä¾§ï¼Œè¿˜æ²¡æœ‰å¼€å§‹ç§»åŠ¨</span></span><br><span class="line">    rk, ans := <span class="number">-1</span>, <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; n; i++ &#123;</span><br><span class="line">        <span class="keyword">if</span> i != <span class="number">0</span> &#123;</span><br><span class="line">            <span class="comment">// å·¦æŒ‡é’ˆå‘å³ç§»åŠ¨ä¸€æ ¼ï¼Œç§»é™¤ä¸€ä¸ªå­—ç¬¦</span></span><br><span class="line">            <span class="built_in">delete</span>(m, s[i<span class="number">-1</span>])</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> rk + <span class="number">1</span> &lt; n &amp;&amp; m[s[rk+<span class="number">1</span>]] == <span class="number">0</span> &#123;</span><br><span class="line">            <span class="comment">// ä¸æ–­åœ°ç§»åŠ¨å³æŒ‡é’ˆ</span></span><br><span class="line">            m[s[rk+<span class="number">1</span>]]++</span><br><span class="line">            rk++</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// ç¬¬ i åˆ° rk ä¸ªå­—ç¬¦æ˜¯ä¸€ä¸ªæé•¿çš„æ— é‡å¤å­—ç¬¦å­ä¸²</span></span><br><span class="line">        ans = max(ans, rk - i + <span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">max</span><span class="params">(x, y <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> x &lt; y &#123;</span><br><span class="line">        <span class="keyword">return</span> y</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> x</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><p><strong>å¤æ‚åº¦åˆ†æ</strong></p><ul><li><p>æ—¶é—´å¤æ‚åº¦ï¼š<em>O(N)*ï¼Œå…¶ä¸­ *N</em> æ˜¯å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚å·¦æŒ‡é’ˆå’Œå³æŒ‡é’ˆåˆ†åˆ«ä¼šéå†æ•´ä¸ªå­—ç¬¦ä¸²ä¸€æ¬¡ã€‚</p></li><li><p>ç©ºé—´å¤æ‚åº¦ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">O(|\Sigma|)</span><br></pre></td></tr></table></figure></li></ul><p>ï¼Œå…¶ä¸­</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\Sigma</span><br></pre></td></tr></table></figure><p> è¡¨ç¤ºå­—ç¬¦é›†ï¼ˆå³å­—ç¬¦ä¸²ä¸­å¯ä»¥å‡ºç°çš„å­—ç¬¦ï¼‰ï¼Œ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">|\Sigma|</span><br></pre></td></tr></table></figure><p> è¡¨ç¤ºå­—ç¬¦é›†çš„å¤§å°ã€‚åœ¨æœ¬é¢˜ä¸­æ²¡æœ‰æ˜ç¡®è¯´æ˜å­—ç¬¦é›†ï¼Œå› æ­¤å¯ä»¥é»˜è®¤ä¸ºæ‰€æœ‰ ASCII ç åœ¨ <em>[0, 128)</em> å†…çš„å­—ç¬¦ï¼Œå³<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">|\Sigma|=128</span><br><span class="line">``` </span><br><span class="line">ã€‚æˆ‘ä»¬éœ€è¦ç”¨åˆ°å“ˆå¸Œé›†åˆæ¥å­˜å‚¨å‡ºç°è¿‡çš„å­—ç¬¦ï¼Œè€Œå­—ç¬¦æœ€å¤šæœ‰ </span><br><span class="line">```math</span><br><span class="line">|\Sigma|</span><br></pre></td></tr></table></figure></p><p>ä¸ªï¼Œå› æ­¤ç©ºé—´å¤æ‚åº¦ä¸º </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">O(|\Sigma|)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¯·ä½ æ‰¾å‡ºå…¶ä¸­ä¸å«æœ‰é‡å¤å­—ç¬¦çš„ æœ€é•¿å­ä¸² çš„é•¿åº¦ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="2021å¹´11æœˆ" scheme="http://yoursite.com/categories/2021%E5%B9%B411%E6%9C%88/"/>
    
    
      <category term="Hash Table" scheme="http://yoursite.com/tags/Hash-Table/"/>
    
      <category term="Leetcode" scheme="http://yoursite.com/tags/Leetcode/"/>
    
      <category term="String" scheme="http://yoursite.com/tags/String/"/>
    
      <category term="Two Pointers" scheme="http://yoursite.com/tags/Two-Pointers/"/>
    
      <category term="Sliding Window" scheme="http://yoursite.com/tags/Sliding-Window/"/>
    
  </entry>
  
  <entry>
    <title>991. åäº†çš„è®¡ç®—å™¨</title>
    <link href="http://yoursite.com/2021/11/03/991.%20%E5%9D%8F%E4%BA%86%E7%9A%84%E8%AE%A1%E7%AE%97%E5%99%A8/"/>
    <id>http://yoursite.com/2021/11/03/991. åäº†çš„è®¡ç®—å™¨/</id>
    <published>2021-11-03T03:12:12.000Z</published>
    <updated>2021-11-03T03:45:01.565Z</updated>
    
    <content type="html"><![CDATA[<p>è¿”å›æ˜¾ç¤ºæ•°å­— Y æ‰€éœ€çš„æœ€å°æ“ä½œæ•°ã€‚</p><a id="more"></a><p>[TOC]</p><p>åœ¨æ˜¾ç¤ºç€æ•°å­—çš„åè®¡ç®—å™¨ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥æ‰§è¡Œä»¥ä¸‹ä¸¤ç§æ“ä½œï¼š</p><p>åŒå€ï¼ˆDoubleï¼‰ï¼šå°†æ˜¾ç¤ºå±ä¸Šçš„æ•°å­—ä¹˜ 2ï¼›<br>é€’å‡ï¼ˆDecrementï¼‰ï¼šå°†æ˜¾ç¤ºå±ä¸Šçš„æ•°å­—å‡ 1 ã€‚<br>æœ€åˆï¼Œè®¡ç®—å™¨æ˜¾ç¤ºæ•°å­— Xã€‚</p><p>è¿”å›æ˜¾ç¤ºæ•°å­— Y æ‰€éœ€çš„æœ€å°æ“ä½œæ•°ã€‚</p><p>ç¤ºä¾‹ 1ï¼š</p><pre><code>è¾“å…¥ï¼šX = 2, Y = 3è¾“å‡ºï¼š2è§£é‡Šï¼šå…ˆè¿›è¡ŒåŒå€è¿ç®—ï¼Œç„¶åå†è¿›è¡Œé€’å‡è¿ç®— {2 -&gt; 4 -&gt; 3}.</code></pre><p>ç¤ºä¾‹ 2ï¼š</p><pre><code>è¾“å…¥ï¼šX = 5, Y = 8è¾“å‡ºï¼š2è§£é‡Šï¼šå…ˆé€’å‡ï¼Œå†åŒå€ {5 -&gt; 4 -&gt; 8}.</code></pre><p>ç¤ºä¾‹ 3ï¼š</p><pre><code>è¾“å…¥ï¼šX = 3, Y = 10è¾“å‡ºï¼š3è§£é‡Šï¼šå…ˆåŒå€ï¼Œç„¶åé€’å‡ï¼Œå†åŒå€ {3 -&gt; 6 -&gt; 5 -&gt; 10}.</code></pre><p>ç¤ºä¾‹ 4ï¼š</p><pre><code>è¾“å…¥ï¼šX = 1024, Y = 1è¾“å‡ºï¼š1023è§£é‡Šï¼šæ‰§è¡Œé€’å‡è¿ç®— 1023 æ¬¡</code></pre><p>æç¤ºï¼š</p><pre><code>1 &lt;= X &lt;= 10^91 &lt;= Y &lt;= 10^9</code></pre><h1 id="æ–¹æ³•ä¸€ï¼šé€†å‘æ€ç»´"><a href="#æ–¹æ³•ä¸€ï¼šé€†å‘æ€ç»´" class="headerlink" title="æ–¹æ³•ä¸€ï¼šé€†å‘æ€ç»´"></a>æ–¹æ³•ä¸€ï¼šé€†å‘æ€ç»´</h1><p><strong>æ€è·¯</strong></p><p>é™¤äº†å¯¹ <code>X</code> æ‰§è¡Œä¹˜ 2 æˆ– å‡ 1 æ“ä½œä¹‹å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å¯¹ <code>Y</code> æ‰§è¡Œ<code>é™¤ 2</code>ï¼ˆå½“ <code>Y</code> æ˜¯å¶æ•°æ—¶ï¼‰æˆ–è€…<code>åŠ  1</code>æ“ä½œã€‚</p><p>ä¸ºä»€ä¹ˆè¿™é“é¢˜é‡‡ç”¨é€†å‘æ€ç»´æ›´ä¼˜ï¼Ÿ</p><p>æ­£å‘æ€ç»´ï¼šåœ¨X&lt;Yæ—¶è¦å®ç°æ“ä½œæ•°æœ€å°ï¼Œè¦å°†Xé€¼è¿‘Yçš„1/2å€¼æˆ–1/4å€¼æˆ–1/8å€¼æˆ–â€¦å†è¿›è¡Œ*2æ“ä½œï¼Œéš¾ç‚¹åœ¨äºè¦åˆ¤æ–­è¦é€¼è¿‘çš„æ˜¯1/2å€¼è¿˜æ˜¯1/4å€¼è¿˜æ˜¯å…¶ä»–å€¼ï¼Œé€»è¾‘å¤æ‚ </p><p>é€†å‘æ€ç»´ï¼šåœ¨Y&gt;Xæ—¶Yåªç®¡/2ï¼Œåˆ°äº†Y&lt;Xæ—¶åœ¨+1é€¼è¿‘ è¯´ç™½äº†å°±æ˜¯ï¼Œæ­£å‘æ€ç»´é‡‡ç”¨çš„æ˜¯å…ˆå°è·¨åº¦çš„-1æ“ä½œï¼Œå†å¤§è·¨åº¦çš„*2æ“ä½œï¼›é€†å‘æ€ç»´é‡‡ç”¨çš„æ˜¯å…ˆå¤§è·¨åº¦çš„/2æ“ä½œï¼Œå†å°è·¨åº¦çš„-1æ“ä½œ</p><p>ç„¶è€Œäº‹å®ä¸Šå¾€å¾€æ˜¯å…ˆå¤§åå°çš„è§£å†³é—®é¢˜æ€ç»´åœ¨å®ç°èµ·æ¥ä¼šæ¯”è¾ƒç®€å•</p><p>ä¸‹é¢çš„è§£é‡Šæˆ‘æ²¡æœ‰å¤ªç†è§£ï¼Œä½†é‡ç‚¹æ˜¯è¦åˆ†å¥‡æ•°å’Œå¶æ•°ã€‚å¥‡æ•°ä¸èƒ½ç›´æ¥é™¤2ï¼Œå¯ä»¥å…ˆåŠ 1</p><p>è¿™æ ·åšçš„åŠ¨æœºæ˜¯æˆ‘ä»¬å¯ä»¥æ€»æ˜¯è´ªå¿ƒåœ°æ‰§è¡Œé™¤ 2 æ“ä½œï¼š</p><ul><li><p>å½“ <code>Y</code> æ˜¯å¶æ•°ï¼Œå¦‚æœå…ˆæ‰§è¡Œ 2 æ¬¡åŠ æ³•æ“ä½œï¼Œå†æ‰§è¡Œ 1 æ¬¡é™¤æ³•æ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å…ˆæ‰§è¡Œ 1 æ¬¡é™¤æ³•æ“ä½œï¼Œå†æ‰§è¡Œ 1 æ¬¡åŠ æ³•æ“ä½œä»¥ä½¿ç”¨æ›´å°‘çš„æ“ä½œæ¬¡æ•°å¾—åˆ°ç›¸åŒçš„ç»“æœ [<code>(Y+2) / 2</code> vs <code>Y/2 + 1</code>]ã€‚</p></li><li><p>å½“ <code>Y</code> æ˜¯å¥‡æ•°ï¼Œå¦‚æœå…ˆæ‰§è¡Œ 3 æ¬¡åŠ æ³•æ“ä½œï¼Œå†æ‰§è¡Œ 1 æ¬¡é™¤æ³•æ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶æ›¿ä»£ä¸ºé¡ºæ¬¡æ‰§è¡ŒåŠ æ³•ã€é™¤æ³•ã€åŠ æ³•æ“ä½œä»¥ä½¿ç”¨æ›´å°‘çš„æ“ä½œæ¬¡æ•°å¾—åˆ°ç›¸åŒçš„ç»“æœ [<code>(Y+3) / 2</code> vs <code>(Y+1) / 2 + 1</code>]ã€‚</p></li></ul><p><strong>ç®—æ³•</strong></p><p>å½“ <code>Y</code> å¤§äº <code>X</code> æ—¶ï¼Œå¦‚æœå®ƒæ˜¯å¥‡æ•°ï¼Œæˆ‘ä»¬æ‰§è¡ŒåŠ æ³•æ“ä½œï¼Œå¦åˆ™æ‰§è¡Œé™¤æ³•æ“ä½œã€‚ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦æ‰§è¡Œ <code>X - Y</code> æ¬¡åŠ æ³•æ“ä½œä»¥å¾—åˆ° <code>X</code>ã€‚</p><figure class="highlight java"><figcaption><span>[uRsowHNz-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">brokenCalc</span><span class="params">(<span class="keyword">int</span> startValue, <span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (startValue &lt; target) &#123;</span><br><span class="line">            res++;</span><br><span class="line">            target = ((target &amp; <span class="number">1</span>) == <span class="number">1</span>) ? target + <span class="number">1</span> : target / <span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res + startValue - target;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight python"><figcaption><span>[uRsowHNz-Python]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">brokenCalc</span><span class="params">(self, X, Y)</span>:</span></span><br><span class="line">        ans = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> Y &gt; X:</span><br><span class="line">            ans += <span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> Y%<span class="number">2</span>: Y += <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>: Y /= <span class="number">2</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ans + X-Y</span><br></pre></td></tr></table></figure><p><strong>å¤æ‚åº¦åˆ†æ</strong></p><ul><li><p>æ—¶é—´å¤æ‚åº¦ï¼š  O(logY)</p></li><li><p>ç©ºé—´å¤æ‚åº¦ï¼š  <em>O(1)</em>ã€‚</p></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è¿”å›æ˜¾ç¤ºæ•°å­— Y æ‰€éœ€çš„æœ€å°æ“ä½œæ•°ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="2021å¹´11æœˆ" scheme="http://yoursite.com/categories/2021%E5%B9%B411%E6%9C%88/"/>
    
    
      <category term="Leetcode" scheme="http://yoursite.com/tags/Leetcode/"/>
    
      <category term="Math" scheme="http://yoursite.com/tags/Math/"/>
    
      <category term="Greedy" scheme="http://yoursite.com/tags/Greedy/"/>
    
  </entry>
  
  <entry>
    <title>224. åŸºæœ¬è®¡ç®—å™¨</title>
    <link href="http://yoursite.com/2021/11/02/224.%20%E5%9F%BA%E6%9C%AC%E8%AE%A1%E7%AE%97%E5%99%A8/"/>
    <id>http://yoursite.com/2021/11/02/224. åŸºæœ¬è®¡ç®—å™¨/</id>
    <published>2021-11-02T09:12:12.000Z</published>
    <updated>2021-11-03T03:11:38.688Z</updated>
    
    <content type="html"><![CDATA[<p>ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸²è¡¨è¾¾å¼sï¼Œè¯·ä½ å®ç°ä¸€ä¸ªåŸºæœ¬è®¡ç®—å™¨æ¥è®¡ç®—å¹¶è¿”å›å®ƒçš„å€¼ã€‚</p><a id="more"></a><p>[TOC]</p><p>ç¤ºä¾‹ 1ï¼š</p><pre><code>è¾“å…¥ï¼šs = &quot;1 + 1&quot;è¾“å‡ºï¼š2</code></pre><p>ç¤ºä¾‹ 2ï¼š</p><pre><code>è¾“å…¥ï¼šs = &quot; 2-1 + 2 &quot;è¾“å‡ºï¼š3</code></pre><p>ç¤ºä¾‹ 3ï¼š</p><pre><code>è¾“å…¥ï¼šs = &quot;(1+(4+5+2)-3)+(6+8)&quot;è¾“å‡ºï¼š23</code></pre><p>æç¤ºï¼š</p><pre><code>1 &lt;= s.length &lt;= 3 * 105s ç”±æ•°å­—ã€&apos;+&apos;ã€&apos;-&apos;ã€&apos;(&apos;ã€&apos;)&apos;ã€å’Œ &apos; &apos; ç»„æˆs è¡¨ç¤ºä¸€ä¸ªæœ‰æ•ˆçš„è¡¨è¾¾å¼</code></pre><h1 id="æ–¹æ³•ä¸€ï¼šæ‹¬å·å±•å¼€-æ ˆ"><a href="#æ–¹æ³•ä¸€ï¼šæ‹¬å·å±•å¼€-æ ˆ" class="headerlink" title="æ–¹æ³•ä¸€ï¼šæ‹¬å·å±•å¼€ + æ ˆ"></a>æ–¹æ³•ä¸€ï¼šæ‹¬å·å±•å¼€ + æ ˆ</h1><p>ç”±äºå­—ç¬¦ä¸²é™¤äº†æ•°å­—ä¸æ‹¬å·å¤–ï¼Œåªæœ‰åŠ å·å’Œå‡å·ä¸¤ç§è¿ç®—ç¬¦ã€‚å› æ­¤ï¼Œå¦‚æœå±•å¼€è¡¨è¾¾å¼ä¸­æ‰€æœ‰çš„æ‹¬å·ï¼Œåˆ™å¾—åˆ°çš„æ–°è¡¨è¾¾å¼ä¸­ï¼Œæ•°å­—æœ¬èº«ä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼Œåªæ˜¯æ¯ä¸ªæ•°å­—å‰é¢çš„ç¬¦å·ä¼šå‘ç”Ÿå˜åŒ–ã€‚<a href="https://leetcode-cn.com/problems/basic-calculator/solution/ji-ben-ji-suan-qi-by-leetcode-solution-jvir/" target="_blank" rel="noopener">^1</a></p><details>    <summary>C++</summary><figure class="highlight c++"><figcaption><span>[sol1-C++]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">calculate</span><span class="params">(<span class="built_in">string</span> s)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">stack</span>&lt;<span class="keyword">int</span>&gt; ops;</span><br><span class="line">        ops.push(<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">int</span> sign = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> ret = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> n = s.length();</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (i &lt; n) &#123;</span><br><span class="line">            <span class="keyword">if</span> (s[i] == <span class="string">' '</span>) &#123;</span><br><span class="line">                i++;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s[i] == <span class="string">'+'</span>) &#123;</span><br><span class="line">                sign = ops.top();</span><br><span class="line">                i++;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s[i] == <span class="string">'-'</span>) &#123;</span><br><span class="line">                sign = -ops.top();</span><br><span class="line">                i++;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s[i] == <span class="string">'('</span>) &#123;</span><br><span class="line">                ops.push(sign);</span><br><span class="line">                i++;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s[i] == <span class="string">')'</span>) &#123;</span><br><span class="line">                ops.pop();</span><br><span class="line">                i++;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">long</span> num = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">while</span> (i &lt; n &amp;&amp; s[i] &gt;= <span class="string">'0'</span> &amp;&amp; s[i] &lt;= <span class="string">'9'</span>) &#123;</span><br><span class="line">                    num = num * <span class="number">10</span> + s[i] - <span class="string">'0'</span>;</span><br><span class="line">                    i++;</span><br><span class="line">                &#125;</span><br><span class="line">                ret += sign * num;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></details><details>    <summary>Java</summary><figure class="highlight java"><figcaption><span>[sol1-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">calculate</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        Deque&lt;Integer&gt; ops = <span class="keyword">new</span> LinkedList&lt;Integer&gt;();</span><br><span class="line">        ops.push(<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">int</span> sign = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> ret = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> n = s.length();</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (i &lt; n) &#123;</span><br><span class="line">            <span class="keyword">if</span> (s.charAt(i) == <span class="string">' '</span>) &#123;</span><br><span class="line">                i++;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s.charAt(i) == <span class="string">'+'</span>) &#123;</span><br><span class="line">                sign = ops.peek();</span><br><span class="line">                i++;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s.charAt(i) == <span class="string">'-'</span>) &#123;</span><br><span class="line">                sign = -ops.peek();</span><br><span class="line">                i++;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s.charAt(i) == <span class="string">'('</span>) &#123;</span><br><span class="line">                ops.push(sign);</span><br><span class="line">                i++;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s.charAt(i) == <span class="string">')'</span>) &#123;</span><br><span class="line">                ops.pop();</span><br><span class="line">                i++;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">long</span> num = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">while</span> (i &lt; n &amp;&amp; Character.isDigit(s.charAt(i))) &#123;</span><br><span class="line">                    num = num * <span class="number">10</span> + s.charAt(i) - <span class="string">'0'</span>;</span><br><span class="line">                    i++;</span><br><span class="line">                &#125;</span><br><span class="line">                ret += sign * num;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>JavaScript</summary><figure class="highlight javascript"><figcaption><span>[sol1-JavaScript]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> calculate = <span class="function"><span class="keyword">function</span>(<span class="params">s</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> ops = [<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">let</span> sign = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> ret = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">const</span> n = s.length;</span><br><span class="line">    <span class="keyword">let</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (i &lt; n) &#123;</span><br><span class="line">        <span class="keyword">if</span> (s[i] === <span class="string">' '</span>) &#123;</span><br><span class="line">            i++;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s[i] === <span class="string">'+'</span>) &#123;</span><br><span class="line">            sign = ops[ops.length - <span class="number">1</span>];</span><br><span class="line">            i++;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s[i] === <span class="string">'-'</span>) &#123;</span><br><span class="line">            sign = -ops[ops.length - <span class="number">1</span>];</span><br><span class="line">            i++;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s[i] === <span class="string">'('</span>) &#123;</span><br><span class="line">            ops.push(sign);</span><br><span class="line">            i++;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s[i] === <span class="string">')'</span>) &#123;</span><br><span class="line">            ops.pop();</span><br><span class="line">            i++;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> num = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span> (i &lt; n &amp;&amp; !(<span class="built_in">isNaN</span>(<span class="built_in">Number</span>(s[i]))) &amp;&amp; s[i] !== <span class="string">' '</span>) &#123;</span><br><span class="line">                num = num * <span class="number">10</span> + s[i].charCodeAt() - <span class="string">'0'</span>.charCodeAt();</span><br><span class="line">                i++;</span><br><span class="line">            &#125;</span><br><span class="line">            ret += sign * num;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></details><details>    <summary>Golang</summary><figure class="highlight go"><figcaption><span>[sol1-Golang]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">calculate</span><span class="params">(s <span class="keyword">string</span>)</span> <span class="params">(ans <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    ops := []<span class="keyword">int</span>&#123;<span class="number">1</span>&#125;</span><br><span class="line">    sign := <span class="number">1</span></span><br><span class="line">    n := <span class="built_in">len</span>(s)</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; n; &#123;</span><br><span class="line">        <span class="keyword">switch</span> s[i] &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">' '</span>:</span><br><span class="line">            i++</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'+'</span>:</span><br><span class="line">            sign = ops[<span class="built_in">len</span>(ops)<span class="number">-1</span>]</span><br><span class="line">            i++</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'-'</span>:</span><br><span class="line">            sign = -ops[<span class="built_in">len</span>(ops)<span class="number">-1</span>]</span><br><span class="line">            i++</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'('</span>:</span><br><span class="line">            ops = <span class="built_in">append</span>(ops, sign)</span><br><span class="line">            i++</span><br><span class="line">        <span class="keyword">case</span> <span class="string">')'</span>:</span><br><span class="line">            ops = ops[:<span class="built_in">len</span>(ops)<span class="number">-1</span>]</span><br><span class="line">            i++</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            num := <span class="number">0</span></span><br><span class="line">            <span class="keyword">for</span> ; i &lt; n &amp;&amp; <span class="string">'0'</span> &lt;= s[i] &amp;&amp; s[i] &lt;= <span class="string">'9'</span>; i++ &#123;</span><br><span class="line">                num = num*<span class="number">10</span> + <span class="keyword">int</span>(s[i]-<span class="string">'0'</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            ans += sign * num</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>C</summary><figure class="highlight c"><figcaption><span>[sol1-C]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">calculate</span><span class="params">(<span class="keyword">char</span>* s)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = <span class="built_in">strlen</span>(s);</span><br><span class="line">    <span class="keyword">int</span> ops[n], top = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> sign = <span class="number">1</span>;</span><br><span class="line">    ops[top++] = sign;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> ret = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (i &lt; n) &#123;</span><br><span class="line">        <span class="keyword">if</span> (s[i] == <span class="string">' '</span>) &#123;</span><br><span class="line">            i++;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s[i] == <span class="string">'+'</span>) &#123;</span><br><span class="line">            sign = ops[top - <span class="number">1</span>];</span><br><span class="line">            i++;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s[i] == <span class="string">'-'</span>) &#123;</span><br><span class="line">            sign = -ops[top - <span class="number">1</span>];</span><br><span class="line">            i++;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s[i] == <span class="string">'('</span>) &#123;</span><br><span class="line">            ops[top++] = sign;</span><br><span class="line">            i++;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s[i] == <span class="string">')'</span>) &#123;</span><br><span class="line">            top--;</span><br><span class="line">            i++;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">long</span> num = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span> (i &lt; n &amp;&amp; s[i] &gt;= <span class="string">'0'</span> &amp;&amp; s[i] &lt;= <span class="string">'9'</span>) &#123;</span><br><span class="line">                num = num * <span class="number">10</span> + s[i] - <span class="string">'0'</span>;</span><br><span class="line">                i++;</span><br><span class="line">            &#125;</span><br><span class="line">            ret += sign * num;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>Python3</summary><figure class="highlight python"><figcaption><span>[sol1-Python3]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">calculate</span><span class="params">(self, s: str)</span> -&gt; int:</span></span><br><span class="line">        ops = [<span class="number">1</span>]</span><br><span class="line">        sign = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        ret = <span class="number">0</span></span><br><span class="line">        n = len(s)</span><br><span class="line">        i = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> i &lt; n:</span><br><span class="line">            <span class="keyword">if</span> s[i] == <span class="string">' '</span>:</span><br><span class="line">                i += <span class="number">1</span></span><br><span class="line">            <span class="keyword">elif</span> s[i] == <span class="string">'+'</span>:</span><br><span class="line">                sign = ops[<span class="number">-1</span>]</span><br><span class="line">                i += <span class="number">1</span></span><br><span class="line">            <span class="keyword">elif</span> s[i] == <span class="string">'-'</span>:</span><br><span class="line">                sign = -ops[<span class="number">-1</span>]</span><br><span class="line">                i += <span class="number">1</span></span><br><span class="line">            <span class="keyword">elif</span> s[i] == <span class="string">'('</span>:</span><br><span class="line">                ops.append(sign)</span><br><span class="line">                i += <span class="number">1</span></span><br><span class="line">            <span class="keyword">elif</span> s[i] == <span class="string">')'</span>:</span><br><span class="line">                ops.pop()</span><br><span class="line">                i += <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                num = <span class="number">0</span></span><br><span class="line">                <span class="keyword">while</span> i &lt; n <span class="keyword">and</span> s[i].isdigit():</span><br><span class="line">                    num = num * <span class="number">10</span> + ord(s[i]) - ord(<span class="string">'0'</span>)</span><br><span class="line">                    i += <span class="number">1</span></span><br><span class="line">                ret += num * sign</span><br><span class="line">        <span class="keyword">return</span> ret</span><br></pre></td></tr></table></figure></details><p><strong>å¤æ‚åº¦åˆ†æ</strong></p><ul><li><p>æ—¶é—´å¤æ‚åº¦ï¼š<em>O(n)*ï¼Œå…¶ä¸­ *n</em> ä¸ºå­—ç¬¦ä¸² <em>s</em> çš„é•¿åº¦ã€‚éœ€è¦éå†å­—ç¬¦ä¸² <em>s</em> ä¸€æ¬¡ï¼Œè®¡ç®—è¡¨è¾¾å¼çš„å€¼ã€‚</p></li><li><p>ç©ºé—´å¤æ‚åº¦ï¼š<em>O(n)*ï¼Œå…¶ä¸­ *n</em> ä¸ºå­—ç¬¦ä¸² <em>s</em> çš„é•¿åº¦ã€‚ç©ºé—´å¤æ‚åº¦ä¸»è¦å–å†³äºæ ˆçš„ç©ºé—´ï¼Œæ ˆä¸­çš„å…ƒç´ æ•°é‡ä¸è¶…è¿‡ <em>n</em>ã€‚</p></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸²è¡¨è¾¾å¼sï¼Œè¯·ä½ å®ç°ä¸€ä¸ªåŸºæœ¬è®¡ç®—å™¨æ¥è®¡ç®—å¹¶è¿”å›å®ƒçš„å€¼ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="2021å¹´11æœˆ" scheme="http://yoursite.com/categories/2021%E5%B9%B411%E6%9C%88/"/>
    
    
      <category term="Leetcode" scheme="http://yoursite.com/tags/Leetcode/"/>
    
      <category term="String" scheme="http://yoursite.com/tags/String/"/>
    
  </entry>
  
  <entry>
    <title>772. åŸºæœ¬è®¡ç®—å™¨III</title>
    <link href="http://yoursite.com/2021/11/02/772.%20%E5%9F%BA%E6%9C%AC%E8%AE%A1%E7%AE%97%E5%99%A8III/"/>
    <id>http://yoursite.com/2021/11/02/772. åŸºæœ¬è®¡ç®—å™¨III/</id>
    <published>2021-11-02T09:12:12.000Z</published>
    <updated>2021-11-06T13:32:42.408Z</updated>
    
    <content type="html"><![CDATA[<p>Implement a basic calculator to evaluate a simple expression string.</p><a id="more"></a><p>[TOC]</p><p>The expression string may contain open ( and closing parentheses ), the plus + or minus sign -, non-negative integers and empty spaces .</p><p>The expression string contains only non-negative integers, +, -, *, / operators , open ( and closing parentheses ) and empty spaces . The integer division should truncate toward zero.</p><p>You may assume that the given expression is always valid. All intermediate results will be in the range of [-2147483648, 2147483647].</p><p>Some examples:</p><pre><code>&quot;1 + 1&quot; = 2&quot; 6-4 / 2 &quot; = 4&quot;2*(5+5*2)/3+(6/2+8)&quot; = 21&quot;(2+6* 3+5- (3*14/7+2)*5)+3&quot;=-12</code></pre><p>Note: Do not use the eval built-in library function.</p><h1 id="æ–¹æ³•ä¸€ï¼šä¸­ç¼€è½¬åç¼€ï¼ˆé€†æ³¢å…°ï¼‰è¡¨è¾¾å¼"><a href="#æ–¹æ³•ä¸€ï¼šä¸­ç¼€è½¬åç¼€ï¼ˆé€†æ³¢å…°ï¼‰è¡¨è¾¾å¼" class="headerlink" title="æ–¹æ³•ä¸€ï¼šä¸­ç¼€è½¬åç¼€ï¼ˆé€†æ³¢å…°ï¼‰è¡¨è¾¾å¼"></a>æ–¹æ³•ä¸€ï¼šä¸­ç¼€è½¬åç¼€ï¼ˆé€†æ³¢å…°ï¼‰è¡¨è¾¾å¼</h1><p>å”¯ä¸€éœ€è¦æ³¨æ„çš„åœ°æ–¹å°±æ˜¯è®¡ç®—çš„ä¸­é—´ç»“æœèŒƒå›´å¯èƒ½å‡ºç°è¶…å‡º int ç±»å‹çš„æƒ…å†µã€‚å› æ­¤ï¼Œåœ¨è¿›è¡Œé€†æ³¢å…°è®¡ç®—çš„æ—¶å€™ï¼Œä½¿ç”¨ long æ¥è®¡ç®—ã€‚</p><p>é€†æ³¢å…°è®¡ç®—å™¨çš„åŸç†æ˜¯ä½¿ç”¨é€†æ³¢å…°è¡¨è¾¾å¼æ¥è®¡ç®—å‡ºè¡¨è¾¾å¼çš„å€¼ï¼Œæˆ‘ä»¬äººç±»èƒ½å¤Ÿç†Ÿç»ƒä½¿ç”¨çš„æ˜¯ä¸­ç¼€è¡¨è¾¾å¼ï¼Œæ¯”å¦‚2Ã—(9+6/3-5)+4å°±æ˜¯ä¸€ä¸ªä¸­ç¼€è¡¨è¾¾å¼ï¼Œä½†æ˜¯çœ‹åˆ°ä¸Šé¢çš„ç®€å•è®¡ç®—å™¨å°±çŸ¥é“å¤„ç†èµ·æ¥å¾ˆéº»çƒ¦ã€‚äºæ˜¯æœ‰ä¸€ç§é€†æ³¢å…°è®¡ç®—å™¨ï¼Œè®¡ç®—æ˜¯åœ¨é€†æ³¢å…°è¡¨è¾¾å¼ï¼ˆä¹Ÿå«åšåç¼€è¡¨è¾¾å¼ï¼‰çš„åŸºç¡€ä¸Šã€‚</p><p>é€†æ³¢å…°è®¡ç®—å™¨çš„è®¡ç®—è¿‡ç¨‹ä¸ºï¼šä»å·¦åˆ°å³æ‰«æåç¼€è¡¨è¾¾å¼ï¼Œé‡åˆ°æ•°å­—å°±å…¥æ ˆï¼Œé‡åˆ°æ“ä½œç¬¦å°±ä»æ ˆå¼¹å‡ºä¸¤ä¸ªæ•°å­—ï¼Œç„¶åè®¡ç®—å¾—åˆ°çš„å€¼ç»§ç»­å…¥æ ˆï¼Œç»§ç»­æ‰«æè¡¨è¾¾å¼ï¼Œç›´åˆ°æ‰«æå®Œæ¯•å¾—åˆ°ç»“æœã€‚</p><p>æŠŠä¸­ç¼€è¡¨è¾¾å¼è½¬æˆåç¼€è¡¨è¾¾å¼ï¼Ÿ</p><p>è½¬æ¢è§„åˆ™</p><pre><code>ã€€ã€€1ï¼‰æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªstackæ ˆç»“æ„å­˜å‚¨æ“ä½œç¬¦ï¼Œç”¨ä¸€ä¸ªListç»“æ„å­˜å‚¨åç¼€è¡¨è¾¾å¼ç»“æœã€€ã€€2ï¼‰é¦–å…ˆè¯»å–åˆ°æ•°å­—ï¼Œç›´æ¥å­˜å…¥listä¸­ã€€ã€€3ï¼‰å½“è¯»å–åˆ°å·¦æ‹¬å·&quot;(&quot;æ—¶ï¼Œç›´æ¥å‹æ ˆï¼Œå½“è¯»å–åˆ°è¿ç®—ç¬¦æ—¶ï¼Œåˆ†ä¸¤ç§æƒ…å†µè®¨è®ºã€€ã€€ã€€ã€€a.å½“è¿ç®—ç¬¦æ ˆä¸ºç©ºæˆ–è€…æ ˆé¡¶æ“ä½œç¬¦çš„ä¼˜å…ˆçº§å°äºå½“å‰è¿ç®—ç¬¦ä¼˜å…ˆçº§æ—¶(å¦‚+å’Œ-çš„ä¼˜å…ˆçº§ä½äº * å’Œ /)ï¼Œç›´æ¥å…¥æ ˆã€€ã€€ã€€ã€€b.å½“è¿ç®—ç¬¦ä¸ä¸ºç©ºæ—¶ä¸”æ ˆé¡¶æ“ä½œç¬¦çš„ä¼˜å…ˆçº§å¤§äºæˆ–ç­‰äºå½“å‰è¿ç®—ç¬¦ä¼˜å…ˆçº§æ—¶ï¼Œå¾ªç¯æ‰§è¡Œå‡ºæ ˆæ“ä½œå¹¶åŠ å…¥listä¸­ï¼Œç›´åˆ°é‡åˆ°ä¼˜å…ˆçº§å°äºå½“å‰è¿ç®—ç¬¦çš„å…ƒç´ ä¸ºæ­¢ã€‚å¾ªç¯æ‰§è¡Œå®Œåå†å°†å½“å‰è¿ç®—ç¬¦å‹æ ˆã€‚å¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåªæœ‰é‡åˆ°å³æ‹¬å·æ—¶ï¼Œå·¦æ‹¬å·æ‰å‡ºæ ˆã€€ã€€4) å½“é‡åˆ°å³æ‹¬å·&quot;)&quot;æ—¶ï¼Œå¾ªç¯æ‰§è¡Œå‡ºæ ˆæ“ä½œå¹¶åŠ å…¥åˆ°listä¸­ï¼Œç›´åˆ°é‡åˆ°å·¦æ‹¬å·ä¸ºæ­¢ã€‚å¹¶å°†å·¦æ‹¬å·å¼¹å‡ºï¼Œä½†ä¸åŠ å…¥listä¸­ã€€ã€€5) è¡¨è¾¾å¼çš„å€¼è¯»å–å®Œåï¼Œå°†æ“ä½œç¬¦æ ˆä¸­çš„æ‰€æœ‰å…ƒç´ å¼¹å‡ºå¹¶åŠ å…¥åˆ°listä¸­ã€€ã€€æ‰§è¡Œå®Œä¸Šé¢æ­¥éª¤åï¼Œlistä¸­å­˜å‚¨çš„é¡ºåºå³ä¸ºæˆ‘ä»¬è½¬æ¢åçš„åç¼€è¡¨è¾¾å¼çš„ç»“æœ</code></pre><details>    <summary>Java</summary><figure class="highlight java"><figcaption><span>[sol1-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Stack;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">calculate</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        String expression = s.replaceAll(<span class="string">" "</span>, <span class="string">""</span>); <span class="comment">//å»ç©ºæ ¼</span></span><br><span class="line">        List&lt;String&gt; infix = expressionToList(expression); <span class="comment">//è¡¨è¾¾å¼è½¬ä¸­ç¼€</span></span><br><span class="line">        List&lt;String&gt; suffix = parseToSuffixExpression(infix); <span class="comment">//ä¸­ç¼€è½¬åç¼€</span></span><br><span class="line">        Stack&lt;String&gt; stack = <span class="keyword">new</span> Stack&lt;&gt;(); <span class="comment">// å­˜å‚¨ä¸­é—´ç»“æœ</span></span><br><span class="line">        <span class="comment">// é€†æ³¢å…°è®¡ç®—å™¨</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; suffix.size(); i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (isOper(suffix.get(i))) &#123;</span><br><span class="line">                String b = stack.pop();</span><br><span class="line">                String a = stack.pop();</span><br><span class="line">                String result = cal(a, suffix.get(i), b);</span><br><span class="line">                stack.push(result);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                stack.push(suffix.get(i));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Integer.parseInt(stack.pop());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * num1 å’Œ num2 è¿›è¡Œ oper è®¡ç®—</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">cal</span><span class="params">(String num1, String oper, String num2)</span> </span>&#123;</span><br><span class="line">        Long result = <span class="number">0L</span>;</span><br><span class="line">        Long a = Long.parseLong(num1);</span><br><span class="line">        Long b = Long.parseLong(num2);</span><br><span class="line">        <span class="keyword">switch</span> (oper) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"+"</span>:</span><br><span class="line">                result = a + b;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"-"</span>:</span><br><span class="line">                result = a - b;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"*"</span>:</span><br><span class="line">                result = a * b;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">"/"</span>:</span><br><span class="line">                result = a / b;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> String.valueOf(result);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¸­ç¼€è½¬åç¼€</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span>  List&lt;String&gt; <span class="title">parseToSuffixExpression</span><span class="params">(List&lt;String&gt; expressionList)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºä¸€ä¸ªæ ˆç”¨äºä¿å­˜æ“ä½œç¬¦</span></span><br><span class="line">        Stack&lt;String&gt; opStack = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">        <span class="comment">//åˆ›å»ºä¸€ä¸ªlistç”¨äºä¿å­˜åç¼€è¡¨è¾¾å¼</span></span><br><span class="line">        List&lt;String&gt; suffixList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(String item : expressionList)&#123;</span><br><span class="line">            <span class="comment">//å¾—åˆ°æ•°æˆ–æ“ä½œç¬¦</span></span><br><span class="line">            <span class="keyword">if</span>(isOper(item))&#123;</span><br><span class="line">                <span class="comment">//æ˜¯æ“ä½œç¬¦ åˆ¤æ–­æ“ä½œç¬¦æ ˆæ˜¯å¦ä¸ºç©º</span></span><br><span class="line">                <span class="keyword">if</span>(opStack.isEmpty() || <span class="string">"("</span>.equals(opStack.peek()) || priority(item) &gt; priority(opStack.peek()))&#123;</span><br><span class="line">                    <span class="comment">//ä¸ºç©ºæˆ–è€…æ ˆé¡¶å…ƒç´ ä¸ºå·¦æ‹¬å·æˆ–è€…å½“å‰æ“ä½œç¬¦å¤§äºæ ˆé¡¶æ“ä½œç¬¦ç›´æ¥å‹æ ˆ</span></span><br><span class="line">                    opStack.push(item);</span><br><span class="line">                &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">//å¦åˆ™å°†æ ˆä¸­å…ƒç´ å‡ºæ ˆå¦‚é˜Ÿï¼Œç›´åˆ°é‡åˆ°å¤§äºå½“å‰æ“ä½œç¬¦æˆ–è€…é‡åˆ°å·¦æ‹¬å·æ—¶</span></span><br><span class="line">                    <span class="keyword">while</span> (!opStack.isEmpty() &amp;&amp; !<span class="string">"("</span>.equals(opStack.peek()))&#123;</span><br><span class="line">                        <span class="keyword">if</span>(priority(item) &lt;= priority(opStack.peek()))&#123;</span><br><span class="line">                            suffixList.add(opStack.pop());</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">//å½“å‰æ“ä½œç¬¦å‹æ ˆ</span></span><br><span class="line">                    opStack.push(item);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(isNumber(item))&#123;</span><br><span class="line">                <span class="comment">//æ˜¯æ•°å­—åˆ™ç›´æ¥å…¥é˜Ÿ</span></span><br><span class="line">                suffixList.add(item);</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">"("</span>.equals(item))&#123;</span><br><span class="line">                <span class="comment">//æ˜¯å·¦æ‹¬å·ï¼Œå‹æ ˆ</span></span><br><span class="line">                opStack.push(item);</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">")"</span>.equals(item))&#123;</span><br><span class="line">                <span class="comment">//æ˜¯å³æ‹¬å· ï¼Œå°†æ ˆä¸­å…ƒç´ å¼¹å‡ºå…¥é˜Ÿï¼Œç›´åˆ°é‡åˆ°å·¦æ‹¬å·ï¼Œå·¦æ‹¬å·å‡ºæ ˆï¼Œä½†ä¸å…¥é˜Ÿ</span></span><br><span class="line">                <span class="keyword">while</span> (!opStack.isEmpty())&#123;</span><br><span class="line">                    <span class="keyword">if</span>(<span class="string">"("</span>.equals(opStack.peek()))&#123;</span><br><span class="line">                        opStack.pop();</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                        suffixList.add(opStack.pop());</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"æœ‰éæ³•å­—ç¬¦ï¼"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å¾ªç¯å®Œæ¯•ï¼Œå¦‚æœæ“ä½œç¬¦æ ˆä¸­å…ƒç´ ä¸ä¸ºç©ºï¼Œå°†æ ˆä¸­å…ƒç´ å‡ºæ ˆå…¥é˜Ÿ</span></span><br><span class="line">        <span class="keyword">while</span> (!opStack.isEmpty())&#123;</span><br><span class="line">            suffixList.add(opStack.pop());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> suffixList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isOper</span><span class="params">(String string)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"+"</span>.equals(string) || <span class="string">"-"</span>.equals(string) || <span class="string">"*"</span>.equals(string)</span><br><span class="line">                || <span class="string">"/"</span>.equals(string);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isNumber</span><span class="params">(String num)</span></span>&#123;</span><br><span class="line">        <span class="comment">//åŒ¹é…æ•°å­—ï¼ˆéè´Ÿæ•°ï¼Œæ•´æ•°å’Œå°æ•°ï¼‰å’Œ è´Ÿæ•°</span></span><br><span class="line">        <span class="keyword">return</span> num.matches(<span class="string">"\\d+"</span>) || (num.charAt(<span class="number">0</span>)==<span class="string">'-'</span> &amp;&amp; num.substring(<span class="number">1</span>,num.length()).matches(<span class="string">"\\d+"</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å­—ç¬¦ä¸²è½¬ä¸ºä¸­ç¼€ List</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">expressionToList</span><span class="params">(String expression)</span> </span>&#123;</span><br><span class="line">        List&lt;String&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">int</span> len = expression.length();</span><br><span class="line">        String num = <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">            <span class="keyword">char</span> c = expression.charAt(i);</span><br><span class="line">            <span class="comment">//ç›´æ¥ç”¨Character.isDigitåˆ¤æ–­ä¼šå¿½ç•¥è´Ÿæ•°å’Œå°æ•°çš„æƒ…å†µ</span></span><br><span class="line">            <span class="keyword">if</span> (isNumber(c+<span class="string">""</span>)) &#123;</span><br><span class="line">                <span class="keyword">if</span> (i != len - <span class="number">1</span> &amp;&amp; Character.isDigit(expression.charAt(i + <span class="number">1</span>))) &#123;</span><br><span class="line">                    num += c;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    num += c;</span><br><span class="line">                    list.add(num);</span><br><span class="line">                    num = <span class="string">""</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//å¤„ç†è´Ÿæ•°æƒ…å†µ</span></span><br><span class="line">                <span class="keyword">if</span> (c == <span class="string">'-'</span> &amp;&amp; (i == <span class="number">0</span> || !Character.isDigit(expression.charAt(i - <span class="number">1</span>)))) &#123;</span><br><span class="line">                    num += c;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    list.add(c + <span class="string">""</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿”å›æ“ä½œç¬¦çš„ä¼˜å…ˆçº§ï¼Œ+- ä¸º 0ï¼Œ* / ä¸º 1</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">priority</span><span class="params">(String oper)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">"+"</span>.equals(oper) || <span class="string">"-"</span>.equals(oper)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">"*"</span>.equals(oper) || <span class="string">"/"</span>.equals(oper)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Implement a basic calculator to evaluate a simple expression string.&lt;/p&gt;
    
    </summary>
    
      <category term="2021å¹´11æœˆ" scheme="http://yoursite.com/categories/2021%E5%B9%B411%E6%9C%88/"/>
    
    
      <category term="Leetcode" scheme="http://yoursite.com/tags/Leetcode/"/>
    
      <category term="String" scheme="http://yoursite.com/tags/String/"/>
    
  </entry>
  
  <entry>
    <title>227.åŸºæœ¬è®¡ç®—å™¨ II</title>
    <link href="http://yoursite.com/2021/11/02/227.%20%E5%9F%BA%E6%9C%AC%E8%AE%A1%E7%AE%97%E5%99%A8%20II/"/>
    <id>http://yoursite.com/2021/11/02/227. åŸºæœ¬è®¡ç®—å™¨ II/</id>
    <published>2021-11-02T03:12:12.000Z</published>
    <updated>2021-11-02T10:04:31.752Z</updated>
    
    <content type="html"><![CDATA[<p>å®ç°ä¸€ä¸ªåŸºæœ¬çš„è®¡ç®—å™¨æ¥è®¡ç®—ä¸€ä¸ªç®€å•çš„å­—ç¬¦ä¸²è¡¨è¾¾å¼çš„å€¼ã€‚</p><p>å­—ç¬¦ä¸²è¡¨è¾¾å¼ä»…åŒ…å«éè´Ÿæ•´æ•°ï¼Œ+ï¼Œ - ï¼Œ*ï¼Œ/ å››ç§è¿ç®—ç¬¦å’Œç©ºæ ¼  ã€‚ æ•´æ•°é™¤æ³•ä»…ä¿ç•™æ•´æ•°éƒ¨åˆ†ã€‚</p><a id="more"></a><p>[TOC]</p><p>ç¤ºä¾‹ 1:</p><pre><code>è¾“å…¥: &quot;3+2*2&quot;è¾“å‡º: 7</code></pre><p>ç¤ºä¾‹ 2:</p><pre><code>è¾“å…¥: &quot; 3/2 &quot;è¾“å‡º: 1</code></pre><p>ç¤ºä¾‹ 3:</p><pre><code>è¾“å…¥: &quot; 3+5 / 2 &quot;è¾“å‡º: 5</code></pre><p>è¯´æ˜ï¼š</p><p>ä½ å¯ä»¥å‡è®¾æ‰€ç»™å®šçš„è¡¨è¾¾å¼éƒ½æ˜¯æœ‰æ•ˆçš„ã€‚<br>è¯·ä¸è¦ä½¿ç”¨å†…ç½®çš„åº“å‡½æ•° evalã€‚</p><h1 id="è§£æ³•ä¸€ï¼šå•æ ˆçš„ç»å…¸åº”ç”¨"><a href="#è§£æ³•ä¸€ï¼šå•æ ˆçš„ç»å…¸åº”ç”¨" class="headerlink" title="è§£æ³•ä¸€ï¼šå•æ ˆçš„ç»å…¸åº”ç”¨"></a>è§£æ³•ä¸€ï¼šå•æ ˆçš„ç»å…¸åº”ç”¨</h1><p>æ­¤ç®—æ³•çš„æ€è·¯å¾ˆç®€å•ï¼Œå…ˆæŠŠä¹˜é™¤æ³•çš„å€¼è®¡ç®—å‡ºæ¥ï¼Œæœ€ç»ˆå°†æ‰€æœ‰çš„è¿ç®—ç®€åŒ–æˆåªæœ‰åŠ æ³•ã€‚</p><ol><li>å…ˆè·³è¿‡ç©ºæ ¼</li><li>å‡ºç°äº†æ•°å­—åˆ™è®°å½•æ•´ä¸ªæ•°å­—æ˜¯å¤šå°‘ï¼Œç„¶åæ ¹æ®ä¹‹å‰çš„è¿ç®—ç¬¦å†³å®šä¸‹ä¸€æ­¥ï¼š</li></ol><ul><li>å¦‚æœæ˜¯åŠ å·â€™+â€™ï¼Œè¯´æ˜å‰é¢çš„è¿ç®—ç‹¬ç«‹äºä»¥åçš„è¿ç®—ï¼Œå¯ä»¥å°†ç»“æœæš‚æ—¶æ”¾å…¥æ ˆï¼›</li><li>å¦‚æœæ˜¯å‡å·â€™-â€˜ï¼Œå¯ä»¥çœ‹æˆ<code>-1 * tempNum</code>ï¼Œç„¶åå°†<code>-tempNum</code>å…¥æ ˆï¼›</li><li>å¦‚æœæ˜¯ä¹˜å·â€™*â€™æˆ–è€…é™¤å·â€™/â€˜ï¼Œç”±äºå‰é¢çš„è¿ç®—ç‹¬ç«‹äºæ­¤ï¼Œå¯ä»¥å…ˆè®¡ç®—<code>lastNum</code>å’Œ<code>tempNum</code>ç§¯ï¼Œç„¶åç»“æœå…¥æ ˆã€‚</li></ul><ol start="3"><li>æœ€åå°†æ ˆä¸­çš„æ‰€æœ‰å…ƒç´ ç›¸åŠ å°±æ˜¯ç­”æ¡ˆã€‚</li></ol><p>æ³¨æ„çš„ç‚¹ï¼Œåœ¨å†™ä»£ç çš„æ—¶å€™æ³¨æ„åˆ°popè¦å’Œpushæˆå¯¹ä½¿ç”¨ï¼Œä¹‹å‰æ··ç”¨äº†offerå’Œpollï¼Œä½†å¯¹å…¶å®é™…ç”¨æ³•å¹¶æ²¡æœ‰è¯¦ç»†äº†è§£ã€‚ç»“æœå¯¼è‡´å‡ºç°äº†æ„æ–™ä¹‹å¤–çš„ç»“æœã€‚</p><details>    <summary>æ ˆçš„ç»å…¸åº”ç”¨</summary><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">    public int calculate(String s) &#123;</span><br><span class="line">        Stack&lt;Integer&gt; numStack = new Stack&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        char lastOp = &apos;+&apos;;</span><br><span class="line">        char[] arr = s.toCharArray();</span><br><span class="line">        for(int i = 0; i &lt; arr.length; i ++)&#123;</span><br><span class="line">            if(arr[i] == &apos; &apos;) continue;</span><br><span class="line"></span><br><span class="line">            if(Character.isDigit(arr[i]))&#123;</span><br><span class="line">                int tempNum = arr[i] - &apos;0&apos;;</span><br><span class="line">                while(++i &lt; arr.length &amp;&amp; Character.isDigit(arr[i]))&#123;</span><br><span class="line">                    tempNum = tempNum * 10 + (arr[i] - &apos;0&apos;);</span><br><span class="line">                &#125; i--;</span><br><span class="line"></span><br><span class="line">                if(lastOp == &apos;+&apos;) numStack.push(tempNum);</span><br><span class="line">                else if(lastOp == &apos;-&apos;) numStack.push(-tempNum);</span><br><span class="line">                else numStack.push(res(lastOp, numStack.pop(), tempNum));</span><br><span class="line">            &#125; else lastOp = arr[i];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        int ans = 0;</span><br><span class="line">        for(int num : numStack) ans += num;</span><br><span class="line">        return ans;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private int res(char op, int a, int b)&#123;</span><br><span class="line">        if(op == &apos;*&apos;) return a * b;</span><br><span class="line">        else if(op == &apos;/&apos;) return a / b;</span><br><span class="line">        else if(op == &apos;+&apos;) return a + b; //å…¶å®åŠ å‡è¿ç®—å¯ä»¥å¿½ç•¥</span><br><span class="line">        else return a - b;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details> <h1 id="è§£æ³•äºŒï¼šåŒæ ˆç®—æ³•"><a href="#è§£æ³•äºŒï¼šåŒæ ˆç®—æ³•" class="headerlink" title="è§£æ³•äºŒï¼šåŒæ ˆç®—æ³•"></a>è§£æ³•äºŒï¼šåŒæ ˆç®—æ³•</h1><p>è¿™ä¸ªç®—æ³•æœ‰ä¸ªä¸“é—¨çš„åç§°Shunting-yard algorithm</p><p>æ ˆoprandså­˜å‚¨è¡¨è¾¾å¼ä¸­çš„æ•´æ•°ã€‚<br>æ ˆoporså­˜å‚¨è¡¨è¾¾å¼ä¸­çš„è¿ç®—ç¬¦ã€‚</p><p>ä»å·¦å‘å³éå†å­—ç¬¦ä¸²ï¼Œ</p><p>å½“s[i] ä¸ºç©ºæ ¼æ—¶ï¼Œè¿‡æ»¤æ‰ç©ºæ ¼ï¼›</p><p>å½“s[i] ä¸ºæ•°å­—æ•°ï¼Œæå–è¿ç»­çš„æ•´æ•°ã€‚å­˜å…¥oprandsã€‚</p><p>å½“s[i] ä¸ºè¿ç®—ç¬¦æ—¶ï¼Œå¦‚æœs[i]çš„ä¼˜å…ˆçº§æ¯”oporsæ ˆé¡¶è¿ç®—ç¬¦é«˜ï¼Œé‚£ä¹ˆs[i]å…¥oporsæ ˆã€‚</p><p>å¦‚æœä¸æ˜¯ï¼Œé‚£ä¹ˆå¼¹å‡ºoporsæ ˆé¡¶è¿ç®—ç¬¦ï¼Œå’Œoprandsæ ˆé¡¶çš„ä¸¤ä¸ªæ•´æ•°ï¼Œè®¡ç®—ï¼Œç»“æœå­˜å…¥oprandsæ ˆã€‚</p><p>æœ€ç»ˆçš„è§£åœ¨oprandsä¸­ã€‚</p><details>    <summary>åŒæ ˆç®—æ³•</summary><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">class Solution &#123;</span><br><span class="line">    static Stack&lt;Integer&gt; num = new Stack&lt;Integer&gt;();</span><br><span class="line">    static Stack&lt;Character&gt; op = new Stack&lt;Character&gt;();</span><br><span class="line">    static HashMap&lt;Character, Integer&gt; map = new HashMap&lt;Character, Integer&gt;();</span><br><span class="line">    static void eval()</span><br><span class="line">    &#123;</span><br><span class="line">        int b = num.pop();</span><br><span class="line">        int a = num.pop();</span><br><span class="line">        char c = op.pop();</span><br><span class="line">        int r = 0;</span><br><span class="line">        if(c == &apos;+&apos;) r = a + b;</span><br><span class="line">        else if(c == &apos;-&apos;) r = a - b;</span><br><span class="line">        else if(c == &apos;*&apos;) r = a * b;</span><br><span class="line">        else r = a / b;</span><br><span class="line">        num.add(r); </span><br><span class="line">    &#125;</span><br><span class="line">    public int calculate(String s) &#123;</span><br><span class="line">        s = &apos;0&apos; + s; // å¯¹å¼€å¤´æ˜¯è´Ÿæ•°çš„å¤„ç† </span><br><span class="line">        map.put(&apos;+&apos;, 1);   //å®šä¹‰è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§</span><br><span class="line">        map.put(&apos;-&apos;, 1);</span><br><span class="line">        map.put(&apos;*&apos;, 2);</span><br><span class="line">        map.put(&apos;/&apos;, 2);</span><br><span class="line">        for(int i = 0; i &lt; s.length();i ++)</span><br><span class="line">        &#123;</span><br><span class="line">            char c = s.charAt(i);</span><br><span class="line">            if(c == &apos; &apos;) continue;  //è·³è¿‡ç©ºæ ¼</span><br><span class="line">            if(c &gt;= &apos;0&apos; &amp;&amp; c &lt;= &apos;9&apos;)  //cæ˜¯æ•°å­—,è¯»å–ä¸€ä¸ªè¿ç»­çš„æ•°å­—</span><br><span class="line">            &#123;</span><br><span class="line">                int x = 0, j = i;</span><br><span class="line">                while(j &lt; s.length() &amp;&amp; s.charAt(j) &gt;= &apos;0&apos; &amp;&amp; s.charAt(j) &lt;= &apos;9&apos;)</span><br><span class="line">                &#123;</span><br><span class="line">                    x = x * 10 + s.charAt(j) - &apos;0&apos;;</span><br><span class="line">                    j ++;</span><br><span class="line">                &#125;</span><br><span class="line">                i = j - 1;</span><br><span class="line">                num.add(x);</span><br><span class="line">            &#125;</span><br><span class="line">            else  //cæ˜¯æ“ä½œç¬¦ </span><br><span class="line">            &#123;     //opæ ˆéç©ºå¹¶ä¸”æ ˆé¡¶æ“ä½œç¬¦ä¼˜å…ˆçº§å¤§äºç­‰äºå½“å‰æ“ä½œç¬¦cçš„ä¼˜å…ˆçº§ï¼Œè¿›è¡Œeval()è®¡ç®—</span><br><span class="line">                while(!op.isEmpty() &amp;&amp; map.get(op.peek()) &gt;= map.get(c)) eval();</span><br><span class="line">                op.add(c); </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        while(!op.isEmpty()) eval();</span><br><span class="line">        return num.pop();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details> <h1 id="è§£æ³•ä¸‰ï¼šä¸ç”¨æ ˆ"><a href="#è§£æ³•ä¸‰ï¼šä¸ç”¨æ ˆ" class="headerlink" title="è§£æ³•ä¸‰ï¼šä¸ç”¨æ ˆ"></a>è§£æ³•ä¸‰ï¼šä¸ç”¨æ ˆ</h1><details>    <summary>Java</summary><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">public int calculate(String s) &#123;</span><br><span class="line">        int res = 0, tmp = 0, curNum = 0, n = s.length();</span><br><span class="line">        //reså­˜ç»“æœï¼Œtmpå­˜å½“å‰é«˜ä¼˜å…ˆçº§è¿ç®—ç»“æœï¼ŒcurNumå­˜å½“å‰å­—æ¯æ®µæ‰€ä»£è¡¨çš„æ•°å€¼</span><br><span class="line">        char op = &apos;+&apos;;</span><br><span class="line">        for (int i = 0; i &lt; n; i++) &#123;</span><br><span class="line">            char c = s.charAt(i);</span><br><span class="line">            if (Character.isDigit(c)) &#123;</span><br><span class="line">                curNum = curNum * 10 + c - &apos;0&apos;;</span><br><span class="line">            &#125;</span><br><span class="line">            if (c == &apos;+&apos; || c == &apos;-&apos; || c == &apos;*&apos; || c == &apos;/&apos; || i == n - 1) &#123;</span><br><span class="line">                switch (op) &#123;</span><br><span class="line">                    case &apos;+&apos;:tmp+=curNum;break;</span><br><span class="line">                    case &apos;-&apos;:tmp-=curNum;break;</span><br><span class="line">                    case &apos;*&apos;:tmp*=curNum;break;</span><br><span class="line">                    case &apos;/&apos;:tmp/=curNum;break;</span><br><span class="line">                &#125;</span><br><span class="line">                //å•ç‹¬åˆ¤æ–­è¿ä¹˜ã€è¿é™¤ç»“æŸ æˆ– è¾¾åˆ°æœ€åä¸€ä¸ªå­—ç¬¦ï¼Œä¾‹å¦‚ï¼š3 + 2 * 2</span><br><span class="line">                //å¦‚æœæ²¡æœ‰ä¸‹é¢è¿™ä¸ªifåˆ™ä¼šå‡ºé”™</span><br><span class="line">                if (c == &apos;+&apos; || c == &apos;-&apos; || i == n - 1) &#123;</span><br><span class="line">                    res += tmp;</span><br><span class="line">                    tmp = 0;</span><br><span class="line">                &#125;</span><br><span class="line">                op = c;//æ›´æ–°æ“ä½œç¬¦</span><br><span class="line">                curNum = 0;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return res;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></details> ]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å®ç°ä¸€ä¸ªåŸºæœ¬çš„è®¡ç®—å™¨æ¥è®¡ç®—ä¸€ä¸ªç®€å•çš„å­—ç¬¦ä¸²è¡¨è¾¾å¼çš„å€¼ã€‚&lt;/p&gt;
&lt;p&gt;å­—ç¬¦ä¸²è¡¨è¾¾å¼ä»…åŒ…å«éè´Ÿæ•´æ•°ï¼Œ+ï¼Œ - ï¼Œ*ï¼Œ/ å››ç§è¿ç®—ç¬¦å’Œç©ºæ ¼  ã€‚ æ•´æ•°é™¤æ³•ä»…ä¿ç•™æ•´æ•°éƒ¨åˆ†ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="2021å¹´11æœˆ" scheme="http://yoursite.com/categories/2021%E5%B9%B411%E6%9C%88/"/>
    
    
      <category term="Leetcode" scheme="http://yoursite.com/tags/Leetcode/"/>
    
      <category term="String" scheme="http://yoursite.com/tags/String/"/>
    
  </entry>
  
  <entry>
    <title>560. å’Œä¸º K çš„å­æ•°ç»„</title>
    <link href="http://yoursite.com/2021/10/31/560.%20%E5%92%8C%E4%B8%BA%20K%20%E7%9A%84%E5%AD%90%E6%95%B0%E7%BB%84/"/>
    <id>http://yoursite.com/2021/10/31/560. å’Œä¸º K çš„å­æ•°ç»„/</id>
    <published>2021-10-31T08:12:12.000Z</published>
    <updated>2021-10-31T13:55:37.873Z</updated>
    
    <content type="html"><![CDATA[<p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•° k ï¼Œè¯·ä½ ç»Ÿè®¡å¹¶è¿”å›è¯¥æ•°ç»„ä¸­å’Œä¸º k çš„è¿ç»­å­æ•°ç»„çš„ä¸ªæ•°ã€‚</p><a id="more"></a><p>[TOC]</p><p>ç¤ºä¾‹ 1ï¼š</p><pre><code>è¾“å…¥ï¼šnums = [1,1,1], k = 2è¾“å‡ºï¼š2</code></pre><p>ç¤ºä¾‹ 2ï¼š</p><pre><code>è¾“å…¥ï¼šnums = [1,2,3], k = 3è¾“å‡ºï¼š2</code></pre><p>æç¤ºï¼š</p><pre><code>1 &lt;= nums.length &lt;= 2 * 104-1000 &lt;= nums[i] &lt;= 1000-107 &lt;= k &lt;= 107</code></pre><h1 id="ğŸ“–-æ–‡å­—é¢˜è§£"><a href="#ğŸ“–-æ–‡å­—é¢˜è§£" class="headerlink" title="ğŸ“– æ–‡å­—é¢˜è§£"></a>ğŸ“– æ–‡å­—é¢˜è§£</h1><p>ä¸€å¼€å§‹æƒ³ç”¨713é¢˜ä¸­çš„æ»‘åŠ¨çª—å£åŒæŒ‡é’ˆæ¥åšï¼Œä½†å‘ç°ç”±äºæ•°ç»„ä¸­æœ‰å¯èƒ½æœ‰è´Ÿæ•°ï¼Œè¿™ç§æ–¹æ³•ä¸é€‚ç”¨ã€‚</p><h2 id="æ–¹æ³•ä¸€ï¼šæšä¸¾"><a href="#æ–¹æ³•ä¸€ï¼šæšä¸¾" class="headerlink" title="æ–¹æ³•ä¸€ï¼šæšä¸¾"></a>æ–¹æ³•ä¸€ï¼šæšä¸¾</h2><p><strong>æ€è·¯å’Œç®—æ³•</strong><a href="https://leetcode-cn.com/problems/subarray-sum-equals-k/solution/he-wei-kde-zi-shu-zu-by-leetcode-solution/" target="_blank" rel="noopener">^1</a></p><p>è€ƒè™‘ä»¥ <em>i</em> ç»“å°¾å’Œä¸º <em>k</em> çš„è¿ç»­å­æ•°ç»„ä¸ªæ•°ï¼Œæˆ‘ä»¬éœ€è¦ç»Ÿè®¡ç¬¦åˆæ¡ä»¶çš„ä¸‹æ ‡ <em>j</em> çš„ä¸ªæ•°ï¼Œå…¶ä¸­0&lt;=j&lt;=i ä¸” <em>[j..i]</em> è¿™ä¸ªå­æ•°ç»„çš„å’Œæ°å¥½ä¸º <em>k</em> ã€‚</p><p>æˆ‘ä»¬å¯ä»¥æšä¸¾ <em>[0..i]</em> é‡Œæ‰€æœ‰çš„ä¸‹æ ‡ <em>j</em> æ¥åˆ¤æ–­æ˜¯å¦ç¬¦åˆæ¡ä»¶ï¼Œå¯èƒ½æœ‰è¯»è€…ä¼šè®¤ä¸ºå‡å®šæˆ‘ä»¬ç¡®å®šäº†å­æ•°ç»„çš„å¼€å¤´å’Œç»“å°¾ï¼Œè¿˜éœ€è¦ <em>O(n)</em> çš„æ—¶é—´å¤æ‚åº¦éå†å­æ•°ç»„æ¥æ±‚å’Œï¼Œé‚£æ ·å¤æ‚åº¦å°±å°†è¾¾åˆ° <em>O(n^3)</em> ä»è€Œæ— æ³•é€šè¿‡æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹ã€‚ä½†æ˜¯å¦‚æœæˆ‘ä»¬çŸ¥é“ <em>[j,i]</em> å­æ•°ç»„çš„å’Œï¼Œå°±èƒ½ <em>O(1)</em> æ¨å‡º <em>[j-1,i]</em> çš„å’Œï¼Œå› æ­¤è¿™éƒ¨åˆ†çš„éå†æ±‚å’Œæ˜¯ä¸éœ€è¦çš„ï¼Œæˆ‘ä»¬åœ¨æšä¸¾ä¸‹æ ‡ <em>j</em> çš„æ—¶å€™å·²ç»èƒ½ <em>O(1)</em> æ±‚å‡º <em>[j,i]</em> çš„å­æ•°ç»„ä¹‹å’Œã€‚</p><details>    <summary>Java</summary><figure class="highlight java"><figcaption><span>[sol1-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">subarraySum</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> start = <span class="number">0</span>; start &lt; nums.length; ++start) &#123;</span><br><span class="line">            <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> end = start; end &gt;= <span class="number">0</span>; --end) &#123;</span><br><span class="line">                sum += nums[end];</span><br><span class="line">                <span class="keyword">if</span> (sum == k) &#123;</span><br><span class="line">                    count++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>C++</summary><figure class="highlight c++"><figcaption><span>[sol1-C++]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">subarraySum</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> start = <span class="number">0</span>; start &lt; nums.size(); ++start) &#123;</span><br><span class="line">            <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> end = start; end &gt;= <span class="number">0</span>; --end) &#123;</span><br><span class="line">                sum += nums[end];</span><br><span class="line">                <span class="keyword">if</span> (sum == k) &#123;</span><br><span class="line">                    count++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></details><details>    <summary>JavaScript</summary><figure class="highlight javascript"><figcaption><span>[sol1-JavaScript]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> subarraySum = <span class="function"><span class="keyword">function</span>(<span class="params">nums, k</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> start = <span class="number">0</span>; start &lt; nums.length; ++start) &#123;</span><br><span class="line">        <span class="keyword">let</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> end = start; end &gt;= <span class="number">0</span>; --end) &#123;</span><br><span class="line">            sum += nums[end];</span><br><span class="line">            <span class="keyword">if</span> (sum == k) &#123;</span><br><span class="line">                count++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> count;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></details><details>    <summary>Golang</summary><figure class="highlight golang"><figcaption><span>[sol1-Golang]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">subarraySum</span><span class="params">(nums []<span class="keyword">int</span>, k <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    count := <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> start := <span class="number">0</span>; start &lt; <span class="built_in">len</span>(nums); start++ &#123;</span><br><span class="line">        sum := <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> end := start; end &gt;= <span class="number">0</span>; end-- &#123;</span><br><span class="line">            sum += nums[end]</span><br><span class="line">            <span class="keyword">if</span> sum == k &#123;</span><br><span class="line">                count++</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> count</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><p><strong>å¤æ‚åº¦åˆ†æ</strong></p><ul><li><p>æ—¶é—´å¤æ‚åº¦ï¼š<em>O(n^2)*ï¼Œå…¶ä¸­ *n</em> ä¸ºæ•°ç»„çš„é•¿åº¦ã€‚æšä¸¾å­æ•°ç»„å¼€å¤´å’Œç»“å°¾éœ€è¦ <em>O(n^2)</em> çš„æ—¶é—´ï¼Œå…¶ä¸­æ±‚å’Œéœ€è¦ <em>O(1)</em> çš„æ—¶é—´å¤æ‚åº¦ï¼Œå› æ­¤æ€»æ—¶é—´å¤æ‚åº¦ä¸º <em>O(n^2)</em>ã€‚</p></li><li><p>ç©ºé—´å¤æ‚åº¦ï¼š<em>O(1)</em>ã€‚åªéœ€è¦å¸¸æ•°ç©ºé—´å­˜æ”¾è‹¥å¹²å˜é‡ã€‚</p></li></ul><h2 id="æ–¹æ³•äºŒï¼šå‰ç¼€å’Œ-å“ˆå¸Œè¡¨ä¼˜åŒ–"><a href="#æ–¹æ³•äºŒï¼šå‰ç¼€å’Œ-å“ˆå¸Œè¡¨ä¼˜åŒ–" class="headerlink" title="æ–¹æ³•äºŒï¼šå‰ç¼€å’Œ + å“ˆå¸Œè¡¨ä¼˜åŒ–"></a>æ–¹æ³•äºŒï¼šå‰ç¼€å’Œ + å“ˆå¸Œè¡¨ä¼˜åŒ–</h2><p><strong>æ€è·¯å’Œç®—æ³•</strong></p><p>æˆ‘ä»¬å¯ä»¥åŸºäºæ–¹æ³•ä¸€åˆ©ç”¨æ•°æ®ç»“æ„è¿›è¡Œè¿›ä¸€æ­¥çš„ä¼˜åŒ–ï¼Œæˆ‘ä»¬çŸ¥é“æ–¹æ³•ä¸€çš„ç“¶é¢ˆåœ¨äºå¯¹æ¯ä¸ª <em>i</em>ï¼Œæˆ‘ä»¬éœ€è¦æšä¸¾æ‰€æœ‰çš„ <em>j</em> æ¥åˆ¤æ–­æ˜¯å¦ç¬¦åˆæ¡ä»¶ï¼Œè¿™ä¸€æ­¥æ˜¯å¦å¯ä»¥ä¼˜åŒ–å‘¢ï¼Ÿç­”æ¡ˆæ˜¯å¯ä»¥çš„ã€‚ </p><details>    <summary>Java</summary><figure class="highlight java"><figcaption><span>[sol2-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">subarraySum</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">0</span>, pre = <span class="number">0</span>;</span><br><span class="line">        HashMap &lt; Integer, Integer &gt; mp = <span class="keyword">new</span> HashMap &lt; &gt; ();</span><br><span class="line">        mp.put(<span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">            pre += nums[i];</span><br><span class="line">            <span class="keyword">if</span> (mp.containsKey(pre - k)) &#123;</span><br><span class="line">                count += mp.get(pre - k);</span><br><span class="line">            &#125;</span><br><span class="line">            mp.put(pre, mp.getOrDefault(pre, <span class="number">0</span>) + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>C++</summary><figure class="highlight c++"><figcaption><span>[sol2-C++]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">subarraySum</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">unordered_map</span>&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; mp;</span><br><span class="line">        mp[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">0</span>, pre = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span>&amp; x:nums) &#123;</span><br><span class="line">            pre += x;</span><br><span class="line">            <span class="keyword">if</span> (mp.find(pre - k) != mp.end()) &#123;</span><br><span class="line">                count += mp[pre - k];</span><br><span class="line">            &#125;</span><br><span class="line">            mp[pre]++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></details><details>    <summary>JavaScript</summary><figure class="highlight javascript"><figcaption><span>[sol2-JavaScript]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> subarraySum = <span class="function"><span class="keyword">function</span>(<span class="params">nums, k</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> mp = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">    mp.set(<span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">let</span> count = <span class="number">0</span>, pre = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> x <span class="keyword">of</span> nums) &#123;</span><br><span class="line">        pre += x;</span><br><span class="line">        <span class="keyword">if</span> (mp.has(pre - k)) &#123;</span><br><span class="line">            count += mp.get(pre - k);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (mp.has(pre)) &#123;</span><br><span class="line">            mp.set(pre, mp.get(pre) + <span class="number">1</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            mp.set(pre, <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> count;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></details><details>    <summary>Golang</summary><figure class="highlight golang"><figcaption><span>[sol2-Golang]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">subarraySum</span><span class="params">(nums []<span class="keyword">int</span>, k <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    count, pre := <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">    m := <span class="keyword">map</span>[<span class="keyword">int</span>]<span class="keyword">int</span>&#123;&#125;</span><br><span class="line">    m[<span class="number">0</span>] = <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(nums); i++ &#123;</span><br><span class="line">        pre += nums[i]</span><br><span class="line">        <span class="keyword">if</span> _, ok := m[pre - k]; ok &#123;</span><br><span class="line">            count += m[pre - k]</span><br><span class="line">        &#125;</span><br><span class="line">        m[pre] += <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> count</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><p><strong>å¤æ‚åº¦åˆ†æ</strong></p><ul><li><p>æ—¶é—´å¤æ‚åº¦ï¼š<em>O(n)*ï¼Œå…¶ä¸­ *n</em> ä¸ºæ•°ç»„çš„é•¿åº¦ã€‚æˆ‘ä»¬éå†æ•°ç»„çš„æ—¶é—´å¤æ‚åº¦ä¸º <em>O(n)</em>ï¼Œä¸­é—´åˆ©ç”¨å“ˆå¸Œè¡¨æŸ¥è¯¢åˆ é™¤çš„å¤æ‚åº¦å‡ä¸º <em>O(1)</em>ï¼Œå› æ­¤æ€»æ—¶é—´å¤æ‚åº¦ä¸º <em>O(n)</em>ã€‚</p></li><li><p>ç©ºé—´å¤æ‚åº¦ï¼š<em>O(n)*ï¼Œå…¶ä¸­ *n</em> ä¸ºæ•°ç»„çš„é•¿åº¦ã€‚å“ˆå¸Œè¡¨åœ¨æœ€åæƒ…å†µä¸‹å¯èƒ½æœ‰ <em>n</em> ä¸ªä¸åŒçš„é”®å€¼ï¼Œå› æ­¤éœ€è¦ <em>O(n)</em> çš„ç©ºé—´å¤æ‚åº¦ã€‚</p></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•° k ï¼Œè¯·ä½ ç»Ÿè®¡å¹¶è¿”å›è¯¥æ•°ç»„ä¸­å’Œä¸º k çš„è¿ç»­å­æ•°ç»„çš„ä¸ªæ•°ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="2021å¹´10æœˆ" scheme="http://yoursite.com/categories/2021%E5%B9%B410%E6%9C%88/"/>
    
    
      <category term="LeetCode" scheme="http://yoursite.com/tags/LeetCode/"/>
    
      <category term="Array" scheme="http://yoursite.com/tags/Array/"/>
    
      <category term="Hash Table" scheme="http://yoursite.com/tags/Hash-Table/"/>
    
      <category term="Prefix Sum" scheme="http://yoursite.com/tags/Prefix-Sum/"/>
    
  </entry>
  
  <entry>
    <title>MySQLé¢è¯•é«˜é¢‘20é—®</title>
    <link href="http://yoursite.com/2021/10/31/MySQL%E9%9D%A2%E8%AF%95%E9%AB%98%E9%A2%9120%E9%97%AE/"/>
    <id>http://yoursite.com/2021/10/31/MySQLé¢è¯•é«˜é¢‘20é—®/</id>
    <published>2021-10-31T06:12:12.000Z</published>
    <updated>2021-10-31T08:20:36.687Z</updated>
    
    <content type="html"><![CDATA[<p>MySQLé¢è¯•é«˜é¢‘20é—®</p><a id="more"></a><p>[TOC]</p><h1 id="æ•°æ®åº“"><a href="#æ•°æ®åº“" class="headerlink" title="æ•°æ®åº“"></a>æ•°æ®åº“</h1><p>20é“MySQLé¢è¯•é¢˜<a href="http://coderleixiaoshuai.gitee.io/java-eight-part/#/" target="_blank" rel="noopener">^1</a>   </p><h2 id="è¯´è¯´MySQL-çš„åŸºç¡€æ¶æ„å›¾"><a href="#è¯´è¯´MySQL-çš„åŸºç¡€æ¶æ„å›¾" class="headerlink" title="è¯´è¯´MySQL çš„åŸºç¡€æ¶æ„å›¾"></a>è¯´è¯´MySQL çš„åŸºç¡€æ¶æ„å›¾</h2><p><a href="https://blog.csdn.net/GrayGo/article/details/118885029#:~:text=Mysql%20%E7%9A%84%20%E5%9F%BA%E7%A1%80%E6%9E%B6%E6%9E%84,MySql%20%E5%9C%A8%E6%9E%B6%E6%9E%84%E4%B8%8A%E6%80%BB%E4%BD%93%E4%B8%8A%E5%8F%AF%E4%BB%A5%E5%88%86%E4%B8%BA%E4%B8%A4%E4%B8%AA%E9%83%A8%E5%88%86%EF%BC%8C%E5%88%86%E5%88%AB%E6%98%AFserver%E5%B1%82%E5%92%8C%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E%E5%B1%82%E3%80%82%201.server%E5%B1%82%E7%BB%93%E6%9E%84%20Server%E5%B1%82%E5%8C%85%E6%8B%AC%E8%BF%9E%E6%8E%A5%E5%99%A8%EF%BC%8C%E6%9F%A5%E8%AF%A2%E5%99%A8%EF%BC%8C%E5%88%86%E6%9E%90%E5%99%A8%EF%BC%8C%E4%BC%98%E5%8C%96%E5%99%A8%EF%BC%8C%E6%89%A7%E8%A1%8C%E5%99%A8%E3%80%82" target="_blank" rel="noopener">https://blog.csdn.net/GrayGo/article/details/118885029#:~:text=Mysql%20%E7%9A%84%20%E5%9F%BA%E7%A1%80%E6%9E%B6%E6%9E%84,MySql%20%E5%9C%A8%E6%9E%B6%E6%9E%84%E4%B8%8A%E6%80%BB%E4%BD%93%E4%B8%8A%E5%8F%AF%E4%BB%A5%E5%88%86%E4%B8%BA%E4%B8%A4%E4%B8%AA%E9%83%A8%E5%88%86%EF%BC%8C%E5%88%86%E5%88%AB%E6%98%AFserver%E5%B1%82%E5%92%8C%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E%E5%B1%82%E3%80%82%201.server%E5%B1%82%E7%BB%93%E6%9E%84%20Server%E5%B1%82%E5%8C%85%E6%8B%AC%E8%BF%9E%E6%8E%A5%E5%99%A8%EF%BC%8C%E6%9F%A5%E8%AF%A2%E5%99%A8%EF%BC%8C%E5%88%86%E6%9E%90%E5%99%A8%EF%BC%8C%E4%BC%98%E5%8C%96%E5%99%A8%EF%BC%8C%E6%89%A7%E8%A1%8C%E5%99%A8%E3%80%82</a></p><p>Mysqlé€»è¾‘æ¶æ„å›¾ä¸»è¦åˆ†ä¸‰å±‚ï¼š ï¼ˆ1ï¼‰ç¬¬ä¸€å±‚è´Ÿè´£è¿æ¥å¤„ç†ï¼Œæˆæƒè®¤è¯ï¼Œå®‰å…¨ç­‰ç­‰ ï¼ˆ2ï¼‰ç¬¬äºŒå±‚è´Ÿè´£ç¼–è¯‘å¹¶ä¼˜åŒ–SQL<br>ï¼ˆ3ï¼‰ç¬¬ä¸‰å±‚æ˜¯å­˜å‚¨å¼•æ“<br><a href="https://zhuanlan.zhihu.com/p/391596282" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/391596282</a></p><h2 id="ä¸€æ¡SQLæŸ¥è¯¢è¯­å¥åœ¨MySQLä¸­å¦‚ä½•æ‰§è¡Œçš„ï¼Ÿ"><a href="#ä¸€æ¡SQLæŸ¥è¯¢è¯­å¥åœ¨MySQLä¸­å¦‚ä½•æ‰§è¡Œçš„ï¼Ÿ" class="headerlink" title="ä¸€æ¡SQLæŸ¥è¯¢è¯­å¥åœ¨MySQLä¸­å¦‚ä½•æ‰§è¡Œçš„ï¼Ÿ"></a>ä¸€æ¡SQLæŸ¥è¯¢è¯­å¥åœ¨MySQLä¸­å¦‚ä½•æ‰§è¡Œçš„ï¼Ÿ</h2><p>å…ˆæ£€æŸ¥è¯¥è¯­å¥æ˜¯å¦æœ‰æƒé™ï¼Œå¦‚æœæ²¡æœ‰æƒé™ï¼Œç›´æ¥è¿”å›é”™è¯¯ä¿¡æ¯ï¼Œå¦‚æœæœ‰æƒé™ä¼šå…ˆæŸ¥è¯¢ç¼“å­˜(MySQL8.0 ç‰ˆæœ¬ä»¥å‰)ã€‚</p><p>å¦‚æœæ²¡æœ‰ç¼“å­˜ï¼Œåˆ†æå™¨è¿›è¡Œè¯æ³•åˆ†æï¼Œæå– sql è¯­å¥ä¸­ select ç­‰å…³é”®å…ƒç´ ï¼Œç„¶ååˆ¤æ–­ sql è¯­å¥æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯ï¼Œæ¯”å¦‚å…³é”®è¯æ˜¯å¦æ­£ç¡®ç­‰ç­‰ã€‚</p><p>æœ€åä¼˜åŒ–å™¨ç¡®å®šæ‰§è¡Œæ–¹æ¡ˆè¿›è¡Œæƒé™æ ¡éªŒï¼Œå¦‚æœæ²¡æœ‰æƒé™å°±ç›´æ¥è¿”å›é”™è¯¯ä¿¡æ¯ï¼Œå¦‚æœæœ‰æƒé™å°±ä¼šè°ƒç”¨æ•°æ®åº“å¼•æ“æ¥å£ï¼Œè¿”å›æ‰§è¡Œç»“æœã€‚</p><h2 id="æ—¥å¸¸å·¥ä½œä¸­ä½ æ˜¯æ€ä¹ˆä¼˜åŒ–SQLçš„ï¼Ÿ"><a href="#æ—¥å¸¸å·¥ä½œä¸­ä½ æ˜¯æ€ä¹ˆä¼˜åŒ–SQLçš„ï¼Ÿ" class="headerlink" title="æ—¥å¸¸å·¥ä½œä¸­ä½ æ˜¯æ€ä¹ˆä¼˜åŒ–SQLçš„ï¼Ÿ"></a>æ—¥å¸¸å·¥ä½œä¸­ä½ æ˜¯æ€ä¹ˆä¼˜åŒ–SQLçš„ï¼Ÿ</h2><p>1 ä¼˜åŒ–è¡¨ç»“æ„</p><p>ï¼ˆ1ï¼‰å°½é‡ä½¿ç”¨æ•°å­—å‹å­—æ®µ</p><p>è‹¥åªå«æ•°å€¼ä¿¡æ¯çš„å­—æ®µå°½é‡ä¸è¦è®¾è®¡ä¸ºå­—ç¬¦å‹ï¼Œè¿™ä¼šé™ä½æŸ¥è¯¢å’Œè¿æ¥çš„æ€§èƒ½ï¼Œå¹¶ä¼šå¢åŠ å­˜å‚¨å¼€é”€ã€‚ è¿™æ˜¯å› ä¸ºå¼•æ“åœ¨å¤„ç†æŸ¥è¯¢å’Œè¿æ¥æ—¶ä¼šé€ä¸ªæ¯”è¾ƒå­—ç¬¦ä¸²ä¸­æ¯ä¸€ä¸ªå­—ç¬¦ï¼Œè€Œå¯¹äºæ•°å­—å‹è€Œè¨€åªéœ€è¦æ¯”è¾ƒä¸€æ¬¡å°±å¤Ÿäº†ã€‚</p><p>ï¼ˆ2ï¼‰å°½å¯èƒ½çš„ä½¿ç”¨ varchar ä»£æ›¿ char</p><p>å˜é•¿å­—æ®µå­˜å‚¨ç©ºé—´å°ï¼Œå¯ä»¥èŠ‚çœå­˜å‚¨ç©ºé—´ã€‚</p><p>ï¼ˆ3ï¼‰å½“ç´¢å¼•åˆ—å¤§é‡é‡å¤æ•°æ®æ—¶ï¼Œå¯ä»¥æŠŠç´¢å¼•åˆ é™¤æ‰</p><p>æ¯”å¦‚æœ‰ä¸€åˆ—æ˜¯æ€§åˆ«ï¼Œå‡ ä¹åªæœ‰ç”·ã€å¥³ã€æœªçŸ¥ï¼Œè¿™æ ·çš„ç´¢å¼•æ˜¯æ— æ•ˆçš„ã€‚</p><p>2 ä¼˜åŒ–æŸ¥è¯¢</p><ul><li>åº”å°½é‡é¿å…åœ¨ where å­å¥ä¸­ä½¿ç”¨!=æˆ–&lt;&gt;æ“ä½œç¬¦</li><li>åº”å°½é‡é¿å…åœ¨ where å­å¥ä¸­ä½¿ç”¨ or æ¥è¿æ¥æ¡ä»¶</li><li>ä»»ä½•æŸ¥è¯¢ä¹Ÿä¸è¦å‡ºç°select *</li><li>é¿å…åœ¨ where å­å¥ä¸­å¯¹å­—æ®µè¿›è¡Œ null å€¼åˆ¤æ–­</li></ul><p>3 ç´¢å¼•ä¼˜åŒ–</p><p>å¯¹ä½œä¸ºæŸ¥è¯¢æ¡ä»¶å’Œ order byçš„å­—æ®µå»ºç«‹ç´¢å¼•<br>é¿å…å»ºç«‹è¿‡å¤šçš„ç´¢å¼•ï¼Œå¤šä½¿ç”¨ç»„åˆç´¢å¼•</p><p>ç´¢å¼•ä¼˜åŒ–çš„ä¸€äº›è¦ç‚¹ï¼š<br> ä½¿ç”¨ç´¢å¼•æ—¶ï¼Œæœ‰ä¸€äº›æŠ€å·§ï¼š</p><pre><code>1.ç´¢å¼•ä¸ä¼šåŒ…å«æœ‰NULLçš„åˆ—   åªè¦åˆ—ä¸­åŒ…å«æœ‰NULLå€¼ï¼Œéƒ½å°†ä¸ä¼šè¢«åŒ…å«åœ¨ç´¢å¼•ä¸­ï¼Œå¤åˆç´¢å¼•ä¸­åªè¦æœ‰ä¸€åˆ—å«æœ‰NULLå€¼ï¼Œé‚£ä¹ˆè¿™ä¸€åˆ—å¯¹äºæ­¤ç¬¦åˆç´¢å¼•å°±æ˜¯æ— æ•ˆçš„ã€‚2.ä½¿ç”¨çŸ­ç´¢å¼•   å¯¹ä¸²åˆ—è¿›è¡Œç´¢å¼•ï¼Œå¦‚æœå¯ä»¥å°±åº”è¯¥æŒ‡å®šä¸€ä¸ªå‰ç¼€é•¿åº¦ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæœ‰ä¸€ä¸ªcharï¼ˆ255ï¼‰çš„åˆ—ï¼Œå¦‚æœåœ¨å‰10ä¸ªæˆ–20ä¸ªå­—ç¬¦å†…ï¼Œå¤šæ•°å€¼æ˜¯å”¯ä¸€çš„ï¼Œé‚£ä¹ˆå°±ä¸è¦å¯¹æ•´ä¸ªåˆ—è¿›è¡Œç´¢å¼•ã€‚çŸ­ç´¢å¼•ä¸ä»…å¯ä»¥æé«˜æŸ¥è¯¢é€Ÿåº¦è€Œä¸”å¯ä»¥èŠ‚çœç£ç›˜ç©ºé—´å’ŒI/Oæ“ä½œã€‚3.ç´¢å¼•åˆ—æ’åº   mysqlæŸ¥è¯¢åªä½¿ç”¨ä¸€ä¸ªç´¢å¼•ï¼Œå› æ­¤å¦‚æœwhereå­å¥ä¸­å·²ç»ä½¿ç”¨äº†ç´¢å¼•çš„è¯ï¼Œé‚£ä¹ˆorder byä¸­çš„åˆ—æ˜¯ä¸ä¼šä½¿ç”¨ç´¢å¼•çš„ã€‚å› æ­¤æ•°æ®åº“é»˜è®¤æ’åºå¯ä»¥ç¬¦åˆè¦æ±‚çš„æƒ…å†µä¸‹ä¸è¦ä½¿ç”¨æ’åºæ“ä½œï¼Œå°½é‡ä¸è¦åŒ…å«å¤šä¸ªåˆ—çš„æ’åºï¼Œå¦‚æœéœ€è¦æœ€å¥½ç»™è¿™äº›åˆ—å»ºå¤åˆç´¢å¼•ã€‚4.likeè¯­å¥æ“ä½œ  ä¸€èˆ¬æƒ…å†µä¸‹ä¸é¼“åŠ±ä½¿ç”¨likeæ“ä½œï¼Œå¦‚æœéä½¿ç”¨ä¸å¯ï¼Œæ³¨æ„æ­£ç¡®çš„ä½¿ç”¨æ–¹å¼ã€‚like â€˜%aaa%â€™ä¸ä¼šä½¿ç”¨ç´¢å¼•ï¼Œè€Œlike â€˜aaa%â€™å¯ä»¥ä½¿ç”¨ç´¢å¼•ã€‚5.ä¸è¦åœ¨åˆ—ä¸Šè¿›è¡Œè¿ç®—6.ä¸ä½¿ç”¨NOT IN ã€&lt;&gt;ã€ï¼=æ“ä½œï¼Œä½†&lt;,&lt;=ï¼Œ=ï¼Œ&gt;,&gt;=,BETWEEN,INæ˜¯å¯ä»¥ç”¨åˆ°ç´¢å¼•çš„7.ç´¢å¼•è¦å»ºç«‹åœ¨ç»å¸¸è¿›è¡Œselectæ“ä½œçš„å­—æ®µä¸Šã€‚   è¿™æ˜¯å› ä¸ºï¼Œå¦‚æœè¿™äº›åˆ—å¾ˆå°‘ç”¨åˆ°ï¼Œé‚£ä¹ˆæœ‰æ— ç´¢å¼•å¹¶ä¸èƒ½æ˜æ˜¾æ”¹å˜æŸ¥è¯¢é€Ÿåº¦ã€‚ç›¸åï¼Œç”±äºå¢åŠ äº†ç´¢å¼•ï¼Œåè€Œé™ä½äº†ç³»ç»Ÿçš„ç»´æŠ¤é€Ÿåº¦å’Œå¢å¤§äº†ç©ºé—´éœ€æ±‚ã€‚8.ç´¢å¼•è¦å»ºç«‹åœ¨å€¼æ¯”è¾ƒå”¯ä¸€çš„å­—æ®µä¸Šã€‚9.å¯¹äºé‚£äº›å®šä¹‰ä¸ºtextã€imageå’Œbitæ•°æ®ç±»å‹çš„åˆ—ä¸åº”è¯¥å¢åŠ ç´¢å¼•ã€‚å› ä¸ºè¿™äº›åˆ—çš„æ•°æ®é‡è¦ä¹ˆç›¸å½“å¤§ï¼Œè¦ä¹ˆå–å€¼å¾ˆå°‘ã€‚10.åœ¨whereå’Œjoinä¸­å‡ºç°çš„åˆ—éœ€è¦å»ºç«‹ç´¢å¼•ã€‚11.whereçš„æŸ¥è¯¢æ¡ä»¶é‡Œæœ‰ä¸ç­‰å·(where column != â€¦),mysqlå°†æ— æ³•ä½¿ç”¨ç´¢å¼•ã€‚12.å¦‚æœwhereå­—å¥çš„æŸ¥è¯¢æ¡ä»¶é‡Œä½¿ç”¨äº†å‡½æ•°(å¦‚ï¼šwhere DAY(column)=â€¦),mysqlå°†æ— æ³•ä½¿ç”¨ç´¢å¼•ã€‚13.åœ¨joinæ“ä½œä¸­(éœ€è¦ä»å¤šä¸ªæ•°æ®è¡¨æå–æ•°æ®æ—¶)ï¼Œmysqlåªæœ‰åœ¨ä¸»é”®å’Œå¤–é”®çš„æ•°æ®ç±»å‹ç›¸åŒæ—¶æ‰èƒ½ä½¿ç”¨ç´¢å¼•ï¼Œå¦åˆ™åŠæ—¶å»ºç«‹äº†ç´¢å¼•ä¹Ÿä¸ä¼šä½¿ç”¨ã€‚ç´¢å¼•çš„åˆ›å»ºåŸåˆ™ç´¢å¼•å¹¶éè¶Šå¤šè¶Šå¥½ï¼Œä¸€ä¸ªè¡¨ä¸­å¦‚æœæœ‰å¤§é‡çš„ç´¢å¼•ï¼Œä¸ä»…å ç”¨ç£ç›˜ç©ºé—´ï¼Œè€Œä¸”ä¼šå½±å“INSERTã€DELETEã€UPDATEç­‰è¯­å¥çš„æ€§èƒ½ï¼Œå› ä¸ºåœ¨è¡¨ä¸­çš„æ•°æ®æ›´æ”¹çš„åŒæ—¶ï¼Œç´¢å¼•ä¹Ÿä¼šè¿›è¡Œè°ƒæ•´å’Œæ›´æ–°é¿å…å¯¹ç»å¸¸æ›´æ–°çš„è¡¨è¿›è¡Œè¿‡å¤šçš„ç´¢å¼•ï¼Œå¹¶ä¸”ç´¢å¼•ä¸­çš„åˆ—å°½å¯èƒ½å°‘ã€‚è€Œå¯¹ç»å¸¸ç”¨äºæŸ¥è¯¢çš„å­—æ®µåº”è¯¥åˆ›å»ºç´¢å¼•ï¼Œä½†è¦é¿å…æ·»åŠ ä¸å¿…è¦çš„å­—æ®µã€‚æ•°æ®é‡å°çš„è¡¨æœ€å¥½ä¸è¦ä½¿ç”¨ç´¢å¼•ï¼Œç”±äºæ•°æ®è¾ƒå°‘ï¼ŒæŸ¥è¯¢èŠ±è´¹çš„æ—¶é—´å¯èƒ½æ¯”éå†ç´¢å¼•çš„æ—¶é—´è¿˜è¦çŸ­ï¼Œç´¢å¼•å¯èƒ½ä¸ä¼šäº§ç”Ÿä¼˜åŒ–æ•ˆæœã€‚åœ¨æ¡ä»¶è¡¨è¾¾å¼ä¸­ç»å¸¸ç”¨åˆ°çš„ä¸åŒå€¼è¾ƒå¤šçš„åˆ—ä¸Šå»ºç«‹ç´¢å¼•ï¼Œåœ¨ä¸åŒå€¼å¾ˆå°‘çš„åˆ—ä¸Šä¸è¦å»ºç«‹ç´¢å¼•ã€‚æ¯”å¦‚åœ¨å­¦ç”Ÿè¡¨çš„â€œæ€§åˆ«â€å­—æ®µä¸Šåªæœ‰â€œç”·â€ä¸â€œå¥³â€ä¸¤ä¸ªä¸åŒå€¼ï¼Œå› æ­¤å°±æ— é¡»å»ºç«‹ç´¢å¼•ã€‚å¦‚æœå»ºç«‹ç´¢å¼•ï¼Œä¸ä½†ä¸ä¼šæé«˜æŸ¥è¯¢æ•ˆç‡ï¼Œåè€Œä¼šä¸¥é‡é™ä½æ•°æ®æ›´æ–°é€Ÿåº¦ã€‚å½“å”¯ä¸€æ€§æ˜¯æŸç§æ•°æ®æœ¬èº«çš„ç‰¹å¾æ—¶ï¼ŒæŒ‡å®šå”¯ä¸€ç´¢å¼•ã€‚ä½¿ç”¨å”¯ä¸€ç´¢å¼•éœ€èƒ½ç¡®ä¿å®šä¹‰çš„åˆ—çš„æ•°æ®å®Œæ•´æ€§ï¼Œä»¥æé«˜æŸ¥è¯¢é€Ÿåº¦ã€‚åœ¨é¢‘ç¹è¿›è¡Œæ’åºæˆ–åˆ†ç»„ï¼ˆå³è¿›è¡Œgroup byæˆ–order byæ“ä½œï¼‰çš„åˆ—ä¸Šå»ºç«‹ç´¢å¼•ï¼Œå¦‚æœå¾…æ’åºçš„åˆ—æœ‰å¤šä¸ªï¼Œå¯ä»¥åœ¨è¿™äº›åˆ—ä¸Šå»ºç«‹ç»„åˆç´¢å¼•ã€‚æœç´¢çš„ç´¢å¼•åˆ—ï¼Œä¸ä¸€å®šæ˜¯æ‰€è¦é€‰æ‹©çš„åˆ—ã€‚æ¢å¥è¯è¯´ï¼Œæœ€é€‚åˆç´¢å¼•çš„åˆ—æ˜¯å‡ºç°åœ¨WHEREå­å¥ä¸­çš„åˆ—ï¼Œæˆ–è¿æ¥å­å¥ä¸­æŒ‡å®šçš„åˆ—ï¼Œè€Œä¸æ˜¯å‡ºç°åœ¨SELECTå…³é”®å­—åçš„é€‰æ‹©åˆ—è¡¨ä¸­çš„åˆ—ã€‚ä½¿ç”¨çŸ­ç´¢å¼•ã€‚å¦‚æœå¯¹å­—ç¬¦ä¸²åˆ—è¿›è¡Œç´¢å¼•ï¼Œåº”è¯¥æŒ‡å®šä¸€ä¸ªå‰ç¼€é•¿åº¦ï¼Œåªè¦æœ‰å¯èƒ½å°±åº”è¯¥è¿™æ ·åšã€‚ä¾‹å¦‚ï¼Œæœ‰ä¸€ä¸ªCHAR(200)åˆ—ï¼Œå¦‚æœåœ¨å‰10ä¸ªæˆ–20ä¸ªå­—ç¬¦å†…ï¼Œå¤šæ•°å€¼æ˜¯å”¯ä¸€çš„ï¼Œé‚£ä¹ˆå°±ä¸è¦å¯¹æ•´ä¸ªåˆ—è¿›è¡Œç´¢å¼•ã€‚å¯¹å‰10ä¸ªæˆ–20ä¸ªå­—ç¬¦è¿›è¡Œç´¢å¼•èƒ½å¤ŸèŠ‚çœå¤§é‡ç´¢å¼•ç©ºé—´ï¼Œä¹Ÿå¯èƒ½ä¼šä½¿æŸ¥è¯¢æ›´å¿«ã€‚è¾ƒå°çš„ç´¢å¼•æ¶‰åŠçš„ç£ç›˜ IO è¾ƒå°‘ï¼Œè¾ƒçŸ­çš„å€¼æ¯”è¾ƒèµ·æ¥æ›´å¿«ã€‚æ›´ä¸ºé‡è¦çš„æ˜¯ï¼Œå¯¹äºè¾ƒçŸ­çš„é”®å€¼ï¼Œç´¢å¼•é«˜é€Ÿç¼“å­˜ä¸­çš„å—èƒ½å®¹çº³æ›´å¤šçš„é”®å€¼ï¼Œå› æ­¤ï¼ŒMySQL ä¹Ÿå¯ä»¥åœ¨å†…å­˜ä¸­å®¹çº³æ›´å¤šçš„å€¼ã€‚è¿™æ ·å°±å¢åŠ äº†æ‰¾åˆ°è¡Œè€Œä¸ç”¨è¯»å–ç´¢å¼•ä¸­è¾ƒå¤šå—çš„å¯èƒ½æ€§ã€‚åˆ©ç”¨æœ€å·¦å‰ç¼€ã€‚åœ¨åˆ›å»ºä¸€ä¸ªnåˆ—çš„ç´¢å¼•æ—¶ï¼Œå®é™…æ˜¯åˆ›å»ºäº†MySQLå¯åˆ©ç”¨çš„nä¸ªç´¢å¼•ã€‚å¤šåˆ—ç´¢å¼•å¯èµ·å‡ ä¸ªç´¢å¼•çš„ä½œç”¨ï¼Œå› ä¸ºå¯åˆ©ç”¨ç´¢å¼•ä¸­æœ€å·¦è¾¹çš„åˆ—é›†æ¥åŒ¹é…è¡Œã€‚è¿™æ ·çš„åˆ—é›†ç§°ä¸ºæœ€å·¦å‰ç¼€ã€‚å¯¹äºInnoDBå­˜å‚¨å¼•æ“çš„è¡¨ï¼Œè®°å½•é»˜è®¤ä¼šæŒ‰ç…§ä¸€å®šçš„é¡ºåºä¿å­˜ï¼Œå¦‚æœæœ‰æ˜ç¡®å®šä¹‰çš„ä¸»é”®ï¼Œåˆ™æŒ‰ç…§ä¸»é”®é¡ºåºä¿å­˜ã€‚å¦‚æœæ²¡æœ‰ä¸»é”®ï¼Œä½†æ˜¯æœ‰å”¯ä¸€ç´¢å¼•ï¼Œé‚£ä¹ˆå°±æ˜¯æŒ‰ç…§å”¯ä¸€ç´¢å¼•çš„é¡ºåºä¿å­˜ã€‚å¦‚æœæ—¢æ²¡æœ‰ä¸»é”®åˆæ²¡æœ‰å”¯ä¸€ç´¢å¼•ï¼Œé‚£ä¹ˆè¡¨ä¸­ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªå†…éƒ¨åˆ—ï¼ŒæŒ‰ç…§è¿™ä¸ªåˆ—çš„é¡ºåºä¿å­˜ã€‚æŒ‰ç…§ä¸»é”®æˆ–è€…å†…éƒ¨åˆ—è¿›è¡Œçš„è®¿é—®æ˜¯æœ€å¿«çš„ï¼Œæ‰€ä»¥InnoDBè¡¨å°½é‡è‡ªå·±æŒ‡å®šä¸»é”®ï¼Œå½“è¡¨ä¸­åŒæ—¶æœ‰å‡ ä¸ªåˆ—éƒ½æ˜¯å”¯ä¸€çš„ï¼Œéƒ½å¯ä»¥ä½œä¸ºä¸»é”®çš„æ—¶å€™ï¼Œè¦é€‰æ‹©æœ€å¸¸ä½œä¸ºè®¿é—®æ¡ä»¶çš„åˆ—ä½œä¸ºä¸»é”®ï¼Œæé«˜æŸ¥è¯¢çš„æ•ˆç‡ã€‚å¦å¤–ï¼Œè¿˜éœ€è¦æ³¨æ„ï¼ŒInnoDB è¡¨çš„æ™®é€šç´¢å¼•éƒ½ä¼šä¿å­˜ä¸»é”®çš„é”®å€¼ï¼Œæ‰€ä»¥ä¸»é”®è¦å°½å¯èƒ½é€‰æ‹©è¾ƒçŸ­çš„æ•°æ®ç±»å‹ï¼Œå¯ä»¥æœ‰æ•ˆåœ°å‡å°‘ç´¢å¼•çš„ç£ç›˜å ç”¨ï¼Œæé«˜ç´¢å¼•çš„ç¼“å­˜æ•ˆæœ</code></pre><h2 id="æ€ä¹ˆçœ‹æ‰§è¡Œè®¡åˆ’ï¼ˆexplainï¼‰ï¼Œå¦‚ä½•ç†è§£å…¶ä¸­å„ä¸ªå­—æ®µçš„å«ä¹‰ï¼Ÿ"><a href="#æ€ä¹ˆçœ‹æ‰§è¡Œè®¡åˆ’ï¼ˆexplainï¼‰ï¼Œå¦‚ä½•ç†è§£å…¶ä¸­å„ä¸ªå­—æ®µçš„å«ä¹‰ï¼Ÿ" class="headerlink" title="æ€ä¹ˆçœ‹æ‰§è¡Œè®¡åˆ’ï¼ˆexplainï¼‰ï¼Œå¦‚ä½•ç†è§£å…¶ä¸­å„ä¸ªå­—æ®µçš„å«ä¹‰ï¼Ÿ"></a>æ€ä¹ˆçœ‹æ‰§è¡Œè®¡åˆ’ï¼ˆexplainï¼‰ï¼Œå¦‚ä½•ç†è§£å…¶ä¸­å„ä¸ªå­—æ®µçš„å«ä¹‰ï¼Ÿ</h2><p>åœ¨ select è¯­å¥ä¹‹å‰å¢åŠ explainå…³é”®å­—ï¼Œä¼šè¿”å›æ‰§è¡Œè®¡åˆ’çš„ä¿¡æ¯ã€‚</p><h2 id="å…³å¿ƒè¿‡ä¸šåŠ¡ç³»ç»Ÿé‡Œé¢çš„sqlè€—æ—¶å—ï¼Ÿç»Ÿè®¡è¿‡æ…¢æŸ¥è¯¢å—ï¼Ÿå¯¹æ…¢æŸ¥è¯¢éƒ½æ€ä¹ˆä¼˜åŒ–è¿‡ï¼Ÿ"><a href="#å…³å¿ƒè¿‡ä¸šåŠ¡ç³»ç»Ÿé‡Œé¢çš„sqlè€—æ—¶å—ï¼Ÿç»Ÿè®¡è¿‡æ…¢æŸ¥è¯¢å—ï¼Ÿå¯¹æ…¢æŸ¥è¯¢éƒ½æ€ä¹ˆä¼˜åŒ–è¿‡ï¼Ÿ" class="headerlink" title="å…³å¿ƒè¿‡ä¸šåŠ¡ç³»ç»Ÿé‡Œé¢çš„sqlè€—æ—¶å—ï¼Ÿç»Ÿè®¡è¿‡æ…¢æŸ¥è¯¢å—ï¼Ÿå¯¹æ…¢æŸ¥è¯¢éƒ½æ€ä¹ˆä¼˜åŒ–è¿‡ï¼Ÿ"></a>å…³å¿ƒè¿‡ä¸šåŠ¡ç³»ç»Ÿé‡Œé¢çš„sqlè€—æ—¶å—ï¼Ÿç»Ÿè®¡è¿‡æ…¢æŸ¥è¯¢å—ï¼Ÿå¯¹æ…¢æŸ¥è¯¢éƒ½æ€ä¹ˆä¼˜åŒ–è¿‡ï¼Ÿ</h2><p>åˆ†æè¯­å¥ï¼Œæ˜¯å¦åŠ è½½äº†ä¸å¿…è¦çš„å­—æ®µ/æ•°æ®<br>åˆ†æ SQL æ‰§è¡Œå¥ï¼Œæ˜¯å¦å‘½ä¸­ç´¢å¼•ç­‰<br>å¦‚æœ SQL å¾ˆå¤æ‚ï¼Œä¼˜åŒ– SQL ç»“æ„<br>å¦‚æœè¡¨æ•°æ®é‡å¤ªå¤§ï¼Œè€ƒè™‘åˆ†è¡¨</p><p><a href="https://www.cnblogs.com/zsql/p/13854191.html" target="_blank" rel="noopener">https://www.cnblogs.com/zsql/p/13854191.html</a></p><h2 id="èšé›†ç´¢å¼•ä¸éèšé›†ç´¢å¼•çš„åŒºåˆ«"><a href="#èšé›†ç´¢å¼•ä¸éèšé›†ç´¢å¼•çš„åŒºåˆ«" class="headerlink" title="èšé›†ç´¢å¼•ä¸éèšé›†ç´¢å¼•çš„åŒºåˆ«"></a>èšé›†ç´¢å¼•ä¸éèšé›†ç´¢å¼•çš„åŒºåˆ«</h2><p>Primary Keyï¼ˆèšé›†ç´¢å¼•ï¼‰ï¼šInnoDBå­˜å‚¨å¼•æ“çš„è¡¨ä¼šå­˜åœ¨ä¸»é”®ï¼ˆå”¯ä¸€énullï¼‰ï¼Œå¦‚æœå»ºè¡¨çš„æ—¶å€™æ²¡æœ‰æŒ‡å®šä¸»é”®ï¼Œåˆ™ä¼šä½¿ç”¨ç¬¬ä¸€éç©ºçš„å”¯ä¸€ç´¢å¼•ä½œä¸ºèšé›†ç´¢å¼•ï¼Œå¦åˆ™InnoDBä¼šè‡ªåŠ¨å¸®ä½ åˆ›å»ºä¸€ä¸ªä¸å¯è§çš„ã€é•¿åº¦ä¸º6å­—èŠ‚çš„row_idç”¨æ¥ä½œä¸ºèšé›†ç´¢å¼•ã€‚</p><p>å¯ä»¥æŒ‰ä»¥ä¸‹å››ä¸ªç»´åº¦å›ç­”ï¼š</p><p>ï¼ˆ1ï¼‰ä¸€ä¸ªè¡¨ä¸­åªèƒ½æ‹¥æœ‰ä¸€ä¸ªèšé›†ç´¢å¼•ï¼Œè€Œéèšé›†ç´¢å¼•ä¸€ä¸ªè¡¨å¯ä»¥å­˜åœ¨å¤šä¸ªã€‚</p><p>ï¼ˆ2ï¼‰èšé›†ç´¢å¼•ï¼Œç´¢å¼•ä¸­é”®å€¼çš„é€»è¾‘é¡ºåºå†³å®šäº†è¡¨ä¸­ç›¸åº”è¡Œçš„ç‰©ç†é¡ºåºï¼›éèšé›†ç´¢å¼•ï¼Œç´¢å¼•ä¸­ç´¢å¼•çš„é€»è¾‘é¡ºåºä¸ç£ç›˜ä¸Šè¡Œçš„ç‰©ç†å­˜å‚¨é¡ºåºä¸åŒã€‚</p><p><strong>æ­¤å¤„æœ‰å¼‚è®®ï¼šèšé›†ç´¢å¼•çš„å­˜å‚¨å¹¶ä¸æ˜¯ç‰©ç†ä¸Šè¿ç»­çš„ï¼Œè€Œæ˜¯é€»è¾‘ä¸Šè¿ç»­çš„</strong></p><p>a. InnoDBå­˜å‚¨å¼•æ“è¡¨æ˜¯ç´¢å¼•ç»„ç»‡è¡¨ï¼Œå³è¡¨ä¸­æ•°æ®æŒ‰ç…§ä¸»é”®é¡ºåºå­˜æ”¾ã€‚è€Œèšé›†ç´¢å¼•ï¼ˆclustered indexï¼‰å°±æ˜¯æŒ‰ç…§æ¯å¼ è¡¨çš„ä¸»é”®æ„é€ ä¸€æ£µB+æ ‘ï¼ŒåŒæ—¶å¶å­èŠ‚ç‚¹ä¸­å­˜æ”¾çš„å³ä¸ºæ•´å¼ è¡¨çš„è¡Œè®°å½•æ•°æ®ï¼Œä¹Ÿå°†èšé›†ç´¢å¼•çš„å¶å­èŠ‚ç‚¹ç§°ä¸ºæ•°æ®é¡µã€‚èšé›†ç´¢å¼•çš„è¿™ä¸ªç‰¹æ€§å†³å®šäº†ç´¢å¼•ç»„ç»‡è¡¨ä¸­æ•°æ®ä¹Ÿæ˜¯ç´¢å¼•çš„ä¸€éƒ¨åˆ†ã€‚åŒB+æ ‘æ•°æ®ç»“æ„ä¸€æ ·ï¼Œæ¯ä¸ªæ•°æ®é¡µéƒ½é€šè¿‡ä¸€ä¸ªåŒå‘é“¾è¡¨æ¥è¿›è¡Œé“¾æ¥ã€‚</p><p>ç”±äºå®é™…çš„æ•°æ®é¡µåªèƒ½æŒ‰ç…§ä¸€æ£µB+æ ‘è¿›è¡Œæ’åºï¼Œå› æ­¤æ¯å¼ è¡¨åªèƒ½æ‹¥æœ‰ä¸€ä¸ªèšé›†ç´¢å¼•ã€‚ç”±äºå®šä¹‰äº†æ•°æ®çš„é€»è¾‘é¡ºåºï¼Œèšé›†ç´¢å¼•èƒ½å¤Ÿç‰¹åˆ«å¿«åœ°è®¿é—®é’ˆå¯¹èŒƒå›´å€¼çš„æŸ¥è¯¢ã€‚æŸ¥è¯¢ä¼˜åŒ–å™¨èƒ½å¤Ÿå¿«é€Ÿå‘ç°æŸä¸€æ®µèŒƒå›´çš„æ•°æ®é¡µéœ€è¦æ‰«æã€‚</p><p>èšé›†ç´¢å¼•çš„å­˜å‚¨å¹¶ä¸æ˜¯ç‰©ç†ä¸Šè¿ç»­çš„ï¼Œè€Œæ˜¯é€»è¾‘ä¸Šè¿ç»­çš„ã€‚è¿™å…¶ä¸­æœ‰ä¸¤ç‚¹ï¼šä¸€æ˜¯å‰é¢è¯´è¿‡çš„é¡µé€šè¿‡åŒå‘é“¾è¡¨é“¾æ¥ï¼Œé¡µæŒ‰ç…§ä¸»é”®çš„é¡ºåºæ’åºï¼›å¦ä¸€ç‚¹æ˜¯æ¯ä¸ªé¡µä¸­çš„è®°å½•ä¹Ÿæ˜¯é€šè¿‡åŒå‘é“¾è¡¨è¿›è¡Œç»´æŠ¤çš„ï¼Œç‰©ç†å­˜å‚¨ä¸Šå¯ä»¥åŒæ ·ä¸æŒ‰ç…§ä¸»é”®å­˜å‚¨ã€‚</p><p>b. æœ‰äº›åšå®¢å¯èƒ½ä¼šå‘Šè¯‰æˆ‘ä»¬ï¼šèšé›†ç´¢å¼•æŒ‰ç…§é¡ºåºç‰©ç†åœ°å€å­˜å‚¨æ•°æ®ã€‚å…¶å®ä¸ç„¶ï¼Œèšé›†ç´¢å¼•çš„å­˜å‚¨å¹¶ä¸æ˜¯ç‰©ç†ä¸Šçš„è¿ç»­ï¼Œå› ä¸ºè¿™æ ·çš„ç»´æŠ¤æˆæœ¬ä¼šå¾ˆé«˜ï¼Œè€Œæ˜¯é€»è¾‘ä¸Šçš„è¿ç»­ï¼å…¶ä¸­æœ‰ä¸¤ç‚¹ï¼š<br>1ï¼‰æ‰€æœ‰çš„å¶å­ç»“ç‚¹éƒ½æ˜¯é€šè¿‡åŒå‘é“¾è¡¨è¿æ¥çš„<br>2ï¼‰æ¯ä¸€ä¸ªå¶å­ç»“ç‚¹ä¸­çš„è¡Œè®°å½•ä¹Ÿæ˜¯é€šè¿‡åŒå‘é“¾è¡¨è¿æ¥çš„</p><p>ï¼ˆ3ï¼‰ç´¢å¼•æ˜¯é€šè¿‡äºŒå‰æ ‘çš„æ•°æ®ç»“æ„æ¥æè¿°çš„ï¼Œæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆç†è§£èšç°‡ç´¢å¼•ï¼šç´¢å¼•çš„å¶èŠ‚ç‚¹å°±æ˜¯æ•°æ®èŠ‚ç‚¹ã€‚è€Œéèšç°‡ç´¢å¼•çš„å¶èŠ‚ç‚¹ä»ç„¶æ˜¯ç´¢å¼•èŠ‚ç‚¹ï¼Œåªä¸è¿‡æœ‰ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘å¯¹åº”çš„æ•°æ®å—ã€‚</p><p>ï¼ˆ4ï¼‰èšé›†ç´¢å¼•ï¼šç‰©ç†å­˜å‚¨æŒ‰ç…§ç´¢å¼•æ’åºï¼›éèšé›†ç´¢å¼•ï¼šç‰©ç†å­˜å‚¨ä¸æŒ‰ç…§ç´¢å¼•æ’åºï¼›</p><h3 id="èšé›†ç´¢å¼•-VS-éèšé›†ç´¢å¼•"><a href="#èšé›†ç´¢å¼•-VS-éèšé›†ç´¢å¼•" class="headerlink" title="èšé›†ç´¢å¼• VS éèšé›†ç´¢å¼•"></a>èšé›†ç´¢å¼• VS éèšé›†ç´¢å¼•</h3><p>é‚£ä»€ä¹ˆæ˜¯èšé›†ç´¢å¼•å‘¢ï¼Ÿåœ¨ MySQL ä¸­ï¼ŒB+ æ ‘ç´¢å¼•æŒ‰ç…§å­˜å‚¨æ–¹å¼çš„ä¸åŒåˆ†ä¸ºèšé›†ç´¢å¼•å’Œéèšé›†ç´¢å¼•ã€‚</p><p>è¿™é‡Œæˆ‘ä»¬ç€é‡ä»‹ç» InnoDB ä¸­çš„èšé›†ç´¢å¼•å’Œéèšé›†ç´¢å¼•ï¼š</p><p>â‘ èšé›†ç´¢å¼•ï¼ˆèšç°‡ç´¢å¼•ï¼‰ï¼šä»¥ InnoDB ä½œä¸ºå­˜å‚¨å¼•æ“çš„è¡¨ï¼Œè¡¨ä¸­çš„æ•°æ®éƒ½ä¼šæœ‰ä¸€ä¸ªä¸»é”®ï¼Œå³ä½¿ä½ ä¸åˆ›å»ºä¸»é”®ï¼Œç³»ç»Ÿä¹Ÿä¼šå¸®ä½ åˆ›å»ºä¸€ä¸ªéšå¼çš„ä¸»é”®ã€‚</p><p>è¿™æ˜¯å› ä¸º InnoDB æ˜¯æŠŠæ•°æ®å­˜æ”¾åœ¨ B+ æ ‘ä¸­çš„ï¼Œè€Œ B+ æ ‘çš„é”®å€¼å°±æ˜¯ä¸»é”®ï¼Œåœ¨ B+ æ ‘çš„å¶å­èŠ‚ç‚¹ä¸­ï¼Œå­˜å‚¨äº†è¡¨ä¸­æ‰€æœ‰çš„æ•°æ®ã€‚</p><p>è¿™ç§ä»¥ä¸»é”®ä½œä¸º B+ æ ‘ç´¢å¼•çš„é”®å€¼è€Œæ„å»ºçš„ B+ æ ‘ç´¢å¼•ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºèšé›†ç´¢å¼•ã€‚</p><p>â‘¡éèšé›†ç´¢å¼•ï¼ˆéèšç°‡ç´¢å¼•ï¼‰ï¼šä»¥ä¸»é”®ä»¥å¤–çš„åˆ—å€¼ä½œä¸ºé”®å€¼æ„å»ºçš„ B+ æ ‘ç´¢å¼•ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºéèšé›†ç´¢å¼•ã€‚</p><p>éèšé›†ç´¢å¼•ä¸èšé›†ç´¢å¼•çš„åŒºåˆ«åœ¨äºéèšé›†ç´¢å¼•çš„å¶å­èŠ‚ç‚¹ä¸å­˜å‚¨è¡¨ä¸­çš„æ•°æ®ï¼Œè€Œæ˜¯å­˜å‚¨è¯¥åˆ—å¯¹åº”çš„ä¸»é”®ï¼Œæƒ³è¦æŸ¥æ‰¾æ•°æ®æˆ‘ä»¬è¿˜éœ€è¦æ ¹æ®ä¸»é”®å†å»èšé›†ç´¢å¼•ä¸­è¿›è¡ŒæŸ¥æ‰¾ï¼Œè¿™ä¸ªå†æ ¹æ®èšé›†ç´¢å¼•æŸ¥æ‰¾æ•°æ®çš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬ç§°ä¸ºå›è¡¨ã€‚</p><p><a href="https://www.cnblogs.com/cangqinglang/p/15042752.html" target="_blank" rel="noopener">https://www.cnblogs.com/cangqinglang/p/15042752.html</a></p><h2 id="ä¸ºä»€ä¹ˆè¦ç”¨-B-æ ‘ï¼Œä¸ºä»€ä¹ˆä¸ç”¨æ™®é€šäºŒå‰æ ‘ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦ç”¨-B-æ ‘ï¼Œä¸ºä»€ä¹ˆä¸ç”¨æ™®é€šäºŒå‰æ ‘ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ç”¨ B+ æ ‘ï¼Œä¸ºä»€ä¹ˆä¸ç”¨æ™®é€šäºŒå‰æ ‘ï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦ç”¨ B+ æ ‘ï¼Œä¸ºä»€ä¹ˆä¸ç”¨æ™®é€šäºŒå‰æ ‘ï¼Ÿ</h2><p>å¯ä»¥ä»å‡ ä¸ªç»´åº¦å»çœ‹è¿™ä¸ªé—®é¢˜ï¼ŒæŸ¥è¯¢æ˜¯å¦å¤Ÿå¿«ï¼Œæ•ˆç‡æ˜¯å¦ç¨³å®šï¼Œå­˜å‚¨æ•°æ®å¤šå°‘ï¼Œä»¥åŠæŸ¥æ‰¾ç£ç›˜æ¬¡æ•°ï¼Œä¸ºä»€ä¹ˆä¸æ˜¯æ™®é€šäºŒå‰æ ‘ï¼Œä¸ºä»€ä¹ˆä¸æ˜¯å¹³è¡¡äºŒå‰æ ‘ï¼Œä¸ºä»€ä¹ˆä¸æ˜¯Bæ ‘ï¼Œè€Œååæ˜¯ B+ æ ‘å‘¢ï¼Ÿ</p><p>ï¼ˆ1ï¼‰ä¸ºä»€ä¹ˆä¸æ˜¯æ™®é€šäºŒå‰æ ‘ï¼Ÿ</p><p>å¦‚æœäºŒå‰æ ‘ç‰¹æ®ŠåŒ–ä¸ºä¸€ä¸ªé“¾è¡¨ï¼Œç›¸å½“äºå…¨è¡¨æ‰«æã€‚å¹³è¡¡äºŒå‰æ ‘ç›¸æ¯”äºäºŒå‰æŸ¥æ‰¾æ ‘æ¥è¯´ï¼ŒæŸ¥æ‰¾æ•ˆç‡æ›´ç¨³å®šï¼Œæ€»ä½“çš„æŸ¥æ‰¾é€Ÿåº¦ä¹Ÿæ›´å¿«ã€‚</p><p>ï¼ˆ2ï¼‰ä¸ºä»€ä¹ˆä¸æ˜¯å¹³è¡¡äºŒå‰æ ‘å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨å†…å­˜æ¯”åœ¨ç£ç›˜çš„æ•°æ®ï¼ŒæŸ¥è¯¢æ•ˆç‡å¿«å¾—å¤šã€‚å¦‚æœæ ‘è¿™ç§æ•°æ®ç»“æ„ä½œä¸ºç´¢å¼•ï¼Œé‚£æˆ‘ä»¬æ¯æŸ¥æ‰¾ä¸€æ¬¡æ•°æ®å°±éœ€è¦ä»ç£ç›˜ä¸­è¯»å–ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è¯´çš„ä¸€ä¸ªç£ç›˜å—ï¼Œä½†æ˜¯å¹³è¡¡äºŒå‰æ ‘å¯æ˜¯æ¯ä¸ªèŠ‚ç‚¹åªå­˜å‚¨ä¸€ä¸ªé”®å€¼å’Œæ•°æ®çš„ï¼Œå¦‚æœæ˜¯Bæ ‘ï¼Œå¯ä»¥å­˜å‚¨æ›´å¤šçš„èŠ‚ç‚¹æ•°æ®ï¼Œæ ‘çš„é«˜åº¦ä¹Ÿä¼šé™ä½ï¼Œå› æ­¤è¯»å–ç£ç›˜çš„æ¬¡æ•°å°±é™ä¸‹æ¥å•¦ï¼ŒæŸ¥è¯¢æ•ˆç‡å°±å¿«å•¦ã€‚</p><p>ï¼ˆ3ï¼‰ä¸ºä»€ä¹ˆä¸æ˜¯ B æ ‘è€Œæ˜¯ B+ æ ‘å‘¢ï¼Ÿ</p><p>B+ æ ‘éå¶å­èŠ‚ç‚¹ä¸Šæ˜¯ä¸å­˜å‚¨æ•°æ®çš„ï¼Œä»…å­˜å‚¨é”®å€¼ï¼Œè€ŒBæ ‘èŠ‚ç‚¹ä¸­ä¸ä»…å­˜å‚¨é”®å€¼ï¼Œä¹Ÿä¼šå­˜å‚¨æ•°æ®ã€‚innodbä¸­é¡µçš„é»˜è®¤å¤§å°æ˜¯16KBï¼Œå¦‚æœä¸å­˜å‚¨æ•°æ®ï¼Œé‚£ä¹ˆå°±ä¼šå­˜å‚¨æ›´å¤šçš„é”®å€¼ï¼Œç›¸åº”çš„æ ‘çš„é˜¶æ•°ï¼ˆèŠ‚ç‚¹çš„å­èŠ‚ç‚¹æ ‘ï¼‰å°±ä¼šæ›´å¤§ï¼Œæ ‘å°±ä¼šæ›´çŸ®æ›´èƒ–ï¼Œå¦‚æ­¤ä¸€æ¥æˆ‘ä»¬æŸ¥æ‰¾æ•°æ®è¿›è¡Œç£ç›˜çš„IOæ¬¡æ•°æœ‰ä¼šå†æ¬¡å‡å°‘ï¼Œæ•°æ®æŸ¥è¯¢çš„æ•ˆç‡ä¹Ÿä¼šæ›´å¿«ã€‚</p><p>B+ æ ‘ç´¢å¼•çš„æ‰€æœ‰æ•°æ®å‡å­˜å‚¨åœ¨å¶å­èŠ‚ç‚¹ï¼Œè€Œä¸”æ•°æ®æ˜¯æŒ‰ç…§é¡ºåºæ’åˆ—çš„ï¼Œé“¾è¡¨è¿ç€çš„ã€‚é‚£ä¹ˆ B+ æ ‘ä½¿å¾—èŒƒå›´æŸ¥æ‰¾ï¼Œæ’åºæŸ¥æ‰¾ï¼Œåˆ†ç»„æŸ¥æ‰¾ä»¥åŠå»é‡æŸ¥æ‰¾å˜å¾—å¼‚å¸¸ç®€å•ã€‚</p><h2 id="Hash-ç´¢å¼•å’ŒB-æ ‘ç´¢å¼•åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿä½ åœ¨è®¾è®¡ç´¢å¼•æ˜¯æ€ä¹ˆæŠ‰æ‹©çš„ï¼Ÿ"><a href="#Hash-ç´¢å¼•å’ŒB-æ ‘ç´¢å¼•åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿä½ åœ¨è®¾è®¡ç´¢å¼•æ˜¯æ€ä¹ˆæŠ‰æ‹©çš„ï¼Ÿ" class="headerlink" title="Hash ç´¢å¼•å’ŒB+æ ‘ç´¢å¼•åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿä½ åœ¨è®¾è®¡ç´¢å¼•æ˜¯æ€ä¹ˆæŠ‰æ‹©çš„ï¼Ÿ"></a>Hash ç´¢å¼•å’ŒB+æ ‘ç´¢å¼•åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿä½ åœ¨è®¾è®¡ç´¢å¼•æ˜¯æ€ä¹ˆæŠ‰æ‹©çš„ï¼Ÿ</h2><p>B+ æ ‘å¯ä»¥è¿›è¡ŒèŒƒå›´æŸ¥è¯¢ï¼ŒHash ç´¢å¼•ä¸èƒ½ã€‚<br>B+ æ ‘æ”¯æŒè”åˆç´¢å¼•çš„æœ€å·¦ä¾§åŸåˆ™ï¼ŒHash ç´¢å¼•ä¸æ”¯æŒã€‚<br>B+ æ ‘æ”¯æŒ order by æ’åºï¼ŒHash ç´¢å¼•ä¸æ”¯æŒã€‚<br>Hash ç´¢å¼•åœ¨ç­‰å€¼æŸ¥è¯¢ä¸Šæ¯” B+ æ ‘æ•ˆç‡æ›´é«˜ã€‚<br>B+ æ ‘ä½¿ç”¨ like è¿›è¡Œæ¨¡ç³ŠæŸ¥è¯¢çš„æ—¶å€™ï¼Œlike åé¢ï¼ˆæ¯”å¦‚%å¼€å¤´ï¼‰çš„è¯å¯ä»¥èµ·åˆ°ä¼˜åŒ–çš„ä½œç”¨ï¼ŒHash ç´¢å¼•æ ¹æœ¬æ— æ³•è¿›è¡Œæ¨¡ç³ŠæŸ¥è¯¢ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯æœ€å·¦å‰ç¼€åŸåˆ™ï¼Ÿä»€ä¹ˆæ˜¯æœ€å·¦åŒ¹é…åŸåˆ™ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯æœ€å·¦å‰ç¼€åŸåˆ™ï¼Ÿä»€ä¹ˆæ˜¯æœ€å·¦åŒ¹é…åŸåˆ™ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯æœ€å·¦å‰ç¼€åŸåˆ™ï¼Ÿä»€ä¹ˆæ˜¯æœ€å·¦åŒ¹é…åŸåˆ™ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯æœ€å·¦å‰ç¼€åŸåˆ™ï¼Ÿä»€ä¹ˆæ˜¯æœ€å·¦åŒ¹é…åŸåˆ™ï¼Ÿ</h2><p>æœ€å·¦å‰ç¼€åŸåˆ™ï¼Œå°±æ˜¯æœ€å·¦ä¼˜å…ˆï¼Œåœ¨åˆ›å»ºå¤šåˆ—ç´¢å¼•æ—¶ï¼Œè¦æ ¹æ®ä¸šåŠ¡éœ€æ±‚ï¼Œwhere å­å¥ä¸­ä½¿ç”¨æœ€é¢‘ç¹çš„ä¸€åˆ—æ”¾åœ¨æœ€å·¦è¾¹ã€‚</p><p>å½“æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç»„åˆç´¢å¼•çš„æ—¶å€™ï¼Œå¦‚ (a1,a2,a3)ï¼Œç›¸å½“äºåˆ›å»ºäº†ï¼ˆa1ï¼‰ã€(a1,a2)å’Œ(a1,a2,a3)ä¸‰ä¸ªç´¢å¼•ï¼Œè¿™å°±æ˜¯æœ€å·¦åŒ¹é…åŸåˆ™ã€‚</p><p><a href="https://zhuanlan.zhihu.com/p/142852474" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/142852474</a></p><h2 id="ç´¢å¼•ä¸é€‚åˆå“ªäº›åœºæ™¯"><a href="#ç´¢å¼•ä¸é€‚åˆå“ªäº›åœºæ™¯" class="headerlink" title="ç´¢å¼•ä¸é€‚åˆå“ªäº›åœºæ™¯?"></a>ç´¢å¼•ä¸é€‚åˆå“ªäº›åœºæ™¯?</h2><p>æ•°æ®é‡å°‘çš„ä¸é€‚åˆåŠ ç´¢å¼•<br>æ›´æ–°æ¯”è¾ƒé¢‘ç¹çš„ä¹Ÿä¸é€‚åˆåŠ ç´¢å¼• = åŒºåˆ†åº¦ä½çš„å­—æ®µä¸é€‚åˆåŠ ç´¢å¼•ï¼ˆå¦‚æ€§åˆ«ï¼‰</p><h2 id="ç´¢å¼•æœ‰å“ªäº›ä¼˜ç¼ºç‚¹ï¼Ÿ"><a href="#ç´¢å¼•æœ‰å“ªäº›ä¼˜ç¼ºç‚¹ï¼Ÿ" class="headerlink" title="ç´¢å¼•æœ‰å“ªäº›ä¼˜ç¼ºç‚¹ï¼Ÿ"></a>ç´¢å¼•æœ‰å“ªäº›ä¼˜ç¼ºç‚¹ï¼Ÿ</h2><p>(1) ä¼˜ç‚¹ï¼š</p><p>å”¯ä¸€ç´¢å¼•å¯ä»¥ä¿è¯æ•°æ®åº“è¡¨ä¸­æ¯ä¸€è¡Œçš„æ•°æ®çš„å”¯ä¸€æ€§<br>ç´¢å¼•å¯ä»¥åŠ å¿«æ•°æ®æŸ¥è¯¢é€Ÿåº¦ï¼Œå‡å°‘æŸ¥è¯¢æ—¶é—´</p><p>(2)ç¼ºç‚¹ï¼š</p><p>åˆ›å»ºç´¢å¼•å’Œç»´æŠ¤ç´¢å¼•è¦è€—è´¹æ—¶é—´<br>ç´¢å¼•éœ€è¦å ç‰©ç†ç©ºé—´ï¼Œé™¤äº†æ•°æ®è¡¨å ç”¨æ•°æ®ç©ºé—´ä¹‹å¤–ï¼Œæ¯ä¸€ä¸ªç´¢å¼•è¿˜è¦å ç”¨ä¸€å®šçš„ç‰©ç†ç©ºé—´<br>ä»¥è¡¨ä¸­çš„æ•°æ®è¿›è¡Œå¢ã€åˆ ã€æ”¹çš„æ—¶å€™ï¼Œç´¢å¼•ä¹Ÿè¦åŠ¨æ€çš„ç»´æŠ¤ã€‚</p><h2 id="MySQL-é‡åˆ°è¿‡æ­»é”é—®é¢˜å—ï¼Œä½ æ˜¯å¦‚ä½•è§£å†³çš„ï¼Ÿ"><a href="#MySQL-é‡åˆ°è¿‡æ­»é”é—®é¢˜å—ï¼Œä½ æ˜¯å¦‚ä½•è§£å†³çš„ï¼Ÿ" class="headerlink" title="MySQL é‡åˆ°è¿‡æ­»é”é—®é¢˜å—ï¼Œä½ æ˜¯å¦‚ä½•è§£å†³çš„ï¼Ÿ"></a>MySQL é‡åˆ°è¿‡æ­»é”é—®é¢˜å—ï¼Œä½ æ˜¯å¦‚ä½•è§£å†³çš„ï¼Ÿ</h2><p>ï¼ˆ1ï¼‰æŸ¥çœ‹æ­»é”æ—¥å¿— show engine innodb status; ï¼ˆ2ï¼‰æ‰¾å‡ºæ­»é”Sql<br>ï¼ˆ3ï¼‰åˆ†æsqlåŠ é”æƒ…å†µ<br>ï¼ˆ4ï¼‰æ¨¡æ‹Ÿæ­»é”æ¡ˆå‘<br>ï¼ˆ5ï¼‰åˆ†ææ­»é”æ—¥å¿—<br>ï¼ˆ6ï¼‰åˆ†ææ­»é”ç»“æœ</p><h2 id="è¯´è¯´æ•°æ®åº“çš„ä¹è§‚é”å’Œæ‚²è§‚é”æ˜¯ä»€ä¹ˆä»¥åŠå®ƒä»¬çš„åŒºåˆ«"><a href="#è¯´è¯´æ•°æ®åº“çš„ä¹è§‚é”å’Œæ‚²è§‚é”æ˜¯ä»€ä¹ˆä»¥åŠå®ƒä»¬çš„åŒºåˆ«" class="headerlink" title="è¯´è¯´æ•°æ®åº“çš„ä¹è§‚é”å’Œæ‚²è§‚é”æ˜¯ä»€ä¹ˆä»¥åŠå®ƒä»¬çš„åŒºåˆ«"></a>è¯´è¯´æ•°æ®åº“çš„ä¹è§‚é”å’Œæ‚²è§‚é”æ˜¯ä»€ä¹ˆä»¥åŠå®ƒä»¬çš„åŒºåˆ«</h2><p>ï¼ˆ1ï¼‰æ‚²è§‚é”ï¼š</p><p>æ‚²è§‚é”å¥¹ä¸“ä¸€ä¸”ç¼ºä¹å®‰å…¨æ„Ÿäº†ï¼Œå¥¹çš„å¿ƒåªå±äºå½“å‰äº‹åŠ¡ï¼Œæ¯æ—¶æ¯åˆ»éƒ½æ‹…å¿ƒç€å®ƒå¿ƒçˆ±çš„æ•°æ®å¯èƒ½è¢«åˆ«çš„äº‹åŠ¡ä¿®æ”¹ï¼Œæ‰€ä»¥ä¸€ä¸ªäº‹åŠ¡æ‹¥æœ‰ï¼ˆè·å¾—ï¼‰æ‚²è§‚é”åï¼Œå…¶ä»–ä»»ä½•äº‹åŠ¡éƒ½ä¸èƒ½å¯¹æ•°æ®è¿›è¡Œä¿®æ”¹å•¦ï¼Œåªèƒ½ç­‰å¾…é”è¢«é‡Šæ”¾æ‰å¯ä»¥æ‰§è¡Œã€‚</p><p>ï¼ˆ2ï¼‰ä¹è§‚é”ï¼š</p><p>ä¹è§‚é”çš„â€œä¹è§‚æƒ…ç»ªâ€ä½“ç°åœ¨ï¼Œå®ƒè®¤ä¸ºæ•°æ®çš„å˜åŠ¨ä¸ä¼šå¤ªé¢‘ç¹ã€‚å› æ­¤ï¼Œå®ƒå…è®¸å¤šä¸ªäº‹åŠ¡åŒæ—¶å¯¹æ•°æ®è¿›è¡Œå˜åŠ¨ã€‚</p><p>å®ç°æ–¹å¼ï¼šä¹è§‚é”ä¸€èˆ¬ä¼šä½¿ç”¨ç‰ˆæœ¬å·æœºåˆ¶æˆ–CAS(Compare And Set)ç®—æ³•å®ç°ã€‚</p><h2 id="MVCC-ç†Ÿæ‚‰å—ï¼ŒçŸ¥é“å®ƒçš„åº•å±‚åŸç†"><a href="#MVCC-ç†Ÿæ‚‰å—ï¼ŒçŸ¥é“å®ƒçš„åº•å±‚åŸç†" class="headerlink" title="MVCC ç†Ÿæ‚‰å—ï¼ŒçŸ¥é“å®ƒçš„åº•å±‚åŸç†"></a>MVCC ç†Ÿæ‚‰å—ï¼ŒçŸ¥é“å®ƒçš„åº•å±‚åŸç†</h2><p>MVCC (Multiversion Concurrency Control)ï¼Œå³å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶æŠ€æœ¯ã€‚</p><p>MVCCåœ¨MySQL InnoDBä¸­çš„å®ç°ä¸»è¦æ˜¯ä¸ºäº†æé«˜æ•°æ®åº“å¹¶å‘æ€§èƒ½ï¼Œç”¨æ›´å¥½çš„æ–¹å¼å»å¤„ç†è¯»-å†™å†²çªï¼Œåšåˆ°å³ä½¿æœ‰è¯»å†™å†²çªæ—¶ï¼Œä¹Ÿèƒ½åšåˆ°ä¸åŠ é”ï¼Œéé˜»å¡å¹¶å‘è¯»ã€‚</p><p>MVCCï¼ˆMulti-Version Concurrency Control ï¼Œå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼‰æŒ‡çš„å°±æ˜¯åœ¨ä½¿ç”¨è¯»å·²æäº¤ï¼ˆREAD COMMITTDï¼‰ã€å¯é‡å¤è¯»ï¼ˆREPEATABLE READï¼‰è¿™ä¸¤ç§éš”ç¦»çº§åˆ«çš„äº‹åŠ¡åœ¨æ‰§è¡Œæ™®é€šçš„SELECTæ“ä½œæ—¶è®¿é—®è®°å½•çš„ç‰ˆæœ¬é“¾çš„è¿‡ç¨‹ï¼Œè¿™æ ·å­å¯ä»¥ä½¿ä¸åŒäº‹åŠ¡çš„è¯»-å†™ã€å†™-è¯»æ“ä½œå¹¶å‘æ‰§è¡Œï¼Œä»è€Œæå‡ç³»ç»Ÿæ€§èƒ½ã€‚</p><p>è¿™ä¸¤ä¸ªéš”ç¦»çº§åˆ«çš„ä¸€ä¸ªå¾ˆå¤§ä¸åŒå°±æ˜¯ï¼šç”ŸæˆReadViewçš„æ—¶æœºä¸åŒï¼ŒREAD COMMITTDåœ¨æ¯ä¸€æ¬¡è¿›è¡Œæ™®é€šSELECTæ“ä½œå‰éƒ½ä¼šç”Ÿæˆä¸€ä¸ªReadViewï¼Œè€ŒREPEATABLE READåªåœ¨ç¬¬ä¸€æ¬¡è¿›è¡Œæ™®é€šSELECTæ“ä½œå‰ç”Ÿæˆä¸€ä¸ªReadViewï¼Œæ•°æ®çš„å¯é‡å¤è¯»å…¶å®å°±æ˜¯ReadViewçš„é‡å¤ä½¿ç”¨ã€‚</p><p><a href="https://mp.weixin.qq.com/s/0-YEqTMd0OaIhW99WqavgQ" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/0-YEqTMd0OaIhW99WqavgQ</a></p><h2 id="MySQLäº‹åŠ¡å››å¤§ç‰¹æ€§ä»¥åŠå®ç°åŸç†"><a href="#MySQLäº‹åŠ¡å››å¤§ç‰¹æ€§ä»¥åŠå®ç°åŸç†" class="headerlink" title="MySQLäº‹åŠ¡å››å¤§ç‰¹æ€§ä»¥åŠå®ç°åŸç†"></a>MySQLäº‹åŠ¡å››å¤§ç‰¹æ€§ä»¥åŠå®ç°åŸç†</h2><p>åŸå­æ€§ï¼š äº‹åŠ¡ä½œä¸ºä¸€ä¸ªæ•´ä½“è¢«æ‰§è¡Œï¼ŒåŒ…å«åœ¨å…¶ä¸­çš„å¯¹æ•°æ®åº“çš„æ“ä½œè¦ä¹ˆå…¨éƒ¨è¢«æ‰§è¡Œï¼Œè¦ä¹ˆéƒ½ä¸æ‰§è¡Œã€‚<br>ä¸€è‡´æ€§ï¼š æŒ‡åœ¨äº‹åŠ¡å¼€å§‹ä¹‹å‰å’Œäº‹åŠ¡ç»“æŸä»¥åï¼Œæ•°æ®ä¸ä¼šè¢«ç ´åï¼Œå‡å¦‚Aè´¦æˆ·ç»™Bè´¦æˆ·è½¬10å—é’±ï¼Œä¸ç®¡æˆåŠŸä¸å¦ï¼ŒAå’ŒBçš„æ€»é‡‘é¢æ˜¯ä¸å˜çš„ã€‚<br>éš”ç¦»æ€§ï¼š å¤šä¸ªäº‹åŠ¡å¹¶å‘è®¿é—®æ—¶ï¼Œäº‹åŠ¡ä¹‹é—´æ˜¯ç›¸äº’éš”ç¦»çš„ï¼Œå³ä¸€ä¸ªäº‹åŠ¡ä¸å½±å“å…¶å®ƒäº‹åŠ¡è¿è¡Œæ•ˆæœã€‚ç®€è¨€ä¹‹ï¼Œå°±æ˜¯äº‹åŠ¡ä¹‹é—´æ˜¯è¿›æ°´ä¸çŠ¯æ²³æ°´çš„ã€‚<br>æŒä¹…æ€§ï¼š è¡¨ç¤ºäº‹åŠ¡å®Œæˆä»¥åï¼Œè¯¥äº‹åŠ¡å¯¹æ•°æ®åº“æ‰€ä½œçš„æ“ä½œæ›´æ”¹ï¼Œå°†æŒä¹…åœ°ä¿å­˜åœ¨æ•°æ®åº“ä¹‹ä¸­ã€‚</p><h2 id="äº‹åŠ¡çš„éš”ç¦»çº§åˆ«æœ‰å“ªäº›ï¼ŸMySQLçš„é»˜è®¤éš”ç¦»çº§åˆ«æ˜¯ä»€ä¹ˆ"><a href="#äº‹åŠ¡çš„éš”ç¦»çº§åˆ«æœ‰å“ªäº›ï¼ŸMySQLçš„é»˜è®¤éš”ç¦»çº§åˆ«æ˜¯ä»€ä¹ˆ" class="headerlink" title="äº‹åŠ¡çš„éš”ç¦»çº§åˆ«æœ‰å“ªäº›ï¼ŸMySQLçš„é»˜è®¤éš”ç¦»çº§åˆ«æ˜¯ä»€ä¹ˆ"></a>äº‹åŠ¡çš„éš”ç¦»çº§åˆ«æœ‰å“ªäº›ï¼ŸMySQLçš„é»˜è®¤éš”ç¦»çº§åˆ«æ˜¯ä»€ä¹ˆ</h2><p>è¯»æœªæäº¤ï¼ˆRead Uncommittedï¼‰<br>è¯»å·²æäº¤ï¼ˆRead Committedï¼‰<br>å¯é‡å¤è¯»ï¼ˆRepeatable Readï¼‰<br>ä¸²è¡ŒåŒ–ï¼ˆSerializableï¼‰</p><p>Mysqlé»˜è®¤çš„äº‹åŠ¡éš”ç¦»çº§åˆ«æ˜¯å¯é‡å¤è¯»(Repeatable Read)</p><p><a href="https://developer.aliyun.com/article/743691" target="_blank" rel="noopener">https://developer.aliyun.com/article/743691</a><br><a href="https://mp.weixin.qq.com/s/0-YEqTMd0OaIhW99WqavgQ" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/0-YEqTMd0OaIhW99WqavgQ</a></p><h3 id="å¯é‡å¤è¯»ä¸ºä»€ä¹ˆä¼šå‡ºç°å¹»è¯»"><a href="#å¯é‡å¤è¯»ä¸ºä»€ä¹ˆä¼šå‡ºç°å¹»è¯»" class="headerlink" title="å¯é‡å¤è¯»ä¸ºä»€ä¹ˆä¼šå‡ºç°å¹»è¯»"></a>å¯é‡å¤è¯»ä¸ºä»€ä¹ˆä¼šå‡ºç°å¹»è¯»</h3><p>åœ¨å¯é‡å¤è¯»ä¸­ï¼Œè¯¥sqlç¬¬ä¸€æ¬¡è¯»å–åˆ°æ•°æ®åï¼Œå°±å°†è¿™äº›æ•°æ®åŠ é”ï¼ˆæ‚²è§‚é”ï¼‰ï¼Œå…¶å®ƒäº‹åŠ¡æ— æ³•ä¿®æ”¹è¿™äº›æ•°æ®ï¼Œå°±å¯ä»¥å®ç°å¯é‡å¤è¯»äº†ã€‚ä½†è¿™ç§æ–¹æ³•å´æ— æ³•é”ä½insertçš„æ•°æ®ï¼Œæ‰€ä»¥å½“äº‹åŠ¡Aå…ˆå‰è¯»å–äº†æ•°æ®ï¼Œæˆ–è€…ä¿®æ”¹äº†å…¨éƒ¨æ•°æ®ï¼Œäº‹åŠ¡Bè¿˜æ˜¯å¯ä»¥insertæ•°æ®æäº¤ï¼Œè¿™æ—¶äº‹åŠ¡Aå°±ä¼šå‘ç°è«åå…¶å¦™å¤šäº†ä¸€æ¡ä¹‹å‰æ²¡æœ‰çš„æ•°æ®ï¼Œè¿™å°±æ˜¯å¹»è¯»ï¼Œä¸èƒ½é€šè¿‡è¡Œé”æ¥é¿å…ã€‚éœ€è¦Serializableéš”ç¦»çº§åˆ« ï¼Œè¯»ç”¨è¯»é”ï¼Œå†™ç”¨å†™é”ï¼Œè¯»é”å’Œå†™é”äº’æ–¥ï¼Œè¿™ä¹ˆåšå¯ä»¥æœ‰æ•ˆçš„é¿å…å¹»è¯»ã€ä¸å¯é‡å¤è¯»ã€è„è¯»ç­‰é—®é¢˜ï¼Œä½†ä¼šæå¤§çš„é™ä½æ•°æ®åº“çš„å¹¶å‘èƒ½åŠ›ã€‚</p><p><a href="https://juejin.cn/post/6985751855426977800" target="_blank" rel="noopener">https://juejin.cn/post/6985751855426977800</a></p><p>mysqlæ˜¯è§£å†³äº†å¿«ç…§è¯»çš„å¹»è¯»é—®é¢˜ï¼Œæ²¡è§£å†³å½“å‰è¯»çš„å¹»è¯»é—®é¢˜ï¼Œä½†ä¸ç®¡å®ƒæœ‰æ²¡æœ‰è§£å†³å¹»è¯»é—®é¢˜ï¼Œå®ƒéƒ½æ˜¯ä¸èƒ½æ›¿ä»£ä¸²è¡ŒåŒ–éš”ç¦»çº§åˆ«çš„ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯å¹»è¯»ï¼Œè„è¯»ï¼Œä¸å¯é‡å¤è¯»å‘¢ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯å¹»è¯»ï¼Œè„è¯»ï¼Œä¸å¯é‡å¤è¯»å‘¢ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯å¹»è¯»ï¼Œè„è¯»ï¼Œä¸å¯é‡å¤è¯»å‘¢ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯å¹»è¯»ï¼Œè„è¯»ï¼Œä¸å¯é‡å¤è¯»å‘¢ï¼Ÿ</h2><p>äº‹åŠ¡Aã€Bäº¤æ›¿æ‰§è¡Œï¼Œäº‹åŠ¡Aè¢«äº‹åŠ¡Bå¹²æ‰°åˆ°äº†ï¼Œå› ä¸ºäº‹åŠ¡Aè¯»å–åˆ°äº‹åŠ¡Bæœªæäº¤çš„æ•°æ®ï¼Œè¿™å°±æ˜¯è„è¯»ã€‚</p><p>åœ¨ä¸€ä¸ªäº‹åŠ¡èŒƒå›´å†…ï¼Œä¸¤ä¸ªç›¸åŒçš„æŸ¥è¯¢ï¼Œè¯»å–åŒä¸€æ¡è®°å½•ï¼Œå´è¿”å›äº†ä¸åŒçš„æ•°æ®ï¼Œè¿™å°±æ˜¯ä¸å¯é‡å¤è¯»ã€‚</p><p>äº‹åŠ¡AæŸ¥è¯¢ä¸€ä¸ªèŒƒå›´çš„ç»“æœé›†ï¼Œå¦ä¸€ä¸ªå¹¶å‘äº‹åŠ¡Bå¾€è¿™ä¸ªèŒƒå›´ä¸­æ’å…¥/åˆ é™¤äº†æ•°æ®ï¼Œå¹¶é™æ‚„æ‚„åœ°æäº¤ï¼Œç„¶åäº‹åŠ¡Aå†æ¬¡æŸ¥è¯¢ç›¸åŒçš„èŒƒå›´ï¼Œä¸¤æ¬¡è¯»å–å¾—åˆ°çš„ç»“æœé›†ä¸ä¸€æ ·äº†ï¼Œè¿™å°±æ˜¯å¹»è¯»ã€‚</p><h3 id="â€œä¸å¯é‡å¤è¯»â€å’Œâ€œå¹»è¯»â€çš„åŒºåˆ«"><a href="#â€œä¸å¯é‡å¤è¯»â€å’Œâ€œå¹»è¯»â€çš„åŒºåˆ«" class="headerlink" title="â€œä¸å¯é‡å¤è¯»â€å’Œâ€œå¹»è¯»â€çš„åŒºåˆ«"></a>â€œä¸å¯é‡å¤è¯»â€å’Œâ€œå¹»è¯»â€çš„åŒºåˆ«</h3><p>â€œä¸å¯é‡å¤è¯»â€å…³æ³¨çš„é‡ç‚¹åœ¨äºè®°å½•çš„æ›´æ–°æ“ä½œï¼Œå¯¹åŒæ ·çš„è®°å½•ï¼Œå†æ¬¡è¯»å–åå‘ç°è¿”å›çš„æ•°æ®å€¼ä¸ä¸€æ ·äº†ï¼›â€œå¹»è¯»â€å…³æ³¨çš„é‡ç‚¹åœ¨äºè®°å½•æ–°å¢æˆ–è€…åˆ é™¤æ“ä½œï¼ˆæ•°æ®æ¡æ•°å‘ç”Ÿäº†å˜åŒ–ï¼‰ï¼ŒåŒæ ·çš„æ¡ä»¶ç¬¬ä¸€æ¬¡å’Œç¬¬äºŒæ¬¡æŸ¥è¯¢å‡ºæ¥çš„è®°å½•æ•°ä¸ä¸€æ ·ã€‚</p><h2 id="MySQLæ•°æ®åº“cpué£™å‡çš„è¯ï¼Œè¦æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ"><a href="#MySQLæ•°æ®åº“cpué£™å‡çš„è¯ï¼Œè¦æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ" class="headerlink" title="MySQLæ•°æ®åº“cpué£™å‡çš„è¯ï¼Œè¦æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ"></a>MySQLæ•°æ®åº“cpué£™å‡çš„è¯ï¼Œè¦æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ</h2><p>æ’æŸ¥è¿‡ç¨‹ï¼š</p><p>ï¼ˆ1ï¼‰ä½¿ç”¨top å‘½ä»¤è§‚å¯Ÿï¼Œç¡®å®šæ˜¯mysqlå¯¼è‡´è¿˜æ˜¯å…¶ä»–åŸå› ã€‚<br>ï¼ˆ2ï¼‰å¦‚æœæ˜¯mysqlå¯¼è‡´çš„ï¼Œshow processlistï¼ŒæŸ¥çœ‹sessionæƒ…å†µï¼Œç¡®å®šæ˜¯ä¸æ˜¯æœ‰æ¶ˆè€—èµ„æºçš„sqlåœ¨è¿è¡Œã€‚<br>ï¼ˆ3ï¼‰æ‰¾å‡ºæ¶ˆè€—é«˜çš„ sqlï¼Œçœ‹çœ‹æ‰§è¡Œè®¡åˆ’æ˜¯å¦å‡†ç¡®ï¼Œ ç´¢å¼•æ˜¯å¦ç¼ºå¤±ï¼Œæ•°æ®é‡æ˜¯å¦å¤ªå¤§ã€‚</p><p>å¤„ç†ï¼š</p><p>ï¼ˆ1ï¼‰kill æ‰è¿™äº›çº¿ç¨‹(åŒæ—¶è§‚å¯Ÿ cpu ä½¿ç”¨ç‡æ˜¯å¦ä¸‹é™)ï¼Œ<br>ï¼ˆ2ï¼‰è¿›è¡Œç›¸åº”çš„è°ƒæ•´(æ¯”å¦‚è¯´åŠ ç´¢å¼•ã€æ”¹ sqlã€æ”¹å†…å­˜å‚æ•°)<br>ï¼ˆ3ï¼‰é‡æ–°è·‘è¿™äº› SQLã€‚</p><p>å…¶ä»–æƒ…å†µï¼š</p><p>ä¹Ÿæœ‰å¯èƒ½æ˜¯æ¯ä¸ª sql æ¶ˆè€—èµ„æºå¹¶ä¸å¤šï¼Œä½†æ˜¯çªç„¶ä¹‹é—´ï¼Œæœ‰å¤§é‡çš„ sessionä¼šè¯ è¿è¿›æ¥å¯¼è‡´ cpu é£™å‡ï¼Œè¿™ç§æƒ…å†µå°±éœ€è¦è·Ÿåº”ç”¨ä¸€èµ·æ¥åˆ†æä¸ºä½•è¿æ¥æ•°ä¼šæ¿€å¢ï¼Œå†åšå‡ºç›¸åº”çš„è°ƒæ•´ï¼Œæ¯”å¦‚è¯´é™åˆ¶è¿æ¥æ•°ç­‰</p><h2 id="MYSQLçš„ä¸»ä»å»¶è¿Ÿï¼Œä½ æ€ä¹ˆè§£å†³ï¼Ÿ"><a href="#MYSQLçš„ä¸»ä»å»¶è¿Ÿï¼Œä½ æ€ä¹ˆè§£å†³ï¼Ÿ" class="headerlink" title="MYSQLçš„ä¸»ä»å»¶è¿Ÿï¼Œä½ æ€ä¹ˆè§£å†³ï¼Ÿ"></a>MYSQLçš„ä¸»ä»å»¶è¿Ÿï¼Œä½ æ€ä¹ˆè§£å†³ï¼Ÿ</h2><p>ä¸»ä»å¤åˆ¶åˆ†äº†äº”ä¸ªæ­¥éª¤è¿›è¡Œï¼š</p><p>æ­¥éª¤ä¸€ï¼šä¸»åº“çš„æ›´æ–°äº‹ä»¶(updateã€insertã€delete)è¢«å†™åˆ°binlog<br>æ­¥éª¤äºŒï¼šä»åº“å‘èµ·è¿æ¥ï¼Œè¿æ¥åˆ°ä¸»åº“ã€‚<br>æ­¥éª¤ä¸‰ï¼šæ­¤æ—¶ä¸»åº“åˆ›å»ºä¸€ä¸ªbinlog dump threadï¼ŒæŠŠbinlogçš„å†…å®¹å‘é€åˆ°ä»åº“ã€‚<br>æ­¥éª¤å››ï¼šä»åº“å¯åŠ¨ä¹‹åï¼Œåˆ›å»ºä¸€ä¸ªI/Oçº¿ç¨‹ï¼Œè¯»å–ä¸»åº“ä¼ è¿‡æ¥çš„binlogå†…å®¹å¹¶å†™å…¥åˆ°relay log<br>æ­¥éª¤äº”ï¼šè¿˜ä¼šåˆ›å»ºä¸€ä¸ªSQLçº¿ç¨‹ï¼Œä»relay logé‡Œé¢è¯»å–å†…å®¹ï¼Œä»Exec_Master_Log_Posä½ç½®å¼€å§‹æ‰§è¡Œè¯»å–åˆ°çš„æ›´æ–°äº‹ä»¶ï¼Œå°†æ›´æ–°å†…å®¹å†™å…¥åˆ°slaveçš„db<br>ä¸»ä»åŒæ­¥å»¶è¿Ÿçš„åŸå› </p><p>ä¸€ä¸ªæœåŠ¡å™¨å¼€æ”¾ï¼®ä¸ªé“¾æ¥ç»™å®¢æˆ·ç«¯æ¥è¿æ¥çš„ï¼Œè¿™æ ·æœ‰ä¼šæœ‰å¤§å¹¶å‘çš„æ›´æ–°æ“ä½œ, ä½†æ˜¯ä»æœåŠ¡å™¨çš„é‡Œé¢è¯»å–binlogçš„çº¿ç¨‹ä»…æœ‰ä¸€ä¸ªï¼Œå½“æŸä¸ªSQLåœ¨ä»æœåŠ¡å™¨ä¸Šæ‰§è¡Œçš„æ—¶é—´ç¨é•¿ æˆ–è€…ç”±äºæŸä¸ªSQLè¦è¿›è¡Œé”è¡¨å°±ä¼šå¯¼è‡´ï¼Œä¸»æœåŠ¡å™¨çš„SQLå¤§é‡ç§¯å‹ï¼Œæœªè¢«åŒæ­¥åˆ°ä»æœåŠ¡å™¨é‡Œã€‚è¿™å°±å¯¼è‡´äº†ä¸»ä»ä¸ä¸€è‡´ï¼Œ ä¹Ÿå°±æ˜¯ä¸»ä»å»¶è¿Ÿã€‚</p><p>ä¸»ä»åŒæ­¥å»¶è¿Ÿçš„è§£å†³åŠæ³•</p><p>ä¸»æœåŠ¡å™¨è¦è´Ÿè´£æ›´æ–°æ“ä½œï¼Œå¯¹å®‰å…¨æ€§çš„è¦æ±‚æ¯”ä»æœåŠ¡å™¨è¦é«˜ï¼Œæ‰€ä»¥æœ‰äº›è®¾ç½®å‚æ•°å¯ä»¥ä¿®æ”¹ï¼Œæ¯”å¦‚sync_binlog=1ï¼Œinnodb_flush_log_at_trx_commit = 1 ä¹‹ç±»çš„è®¾ç½®ç­‰ã€‚<br>é€‰æ‹©æ›´å¥½çš„ç¡¬ä»¶è®¾å¤‡ä½œä¸ºslaveã€‚<br>æŠŠä¸€å°ä»æœåŠ¡å™¨å½“åº¦ä½œä¸ºå¤‡ä»½ä½¿ç”¨ï¼Œ è€Œä¸æä¾›æŸ¥è¯¢ï¼Œ é‚£è¾¹ä»–çš„è´Ÿè½½ä¸‹æ¥äº†ï¼Œ æ‰§è¡Œrelay log é‡Œé¢çš„SQLæ•ˆç‡è‡ªç„¶å°±é«˜äº†ã€‚<br>å¢åŠ ä»æœåŠ¡å™¨å–½ï¼Œè¿™ä¸ªç›®çš„è¿˜æ˜¯åˆ†æ•£è¯»çš„å‹åŠ›ï¼Œä»è€Œé™ä½æœåŠ¡å™¨è´Ÿè½½ã€‚</p><h2 id="å¦‚æœè®©ä½ åšåˆ†åº“ä¸åˆ†è¡¨çš„è®¾è®¡ï¼Œç®€å•è¯´è¯´ä½ ä¼šæ€ä¹ˆåšï¼Ÿ"><a href="#å¦‚æœè®©ä½ åšåˆ†åº“ä¸åˆ†è¡¨çš„è®¾è®¡ï¼Œç®€å•è¯´è¯´ä½ ä¼šæ€ä¹ˆåšï¼Ÿ" class="headerlink" title="å¦‚æœè®©ä½ åšåˆ†åº“ä¸åˆ†è¡¨çš„è®¾è®¡ï¼Œç®€å•è¯´è¯´ä½ ä¼šæ€ä¹ˆåšï¼Ÿ"></a>å¦‚æœè®©ä½ åšåˆ†åº“ä¸åˆ†è¡¨çš„è®¾è®¡ï¼Œç®€å•è¯´è¯´ä½ ä¼šæ€ä¹ˆåšï¼Ÿ</h2><p>åˆ†åº“åˆ†è¡¨æ–¹æ¡ˆ:</p><p>æ°´å¹³åˆ†åº“ï¼šä»¥å­—æ®µä¸ºä¾æ®ï¼ŒæŒ‰ç…§ä¸€å®šç­–ç•¥ï¼ˆhashã€rangeç­‰ï¼‰ï¼Œå°†ä¸€ä¸ªåº“ä¸­çš„æ•°æ®æ‹†åˆ†åˆ°å¤šä¸ªåº“ä¸­ã€‚<br>æ°´å¹³åˆ†è¡¨ï¼šä»¥å­—æ®µä¸ºä¾æ®ï¼ŒæŒ‰ç…§ä¸€å®šç­–ç•¥ï¼ˆhashã€rangeç­‰ï¼‰ï¼Œå°†ä¸€ä¸ªè¡¨ä¸­çš„æ•°æ®æ‹†åˆ†åˆ°å¤šä¸ªè¡¨ä¸­ã€‚<br>å‚ç›´åˆ†åº“ï¼šä»¥è¡¨ä¸ºä¾æ®ï¼ŒæŒ‰ç…§ä¸šåŠ¡å½’å±ä¸åŒï¼Œå°†ä¸åŒçš„è¡¨æ‹†åˆ†åˆ°ä¸åŒçš„åº“ä¸­ã€‚<br>å‚ç›´åˆ†è¡¨ï¼šä»¥å­—æ®µä¸ºä¾æ®ï¼ŒæŒ‰ç…§å­—æ®µçš„æ´»è·ƒæ€§ï¼Œå°†è¡¨ä¸­å­—æ®µæ‹†åˆ°ä¸åŒçš„è¡¨ï¼ˆä¸»è¡¨å’Œæ‰©å±•è¡¨ï¼‰ä¸­ã€‚<br>å¸¸ç”¨çš„åˆ†åº“åˆ†è¡¨ä¸­é—´ä»¶ï¼š</p><p>sharding-jdbc<br>Mycat<br>åˆ†åº“åˆ†è¡¨å¯èƒ½é‡åˆ°çš„é—®é¢˜</p><p>äº‹åŠ¡é—®é¢˜ï¼šéœ€è¦ç”¨åˆ†å¸ƒå¼äº‹åŠ¡å•¦<br>è·¨èŠ‚ç‚¹Joinçš„é—®é¢˜ï¼šè§£å†³è¿™ä¸€é—®é¢˜å¯ä»¥åˆ†ä¸¤æ¬¡æŸ¥è¯¢å®ç°<br>è·¨èŠ‚ç‚¹çš„count,order by,group byä»¥åŠèšåˆå‡½æ•°é—®é¢˜ï¼šåˆ†åˆ«åœ¨å„ä¸ªèŠ‚ç‚¹ä¸Šå¾—åˆ°ç»“æœååœ¨åº”ç”¨ç¨‹åºç«¯è¿›è¡Œåˆå¹¶ã€‚<br>æ•°æ®è¿ç§»ï¼Œå®¹é‡è§„åˆ’ï¼Œæ‰©å®¹ç­‰é—®é¢˜<br>IDé—®é¢˜ï¼šæ•°æ®åº“è¢«åˆ‡åˆ†åï¼Œä¸èƒ½å†ä¾èµ–æ•°æ®åº“è‡ªèº«çš„ä¸»é”®ç”Ÿæˆæœºåˆ¶å•¦ï¼Œæœ€ç®€å•å¯ä»¥è€ƒè™‘UUID<br>è·¨åˆ†ç‰‡çš„æ’åºåˆ†é¡µé—®é¢˜</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;MySQLé¢è¯•é«˜é¢‘20é—®&lt;/p&gt;
    
    </summary>
    
      <category term="2021å¹´10æœˆ" scheme="http://yoursite.com/categories/2021%E5%B9%B410%E6%9C%88/"/>
    
    
      <category term="Database" scheme="http://yoursite.com/tags/Database/"/>
    
      <category term="MySQL" scheme="http://yoursite.com/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>713. ä¹˜ç§¯å°äºKçš„å­æ•°ç»„</title>
    <link href="http://yoursite.com/2021/10/28/713.%20%E4%B9%98%E7%A7%AF%E5%B0%8F%E4%BA%8EK%E7%9A%84%E5%AD%90%E6%95%B0%E7%BB%84/"/>
    <id>http://yoursite.com/2021/10/28/713. ä¹˜ç§¯å°äºKçš„å­æ•°ç»„/</id>
    <published>2021-10-28T08:12:12.000Z</published>
    <updated>2021-10-31T01:31:35.684Z</updated>
    
    <content type="html"><![CDATA[<p>ç»™å®šä¸€ä¸ªæ­£æ•´æ•°æ•°ç»„ numså’Œæ•´æ•° k ã€‚</p><p>è¯·æ‰¾å‡ºè¯¥æ•°ç»„å†…ä¹˜ç§¯å°äº k çš„è¿ç»­çš„å­æ•°ç»„çš„ä¸ªæ•°ã€‚</p><a id="more"></a><p>[TOC]</p><p>ç¤ºä¾‹ 1:</p><pre><code>è¾“å…¥: nums = [10,5,2,6], k = 100è¾“å‡º: 8è§£é‡Š: 8ä¸ªä¹˜ç§¯å°äº100çš„å­æ•°ç»„åˆ†åˆ«ä¸º: [10], [5], [2], [6], [10,5], [5,2], [2,6], [5,2,6]ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ [10,5,2] å¹¶ä¸æ˜¯ä¹˜ç§¯å°äº100çš„å­æ•°ç»„ã€‚</code></pre><p>ç¤ºä¾‹ 2:</p><pre><code>è¾“å…¥: nums = [1,2,3], k = 0è¾“å‡º: 0</code></pre><p>æç¤º: </p><p>1 &lt;= nums.length &lt;= 3 * 104<br>1 &lt;= nums[i] &lt;= 1000<br>0 &lt;= k &lt;= 106</p><h1 id="æ–¹æ³•ä¸€ï¼šäºŒåˆ†æŸ¥æ‰¾"><a href="#æ–¹æ³•ä¸€ï¼šäºŒåˆ†æŸ¥æ‰¾" class="headerlink" title="æ–¹æ³•ä¸€ï¼šäºŒåˆ†æŸ¥æ‰¾"></a>æ–¹æ³•ä¸€ï¼šäºŒåˆ†æŸ¥æ‰¾</h1><p><strong>åˆ†æ</strong><a href="https://leetcode-cn.com/problems/subarray-product-less-than-k/solution/cheng-ji-xiao-yu-kde-zi-shu-zu-by-leetcode/" target="_blank" rel="noopener">^1</a></p><p>é¢˜è§£ä¸€ä¸­ ans += lo - i - 1</p><p>å…¶å®æ˜¯ans+=(lo-2) - i + 1ï¼Œä¸ºäº†æ–¹ä¾¿è¿ç®—prefix[0]é»˜è®¤ä¸º0åç§»äº†1ï¼Œå¦å¤–äºŒåˆ†æ³•å¾—åˆ°çš„å€¼loç›¸æ¯”æœ€å¤§çš„ä½ç½®åˆåç§»äº†1</p><details>    <summary>Python</summary><figure class="highlight python"><figcaption><span>[sol1]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">numSubarrayProductLessThanK</span><span class="params">(self, nums, k)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> k == <span class="number">0</span>: <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        k = math.log(k)</span><br><span class="line"></span><br><span class="line">        prefix = [<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">for</span> x <span class="keyword">in</span> nums:</span><br><span class="line">            prefix.append(prefix[<span class="number">-1</span>] + math.log(x))</span><br><span class="line"></span><br><span class="line">        ans = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i, x <span class="keyword">in</span> enumerate(prefix):</span><br><span class="line">            j = bisect.bisect(prefix, x + k - <span class="number">1e-9</span>, i+<span class="number">1</span>)</span><br><span class="line">            ans += j - i - <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure></details><details>    <summary>Java</summary><figure class="highlight java"><figcaption><span>[sol1]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">numSubarrayProductLessThanK</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (k == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">double</span> logk = Math.log(k);</span><br><span class="line">        <span class="keyword">double</span>[] prefix = <span class="keyword">new</span> <span class="keyword">double</span>[nums.length + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">            prefix[i+<span class="number">1</span>] = prefix[i] + Math.log(nums[i]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; prefix.length; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> lo = i + <span class="number">1</span>, hi = prefix.length;</span><br><span class="line">            <span class="keyword">while</span> (lo &lt; hi) &#123;</span><br><span class="line">                <span class="keyword">int</span> mi = lo + (hi - lo) / <span class="number">2</span>;</span><br><span class="line">                <span class="comment">//å¯ä»¥ä¸-1e-9</span></span><br><span class="line">                <span class="keyword">if</span> (prefix[mi] &lt; prefix[i] + logk - <span class="number">1e-9</span>) lo = mi + <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">else</span> hi = mi;</span><br><span class="line">            &#125;</span><br><span class="line">            ans += lo - i - <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><h1 id="æ–¹æ³•äºŒï¼šåŒæŒ‡é’ˆ"><a href="#æ–¹æ³•äºŒï¼šåŒæŒ‡é’ˆ" class="headerlink" title="æ–¹æ³•äºŒï¼šåŒæŒ‡é’ˆ"></a>æ–¹æ³•äºŒï¼šåŒæŒ‡é’ˆ</h1><details>    <summary>Python</summary><figure class="highlight python"><figcaption><span>[sol2]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">numSubarrayProductLessThanK</span><span class="params">(self, nums, k)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> k &lt;= <span class="number">1</span>: <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        prod = <span class="number">1</span></span><br><span class="line">        ans = left = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> right, val <span class="keyword">in</span> enumerate(nums):</span><br><span class="line">            prod *= val</span><br><span class="line">            <span class="keyword">while</span> prod &gt;= k:</span><br><span class="line">                prod /= nums[left]</span><br><span class="line">                left += <span class="number">1</span></span><br><span class="line">            ans += right - left + <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure></details><details>    <summary>Java</summary><figure class="highlight java"><figcaption><span>[sol2]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">numSubarrayProductLessThanK</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (k &lt;= <span class="number">1</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> prod = <span class="number">1</span>, ans = <span class="number">0</span>, left = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> right = <span class="number">0</span>; right &lt; nums.length; right++) &#123;</span><br><span class="line">            prod *= nums[right];</span><br><span class="line">            <span class="keyword">while</span> (prod &gt;= k) prod /= nums[left++];</span><br><span class="line">            ans += right - left + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç»™å®šä¸€ä¸ªæ­£æ•´æ•°æ•°ç»„ numså’Œæ•´æ•° k ã€‚&lt;/p&gt;
&lt;p&gt;è¯·æ‰¾å‡ºè¯¥æ•°ç»„å†…ä¹˜ç§¯å°äº k çš„è¿ç»­çš„å­æ•°ç»„çš„ä¸ªæ•°ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="2021å¹´10æœˆ" scheme="http://yoursite.com/categories/2021%E5%B9%B410%E6%9C%88/"/>
    
    
      <category term="LeetCode" scheme="http://yoursite.com/tags/LeetCode/"/>
    
      <category term="Array" scheme="http://yoursite.com/tags/Array/"/>
    
      <category term="Sliding Window" scheme="http://yoursite.com/tags/Sliding-Window/"/>
    
  </entry>
  
  <entry>
    <title>209. é•¿åº¦æœ€å°çš„å­æ•°ç»„</title>
    <link href="http://yoursite.com/2021/10/28/209.%20%E9%95%BF%E5%BA%A6%E6%9C%80%E5%B0%8F%E7%9A%84%E5%AD%90%E6%95%B0%E7%BB%84/"/>
    <id>http://yoursite.com/2021/10/28/209. é•¿åº¦æœ€å°çš„å­æ•°ç»„/</id>
    <published>2021-10-28T03:12:12.000Z</published>
    <updated>2021-10-28T08:11:31.454Z</updated>
    
    <content type="html"><![CDATA[<p>ç»™å®šä¸€ä¸ªå«æœ‰ n ä¸ªæ­£æ•´æ•°çš„æ•°ç»„å’Œä¸€ä¸ªæ­£æ•´æ•° target ã€‚</p><p>æ‰¾å‡ºè¯¥æ•°ç»„ä¸­æ»¡è¶³å…¶å’Œ â‰¥ target çš„é•¿åº¦æœ€å°çš„ è¿ç»­å­æ•°ç»„ [numsl, numsl+1, â€¦, numsr-1, numsr] ï¼Œå¹¶è¿”å›å…¶é•¿åº¦ã€‚å¦‚æœä¸å­˜åœ¨ç¬¦åˆæ¡ä»¶çš„å­æ•°ç»„ï¼Œè¿”å› 0 ã€‚</p><a id="more"></a><p>[TOC]</p><p>ç¤ºä¾‹ 1ï¼š</p><pre><code>è¾“å…¥ï¼štarget = 7, nums = [2,3,1,2,4,3]è¾“å‡ºï¼š2è§£é‡Šï¼šå­æ•°ç»„ [4,3] æ˜¯è¯¥æ¡ä»¶ä¸‹çš„é•¿åº¦æœ€å°çš„å­æ•°ç»„ã€‚</code></pre><p>ç¤ºä¾‹ 2ï¼š</p><pre><code>è¾“å…¥ï¼štarget = 4, nums = [1,4,4]è¾“å‡ºï¼š1</code></pre><p>ç¤ºä¾‹ 3ï¼š</p><pre><code>è¾“å…¥ï¼štarget = 11, nums = [1,1,1,1,1,1,1,1]è¾“å‡ºï¼š0</code></pre><p>æç¤ºï¼š</p><p>1 &lt;= target &lt;= 109<br>1 &lt;= nums.length &lt;= 105<br>1 &lt;= nums[i] &lt;= 105</p><p>è¿›é˜¶ï¼š</p><p>å¦‚æœä½ å·²ç»å®ç° O(n) æ—¶é—´å¤æ‚åº¦çš„è§£æ³•, è¯·å°è¯•è®¾è®¡ä¸€ä¸ª O(n log(n)) æ—¶é—´å¤æ‚åº¦çš„è§£æ³•ã€‚</p><h1 id="æ–¹æ³•ä¸€ï¼šæš´åŠ›æ³•"><a href="#æ–¹æ³•ä¸€ï¼šæš´åŠ›æ³•" class="headerlink" title="æ–¹æ³•ä¸€ï¼šæš´åŠ›æ³•"></a>æ–¹æ³•ä¸€ï¼šæš´åŠ›æ³•</h1><p><a href="https://leetcode-cn.com/problems/minimum-size-subarray-sum/solution/chang-du-zui-xiao-de-zi-shu-zu-by-leetcode-solutio/" target="_blank" rel="noopener">^1</a>æ³¨æ„ï¼šä½¿ç”¨ <code>Python</code> è¯­è¨€å®ç°æ–¹æ³•ä¸€ä¼šè¶…å‡ºæ—¶é—´é™åˆ¶ã€‚</p><details>    <summary>Java</summary><figure class="highlight java"><figcaption><span>[sol1-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">minSubArrayLen</span><span class="params">(<span class="keyword">int</span> s, <span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = nums.length;</span><br><span class="line">        <span class="keyword">if</span> (n == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> ans = Integer.MAX_VALUE;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = i; j &lt; n; j++) &#123;</span><br><span class="line">                sum += nums[j];</span><br><span class="line">                <span class="keyword">if</span> (sum &gt;= s) &#123;</span><br><span class="line">                    ans = Math.min(ans, j - i + <span class="number">1</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans == Integer.MAX_VALUE ? <span class="number">0</span> : ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>cpp</summary><figure class="highlight c++"><figcaption><span>[sol1-C++]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">minSubArrayLen</span><span class="params">(<span class="keyword">int</span> s, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = nums.size();</span><br><span class="line">        <span class="keyword">if</span> (n == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> ans = INT_MAX;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = i; j &lt; n; j++) &#123;</span><br><span class="line">                sum += nums[j];</span><br><span class="line">                <span class="keyword">if</span> (sum &gt;= s) &#123;</span><br><span class="line">                    ans = min(ans, j - i + <span class="number">1</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans == INT_MAX ? <span class="number">0</span> : ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></details><details>    <summary>C#</summary><figure class="highlight csharp"><figcaption><span>[sol1-C#]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Solution</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">MinSubArrayLen</span>(<span class="params"><span class="keyword">int</span> s, <span class="keyword">int</span>[] nums</span>) </span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = nums.Length;</span><br><span class="line">        <span class="keyword">if</span> (n == <span class="number">0</span>) </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> ans = <span class="keyword">int</span>.MaxValue;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = i; j &lt; n; ++j) </span><br><span class="line">            &#123;</span><br><span class="line">                sum += nums[j];</span><br><span class="line">                <span class="keyword">if</span> (sum &gt;= s)</span><br><span class="line">                &#123;</span><br><span class="line">                    ans = Math.Min(ans, j - i + <span class="number">1</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ans == <span class="keyword">int</span>.MaxValue ? <span class="number">0</span> : ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>Golang</summary><figure class="highlight golang"><figcaption><span>[sol1-Golang]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">minSubArrayLen</span><span class="params">(s <span class="keyword">int</span>, nums []<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    n := <span class="built_in">len</span>(nums)</span><br><span class="line">    <span class="keyword">if</span> n == <span class="number">0</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">    ans := math.MaxInt32</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">0</span>; i &lt; n; i++ &#123;</span><br><span class="line">        sum := <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> j := i; j &lt; n; j++ &#123;</span><br><span class="line">            sum += nums[j]</span><br><span class="line">            <span class="keyword">if</span> sum &gt;= s &#123;</span><br><span class="line">                ans = min(ans, j - i + <span class="number">1</span>)</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> ans == math.MaxInt32 &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">min</span><span class="params">(x, y <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> x &lt; y &#123;</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> y</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>Python3</summary><figure class="highlight python"><figcaption><span>[sol1-Python3]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">minSubArrayLen</span><span class="params">(self, s: int, nums: List[int])</span> -&gt; int:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> nums:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        </span><br><span class="line">        n = len(nums)</span><br><span class="line">        ans = n + <span class="number">1</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            total = <span class="number">0</span></span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(i, n):</span><br><span class="line">                total += nums[j]</span><br><span class="line">                <span class="keyword">if</span> total &gt;= s:</span><br><span class="line">                    ans = min(ans, j - i + <span class="number">1</span>)</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span> <span class="keyword">if</span> ans == n + <span class="number">1</span> <span class="keyword">else</span> ans</span><br></pre></td></tr></table></figure></details><details>    <summary>C</summary><figure class="highlight c"><figcaption><span>[sol1-C]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">minSubArrayLen</span><span class="params">(<span class="keyword">int</span> s, <span class="keyword">int</span>* nums, <span class="keyword">int</span> numsSize)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (numsSize == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> ans = INT_MAX;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; numsSize; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = i; j &lt; numsSize; j++) &#123;</span><br><span class="line">            sum += nums[j];</span><br><span class="line">            <span class="keyword">if</span> (sum &gt;= s) &#123;</span><br><span class="line">                ans = fmin(ans, j - i + <span class="number">1</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans == INT_MAX ? <span class="number">0</span> : ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><p><strong>å¤æ‚åº¦åˆ†æ</strong></p><ul><li><p>æ—¶é—´å¤æ‚åº¦ï¼š<em>O(n^2)*ï¼Œå…¶ä¸­ *n</em> æ˜¯æ•°ç»„çš„é•¿åº¦ã€‚éœ€è¦éå†æ¯ä¸ªä¸‹æ ‡ä½œä¸ºå­æ•°ç»„çš„å¼€å§‹ä¸‹æ ‡ï¼Œå¯¹äºæ¯ä¸ªå¼€å§‹ä¸‹æ ‡ï¼Œéœ€è¦éå†å…¶åé¢çš„ä¸‹æ ‡å¾—åˆ°é•¿åº¦æœ€å°çš„å­æ•°ç»„ã€‚</p></li><li><p>ç©ºé—´å¤æ‚åº¦ï¼š<em>O(1)</em>ã€‚</p></li></ul><h1 id="æ–¹æ³•äºŒï¼šå‰ç¼€å’Œ-äºŒåˆ†æŸ¥æ‰¾"><a href="#æ–¹æ³•äºŒï¼šå‰ç¼€å’Œ-äºŒåˆ†æŸ¥æ‰¾" class="headerlink" title="æ–¹æ³•äºŒï¼šå‰ç¼€å’Œ + äºŒåˆ†æŸ¥æ‰¾"></a>æ–¹æ³•äºŒï¼šå‰ç¼€å’Œ + äºŒåˆ†æŸ¥æ‰¾</h1><p>é¢˜è§£äºŒåˆ†æŸ¥æ‰¾ä¸­javaçš„binarySearchæ–¹æ³•è¿”å›æœ‰ä¸¤ç§ï¼š</p><p>ä¸€ç§æ˜¯åˆšå¥½æ‰¾åˆ°ç›®æ ‡å€¼ï¼Œè¿”å›ç›®æ ‡å€¼çš„ä¸‹æ ‡ã€‚</p><p>ä¸€ç§æ˜¯æ‰¾ä¸åˆ°ç›®æ ‡å€¼ï¼Œåˆ™ä¼šè¿”å›æ¯”ç›®æ ‡å€¼å¤§çš„å…ƒç´ çš„ä¸‹æ ‡ï¼Œä¸‹æ ‡å¸¦æœ‰è´Ÿæ•°ï¼Œä¸”ä»1å¼€å§‹æ•°èµ·ã€‚</p><p>ä¾‹å¦‚ä¸€ä¸ªæ•°ç»„æœ‰3ä¸ªå…ƒç´ ï¼Œä½†æ˜¯æŸ¥æ‰¾çš„å…ƒç´ å€¼æ¯”é‚£ä¸‰ä¸ªå…ƒç´ éƒ½å¤§ï¼Œåˆ™ä¼šè¿”å›-4</p><p>æ³¨æ„é¢˜ç›®è¦æ‰¾çš„æ˜¯å¤§äºç­‰äºtargetçš„è¿ç»­å­æ•°ç»„å’Œã€‚</p><details>    <summary>C#</summary><figure class="highlight csharp"><figcaption><span>[lowerbound-C#]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">LowerBound</span>(<span class="params"><span class="keyword">int</span>[] a, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> target</span>) </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> mid = <span class="number">-1</span>, originL = l, originR = r;</span><br><span class="line">    <span class="keyword">while</span> (l &lt; r) </span><br><span class="line">    &#123;</span><br><span class="line">        mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (a[mid] &lt; target) l = mid + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> r = mid;</span><br><span class="line">    &#125; </span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (a[l] &gt;= target) ? l : <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><p>ä¸‹é¢æ˜¯è¿™é“é¢˜çš„ä»£ç ã€‚</p><details>    <summary>Java</summary><figure class="highlight java"><figcaption><span>[sol2-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">minSubArrayLen</span><span class="params">(<span class="keyword">int</span> s, <span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = nums.length;</span><br><span class="line">        <span class="keyword">if</span> (n == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> ans = Integer.MAX_VALUE;</span><br><span class="line">        <span class="keyword">int</span>[] sums = <span class="keyword">new</span> <span class="keyword">int</span>[n + <span class="number">1</span>]; </span><br><span class="line">        <span class="comment">// ä¸ºäº†æ–¹ä¾¿è®¡ç®—ï¼Œä»¤ size = n + 1 </span></span><br><span class="line">        <span class="comment">// sums[0] = 0 æ„å‘³ç€å‰ 0 ä¸ªå…ƒç´ çš„å‰ç¼€å’Œä¸º 0</span></span><br><span class="line">        <span class="comment">// sums[1] = A[0] å‰ 1 ä¸ªå…ƒç´ çš„å‰ç¼€å’Œä¸º A[0]</span></span><br><span class="line">        <span class="comment">// ä»¥æ­¤ç±»æ¨</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            sums[i] = sums[i - <span class="number">1</span>] + nums[i - <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> target = s + sums[i - <span class="number">1</span>];</span><br><span class="line">            <span class="keyword">int</span> bound = Arrays.binarySearch(sums, target);</span><br><span class="line">            <span class="comment">//æ‰¾ä¸åˆ°ç›®æ ‡å€¼ï¼Œåˆ™ä¼šè¿”å›æ¯”ç›®æ ‡å€¼å¤§çš„å…ƒç´ çš„ä¸‹æ ‡ï¼Œä¸‹æ ‡å¸¦æœ‰è´Ÿæ•°ï¼Œä¸”ä»1å¼€å§‹æ•°èµ·</span></span><br><span class="line">            <span class="keyword">if</span> (bound &lt; <span class="number">0</span>) &#123;</span><br><span class="line">                bound = -bound - <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (bound &lt;= n) &#123;</span><br><span class="line">                ans = Math.min(ans, bound - (i - <span class="number">1</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans == Integer.MAX_VALUE ? <span class="number">0</span> : ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>C++</summary><figure class="highlight c++"><figcaption><span>[sol2-C++]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">minSubArrayLen</span><span class="params">(<span class="keyword">int</span> s, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = nums.size();</span><br><span class="line">        <span class="keyword">if</span> (n == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> ans = INT_MAX;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; sums(n + <span class="number">1</span>, <span class="number">0</span>); </span><br><span class="line">        <span class="comment">// ä¸ºäº†æ–¹ä¾¿è®¡ç®—ï¼Œä»¤ size = n + 1 </span></span><br><span class="line">        <span class="comment">// sums[0] = 0 æ„å‘³ç€å‰ 0 ä¸ªå…ƒç´ çš„å‰ç¼€å’Œä¸º 0</span></span><br><span class="line">        <span class="comment">// sums[1] = A[0] å‰ 1 ä¸ªå…ƒç´ çš„å‰ç¼€å’Œä¸º A[0]</span></span><br><span class="line">        <span class="comment">// ä»¥æ­¤ç±»æ¨</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            sums[i] = sums[i - <span class="number">1</span>] + nums[i - <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> target = s + sums[i - <span class="number">1</span>];</span><br><span class="line">            <span class="keyword">auto</span> bound = lower_bound(sums.begin(), sums.end(), target);</span><br><span class="line">            <span class="keyword">if</span> (bound != sums.end()) &#123;</span><br><span class="line">                ans = min(ans, <span class="keyword">static_cast</span>&lt;<span class="keyword">int</span>&gt;((bound - sums.begin()) - (i - <span class="number">1</span>)));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans == INT_MAX ? <span class="number">0</span> : ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></details><details>    <summary>C#</summary><figure class="highlight csharp"><figcaption><span>[sol2-C#]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Solution</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">LowerBound</span>(<span class="params"><span class="keyword">int</span>[] a, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> target</span>) </span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> mid = <span class="number">-1</span>, originL = l, originR = r;</span><br><span class="line">        <span class="keyword">while</span> (l &lt; r) </span><br><span class="line">        &#123;</span><br><span class="line">            mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (a[mid] &lt; target) l = mid + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">else</span> r = mid;</span><br><span class="line">        &#125; </span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> (a[l] &gt;= target) ? l : <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">MinSubArrayLen</span>(<span class="params"><span class="keyword">int</span> s, <span class="keyword">int</span>[] nums</span>) </span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = nums.Length;</span><br><span class="line">        <span class="keyword">if</span> (n == <span class="number">0</span>) </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> ans = <span class="keyword">int</span>.MaxValue;</span><br><span class="line">        <span class="keyword">int</span>[] sums = <span class="keyword">new</span> <span class="keyword">int</span>[n + <span class="number">1</span>]; </span><br><span class="line">        <span class="comment">// ä¸ºäº†æ–¹ä¾¿è®¡ç®—ï¼Œä»¤ size = n + 1 </span></span><br><span class="line">        <span class="comment">// sums[0] = 0 æ„å‘³ç€å‰ 0 ä¸ªå…ƒç´ çš„å‰ç¼€å’Œä¸º 0</span></span><br><span class="line">        <span class="comment">// sums[1] = A[0] å‰ 1 ä¸ªå…ƒç´ çš„å‰ç¼€å’Œä¸º A[0]</span></span><br><span class="line">        <span class="comment">// ä»¥æ­¤ç±»æ¨</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) </span><br><span class="line">        &#123;</span><br><span class="line">            sums[i] = sums[i - <span class="number">1</span>] + nums[i - <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> target = s + sums[i - <span class="number">1</span>];</span><br><span class="line">            <span class="keyword">int</span> bound = LowerBound(sums, i, n, target);</span><br><span class="line">            <span class="keyword">if</span> (bound != <span class="number">-1</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                ans = Math.Min(ans, bound - i + <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ans == <span class="keyword">int</span>.MaxValue ? <span class="number">0</span> : ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>Golang</summary><figure class="highlight golang"><figcaption><span>[sol2-Golang]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">minSubArrayLen</span><span class="params">(s <span class="keyword">int</span>, nums []<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    n := <span class="built_in">len</span>(nums)</span><br><span class="line">    <span class="keyword">if</span> n == <span class="number">0</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">    ans := math.MaxInt32</span><br><span class="line">    sums := <span class="built_in">make</span>([]<span class="keyword">int</span>, n + <span class="number">1</span>)</span><br><span class="line">    <span class="comment">// ä¸ºäº†æ–¹ä¾¿è®¡ç®—ï¼Œä»¤ size = n + 1 </span></span><br><span class="line">    <span class="comment">// sums[0] = 0 æ„å‘³ç€å‰ 0 ä¸ªå…ƒç´ çš„å‰ç¼€å’Œä¸º 0</span></span><br><span class="line">    <span class="comment">// sums[1] = A[0] å‰ 1 ä¸ªå…ƒç´ çš„å‰ç¼€å’Œä¸º A[0]</span></span><br><span class="line">    <span class="comment">// ä»¥æ­¤ç±»æ¨</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= n; i++ &#123;</span><br><span class="line">        sums[i] = sums[i - <span class="number">1</span>] + nums[i - <span class="number">1</span>]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= n; i++ &#123;</span><br><span class="line">        target := s + sums[i<span class="number">-1</span>]</span><br><span class="line">        bound := sort.SearchInts(sums, target)</span><br><span class="line">        <span class="keyword">if</span> bound &lt; <span class="number">0</span> &#123;</span><br><span class="line">            bound = -bound - <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> bound &lt;= n &#123;</span><br><span class="line">            ans = min(ans, bound - (i - <span class="number">1</span>))</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> ans == math.MaxInt32 &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">min</span><span class="params">(x, y <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> x &lt; y &#123;</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> y</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>Python3</summary><figure class="highlight python"><figcaption><span>[sol2-Python3]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">minSubArrayLen</span><span class="params">(self, s: int, nums: List[int])</span> -&gt; int:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> nums:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        </span><br><span class="line">        n = len(nums)</span><br><span class="line">        ans = n + <span class="number">1</span></span><br><span class="line">        sums = [<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            sums.append(sums[<span class="number">-1</span>] + nums[i])</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, n + <span class="number">1</span>):</span><br><span class="line">            target = s + sums[i - <span class="number">1</span>]</span><br><span class="line">            bound = bisect.bisect_left(sums, target)</span><br><span class="line">            <span class="keyword">if</span> bound != len(sums):</span><br><span class="line">                ans = min(ans, bound - (i - <span class="number">1</span>))</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span> <span class="keyword">if</span> ans == n + <span class="number">1</span> <span class="keyword">else</span> ans</span><br></pre></td></tr></table></figure></details><details>    <summary>C</summary><figure class="highlight c"><figcaption><span>[sol2-C]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lower_bound</span><span class="params">(<span class="keyword">int</span> *a, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> q)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (a[r] &lt; q) <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">while</span> (l &lt; r) &#123;</span><br><span class="line">        <span class="keyword">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (a[mid] &gt;= q) &#123;</span><br><span class="line">            r = mid;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            l = mid + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> l;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">minSubArrayLen</span><span class="params">(<span class="keyword">int</span> s, <span class="keyword">int</span> *nums, <span class="keyword">int</span> numsSize)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (numsSize == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> ans = INT_MAX;</span><br><span class="line">    <span class="keyword">int</span> *sums = (<span class="keyword">int</span> *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">int</span>) * (numsSize + <span class="number">1</span>));</span><br><span class="line">    <span class="comment">// ä¸ºäº†æ–¹ä¾¿è®¡ç®—ï¼Œä»¤ size = n + 1</span></span><br><span class="line">    <span class="comment">// sums[0] = 0 æ„å‘³ç€å‰ 0 ä¸ªå…ƒç´ çš„å‰ç¼€å’Œä¸º 0</span></span><br><span class="line">    <span class="comment">// sums[1] = A[0] å‰ 1 ä¸ªå…ƒç´ çš„å‰ç¼€å’Œä¸º A[0]</span></span><br><span class="line">    <span class="comment">// ä»¥æ­¤ç±»æ¨</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= numsSize; i++) &#123;</span><br><span class="line">        sums[i] = sums[i - <span class="number">1</span>] + nums[i - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= numsSize; i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> target = s + sums[i - <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">int</span> bound = lower_bound(sums, <span class="number">1</span>, numsSize, target);</span><br><span class="line">        <span class="keyword">if</span> (bound != <span class="number">-1</span>) &#123;</span><br><span class="line">            ans = fmin(ans, bound - (i - <span class="number">1</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans == INT_MAX ? <span class="number">0</span> : ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><h1 id="æ–¹æ³•ä¸‰ï¼šæ»‘åŠ¨çª—å£"><a href="#æ–¹æ³•ä¸‰ï¼šæ»‘åŠ¨çª—å£" class="headerlink" title="æ–¹æ³•ä¸‰ï¼šæ»‘åŠ¨çª—å£"></a>æ–¹æ³•ä¸‰ï¼šæ»‘åŠ¨çª—å£</h1><details>    <summary>Java</summary><figure class="highlight java"><figcaption><span>[sol3-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">minSubArrayLen</span><span class="params">(<span class="keyword">int</span> s, <span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = nums.length;</span><br><span class="line">        <span class="keyword">if</span> (n == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> ans = Integer.MAX_VALUE;</span><br><span class="line">        <span class="keyword">int</span> start = <span class="number">0</span>, end = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (end &lt; n) &#123;</span><br><span class="line">            sum += nums[end];</span><br><span class="line">            <span class="keyword">while</span> (sum &gt;= s) &#123;</span><br><span class="line">                ans = Math.min(ans, end - start + <span class="number">1</span>);</span><br><span class="line">                sum -= nums[start];</span><br><span class="line">                start++;</span><br><span class="line">            &#125;</span><br><span class="line">            end++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans == Integer.MAX_VALUE ? <span class="number">0</span> : ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>C++</summary><figure class="highlight c++"><figcaption><span>[sol3-C++]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">minSubArrayLen</span><span class="params">(<span class="keyword">int</span> s, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = nums.size();</span><br><span class="line">        <span class="keyword">if</span> (n == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> ans = INT_MAX;</span><br><span class="line">        <span class="keyword">int</span> start = <span class="number">0</span>, end = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (end &lt; n) &#123;</span><br><span class="line">            sum += nums[end];</span><br><span class="line">            <span class="keyword">while</span> (sum &gt;= s) &#123;</span><br><span class="line">                ans = min(ans, end - start + <span class="number">1</span>);</span><br><span class="line">                sum -= nums[start];</span><br><span class="line">                start++;</span><br><span class="line">            &#125;</span><br><span class="line">            end++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans == INT_MAX ? <span class="number">0</span> : ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></details><details>    <summary>C#</summary><figure class="highlight csharp"><figcaption><span>[sol3-C#]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Solution</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">MinSubArrayLen</span>(<span class="params"><span class="keyword">int</span> s, <span class="keyword">int</span>[] nums</span>) </span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = nums.Length;</span><br><span class="line">        <span class="keyword">if</span> (n == <span class="number">0</span>) </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> ans = <span class="keyword">int</span>.MaxValue;</span><br><span class="line">        <span class="keyword">int</span> start = <span class="number">0</span>, end = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (end &lt; n) </span><br><span class="line">        &#123;</span><br><span class="line">            sum += nums[end];</span><br><span class="line">            <span class="keyword">while</span> (sum &gt;= s) </span><br><span class="line">            &#123;</span><br><span class="line">                ans = Math.Min(ans, end - start + <span class="number">1</span>);</span><br><span class="line">                sum -= nums[start];</span><br><span class="line">                ++start;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            ++end;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ans == <span class="keyword">int</span>.MaxValue ? <span class="number">0</span> : ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>Golang</summary><figure class="highlight golang"><figcaption><span>[sol3-Golang]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">minSubArrayLen</span><span class="params">(s <span class="keyword">int</span>, nums []<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    n := <span class="built_in">len</span>(nums)</span><br><span class="line">    <span class="keyword">if</span> n == <span class="number">0</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">    ans := math.MaxInt32</span><br><span class="line">    start, end := <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">    sum := <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> end &lt; n &#123;</span><br><span class="line">        sum += nums[end]</span><br><span class="line">        <span class="keyword">for</span> sum &gt;= s &#123;</span><br><span class="line">            ans = min(ans, end - start + <span class="number">1</span>)</span><br><span class="line">            sum -= nums[start]</span><br><span class="line">            start++</span><br><span class="line">        &#125;</span><br><span class="line">        end++</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> ans == math.MaxInt32 &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">min</span><span class="params">(x, y <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> x &lt; y &#123;</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> y</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>Python3</summary><figure class="highlight python"><figcaption><span>[sol3-Python3]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">minSubArrayLen</span><span class="params">(self, s: int, nums: List[int])</span> -&gt; int:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> nums:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        </span><br><span class="line">        n = len(nums)</span><br><span class="line">        ans = n + <span class="number">1</span></span><br><span class="line">        start, end = <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">        total = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> end &lt; n:</span><br><span class="line">            total += nums[end]</span><br><span class="line">            <span class="keyword">while</span> total &gt;= s:</span><br><span class="line">                ans = min(ans, end - start + <span class="number">1</span>)</span><br><span class="line">                total -= nums[start]</span><br><span class="line">                start += <span class="number">1</span></span><br><span class="line">            end += <span class="number">1</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span> <span class="keyword">if</span> ans == n + <span class="number">1</span> <span class="keyword">else</span> ans</span><br></pre></td></tr></table></figure></details><details>    <summary>C</summary><figure class="highlight c"><figcaption><span>[sol3-C]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">minSubArrayLen</span><span class="params">(<span class="keyword">int</span> s, <span class="keyword">int</span> *nums, <span class="keyword">int</span> numsSize)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (numsSize == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> ans = INT_MAX;</span><br><span class="line">    <span class="keyword">int</span> start = <span class="number">0</span>, end = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (end &lt; numsSize) &#123;</span><br><span class="line">        sum += nums[end];</span><br><span class="line">        <span class="keyword">while</span> (sum &gt;= s) &#123;</span><br><span class="line">            ans = fmin(ans, end - start + <span class="number">1</span>);</span><br><span class="line">            sum -= nums[start];</span><br><span class="line">            start++;</span><br><span class="line">        &#125;</span><br><span class="line">        end++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans == INT_MAX ? <span class="number">0</span> : ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç»™å®šä¸€ä¸ªå«æœ‰ n ä¸ªæ­£æ•´æ•°çš„æ•°ç»„å’Œä¸€ä¸ªæ­£æ•´æ•° target ã€‚&lt;/p&gt;
&lt;p&gt;æ‰¾å‡ºè¯¥æ•°ç»„ä¸­æ»¡è¶³å…¶å’Œ â‰¥ target çš„é•¿åº¦æœ€å°çš„ è¿ç»­å­æ•°ç»„ [numsl, numsl+1, â€¦, numsr-1, numsr] ï¼Œå¹¶è¿”å›å…¶é•¿åº¦ã€‚å¦‚æœä¸å­˜åœ¨ç¬¦åˆæ¡ä»¶çš„å­æ•°ç»„ï¼Œè¿”å› 0 ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="2021å¹´10æœˆ" scheme="http://yoursite.com/categories/2021%E5%B9%B410%E6%9C%88/"/>
    
    
      <category term="LeetCode" scheme="http://yoursite.com/tags/LeetCode/"/>
    
      <category term="Array" scheme="http://yoursite.com/tags/Array/"/>
    
      <category term="Sliding Window" scheme="http://yoursite.com/tags/Sliding-Window/"/>
    
      <category term="Binary Search" scheme="http://yoursite.com/tags/Binary-Search/"/>
    
      <category term="Prefix Sum" scheme="http://yoursite.com/tags/Prefix-Sum/"/>
    
  </entry>
  
  <entry>
    <title>318. æœ€å¤§å•è¯é•¿åº¦ä¹˜ç§¯</title>
    <link href="http://yoursite.com/2021/10/27/318.%20%E6%9C%80%E5%A4%A7%E5%8D%95%E8%AF%8D%E9%95%BF%E5%BA%A6%E4%B9%98%E7%A7%AF/"/>
    <id>http://yoursite.com/2021/10/27/318. æœ€å¤§å•è¯é•¿åº¦ä¹˜ç§¯/</id>
    <published>2021-10-27T09:12:12.000Z</published>
    <updated>2021-10-27T10:28:55.078Z</updated>
    
    <content type="html"><![CDATA[<p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ wordsï¼Œæ‰¾åˆ° length(word[i]) * length(word[j]) çš„æœ€å¤§å€¼ï¼Œå¹¶ä¸”è¿™ä¸¤ä¸ªå•è¯ä¸å«æœ‰å…¬å…±å­—æ¯ã€‚ä½ å¯ä»¥è®¤ä¸ºæ¯ä¸ªå•è¯åªåŒ…å«å°å†™å­—æ¯ã€‚å¦‚æœä¸å­˜åœ¨è¿™æ ·çš„ä¸¤ä¸ªå•è¯ï¼Œè¿”å› 0ã€‚</p><a id="more"></a><p>[TOC]</p><p>ç¤ºä¾‹ 1:</p><pre><code>è¾“å…¥: [&quot;abcw&quot;,&quot;baz&quot;,&quot;foo&quot;,&quot;bar&quot;,&quot;xtfn&quot;,&quot;abcdef&quot;]è¾“å‡º: 16 è§£é‡Š: è¿™ä¸¤ä¸ªå•è¯ä¸º &quot;abcw&quot;, &quot;xtfn&quot;ã€‚</code></pre><p>ç¤ºä¾‹ 2:</p><pre><code>è¾“å…¥: [&quot;a&quot;,&quot;ab&quot;,&quot;abc&quot;,&quot;d&quot;,&quot;cd&quot;,&quot;bcd&quot;,&quot;abcd&quot;]è¾“å‡º: 4 è§£é‡Š: è¿™ä¸¤ä¸ªå•è¯ä¸º &quot;ab&quot;, &quot;cd&quot;ã€‚</code></pre><p>ç¤ºä¾‹ 3:</p><pre><code>è¾“å…¥: [&quot;a&quot;,&quot;aa&quot;,&quot;aaa&quot;,&quot;aaaa&quot;]è¾“å‡º: 0 è§£é‡Š: ä¸å­˜åœ¨è¿™æ ·çš„ä¸¤ä¸ªå•è¯ã€‚</code></pre><p>æç¤ºï¼š</p><p>2 &lt;= words.length &lt;= 1000<br>1 &lt;= words[i].length &lt;= 1000<br>words[i] ä»…åŒ…å«å°å†™å­—æ¯</p><h1 id="ç»¼è¿°"><a href="#ç»¼è¿°" class="headerlink" title="ç»¼è¿°"></a>ç»¼è¿°</h1><p>ä»ç®€å•æ–¹æ³•å¼€å§‹æ…¢æ…¢æ·±å…¥ã€‚<a href="https://leetcode-cn.com/problems/maximum-product-of-word-lengths/solution/zui-da-dan-ci-chang-du-cheng-ji-by-leetcode/" target="_blank" rel="noopener">^1</a></p><blockquote><p>å°†æ¯ä¸ªå•è¯ä¸å…¶ä»–æ‰€æœ‰å•è¯ä¸€ä¸€æ¯”è¾ƒã€‚å¦‚æœä¸¤ä¸ªå•è¯æ²¡æœ‰å…¬å…±å­—æ¯ï¼Œåˆ™æ›´æ–° <code>maxProd</code>ã€‚</p></blockquote><p>å…ˆä¸è€ƒè™‘å®ç°æ–¹æ³• <code>noCommonLetters</code>ï¼Œè¯¥è§£æ³•çš„ä»£ç å¦‚ä¸‹ï¼š</p><details>    <summary>Python</summary><figure class="highlight python"><figcaption><span>[snippet1-Python]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">maxProduct</span><span class="params">(self, words: List[str])</span> -&gt; int:</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">no_common_letters</span><span class="params">(s1, s2)</span>:</span></span><br><span class="line">            <span class="comment"># TODO</span></span><br><span class="line">            </span><br><span class="line">        n = len(words)</span><br><span class="line">        max_prod = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(i + <span class="number">1</span>, n):</span><br><span class="line">                <span class="keyword">if</span> no_common_letters(words[i], words[j]):</span><br><span class="line">                    max_prod = max(max_prod, len(words[i]) * len(words[j]))</span><br><span class="line">        <span class="keyword">return</span> max_prod</span><br></pre></td></tr></table></figure></details><details>    <summary>Java</summary><figure class="highlight java"><figcaption><span>[snippet1-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">noCommonLetters</span><span class="params">(String s1, String s2)</span></span>&#123;</span><br><span class="line">    <span class="comment">// TODO</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxProduct</span><span class="params">(String[] words)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = words.length;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> maxProd = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt; n; ++j)</span><br><span class="line">        <span class="keyword">if</span> (noCommonLetters(words[i], words[j]))</span><br><span class="line">          maxProd = Math.max(maxProd, words[i].length() * words[j].length());</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> maxProd;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><ul><li><p>æ–¹æ³•ä¸€ï¼šæœ€å°åŒ–æ–¹æ³• <em>f(L_1, L_2)</em> çš„å¤æ‚åº¦ã€‚</p></li><li><p>æ–¹æ³•äºŒï¼šæœ€å°åŒ–å•è¯çš„æ¯”è¾ƒæ¬¡æ•°ã€‚ä¸éœ€è¦O(N^2) æ¬¡æ¯”è¾ƒï¼Œåœ¨æ‰€æœ‰å…·æœ‰ç›¸åŒå­—ç¬¦é›†çš„å•è¯ä¸­åªä¿ç•™æœ€é•¿çš„ä¸€ä¸ªå•è¯ã€‚ä¾‹ï¼šï¼ˆ<em>ab</em>ï¼Œ<em>aaaaabaabaaabb</em>ï¼Œ<em>bbabbabba</em>ï¼‰ä¸­åªä¿ç•™æœ€é•¿çš„ä¸€ä¸ªå•è¯ï¼ˆ<em>aaaaabaabaaabb</em>ï¼‰ã€‚</p></li></ul><h1 id="æ–¹æ³•ä¸€ï¼šä¼˜åŒ–çš„æ–¹æ³•-noCommonLettersï¼šä½æ“ä½œ-é¢„è®¡ç®—"><a href="#æ–¹æ³•ä¸€ï¼šä¼˜åŒ–çš„æ–¹æ³•-noCommonLettersï¼šä½æ“ä½œ-é¢„è®¡ç®—" class="headerlink" title="æ–¹æ³•ä¸€ï¼šä¼˜åŒ–çš„æ–¹æ³• noCommonLettersï¼šä½æ“ä½œ+é¢„è®¡ç®—"></a>æ–¹æ³•ä¸€ï¼šä¼˜åŒ–çš„æ–¹æ³• noCommonLettersï¼šä½æ“ä½œ+é¢„è®¡ç®—</h1><p>é¦–å…ˆæœ€å°åŒ–å•è¯æ¯”è¾ƒ <em>f(L_1, L_2)</em> çš„å¤æ‚åº¦ã€‚</p><p>é€ä¸ªæ£€æŸ¥ç¬¬ä¸€ä¸ªå•è¯çš„æ¯ä¸ªå­—æ¯æ˜¯å¦å‡ºç°åœ¨ç¬¬äºŒä¸ªå•è¯ä¸­ï¼Œè¿™ç§æ–¹æ³•ä¸æ˜¯æœ€ä¼˜çš„ã€‚</p><details>    <summary>Python</summary><figure class="highlight python"><figcaption><span>[snippet2-Python]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">no_common_letters</span><span class="params">(s1, s2)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> ch <span class="keyword">in</span> s1:</span><br><span class="line">        <span class="keyword">if</span> ch <span class="keyword">in</span> s2:</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">False</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">True</span></span><br></pre></td></tr></table></figure></details><details>    <summary>Java</summary><figure class="highlight java"><figcaption><span>[snippet2-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">noCommonLetters</span><span class="params">(String s1, String s2)</span></span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">char</span> ch : s1.toCharArray())</span><br><span class="line">    <span class="keyword">if</span> (s2.indexOf(ch) != -<span class="number">1</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> </details><p>æ›´å¥½çš„æ–¹æ³•æ˜¯ä½¿ç”¨ä½æ“ä½œã€‚</p><p>å•è¯ä»…åŒ…å«å°å†™å­—æ¯ï¼Œå¯ä»¥ä½¿ç”¨ 26 ä¸ªå­—æ¯çš„ä½æ©ç å¯¹å•è¯çš„æ¯ä¸ªå­—æ¯å¤„ç†ï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨æŸä¸ªå­—æ¯ã€‚å¦‚æœå•è¯ä¸­å­˜åœ¨å­—æ¯ <code>a</code>ï¼Œåˆ™å°†ä½æ©ç çš„ç¬¬ä¸€ä½è®¾ä¸º <code>1</code>ï¼Œå¦åˆ™è®¾ä¸º <code>0</code>ã€‚å¦‚æœå•è¯ä¸­å­˜åœ¨å­—æ¯ <code>b</code>ï¼Œåˆ™å°†ä½æ©ç çš„ç¬¬äºŒä½è®¾ä¸º <code>1</code>ï¼Œå¦åˆ™è®¾ä¸º <code>0</code>ã€‚ä¾æ¬¡ç±»æ¨ï¼Œä¸€ç›´åˆ¤æ–­åˆ°å­—æ¯ <code>z</code>ã€‚</p><blockquote><p>å¦‚ä½•è®¾ç½®æ©ç çš„ç¬¬ n ä½ï¼Ÿä½¿ç”¨æ ‡å‡†çš„ä½æ“ä½œï¼š<code>n_th_bit = 1 &lt;&lt; n</code>ã€‚</p></blockquote><blockquote><p>å¦‚ä½•è®¡ç®—ä¸€ä¸ªå•è¯çš„ä½æ©ç ï¼Ÿéå†å•è¯çš„æ¯ä¸ªå­—æ¯ï¼Œè®¡ç®—è¯¥å­—æ¯åœ¨æ©ç ä¸­çš„ä½ç½® <code>n = (int)ch - (int)&#39;a&#39;</code>ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªç¬¬ n ä½ä¸º 1 çš„æ©ç  <code>n_th_bit = 1 &lt;&lt; n</code>ï¼Œé€šè¿‡æˆ–æ“ä½œå°†è¯¥ç åˆå¹¶åˆ°ä½æ©ç ä¸­ <code>bitmask |= n_th_bit</code>ã€‚</p></blockquote><details>    <summary>Python</summary><figure class="highlight python"><figcaption><span>[snippet3-Python]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">no_common_letters</span><span class="params">(s1, s2)</span>:</span></span><br><span class="line">    bit_number = <span class="keyword">lambda</span> ch : ord(ch) - ord(<span class="string">'a'</span>)</span><br><span class="line"></span><br><span class="line">    bitmask1 = bitmask2 = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> ch <span class="keyword">in</span> s1:</span><br><span class="line">        bitmask1 |= <span class="number">1</span> &lt;&lt; bit_number(ch)</span><br><span class="line">    <span class="keyword">for</span> ch <span class="keyword">in</span> s2:</span><br><span class="line">        bitmask2 |= <span class="number">1</span> &lt;&lt; bit_number(ch)</span><br><span class="line">    <span class="keyword">return</span> bitmask1 &amp; bitmask2 == <span class="number">0</span></span><br></pre></td></tr></table></figure></details><details>    <summary>Java</summary><figure class="highlight java"><figcaption><span>[snippet3-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">bitNumber</span><span class="params">(<span class="keyword">char</span> ch)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (<span class="keyword">int</span>)ch - (<span class="keyword">int</span>)<span class="string">'a'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">noCommonLetters</span><span class="params">(String s1, String s2)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> bitmask1 = <span class="number">0</span>, bitmask2 = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">char</span> ch : s1.toCharArray())</span><br><span class="line">    bitmask1 |= <span class="number">1</span> &lt;&lt; bitNumber(ch);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">char</span> ch : s2.toCharArray())</span><br><span class="line">    bitmask2 |= <span class="number">1</span> &lt;&lt; bitNumber(ch);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (bitmask1 &amp; bitmask2) == <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><p>å‰é¢æ–¹æ³•ä¸­ï¼Œæ¯ä¸ªå•è¯éœ€è¦è®¡ç®— N æ¬¡ä½æ©ç ã€‚å®é™…ä¸Šï¼Œæ¯ä¸ªå•è¯çš„ä½æ©ç å¯ä»¥é¢„å…ˆè®¡ç®—å¹¶å­˜å‚¨èµ·æ¥ï¼Œä¹‹åæ¯æ¬¡ç›´æ¥æ‹¿æ¥æ¯”è¾ƒã€‚</p><p>å› ä¸º Java çš„ä¼˜åŒ–ï¼Œæ“ä½œæ•°ç»„æ¯” HashMap æ›´å¿«ï¼Œæ‰€ä»¥ä½¿ç”¨ä¸¤ä¸ªæ•´æ•°æ•°ç»„å­˜å‚¨ä½æ©ç å’Œå­—ç¬¦ä¸²é•¿åº¦ã€‚</p><p><strong>ç®—æ³•</strong></p><ul><li><p>é¢„è®¡ç®—æ‰€æœ‰å•è¯çš„ä½æ©ç ï¼Œå¹¶æŠŠå®ƒä»¬å­˜å‚¨åœ¨æ•°ç»„ <code>masks</code> ä¸­ã€‚ä½¿ç”¨æ•°ç»„ <code>lens</code> å­˜å‚¨æ‰€æœ‰å•è¯çš„é•¿åº¦ã€‚</p></li><li><p>é€ä¸€ä¸¤ä¸¤æ¯”è¾ƒå•è¯ã€‚å¦‚æœä¸¤ä¸ªå•è¯ä¸å­˜åœ¨å…¬å…±å­—æ¯ï¼Œåˆ™æ›´æ–°æœ€å¤§å•è¯é•¿åº¦ä¹˜ç§¯ <code>maxProd</code>ã€‚ä½¿ç”¨æ•°ç»„ <code>masks</code> å¯ä»¥åœ¨å¸¸æ•°æ—¶é—´å†…åˆ¤æ–­ä¸¤ä¸ªå•è¯æ˜¯å¦åŒ…å«å…¬å…±å­—æ¯ï¼š<code>(masks[i] &amp; masks[j]) == 0</code>ã€‚</p></li><li><p>è¿”å› <code>maxProd</code>ã€‚</p></li></ul><details>    <summary>Python</summary><figure class="highlight python"><figcaption><span>[solution1-Python]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">maxProduct</span><span class="params">(self, words: List[str])</span> -&gt; int:</span></span><br><span class="line">        n = len(words)</span><br><span class="line">        masks = [<span class="number">0</span>] * n</span><br><span class="line">        lens = [<span class="number">0</span>] * n</span><br><span class="line">        bit_number = <span class="keyword">lambda</span> ch : ord(ch) - ord(<span class="string">'a'</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            bitmask = <span class="number">0</span></span><br><span class="line">            <span class="keyword">for</span> ch <span class="keyword">in</span> words[i]:</span><br><span class="line">                <span class="comment"># add bit number bit_number in bitmask</span></span><br><span class="line">                bitmask |= <span class="number">1</span> &lt;&lt; bit_number(ch)</span><br><span class="line">            masks[i] = bitmask</span><br><span class="line">            lens[i] = len(words[i])</span><br><span class="line">            </span><br><span class="line">        max_val = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(i + <span class="number">1</span>, n):</span><br><span class="line">                <span class="keyword">if</span> masks[i] &amp; masks[j] == <span class="number">0</span>:</span><br><span class="line">                    max_val = max(max_val, lens[i] * lens[j])</span><br><span class="line">        <span class="keyword">return</span> max_val</span><br></pre></td></tr></table></figure></details><details>    <summary>Java</summary><figure class="highlight java"><figcaption><span>[solution1-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">bitNumber</span><span class="params">(<span class="keyword">char</span> ch)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="keyword">int</span>)ch - (<span class="keyword">int</span>)<span class="string">'a'</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxProduct</span><span class="params">(String[] words)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = words.length;</span><br><span class="line">    <span class="keyword">int</span>[] masks = <span class="keyword">new</span> <span class="keyword">int</span>[n];</span><br><span class="line">    <span class="keyword">int</span>[] lens = <span class="keyword">new</span> <span class="keyword">int</span>[n];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> bitmask = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) &#123;</span><br><span class="line">      bitmask = <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">char</span> ch : words[i].toCharArray()) &#123;</span><br><span class="line">        <span class="comment">// add bit number bit_number in bitmask</span></span><br><span class="line">        bitmask |= <span class="number">1</span> &lt;&lt; bitNumber(ch);</span><br><span class="line">      &#125;</span><br><span class="line">      masks[i] = bitmask;</span><br><span class="line">      lens[i] = words[i].length();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> maxVal = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i)</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt; n; ++j)</span><br><span class="line">        <span class="keyword">if</span> ((masks[i] &amp; masks[j]) == <span class="number">0</span>)</span><br><span class="line">          maxVal = Math.max(maxVal, lens[i] * lens[j]);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> maxVal;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><h1 id="æ–¹æ³•äºŒï¼šä¼˜åŒ–æ¯”è¾ƒæ¬¡æ•°ï¼šä½æ“ä½œ-é¢„è®¡ç®—-HashMap"><a href="#æ–¹æ³•äºŒï¼šä¼˜åŒ–æ¯”è¾ƒæ¬¡æ•°ï¼šä½æ“ä½œ-é¢„è®¡ç®—-HashMap" class="headerlink" title="æ–¹æ³•äºŒï¼šä¼˜åŒ–æ¯”è¾ƒæ¬¡æ•°ï¼šä½æ“ä½œ+é¢„è®¡ç®—+HashMap"></a>æ–¹æ³•äºŒï¼šä¼˜åŒ–æ¯”è¾ƒæ¬¡æ•°ï¼šä½æ“ä½œ+é¢„è®¡ç®—+HashMap</h1><p>æ–¹æ³•ä¸€ä¼˜åŒ–äº†æ¯”è¾ƒè¿‡ç¨‹ï¼Œæ–¹æ³•äºŒä¼˜åŒ–æ¯”è¾ƒæ¬¡æ•°ã€‚å®Œæˆæ‰€æœ‰çš„ä¸¤ä¸¤æ¯”è¾ƒéœ€è¦ O(N^2)  ã€‚ä¸€äº›å•è¯å…·æœ‰ç›¸åŒçš„å­—ç¬¦é›†ï¼Œåˆ™åªä¿ç•™è¿™äº›å•è¯ä¸­æœ€é•¿çš„ä¸€ä¸ªå•è¯å³å¯ã€‚ä¾‹å¦‚ï¼šå•è¯é›†åˆï¼ˆ<em>ab<em>ï¼Œ</em>aaaaabaabaaabb<em>ï¼Œ</em>bbabbabba*ï¼‰åªä¿ç•™å•è¯ *aaaaabaabaaabb</em> å³å¯ã€‚ä½¿ç”¨ HashMap ä»£æ›¿æ–¹æ³•ä¸€ä¸­çš„ä¸¤ä¸ªé•¿åº¦ä¸º <em>N</em> çš„æ•°ç»„ï¼Œå­˜å‚¨ç»“æ„ä¸ºï¼šä½æ©ç  -&gt; è¯¥æ©ç å¯¹åº”çš„æœ€å¤§é•¿åº¦å­—ç¬¦ä¸²ã€‚</p><p>è¿™ç§æ–¹æ³•å•è¯æ¯”è¾ƒæ¬¡æ•°å¯èƒ½ä¼šå‡å°‘ï¼Œä»è€Œæé«˜ Python è§£æ³•çš„æ•ˆç‡ã€‚ç”±äº Java ä¸­ HashMap çš„æ€§èƒ½é—®é¢˜ï¼Œè¿™ç§æ–¹æ³•ä¸ä¼šæ”¹å–„ Java è§£æ³•çš„æ•ˆç‡ã€‚</p><p><strong>ç®—æ³•</strong></p><ul><li><p>é¢„è®¡ç®—æ‰€æœ‰å•è¯çš„ä½æ©ç ï¼Œå¹¶å°†å®ƒä»¬å­˜å‚¨åœ¨ HashMap ä¸­ï¼šä½æ©ç  -&gt; è¯¥æ©ç å¯¹åº”çš„æœ€å¤§é•¿åº¦å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ï¼šå•è¯ â€œaaaaaaaâ€ å’Œ â€œaâ€ å…·æœ‰ç›¸åŒçš„æ©ç ã€‚ </p></li><li><p>é€ä¸€ä¸¤ä¸¤æ¯”è¾ƒ HashMap ä¸­çš„å•è¯ã€‚å¦‚æœä¸¤ä¸ªå•è¯æ²¡æœ‰å…¬å…±å­—æ¯ï¼Œæ›´æ–°æœ€å¤§å•è¯é•¿åº¦ä¹˜ç§¯ <code>maxProd</code>ã€‚ä½¿ç”¨ä½æ©ç å¯ä»¥åœ¨å¸¸æ•°æ—¶é—´å†…åˆ¤æ–­ä¸¤ä¸ªå•è¯æ˜¯å¦åŒ…å«å…¬å…±å­—æ¯ï¼š<code>(x &amp; y) == 0</code>ã€‚</p></li><li><p>è¿”å› <code>maxProd</code>ã€‚</p></li></ul><details>    <summary>Python</summary><figure class="highlight python"><figcaption><span>[solution2-Python]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">maxProduct</span><span class="params">(self, words: List[str])</span> -&gt; int:</span></span><br><span class="line">        hashmap = defaultdict(int)</span><br><span class="line">        bit_number = <span class="keyword">lambda</span> ch : ord(ch) - ord(<span class="string">'a'</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> word <span class="keyword">in</span> words:</span><br><span class="line">            bitmask = <span class="number">0</span></span><br><span class="line">            <span class="keyword">for</span> ch <span class="keyword">in</span> word:</span><br><span class="line">                <span class="comment"># add bit number bit_number in bitmask</span></span><br><span class="line">                bitmask |= <span class="number">1</span> &lt;&lt; bit_number(ch)</span><br><span class="line">            <span class="comment"># there could be different words with the same bitmask</span></span><br><span class="line">            <span class="comment"># ex. ab and aabb</span></span><br><span class="line">            hashmap[bitmask] = max(hashmap[bitmask], len(word))</span><br><span class="line">        </span><br><span class="line">        max_prod = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> x <span class="keyword">in</span> hashmap:</span><br><span class="line">            <span class="keyword">for</span> y <span class="keyword">in</span> hashmap:</span><br><span class="line">                <span class="keyword">if</span> x &amp; y == <span class="number">0</span>:</span><br><span class="line">                    max_prod = max(max_prod, hashmap[x] * hashmap[y])</span><br><span class="line">        <span class="keyword">return</span> max_prod</span><br></pre></td></tr></table></figure></details><details>    <summary>Java</summary><figure class="highlight java"><figcaption><span>[solution2-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">bitNumber</span><span class="params">(<span class="keyword">char</span> ch)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="keyword">int</span>)ch - (<span class="keyword">int</span>)<span class="string">'a'</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxProduct</span><span class="params">(String[] words)</span> </span>&#123;</span><br><span class="line">    Map&lt;Integer, Integer&gt; hashmap = <span class="keyword">new</span> HashMap();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> bitmask = <span class="number">0</span>, bitNum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (String word : words) &#123;</span><br><span class="line">      bitmask = <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">char</span> ch : word.toCharArray()) &#123;</span><br><span class="line">        <span class="comment">// add bit number bitNumber in bitmask</span></span><br><span class="line">        bitmask |= <span class="number">1</span> &lt;&lt; bitNumber(ch);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// there could be different words with the same bitmask</span></span><br><span class="line">      <span class="comment">// ex. ab and aabb</span></span><br><span class="line">      hashmap.put(bitmask, Math.max(hashmap.getOrDefault(bitmask, <span class="number">0</span>), word.length()));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> maxProd = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> x : hashmap.keySet())</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> y : hashmap.keySet())</span><br><span class="line">        <span class="keyword">if</span> ((x &amp; y) == <span class="number">0</span>) maxProd = Math.max(maxProd, hashmap.get(x) * hashmap.get(y));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> maxProd;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ wordsï¼Œæ‰¾åˆ° length(word[i]) * length(word[j]) çš„æœ€å¤§å€¼ï¼Œå¹¶ä¸”è¿™ä¸¤ä¸ªå•è¯ä¸å«æœ‰å…¬å…±å­—æ¯ã€‚ä½ å¯ä»¥è®¤ä¸ºæ¯ä¸ªå•è¯åªåŒ…å«å°å†™å­—æ¯ã€‚å¦‚æœä¸å­˜åœ¨è¿™æ ·çš„ä¸¤ä¸ªå•è¯ï¼Œè¿”å› 0ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="2021å¹´10æœˆ" scheme="http://yoursite.com/categories/2021%E5%B9%B410%E6%9C%88/"/>
    
    
      <category term="LeetCode" scheme="http://yoursite.com/tags/LeetCode/"/>
    
      <category term="Array" scheme="http://yoursite.com/tags/Array/"/>
    
      <category term="String" scheme="http://yoursite.com/tags/String/"/>
    
      <category term="Bit Manipulation" scheme="http://yoursite.com/tags/Bit-Manipulation/"/>
    
  </entry>
  
  <entry>
    <title>1531. å‹ç¼©å­—ç¬¦ä¸² II</title>
    <link href="http://yoursite.com/2021/10/25/1531.%20%E5%8E%8B%E7%BC%A9%E5%AD%97%E7%AC%A6%E4%B8%B2%20II/"/>
    <id>http://yoursite.com/2021/10/25/1531. å‹ç¼©å­—ç¬¦ä¸² II/</id>
    <published>2021-10-25T06:12:12.000Z</published>
    <updated>2021-10-26T02:08:45.928Z</updated>
    
    <content type="html"><![CDATA[<p>è¯·ä½ è¿”å›åˆ é™¤æœ€å¤škä¸ªå­—ç¬¦åï¼Œsè¡Œç¨‹é•¿åº¦ç¼–ç çš„æœ€å°é•¿åº¦ ã€‚</p><a id="more"></a><p>[TOC]</p><p>è¡Œç¨‹é•¿åº¦ç¼–ç  æ˜¯ä¸€ç§å¸¸ç”¨çš„å­—ç¬¦ä¸²å‹ç¼©æ–¹æ³•ï¼Œå®ƒå°†è¿ç»­çš„ç›¸åŒå­—ç¬¦ï¼ˆé‡å¤ 2 æ¬¡æˆ–æ›´å¤šæ¬¡ï¼‰æ›¿æ¢ä¸ºå­—ç¬¦å’Œè¡¨ç¤ºå­—ç¬¦è®¡æ•°çš„æ•°å­—ï¼ˆè¡Œç¨‹é•¿åº¦ï¼‰ã€‚ä¾‹å¦‚ï¼Œç”¨æ­¤æ–¹æ³•å‹ç¼©å­—ç¬¦ä¸² â€œaabcccâ€ ï¼Œå°† â€œaaâ€ æ›¿æ¢ä¸º â€œa2â€ ï¼Œâ€cccâ€ æ›¿æ¢ä¸º` â€œc3â€ ã€‚å› æ­¤å‹ç¼©åçš„å­—ç¬¦ä¸²å˜ä¸º â€œa2bc3â€ ã€‚</p><p>æ³¨æ„ï¼Œæœ¬é—®é¢˜ä¸­ï¼Œå‹ç¼©æ—¶æ²¡æœ‰åœ¨å•ä¸ªå­—ç¬¦åé™„åŠ è®¡æ•° â€˜1â€™ ã€‚</p><p>ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² s å’Œä¸€ä¸ªæ•´æ•° k ã€‚ä½ éœ€è¦ä»å­—ç¬¦ä¸² s ä¸­åˆ é™¤æœ€å¤š k ä¸ªå­—ç¬¦ï¼Œä»¥ä½¿ s çš„è¡Œç¨‹é•¿åº¦ç¼–ç é•¿åº¦æœ€å°ã€‚</p><p>è¯·ä½ è¿”å›åˆ é™¤æœ€å¤š k ä¸ªå­—ç¬¦åï¼Œs è¡Œç¨‹é•¿åº¦ç¼–ç çš„æœ€å°é•¿åº¦ ã€‚</p><p>ç¤ºä¾‹ 1ï¼š</p><pre><code>è¾“å…¥ï¼šs = &quot;aaabcccd&quot;, k = 2è¾“å‡ºï¼š4è§£é‡Šï¼šåœ¨ä¸åˆ é™¤ä»»ä½•å†…å®¹çš„æƒ…å†µä¸‹ï¼Œå‹ç¼©åçš„å­—ç¬¦ä¸²æ˜¯ &quot;a3bc3d&quot; ï¼Œé•¿åº¦ä¸º 6 ã€‚æœ€ä¼˜çš„æ–¹æ¡ˆæ˜¯åˆ é™¤ &apos;b&apos; å’Œ &apos;d&apos;ï¼Œè¿™æ ·ä¸€æ¥ï¼Œå‹ç¼©åçš„å­—ç¬¦ä¸²ä¸º &quot;a3c3&quot; ï¼Œé•¿åº¦æ˜¯ 4 ã€‚</code></pre><p>ç¤ºä¾‹ 2ï¼š</p><pre><code>è¾“å…¥ï¼šs = &quot;aabbaa&quot;, k = 2è¾“å‡ºï¼š2è§£é‡Šï¼šå¦‚æœåˆ å»ä¸¤ä¸ª &apos;b&apos; å­—ç¬¦ï¼Œé‚£ä¹ˆå‹ç¼©åçš„å­—ç¬¦ä¸²æ˜¯é•¿åº¦ä¸º 2 çš„ &quot;a4&quot; ã€‚</code></pre><p>ç¤ºä¾‹ 3ï¼š</p><pre><code>è¾“å…¥ï¼šs = &quot;aaaaaaaaaaa&quot;, k = 0è¾“å‡ºï¼š3è§£é‡Šï¼šç”±äº k ç­‰äº 0 ï¼Œä¸èƒ½åˆ å»ä»»ä½•å­—ç¬¦ã€‚å‹ç¼©åçš„å­—ç¬¦ä¸²æ˜¯ &quot;a11&quot; ï¼Œé•¿åº¦ä¸º 3 ã€‚</code></pre><p>æç¤ºï¼š</p><pre><code>1 &lt;= s.length &lt;= 1000 &lt;= k &lt;= s.lengths ä»…åŒ…å«å°å†™è‹±æ–‡å­—æ¯</code></pre><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æœ¬é¢˜éš¾åº¦è¾ƒå¤§ï¼Œé¢˜è§£ä¸­åŒ…å«è¾ƒå¤šå˜é‡ä»¥åŠå…¬å¼ï¼Œå¸Œæœ›è¯»è€…è®¤çœŸé˜…è¯»ã€‚</p><p>ä¸ºäº†å™è¿°æ–¹ä¾¿ï¼Œæˆ‘ä»¬ç§°ç»™å®šçš„å­—ç¬¦ä¸² <em>s</em> ä¸ºã€ŒåŸä¸²ã€ï¼Œå‹ç¼©åçš„å­—ç¬¦ä¸² <em>t</em> ä¸ºã€Œå‹ç¼©ä¸²ã€ã€‚æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ä» <em>s</em> ä¸­åˆ é™¤è‡³å¤š <em>k</em> ä¸ªå­—ç¬¦ï¼Œä½¿å¾—å…¶å¯¹åº”çš„ <em>t</em> çš„é•¿åº¦æœ€å°ã€‚</p><h1 id="æ–¹æ³•ä¸€ï¼šåŠ¨æ€è§„åˆ’"><a href="#æ–¹æ³•ä¸€ï¼šåŠ¨æ€è§„åˆ’" class="headerlink" title="æ–¹æ³•ä¸€ï¼šåŠ¨æ€è§„åˆ’"></a>æ–¹æ³•ä¸€ï¼šåŠ¨æ€è§„åˆ’</h1><p><strong>æ€è·¯ä¸ç®—æ³•</strong><a href="https://leetcode-cn.com/problems/string-compression-ii/solution/ya-suo-zi-fu-chuan-ii-by-leetcode-solution/" target="_blank" rel="noopener">^1</a></p><p><strong>ä»£ç </strong></p><details>    <summary>C++</summary><figure class="highlight c++"><figcaption><span>[sol1-C++]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getLengthOfOptimalCompression</span><span class="params">(<span class="built_in">string</span> s, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">auto</span> calc = [](<span class="keyword">int</span> x) &#123;</span><br><span class="line">            <span class="keyword">if</span> (x == <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (x &lt; <span class="number">10</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (x &lt; <span class="number">100</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">3</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">4</span>;</span><br><span class="line">        &#125;;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">int</span> n = s.size();</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; f(n + <span class="number">1</span>, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(k + <span class="number">1</span>, INT_MAX &gt;&gt; <span class="number">1</span>));</span><br><span class="line">        f[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt;= k &amp;&amp; j &lt;= i; ++j) &#123;</span><br><span class="line">                <span class="comment">// æƒ…å†µ1:åˆ é™¤ç¬¬iä¸ªå­—ç¬¦</span></span><br><span class="line">                <span class="keyword">if</span> (j &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                    f[i][j] = f[i - <span class="number">1</span>][j - <span class="number">1</span>];</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// æƒ…å†µ2ï¼šä¿ç•™ç¬¬iä¸ªå­—ç¬¦</span></span><br><span class="line">                <span class="keyword">int</span> same = <span class="number">0</span>, diff = <span class="number">0</span>;</span><br><span class="line">                <span class="comment">//å‘å‰éå†ä¸ç¬¬iä¸ªå­—ç¬¦ç›¸åŒçš„å­—ç¬¦åˆ™è€ƒè™‘ä¿ç•™</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i0 = i; i0 &gt;= <span class="number">1</span> &amp;&amp; diff &lt;= j; --i0) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (s[i0 - <span class="number">1</span>] == s[i - <span class="number">1</span>]) &#123;</span><br><span class="line">                        ++same;</span><br><span class="line">                        f[i][j] = min(f[i][j], f[i0 - <span class="number">1</span>][j - diff] + calc(same));</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        ++diff;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> f[n][k];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></details><details>    <summary>Java</summary><figure class="highlight java"><figcaption><span>[sol1-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getLengthOfOptimalCompression</span><span class="params">(String s, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = s.length();</span><br><span class="line">        <span class="keyword">int</span>[][] f = <span class="keyword">new</span> <span class="keyword">int</span>[n + <span class="number">1</span>][k + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            <span class="comment">//é˜²æ­¢åé¢f[i0 - 1][j - diff] + calc(same)æº¢å‡º,æœ€å¤§ä¸ºInteger.MAX_VALUE - 3</span></span><br><span class="line">            Arrays.fill(f[i], Integer.MAX_VALUE - <span class="number">3</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        f[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt;= k &amp;&amp; j &lt;= i; j++) &#123;</span><br><span class="line">                <span class="comment">//???</span></span><br><span class="line">                <span class="keyword">if</span> (j &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                    f[i][j] = f[i - <span class="number">1</span>][j - <span class="number">1</span>];</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">int</span> same = <span class="number">0</span>, diff = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i0 = i; i0 &gt;= <span class="number">1</span> &amp;&amp; diff &lt;= j; i0--) &#123;</span><br><span class="line">                    <span class="comment">//ä¸ºäº†æ–¹ä¾¿å¯¹è¾¹ç•Œæ¡ä»¶è¿›è¡Œå¤„ç†ï¼Œè¿™é‡Œçš„ iå’Œ j éƒ½ä» 1 å¼€å§‹ç¼–å·ï¼Œä½†åœ¨å­—ç¬¦ä¸²ä¸­ä»ç„¶ä»0å¼€å§‹</span></span><br><span class="line">                    <span class="keyword">if</span> (s.charAt(i0 - <span class="number">1</span>) == s.charAt(i - <span class="number">1</span>)) &#123;</span><br><span class="line">                        ++same;</span><br><span class="line">                        f[i][j] = Math.min(f[i][j], f[i0 - <span class="number">1</span>][j - diff] + calc(same));</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        diff++;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> f[n][k];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">calc</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (x == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (x &lt; <span class="number">10</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (x &lt; <span class="number">100</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">3</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">4</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>Python3</summary><figure class="highlight python"><figcaption><span>[sol1-Python3]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getLengthOfOptimalCompression</span><span class="params">(self, s: str, k: int)</span> -&gt; int:</span></span><br><span class="line">        calc = <span class="keyword">lambda</span> x: <span class="number">1</span> <span class="keyword">if</span> x == <span class="number">1</span> <span class="keyword">else</span> (<span class="number">2</span> <span class="keyword">if</span> x &lt; <span class="number">10</span> <span class="keyword">else</span> (<span class="number">3</span> <span class="keyword">if</span> x &lt; <span class="number">100</span> <span class="keyword">else</span> <span class="number">4</span>))</span><br><span class="line"></span><br><span class="line">        n = len(s)</span><br><span class="line">        f = [[<span class="number">10</span>**<span class="number">9</span>] * (k + <span class="number">1</span>) <span class="keyword">for</span> _ <span class="keyword">in</span> range(n + <span class="number">1</span>)]</span><br><span class="line">        f[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, n + <span class="number">1</span>):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(min(k, i) + <span class="number">1</span>):</span><br><span class="line">                <span class="keyword">if</span> j &gt; <span class="number">0</span>:</span><br><span class="line">                    f[i][j] = f[i - <span class="number">1</span>][j - <span class="number">1</span>]</span><br><span class="line">                same = diff = <span class="number">0</span></span><br><span class="line">                <span class="keyword">for</span> i0 <span class="keyword">in</span> range(i, <span class="number">0</span>, <span class="number">-1</span>):</span><br><span class="line">                    <span class="keyword">if</span> s[i0 - <span class="number">1</span>] == s[i - <span class="number">1</span>]:</span><br><span class="line">                        same += <span class="number">1</span></span><br><span class="line">                        f[i][j] = min(f[i][j], f[i0 - <span class="number">1</span>][j - diff] + calc(same))</span><br><span class="line">                    <span class="keyword">else</span>:</span><br><span class="line">                        diff += <span class="number">1</span></span><br><span class="line">                        <span class="keyword">if</span> diff &gt; j:</span><br><span class="line">                            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">return</span> f[n][k]</span><br></pre></td></tr></table></figure></details><details>    <summary>C</summary><figure class="highlight c"><figcaption><span>[sol1-C]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">calc</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (x &lt; <span class="number">10</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (x &lt; <span class="number">100</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">3</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">4</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">getLengthOfOptimalCompression</span><span class="params">(<span class="keyword">char</span>* s, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = <span class="built_in">strlen</span>(s);</span><br><span class="line">    <span class="keyword">int</span> f[n + <span class="number">1</span>][k + <span class="number">1</span>];</span><br><span class="line">    <span class="built_in">memset</span>(f, <span class="number">0x3f</span>, <span class="keyword">sizeof</span>(f));</span><br><span class="line">    f[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt;= k &amp;&amp; j &lt;= i; ++j) &#123;</span><br><span class="line">            <span class="keyword">if</span> (j &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                f[i][j] = f[i - <span class="number">1</span>][j - <span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">int</span> same = <span class="number">0</span>, diff = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i0 = i; i0 &gt;= <span class="number">1</span> &amp;&amp; diff &lt;= j; --i0) &#123;</span><br><span class="line">                <span class="keyword">if</span> (s[i0 - <span class="number">1</span>] == s[i - <span class="number">1</span>]) &#123;</span><br><span class="line">                    ++same;</span><br><span class="line">                    f[i][j] = fmin(f[i][j], f[i0 - <span class="number">1</span>][j - diff] + calc(same));</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    ++diff;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> f[n][k];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><p><strong>å¤æ‚åº¦åˆ†æ</strong></p><ul><li><p>æ—¶é—´å¤æ‚åº¦ï¼šO(|s|^2k)ï¼Œå…¶ä¸­ <em>|s|</em> æ˜¯åŸä¸² <em>s</em> çš„é•¿åº¦ã€‚åŠ¨æ€è§„åˆ’ä¸­çŠ¶æ€çš„æ•°ç›®ä¸º O(|s|k)ï¼Œæ¯ä¸€ä¸ªçŠ¶æ€éœ€è¦ O(|s|) çš„æ—¶é—´è¿›è¡Œè½¬ç§»ï¼Œç›¸ä¹˜å³å¯å¾—åˆ°æ€»æ—¶é—´å¤æ‚åº¦ã€‚</p></li><li><p>ç©ºé—´å¤æ‚åº¦ï¼šO(|s|k)ï¼Œå³ä¸ºåŠ¨æ€è§„åˆ’ä¸­çŠ¶æ€çš„æ•°ç›®ã€‚</p></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è¯·ä½ è¿”å›åˆ é™¤æœ€å¤škä¸ªå­—ç¬¦åï¼Œsè¡Œç¨‹é•¿åº¦ç¼–ç çš„æœ€å°é•¿åº¦ ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="2021å¹´10æœˆ" scheme="http://yoursite.com/categories/2021%E5%B9%B410%E6%9C%88/"/>
    
    
      <category term="LeetCode" scheme="http://yoursite.com/tags/LeetCode/"/>
    
      <category term="String" scheme="http://yoursite.com/tags/String/"/>
    
      <category term="Dynamic Programming" scheme="http://yoursite.com/tags/Dynamic-Programming/"/>
    
  </entry>
  
  <entry>
    <title>443. å‹ç¼©å­—ç¬¦ä¸²</title>
    <link href="http://yoursite.com/2021/10/25/443.%20%E5%8E%8B%E7%BC%A9%E5%AD%97%E7%AC%A6%E4%B8%B2/"/>
    <id>http://yoursite.com/2021/10/25/443. å‹ç¼©å­—ç¬¦ä¸²/</id>
    <published>2021-10-25T06:12:12.000Z</published>
    <updated>2021-10-25T09:08:02.616Z</updated>
    
    <content type="html"><![CDATA[<p>ç»™ä½ ä¸€ä¸ªå­—ç¬¦æ•°ç»„ chars ï¼Œè¯·ä½¿ç”¨ä¸‹è¿°ç®—æ³•å‹ç¼©</p><a id="more"></a><p>[TOC]</p><p>ä»ä¸€ä¸ªç©ºå­—ç¬¦ä¸² s å¼€å§‹ã€‚å¯¹äº chars ä¸­çš„æ¯ç»„ è¿ç»­é‡å¤å­—ç¬¦ ï¼š</p><p>å¦‚æœè¿™ä¸€ç»„é•¿åº¦ä¸º 1 ï¼Œåˆ™å°†å­—ç¬¦è¿½åŠ åˆ° s ä¸­ã€‚<br>å¦åˆ™ï¼Œéœ€è¦å‘ s è¿½åŠ å­—ç¬¦ï¼Œåè·Ÿè¿™ä¸€ç»„çš„é•¿åº¦ã€‚<br>å‹ç¼©åå¾—åˆ°çš„å­—ç¬¦ä¸² s ä¸åº”è¯¥ç›´æ¥è¿”å› ï¼Œéœ€è¦è½¬å‚¨åˆ°å­—ç¬¦æ•°ç»„ chars ä¸­ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœç»„é•¿åº¦ä¸º 10 æˆ– 10 ä»¥ä¸Šï¼Œåˆ™åœ¨ chars æ•°ç»„ä¸­ä¼šè¢«æ‹†åˆ†ä¸ºå¤šä¸ªå­—ç¬¦ã€‚</p><p>è¯·åœ¨ ä¿®æ”¹å®Œè¾“å…¥æ•°ç»„å ï¼Œè¿”å›è¯¥æ•°ç»„çš„æ–°é•¿åº¦ã€‚</p><p>ä½ å¿…é¡»è®¾è®¡å¹¶å®ç°ä¸€ä¸ªåªä½¿ç”¨å¸¸é‡é¢å¤–ç©ºé—´çš„ç®—æ³•æ¥è§£å†³æ­¤é—®é¢˜ã€‚</p><p>ç¤ºä¾‹ 1ï¼š</p><pre><code>è¾“å…¥ï¼šchars = [&quot;a&quot;,&quot;a&quot;,&quot;b&quot;,&quot;b&quot;,&quot;c&quot;,&quot;c&quot;,&quot;c&quot;]è¾“å‡ºï¼šè¿”å› 6 ï¼Œè¾“å…¥æ•°ç»„çš„å‰ 6 ä¸ªå­—ç¬¦åº”è¯¥æ˜¯ï¼š[&quot;a&quot;,&quot;2&quot;,&quot;b&quot;,&quot;2&quot;,&quot;c&quot;,&quot;3&quot;]è§£é‡Šï¼š&quot;aa&quot; è¢« &quot;a2&quot; æ›¿ä»£ã€‚&quot;bb&quot; è¢« &quot;b2&quot; æ›¿ä»£ã€‚&quot;ccc&quot; è¢« &quot;c3&quot; æ›¿ä»£ã€‚</code></pre><p>ç¤ºä¾‹ 2ï¼š</p><pre><code>è¾“å…¥ï¼šchars = [&quot;a&quot;]è¾“å‡ºï¼šè¿”å› 1 ï¼Œè¾“å…¥æ•°ç»„çš„å‰ 1 ä¸ªå­—ç¬¦åº”è¯¥æ˜¯ï¼š[&quot;a&quot;]è§£é‡Šï¼šæ²¡æœ‰ä»»ä½•å­—ç¬¦ä¸²è¢«æ›¿ä»£ã€‚</code></pre><p>ç¤ºä¾‹ 3ï¼š</p><pre><code>è¾“å…¥ï¼šchars = [&quot;a&quot;,&quot;b&quot;,&quot;b&quot;,&quot;b&quot;,&quot;b&quot;,&quot;b&quot;,&quot;b&quot;,&quot;b&quot;,&quot;b&quot;,&quot;b&quot;,&quot;b&quot;,&quot;b&quot;,&quot;b&quot;]è¾“å‡ºï¼šè¿”å› 4 ï¼Œè¾“å…¥æ•°ç»„çš„å‰ 4 ä¸ªå­—ç¬¦åº”è¯¥æ˜¯ï¼š[&quot;a&quot;,&quot;b&quot;,&quot;1&quot;,&quot;2&quot;]ã€‚è§£é‡Šï¼šç”±äºå­—ç¬¦ &quot;a&quot; ä¸é‡å¤ï¼Œæ‰€ä»¥ä¸ä¼šè¢«å‹ç¼©ã€‚&quot;bbbbbbbbbbbb&quot; è¢« â€œb12â€ æ›¿ä»£ã€‚æ³¨æ„æ¯ä¸ªæ•°å­—åœ¨æ•°ç»„ä¸­éƒ½æœ‰å®ƒè‡ªå·±çš„ä½ç½®ã€‚</code></pre><p>æç¤ºï¼š</p><pre><code>1 &lt;= chars.length &lt;= 2000chars[i] å¯ä»¥æ˜¯å°å†™è‹±æ–‡å­—æ¯ã€å¤§å†™è‹±æ–‡å­—æ¯ã€æ•°å­—æˆ–ç¬¦å·</code></pre><h1 id="æ–¹æ³•ä¸€ï¼šåŒæŒ‡é’ˆ"><a href="#æ–¹æ³•ä¸€ï¼šåŒæŒ‡é’ˆ" class="headerlink" title="æ–¹æ³•ä¸€ï¼šåŒæŒ‡é’ˆ"></a>æ–¹æ³•ä¸€ï¼šåŒæŒ‡é’ˆ</h1><p><strong>æ€è·¯å’Œç®—æ³•</strong></p><p>ä¸ºäº†å®ç°åŸåœ°å‹ç¼©ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åŒæŒ‡é’ˆåˆ†åˆ«æ ‡å¿—æˆ‘ä»¬åœ¨å­—ç¬¦ä¸²ä¸­è¯»å’Œå†™çš„ä½ç½®ã€‚æ¯æ¬¡å½“è¯»æŒ‡é’ˆread ç§»åŠ¨åˆ°æŸä¸€æ®µè¿ç»­ç›¸åŒå­ä¸²çš„æœ€å³ä¾§ï¼Œæˆ‘ä»¬å°±åœ¨å†™æŒ‡é’ˆ write å¤„ä¾æ¬¡å†™å…¥è¯¥å­ä¸²å¯¹åº”çš„å­—ç¬¦å’Œå­ä¸²é•¿åº¦å³å¯ã€‚</p><p>åœ¨å®é™…ä»£ç ä¸­ï¼Œå½“è¯»æŒ‡é’ˆä½äºå­—ç¬¦ä¸²çš„æœ«å°¾ï¼Œæˆ–è¯»æŒ‡é’ˆæŒ‡å‘çš„å­—ç¬¦ä¸åŒäºä¸‹ä¸€ä¸ªå­—ç¬¦æ—¶ï¼Œæˆ‘ä»¬å°±è®¤ä¸ºè¯»æŒ‡é’ˆä½äºæŸä¸€æ®µè¿ç»­ç›¸åŒå­ä¸²çš„æœ€å³ä¾§ã€‚è¯¥å­ä¸²å¯¹åº”çš„å­—ç¬¦å³ä¸ºè¯»æŒ‡é’ˆæŒ‡å‘çš„å­—ç¬¦ä¸²ã€‚æˆ‘ä»¬ä½¿ç”¨å˜é‡è®°å½•è¯¥å­ä¸²çš„æœ€å·¦ä¾§çš„ä½ç½®ï¼Œè¿™æ ·å­ä¸²é•¿åº¦å³ä¸ºread-left+1 ã€‚</p><p>ç‰¹åˆ«åœ°ï¼Œä¸ºäº†è¾¾åˆ° <em>O(1)</em> ç©ºé—´å¤æ‚åº¦ï¼Œæˆ‘ä»¬éœ€è¦è‡ªè¡Œå®ç°å°†æ•°å­—è½¬åŒ–ä¸ºå­—ç¬¦ä¸²å†™å…¥åˆ°åŸå­—ç¬¦ä¸²çš„åŠŸèƒ½ã€‚è¿™é‡Œæˆ‘ä»¬é‡‡ç”¨çŸ­é™¤æ³•å°†å­ä¸²é•¿åº¦å€’åºå†™å…¥åŸå­—ç¬¦ä¸²ä¸­ï¼Œç„¶åå†å°†å…¶åè½¬å³å¯ã€‚</p><p><strong>ä»£ç </strong></p><details>    <summary>C++</summary><figure class="highlight c++"><figcaption><span>[sol1-C++]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">compress</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt;&amp; chars)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = chars.size();</span><br><span class="line">        <span class="keyword">int</span> write = <span class="number">0</span>, left = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> read = <span class="number">0</span>; read &lt; n; read++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (read == n - <span class="number">1</span> || chars[read] != chars[read + <span class="number">1</span>]) &#123;</span><br><span class="line">                chars[write++] = chars[read];</span><br><span class="line">                <span class="keyword">int</span> num = read - left + <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">if</span> (num &gt; <span class="number">1</span>) &#123;</span><br><span class="line">                    <span class="keyword">int</span> anchor = write;</span><br><span class="line">                    <span class="keyword">while</span> (num &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                        chars[write++] = num % <span class="number">10</span> + <span class="string">'0'</span>;</span><br><span class="line">                        num /= <span class="number">10</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    reverse(&amp;chars[anchor], &amp;chars[write]);</span><br><span class="line">                &#125;</span><br><span class="line">                left = read + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> write;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></details><details>    <summary>Java</summary><figure class="highlight java"><figcaption><span>[sol1-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compress</span><span class="params">(<span class="keyword">char</span>[] chars)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = chars.length;</span><br><span class="line">        <span class="keyword">int</span> write = <span class="number">0</span>, left = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> read = <span class="number">0</span>; read &lt; n; read++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (read == n - <span class="number">1</span> || chars[read] != chars[read + <span class="number">1</span>]) &#123;</span><br><span class="line">                <span class="comment">//ä¸ºäº†è®°å½•æ–°è¿ç»­å­—ç¬¦ä¸²å­—ç¬¦å†…å®¹ï¼Œè¦†ç›–åŸæœ‰è®°å½•</span></span><br><span class="line">                chars[write++] = chars[read];</span><br><span class="line">                <span class="keyword">int</span> num = read - left + <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">if</span> (num &gt; <span class="number">1</span>) &#123;</span><br><span class="line">                    <span class="comment">//æ•°å­—çš„èµ·ç‚¹ä½ç½®</span></span><br><span class="line">                    <span class="keyword">int</span> anchor = write;</span><br><span class="line">                    <span class="keyword">while</span> (num &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                        <span class="comment">//æ•°å­—ä»å³åˆ°å·¦å†™å…¥å­—ç¬¦æ•°ç»„ä¸­</span></span><br><span class="line">                        chars[write++] = (<span class="keyword">char</span>) (num % <span class="number">10</span> + <span class="string">'0'</span>);</span><br><span class="line">                        num /= <span class="number">10</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">//å°†æ•°å­—å€’è½¬è¿‡æ¥</span></span><br><span class="line">                    reverse(chars, anchor, write - <span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                left = read + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> write;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">reverse</span><span class="params">(<span class="keyword">char</span>[] chars, <span class="keyword">int</span> left, <span class="keyword">int</span> right)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (left &lt; right) &#123;</span><br><span class="line">            <span class="keyword">char</span> temp = chars[left];</span><br><span class="line">            chars[left] = chars[right];</span><br><span class="line">            chars[right] = temp;</span><br><span class="line">            left++;</span><br><span class="line">            right--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>C#</summary><figure class="highlight plain"><figcaption><span>[sol1-C#]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">public class Solution &#123;</span><br><span class="line">    public int Compress(char[] chars) &#123;</span><br><span class="line">        int n = chars.Length;</span><br><span class="line">        int write = 0, left = 0;</span><br><span class="line">        for (int read = 0; read &lt; n; read++) &#123;</span><br><span class="line">            if (read == n - 1 || chars[read] != chars[read + 1]) &#123;</span><br><span class="line">                chars[write++] = chars[read];</span><br><span class="line">                int num = read - left + 1;</span><br><span class="line">                if (num &gt; 1) &#123;</span><br><span class="line">                    int anchor = write;</span><br><span class="line">                    while (num &gt; 0) &#123;</span><br><span class="line">                        chars[write++] = (char) (num % 10 + &apos;0&apos;);</span><br><span class="line">                        num /= 10;</span><br><span class="line">                    &#125;</span><br><span class="line">                    Reverse(chars, anchor, write - 1);</span><br><span class="line">                &#125;</span><br><span class="line">                left = read + 1;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return write;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void Reverse(char[] chars, int left, int right) &#123;</span><br><span class="line">        while (left &lt; right) &#123;</span><br><span class="line">            char temp = chars[left];</span><br><span class="line">            chars[left] = chars[right];</span><br><span class="line">            chars[right] = temp;</span><br><span class="line">            left++;</span><br><span class="line">            right--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>C</summary><figure class="highlight c"><figcaption><span>[sol1-C]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">char</span> *a, <span class="keyword">char</span> *b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">char</span> t = *a;</span><br><span class="line">    *a = *b, *b = t;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">reverse</span><span class="params">(<span class="keyword">char</span> *a, <span class="keyword">char</span> *b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (a &lt; b) &#123;</span><br><span class="line">        swap(a++, --b);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">compress</span><span class="params">(<span class="keyword">char</span> *chars, <span class="keyword">int</span> charsSize)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> write = <span class="number">0</span>, left = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> read = <span class="number">0</span>; read &lt; charsSize; read++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (read == charsSize - <span class="number">1</span> || chars[read] != chars[read + <span class="number">1</span>]) &#123;</span><br><span class="line">            chars[write++] = chars[read];</span><br><span class="line">            <span class="keyword">int</span> num = read - left + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (num &gt; <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="keyword">int</span> anchor = write;</span><br><span class="line">                <span class="keyword">while</span> (num &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                    chars[write++] = num % <span class="number">10</span> + <span class="string">'0'</span>;</span><br><span class="line">                    num /= <span class="number">10</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                reverse(&amp;chars[anchor], &amp;chars[write]);</span><br><span class="line">            &#125;</span><br><span class="line">            left = read + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> write;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>Python3</summary><figure class="highlight python"><figcaption><span>[sol1-Python3]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">compress</span><span class="params">(self, chars: List[str])</span> -&gt; int:</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">reverse</span><span class="params">(left: int, right: int)</span> -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">            <span class="keyword">while</span> left &lt; right:</span><br><span class="line">                chars[left], chars[right] = chars[right], chars[left]</span><br><span class="line">                left += <span class="number">1</span></span><br><span class="line">                right -= <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        n = len(chars)</span><br><span class="line">        write = left = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> read <span class="keyword">in</span> range(n):</span><br><span class="line">            <span class="keyword">if</span> read == n - <span class="number">1</span> <span class="keyword">or</span> chars[read] != chars[read + <span class="number">1</span>]:</span><br><span class="line">                chars[write] = chars[read]</span><br><span class="line">                write += <span class="number">1</span></span><br><span class="line">                num = read - left + <span class="number">1</span></span><br><span class="line">                <span class="keyword">if</span> num &gt; <span class="number">1</span>:</span><br><span class="line">                    anchor = write</span><br><span class="line">                    <span class="keyword">while</span> num &gt; <span class="number">0</span>:</span><br><span class="line">                        chars[write] = str(num % <span class="number">10</span>)</span><br><span class="line">                        write += <span class="number">1</span></span><br><span class="line">                        num //= <span class="number">10</span></span><br><span class="line">                    reverse(anchor, write - <span class="number">1</span>)</span><br><span class="line">                left = read + <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> write</span><br></pre></td></tr></table></figure></details><details>    <summary>Golang</summary><figure class="highlight go"><figcaption><span>[sol1-Golang]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">compress</span><span class="params">(chars []<span class="keyword">byte</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    write, left := <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> read, ch := <span class="keyword">range</span> chars &#123;</span><br><span class="line">        <span class="keyword">if</span> read == <span class="built_in">len</span>(chars)<span class="number">-1</span> || ch != chars[read+<span class="number">1</span>] &#123;</span><br><span class="line">            chars[write] = ch</span><br><span class="line">            write++</span><br><span class="line">            num := read - left + <span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> num &gt; <span class="number">1</span> &#123;</span><br><span class="line">                anchor := write</span><br><span class="line">                <span class="keyword">for</span> ; num &gt; <span class="number">0</span>; num /= <span class="number">10</span> &#123;</span><br><span class="line">                    chars[write] = <span class="string">'0'</span> + <span class="keyword">byte</span>(num%<span class="number">10</span>)</span><br><span class="line">                    write++</span><br><span class="line">                &#125;</span><br><span class="line">                s := chars[anchor:write]</span><br><span class="line">                <span class="keyword">for</span> i, n := <span class="number">0</span>, <span class="built_in">len</span>(s); i &lt; n/<span class="number">2</span>; i++ &#123;</span><br><span class="line">                    s[i], s[n<span class="number">-1</span>-i] = s[n<span class="number">-1</span>-i], s[i]</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            left = read + <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> write</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>JavaScript</summary><figure class="highlight javascript"><figcaption><span>[sol1-JavaScript]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> compress = <span class="function"><span class="keyword">function</span>(<span class="params">chars</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> n = chars.length;</span><br><span class="line">    <span class="keyword">let</span> write = <span class="number">0</span>, left = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> read = <span class="number">0</span>; read &lt; n; read++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (read === n - <span class="number">1</span> || chars[read] !== chars[read + <span class="number">1</span>]) &#123;</span><br><span class="line">            chars[write++] = chars[read];</span><br><span class="line">            <span class="keyword">let</span> num = read - left + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (num &gt; <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="keyword">const</span> anchor = write;</span><br><span class="line">                <span class="keyword">while</span> (num &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                    chars[write++] = <span class="string">''</span> + num % <span class="number">10</span>;</span><br><span class="line">                    num = <span class="built_in">Math</span>.floor(num / <span class="number">10</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                reverse(chars, anchor, write - <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            left = read + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> write;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> reverse = <span class="function">(<span class="params">chars, left, right</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">while</span> (left &lt; right) &#123;</span><br><span class="line">        <span class="keyword">const</span> temp = chars[left];</span><br><span class="line">        chars[left] = chars[right];</span><br><span class="line">        chars[right] = temp;</span><br><span class="line">        left++;</span><br><span class="line">        right--;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><p><strong>å¤æ‚åº¦åˆ†æ</strong></p><ul><li><p>æ—¶é—´å¤æ‚åº¦ï¼š<em>O(n)*ï¼Œå…¶ä¸­ *n</em> ä¸ºå­—ç¬¦ä¸²é•¿åº¦ï¼Œæˆ‘ä»¬åªéœ€è¦éå†è¯¥å­—ç¬¦ä¸²ä¸€æ¬¡ã€‚</p></li><li><p>ç©ºé—´å¤æ‚åº¦ï¼š<em>O(1)</em>ã€‚æˆ‘ä»¬åªéœ€è¦å¸¸æ•°çš„ç©ºé—´ä¿å­˜è‹¥å¹²å˜é‡ã€‚</p></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç»™ä½ ä¸€ä¸ªå­—ç¬¦æ•°ç»„ chars ï¼Œè¯·ä½¿ç”¨ä¸‹è¿°ç®—æ³•å‹ç¼©&lt;/p&gt;
    
    </summary>
    
      <category term="2021å¹´10æœˆ" scheme="http://yoursite.com/categories/2021%E5%B9%B410%E6%9C%88/"/>
    
    
      <category term="LeetCode" scheme="http://yoursite.com/tags/LeetCode/"/>
    
      <category term="String" scheme="http://yoursite.com/tags/String/"/>
    
      <category term="Two Pointers" scheme="http://yoursite.com/tags/Two-Pointers/"/>
    
  </entry>
  
  <entry>
    <title>338. æ¯”ç‰¹ä½è®¡æ•°</title>
    <link href="http://yoursite.com/2021/10/24/338.%20%E6%AF%94%E7%89%B9%E4%BD%8D%E8%AE%A1%E6%95%B0/"/>
    <id>http://yoursite.com/2021/10/24/338. æ¯”ç‰¹ä½è®¡æ•°/</id>
    <published>2021-10-24T13:12:12.000Z</published>
    <updated>2021-10-24T14:03:05.727Z</updated>
    
    <content type="html"><![CDATA[<p>ç»™ä½ ä¸€ä¸ªæ•´æ•° n ï¼Œå¯¹äº 0 &lt;= i &lt;= n ä¸­çš„æ¯ä¸ª i ï¼Œè®¡ç®—å…¶äºŒè¿›åˆ¶è¡¨ç¤ºä¸­ 1 çš„ä¸ªæ•° ï¼Œè¿”å›ä¸€ä¸ªé•¿åº¦ä¸º n + 1 çš„æ•°ç»„ ans ä½œä¸ºç­”æ¡ˆã€‚</p><a id="more"></a><p>[TOC]</p><p>ç¤ºä¾‹ 1ï¼š</p><p>è¾“å…¥ï¼šn = 2<br>è¾“å‡ºï¼š[0,1,1]<br>è§£é‡Šï¼š<br>0 â€“&gt; 0<br>1 â€“&gt; 1<br>2 â€“&gt; 10<br>ç¤ºä¾‹ 2ï¼š</p><p>è¾“å…¥ï¼šn = 5<br>è¾“å‡ºï¼š[0,1,1,2,1,2]<br>è§£é‡Šï¼š<br>0 â€“&gt; 0<br>1 â€“&gt; 1<br>2 â€“&gt; 10<br>3 â€“&gt; 11<br>4 â€“&gt; 100<br>5 â€“&gt; 101</p><p>æç¤ºï¼š</p><p>0 &lt;= n &lt;= 105</p><p>è¿›é˜¶ï¼š</p><p>å¾ˆå®¹æ˜“å°±èƒ½å®ç°æ—¶é—´å¤æ‚åº¦ä¸º O(n log n) çš„è§£å†³æ–¹æ¡ˆï¼Œä½ å¯ä»¥åœ¨çº¿æ€§æ—¶é—´å¤æ‚åº¦ O(n) å†…ç”¨ä¸€è¶Ÿæ‰«æè§£å†³æ­¤é—®é¢˜å—ï¼Ÿ</p><p>ä½ èƒ½ä¸ä½¿ç”¨ä»»ä½•å†…ç½®å‡½æ•°è§£å†³æ­¤é—®é¢˜å—ï¼Ÿï¼ˆå¦‚ï¼ŒC++ ä¸­çš„ __builtin_popcount ï¼‰</p><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>è¿™é“é¢˜éœ€è¦è®¡ç®—ä» <em>0</em> åˆ° <em>n</em> çš„æ¯ä¸ªæ•´æ•°çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸­çš„ <em>1</em> çš„æ•°ç›®ã€‚</p><p>éƒ¨åˆ†ç¼–ç¨‹è¯­è¨€æœ‰ç›¸åº”çš„å†…ç½®å‡½æ•°ç”¨äºè®¡ç®—ç»™å®šçš„æ•´æ•°çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸­çš„ <em>1</em> çš„æ•°ç›®ï¼Œä¸‹åˆ—å„ç§æ–¹æ³•å‡ä¸ºä¸ä½¿ç”¨å†…ç½®å‡½æ•°çš„è§£æ³•ã€‚</p><p>ä¸ºäº†è¡¨è¿°ç®€æ´ï¼Œä¸‹æ–‡ç”¨ã€Œä¸€æ¯”ç‰¹æ•°ã€è¡¨ç¤ºäºŒè¿›åˆ¶è¡¨ç¤ºä¸­çš„ <em>1</em> çš„æ•°ç›®ã€‚</p><p>å‚è€ƒ<a href="https://leetcode-cn.com/problems/counting-bits/solution/bi-te-wei-ji-shu-by-leetcode-solution-0t1i/" target="_blank" rel="noopener">^1</a></p><h1 id="æ–¹æ³•ä¸€ï¼šBrianKernighan-ç®—æ³•"><a href="#æ–¹æ³•ä¸€ï¼šBrianKernighan-ç®—æ³•" class="headerlink" title="æ–¹æ³•ä¸€ï¼šBrianKernighan  ç®—æ³•"></a>æ–¹æ³•ä¸€ï¼šBrianKernighan  ç®—æ³•</h1><details>    <summary>Java</summary><figure class="highlight java"><figcaption><span>[sol1-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] countBits(<span class="keyword">int</span> n) &#123;</span><br><span class="line">        <span class="keyword">int</span>[] bits = <span class="keyword">new</span> <span class="keyword">int</span>[n + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            bits[i] = countOnes(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> bits;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">countOnes</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> ones = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (x &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            x &amp;= (x - <span class="number">1</span>);</span><br><span class="line">            ones++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ones;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>JavaScript</summary><figure class="highlight javascript"><figcaption><span>[sol1-JavaScript]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> countBits = <span class="function"><span class="keyword">function</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> bits = <span class="keyword">new</span> <span class="built_in">Array</span>(n + <span class="number">1</span>).fill(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        bits[i] = countOnes(i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> bits</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> countOnes = <span class="function">(<span class="params">x</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> ones = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (x &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        x &amp;= (x - <span class="number">1</span>);</span><br><span class="line">        ones++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ones;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>Golang</summary><figure class="highlight go"><figcaption><span>[sol1-Golang]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">onesCount</span><span class="params">(x <span class="keyword">int</span>)</span> <span class="params">(ones <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">for</span> ; x &gt; <span class="number">0</span>; x &amp;= x - <span class="number">1</span> &#123;</span><br><span class="line">        ones++</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">countBits</span><span class="params">(n <span class="keyword">int</span>)</span> []<span class="title">int</span></span> &#123;</span><br><span class="line">    bits := <span class="built_in">make</span>([]<span class="keyword">int</span>, n+<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">for</span> i := <span class="keyword">range</span> bits &#123;</span><br><span class="line">        bits[i] = onesCount(i)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> bits</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>Python3</summary><figure class="highlight python"><figcaption><span>[sol1-Python3]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">countBits</span><span class="params">(self, n: int)</span> -&gt; List[int]:</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">countOnes</span><span class="params">(x: int)</span> -&gt; int:</span></span><br><span class="line">            ones = <span class="number">0</span></span><br><span class="line">            <span class="keyword">while</span> x &gt; <span class="number">0</span>:</span><br><span class="line">                x &amp;= (x - <span class="number">1</span>)</span><br><span class="line">                ones += <span class="number">1</span></span><br><span class="line">            <span class="keyword">return</span> ones</span><br><span class="line">        </span><br><span class="line">        bits = [countOnes(i) <span class="keyword">for</span> i <span class="keyword">in</span> range(n + <span class="number">1</span>)]</span><br><span class="line">        <span class="keyword">return</span> bits</span><br></pre></td></tr></table></figure></details><details>    <summary>C++</summary><figure class="highlight c++"><figcaption><span>[sol1-C++]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">countOnes</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> ones = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (x &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            x &amp;= (x - <span class="number">1</span>);</span><br><span class="line">            ones++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ones;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; countBits(<span class="keyword">int</span> n) &#123;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; bits(n + <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            bits[i] = countOnes(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> bits;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></details><details>    <summary>C</summary><figure class="highlight c"><figcaption><span>[sol1-C]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">countOnes</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> ones = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (x &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        x &amp;= (x - <span class="number">1</span>);</span><br><span class="line">        ones++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ones;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span>* <span class="title">countBits</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span>* returnSize)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span>* bits = <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">int</span>) * (n + <span class="number">1</span>));</span><br><span class="line">    *returnSize = n + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        bits[i] = countOnes(i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> bits;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><p><strong>å¤æ‚åº¦åˆ†æ</strong></p><ul><li><p>æ—¶é—´å¤æ‚åº¦O(nlogn) ã€‚éœ€è¦å¯¹ä» <em>0</em> åˆ° <em>n</em> çš„æ¯ä¸ªæ•´æ•°ä½¿ç”¨è®¡ç®—ã€Œä¸€æ¯”ç‰¹æ•°ã€ï¼Œå¯¹äºæ¯ä¸ªæ•´æ•°è®¡ç®—ã€Œä¸€æ¯”ç‰¹æ•°ã€çš„æ—¶é—´éƒ½ä¸ä¼šè¶…è¿‡O(logn)ã€‚</p></li><li><p>ç©ºé—´å¤æ‚åº¦ï¼š<em>O(1)</em>ã€‚é™¤äº†è¿”å›çš„æ•°ç»„ä»¥å¤–ï¼Œç©ºé—´å¤æ‚åº¦ä¸ºå¸¸æ•°ã€‚</p></li></ul><h1 id="æ–¹æ³•äºŒï¼šåŠ¨æ€è§„åˆ’â€”â€”æœ€é«˜æœ‰æ•ˆä½"><a href="#æ–¹æ³•äºŒï¼šåŠ¨æ€è§„åˆ’â€”â€”æœ€é«˜æœ‰æ•ˆä½" class="headerlink" title="æ–¹æ³•äºŒï¼šåŠ¨æ€è§„åˆ’â€”â€”æœ€é«˜æœ‰æ•ˆä½"></a>æ–¹æ³•äºŒï¼šåŠ¨æ€è§„åˆ’â€”â€”æœ€é«˜æœ‰æ•ˆä½</h1><details>    <summary>Java</summary><figure class="highlight java"><figcaption><span>[sol2-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] countBits(<span class="keyword">int</span> n) &#123;</span><br><span class="line">        <span class="keyword">int</span>[] bits = <span class="keyword">new</span> <span class="keyword">int</span>[n + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">int</span> highBit = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> ((i &amp; (i - <span class="number">1</span>)) == <span class="number">0</span>) &#123;</span><br><span class="line">                highBit = i;</span><br><span class="line">            &#125;</span><br><span class="line">            bits[i] = bits[i - highBit] + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> bits;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>JavaScript</summary><figure class="highlight javascript"><figcaption><span>[sol2-JavaScript]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> countBits = <span class="function"><span class="keyword">function</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> bits = <span class="keyword">new</span> <span class="built_in">Array</span>(n + <span class="number">1</span>).fill(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">let</span> highBit = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> ((i &amp; (i - <span class="number">1</span>)) == <span class="number">0</span>) &#123;</span><br><span class="line">            highBit = i;</span><br><span class="line">        &#125;</span><br><span class="line">        bits[i] = bits[i - highBit] + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> bits;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></details><details>    <summary>Golang</summary><figure class="highlight go"><figcaption><span>[sol2-Golang]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">countBits</span><span class="params">(n <span class="keyword">int</span>)</span> []<span class="title">int</span></span> &#123;</span><br><span class="line">    bits := <span class="built_in">make</span>([]<span class="keyword">int</span>, n+<span class="number">1</span>)</span><br><span class="line">    highBit := <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= n; i++ &#123;</span><br><span class="line">        <span class="keyword">if</span> i&amp;(i<span class="number">-1</span>) == <span class="number">0</span> &#123;</span><br><span class="line">            highBit = i</span><br><span class="line">        &#125;</span><br><span class="line">        bits[i] = bits[i-highBit] + <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> bits</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>Python3</summary><figure class="highlight python"><figcaption><span>[sol2-Python3]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">countBits</span><span class="params">(self, n: int)</span> -&gt; List[int]:</span></span><br><span class="line">        bits = [<span class="number">0</span>]</span><br><span class="line">        highBit = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, n + <span class="number">1</span>):</span><br><span class="line">            <span class="keyword">if</span> i &amp; (i - <span class="number">1</span>) == <span class="number">0</span>:</span><br><span class="line">                highBit = i</span><br><span class="line">            bits.append(bits[i - highBit] + <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> bits</span><br></pre></td></tr></table></figure></details><details>    <summary>C++</summary><figure class="highlight c++"><figcaption><span>[sol2-C++]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; countBits(<span class="keyword">int</span> n) &#123;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; bits(n + <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">int</span> highBit = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> ((i &amp; (i - <span class="number">1</span>)) == <span class="number">0</span>) &#123;</span><br><span class="line">                highBit = i;</span><br><span class="line">            &#125;</span><br><span class="line">            bits[i] = bits[i - highBit] + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> bits;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></details><details>    <summary>C</summary><figure class="highlight c"><figcaption><span>[sol2-C]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span>* <span class="title">countBits</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span>* returnSize)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span>* bits = <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">int</span>) * (n + <span class="number">1</span>));</span><br><span class="line">    *returnSize = n + <span class="number">1</span>;</span><br><span class="line">    bits[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> highBit = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> ((i &amp; (i - <span class="number">1</span>)) == <span class="number">0</span>) &#123;</span><br><span class="line">            highBit = i;</span><br><span class="line">        &#125;</span><br><span class="line">        bits[i] = bits[i - highBit] + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> bits;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><p><strong>å¤æ‚åº¦åˆ†æ</strong></p><ul><li><p>æ—¶é—´å¤æ‚åº¦ï¼š<em>O(n)*ã€‚å¯¹äºæ¯ä¸ªæ•´æ•°ï¼Œåªéœ€è¦ *O(1)</em> çš„æ—¶é—´è®¡ç®—ã€Œä¸€æ¯”ç‰¹æ•°ã€ã€‚</p></li><li><p>ç©ºé—´å¤æ‚åº¦ï¼š<em>O(1)</em>ã€‚é™¤äº†è¿”å›çš„æ•°ç»„ä»¥å¤–ï¼Œç©ºé—´å¤æ‚åº¦ä¸ºå¸¸æ•°ã€‚</p></li></ul><h1 id="æ–¹æ³•ä¸‰ï¼šåŠ¨æ€è§„åˆ’â€”â€”æœ€ä½æœ‰æ•ˆä½"><a href="#æ–¹æ³•ä¸‰ï¼šåŠ¨æ€è§„åˆ’â€”â€”æœ€ä½æœ‰æ•ˆä½" class="headerlink" title="æ–¹æ³•ä¸‰ï¼šåŠ¨æ€è§„åˆ’â€”â€”æœ€ä½æœ‰æ•ˆä½"></a>æ–¹æ³•ä¸‰ï¼šåŠ¨æ€è§„åˆ’â€”â€”æœ€ä½æœ‰æ•ˆä½</h1><p>æ–¹æ³•äºŒéœ€è¦å®æ—¶ç»´æŠ¤æœ€é«˜æœ‰æ•ˆä½ï¼Œå½“éå†åˆ°çš„æ•°æ˜¯ <em>2</em> çš„æ•´æ•°æ¬¡å¹‚æ—¶ï¼Œéœ€è¦æ›´æ–°æœ€é«˜æœ‰æ•ˆä½ã€‚å¦‚æœå†æ¢ä¸€ä¸ªæ€è·¯ï¼Œå¯ä»¥ä½¿ç”¨ã€Œæœ€ä½æœ‰æ•ˆä½ã€è®¡ç®—ã€Œä¸€æ¯”ç‰¹æ•°ã€ã€‚</p><p>å¯¹äºæ­£æ•´æ•° <em>x</em>ï¼Œå°†å…¶äºŒè¿›åˆ¶è¡¨ç¤ºå³ç§»ä¸€ä½ï¼Œç­‰ä»·äºå°†å…¶äºŒè¿›åˆ¶è¡¨ç¤ºçš„æœ€ä½ä½å»æ‰ã€‚</p><details>    <summary>Java</summary><figure class="highlight java"><figcaption><span>[sol3-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] countBits(<span class="keyword">int</span> n) &#123;</span><br><span class="line">        <span class="keyword">int</span>[] bits = <span class="keyword">new</span> <span class="keyword">int</span>[n + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            bits[i] = bits[i &gt;&gt; <span class="number">1</span>] + (i &amp; <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> bits;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>JavaScript</summary><figure class="highlight javascript"><figcaption><span>[sol3-JavaScript]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> countBits = <span class="function"><span class="keyword">function</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> bits = <span class="keyword">new</span> <span class="built_in">Array</span>(n + <span class="number">1</span>).fill(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        bits[i] = bits[i &gt;&gt; <span class="number">1</span>] + (i &amp; <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> bits;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></details><details>    <summary>Golang</summary><figure class="highlight go"><figcaption><span>[sol3-Golang]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">countBits</span><span class="params">(n <span class="keyword">int</span>)</span> []<span class="title">int</span></span> &#123;</span><br><span class="line">    bits := <span class="built_in">make</span>([]<span class="keyword">int</span>, n+<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= n; i++ &#123;</span><br><span class="line">        bits[i] = bits[i&gt;&gt;<span class="number">1</span>] + i&amp;<span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> bits</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>Python3</summary><figure class="highlight python"><figcaption><span>[sol3-Python3]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">countBits</span><span class="params">(self, n: int)</span> -&gt; List[int]:</span></span><br><span class="line">        bits = [<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, n + <span class="number">1</span>):</span><br><span class="line">            bits.append(bits[i &gt;&gt; <span class="number">1</span>] + (i &amp; <span class="number">1</span>))</span><br><span class="line">        <span class="keyword">return</span> bits</span><br></pre></td></tr></table></figure></details><details>    <summary>C++</summary><figure class="highlight c++"><figcaption><span>[sol3-C++]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; countBits(<span class="keyword">int</span> n) &#123;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; bits(n + <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            bits[i] = bits[i &gt;&gt; <span class="number">1</span>] + (i &amp; <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> bits;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></details><details>    <summary>C</summary><figure class="highlight c"><figcaption><span>[sol3-C]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span>* <span class="title">countBits</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span>* returnSize)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span>* bits = <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">int</span>) * (n + <span class="number">1</span>));</span><br><span class="line">    *returnSize = n + <span class="number">1</span>;</span><br><span class="line">    bits[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        bits[i] = bits[i &gt;&gt; <span class="number">1</span>] + (i &amp; <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> bits;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><p><strong>å¤æ‚åº¦åˆ†æ</strong></p><ul><li><p>æ—¶é—´å¤æ‚åº¦ï¼š<em>O(n)*ã€‚å¯¹äºæ¯ä¸ªæ•´æ•°ï¼Œåªéœ€è¦ *O(1)</em> çš„æ—¶é—´è®¡ç®—ã€Œä¸€æ¯”ç‰¹æ•°ã€ã€‚</p></li><li><p>ç©ºé—´å¤æ‚åº¦ï¼š<em>O(1)</em>ã€‚é™¤äº†è¿”å›çš„æ•°ç»„ä»¥å¤–ï¼Œç©ºé—´å¤æ‚åº¦ä¸ºå¸¸æ•°ã€‚</p></li></ul><h1 id="æ–¹æ³•å››ï¼šåŠ¨æ€è§„åˆ’â€”â€”æœ€ä½è®¾ç½®ä½"><a href="#æ–¹æ³•å››ï¼šåŠ¨æ€è§„åˆ’â€”â€”æœ€ä½è®¾ç½®ä½" class="headerlink" title="æ–¹æ³•å››ï¼šåŠ¨æ€è§„åˆ’â€”â€”æœ€ä½è®¾ç½®ä½"></a>æ–¹æ³•å››ï¼šåŠ¨æ€è§„åˆ’â€”â€”æœ€ä½è®¾ç½®ä½</h1><p>å®šä¹‰æ­£æ•´æ•° <em>x</em> çš„ã€Œæœ€ä½è®¾ç½®ä½ã€ä¸º <em>x</em> çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸­çš„æœ€ä½çš„ <em>1</em> æ‰€åœ¨ä½ã€‚ä¾‹å¦‚ï¼Œ<em>10</em> çš„äºŒè¿›åˆ¶è¡¨ç¤ºæ˜¯ <em>1010_{(2)}</em>ï¼Œå…¶æœ€ä½è®¾ç½®ä½ä¸º <em>2</em>ï¼Œå¯¹åº”çš„äºŒè¿›åˆ¶è¡¨ç¤ºæ˜¯ <em>10_{(2)}</em>ã€‚</p><p>éå†ä» <em>1</em> åˆ° <em>n</em> çš„æ¯ä¸ªæ­£æ•´æ•° <em>i</em>ï¼Œè®¡ç®— <img src="./p__textit%7Bbits%7D_.png" alt="\textit{bits} ">  çš„å€¼ã€‚æœ€ç»ˆå¾—åˆ°çš„æ•°ç»„ <img src="./p__textit%7Bbits%7D_.png" alt="\textit{bits} ">  å³ä¸ºç­”æ¡ˆã€‚</p><details>    <summary>Java</summary><figure class="highlight java"><figcaption><span>[sol4-Java]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] countBits(<span class="keyword">int</span> n) &#123;</span><br><span class="line">        <span class="keyword">int</span>[] bits = <span class="keyword">new</span> <span class="keyword">int</span>[n + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            bits[i] = bits[i &amp; (i - <span class="number">1</span>)] + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> bits;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>JavaScript</summary><figure class="highlight javascript"><figcaption><span>[sol4-JavaScript]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> countBits = <span class="function"><span class="keyword">function</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> bits = <span class="keyword">new</span> <span class="built_in">Array</span>(n + <span class="number">1</span>).fill(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        bits[i] = bits[i &amp; (i - <span class="number">1</span>)] + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> bits;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></details><details>    <summary>Golang</summary><figure class="highlight go"><figcaption><span>[sol4-Golang]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">countBits</span><span class="params">(n <span class="keyword">int</span>)</span> []<span class="title">int</span></span> &#123;</span><br><span class="line">    bits := <span class="built_in">make</span>([]<span class="keyword">int</span>, n+<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">for</span> i := <span class="number">1</span>; i &lt;= n; i++ &#123;</span><br><span class="line">        bits[i] = bits[i&amp;(i<span class="number">-1</span>)] + <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> bits</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><details>    <summary>Python3</summary><figure class="highlight python"><figcaption><span>[sol4-Python3]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">countBits</span><span class="params">(self, n: int)</span> -&gt; List[int]:</span></span><br><span class="line">        bits = [<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, n + <span class="number">1</span>):</span><br><span class="line">            bits.append(bits[i &amp; (i - <span class="number">1</span>)] + <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> bits</span><br></pre></td></tr></table></figure></details><details>    <summary>C++</summary><figure class="highlight c++"><figcaption><span>[sol4-C++]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; countBits(<span class="keyword">int</span> n) &#123;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; bits(n + <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            bits[i] = bits[i &amp; (i - <span class="number">1</span>)] + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> bits;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></details><details>    <summary>C</summary><figure class="highlight c"><figcaption><span>[sol4-C]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span>* <span class="title">countBits</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span>* returnSize)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span>* bits = <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">int</span>) * (n + <span class="number">1</span>));</span><br><span class="line">    *returnSize = n + <span class="number">1</span>;</span><br><span class="line">    bits[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</span><br><span class="line">        bits[i] = bits[i &amp; (i - <span class="number">1</span>)] + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> bits;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></details><p><strong>å¤æ‚åº¦åˆ†æ</strong></p><ul><li><p>æ—¶é—´å¤æ‚åº¦ï¼š<em>O(n)*ã€‚å¯¹äºæ¯ä¸ªæ•´æ•°ï¼Œåªéœ€è¦ *O(1)</em> çš„æ—¶é—´è®¡ç®—ã€Œä¸€æ¯”ç‰¹æ•°ã€ã€‚</p></li><li><p>ç©ºé—´å¤æ‚åº¦ï¼š<em>O(1)</em>ã€‚é™¤äº†è¿”å›çš„æ•°ç»„ä»¥å¤–ï¼Œç©ºé—´å¤æ‚åº¦ä¸ºå¸¸æ•°ã€‚</p></li></ul><h1 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h1><p>è¿™é“é¢˜è™½ç„¶çœ‹èµ·æ¥ç®€å•ï¼Œä½†åšçš„æ—¶å€™è¿˜æ˜¯æœ‰å‡ ä¸ªå€¼å¾—æ³¨æ„çš„ç‚¹</p><h2 id="åˆ¤æ–­ä¸€ä¸ªæ­£æ•´æ•°æ˜¯ä¸æ˜¯-2-çš„æ•´æ•°æ¬¡å¹‚-i-amp-i-1-0"><a href="#åˆ¤æ–­ä¸€ä¸ªæ­£æ•´æ•°æ˜¯ä¸æ˜¯-2-çš„æ•´æ•°æ¬¡å¹‚-i-amp-i-1-0" class="headerlink" title="åˆ¤æ–­ä¸€ä¸ªæ­£æ•´æ•°æ˜¯ä¸æ˜¯ 2 çš„æ•´æ•°æ¬¡å¹‚(i &amp; (i - 1)) == 0"></a>åˆ¤æ–­ä¸€ä¸ªæ­£æ•´æ•°æ˜¯ä¸æ˜¯ 2 çš„æ•´æ•°æ¬¡å¹‚(i &amp; (i - 1)) == 0</h2><h2 id="ä¸-amp-ç¬¦å·çš„è¿ç®—ä¼˜å…ˆçº§ï¼Œæ³¨æ„åŠ æ‹¬å·-bits-i-bits-i-gt-gt-1-i-amp-1"><a href="#ä¸-amp-ç¬¦å·çš„è¿ç®—ä¼˜å…ˆçº§ï¼Œæ³¨æ„åŠ æ‹¬å·-bits-i-bits-i-gt-gt-1-i-amp-1" class="headerlink" title="ä¸&amp;ç¬¦å·çš„è¿ç®—ä¼˜å…ˆçº§ï¼Œæ³¨æ„åŠ æ‹¬å· bits[i] = bits[i &gt;&gt; 1] + (i &amp; 1);"></a>ä¸&amp;ç¬¦å·çš„è¿ç®—ä¼˜å…ˆçº§ï¼Œæ³¨æ„åŠ æ‹¬å· bits[i] = bits[i &gt;&gt; 1] + (i &amp; 1);</h2>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç»™ä½ ä¸€ä¸ªæ•´æ•° n ï¼Œå¯¹äº 0 &amp;lt;= i &amp;lt;= n ä¸­çš„æ¯ä¸ª i ï¼Œè®¡ç®—å…¶äºŒè¿›åˆ¶è¡¨ç¤ºä¸­ 1 çš„ä¸ªæ•° ï¼Œè¿”å›ä¸€ä¸ªé•¿åº¦ä¸º n + 1 çš„æ•°ç»„ ans ä½œä¸ºç­”æ¡ˆã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="2021å¹´10æœˆ" scheme="http://yoursite.com/categories/2021%E5%B9%B410%E6%9C%88/"/>
    
    
      <category term="LeetCode" scheme="http://yoursite.com/tags/LeetCode/"/>
    
      <category term="Dynamic Programming" scheme="http://yoursite.com/tags/Dynamic-Programming/"/>
    
      <category term="Bit Manipulation" scheme="http://yoursite.com/tags/Bit-Manipulation/"/>
    
  </entry>
  
  <entry>
    <title>262. è¡Œç¨‹å’Œç”¨æˆ·</title>
    <link href="http://yoursite.com/2021/10/21/262.%20%E8%A1%8C%E7%A8%8B%E5%92%8C%E7%94%A8%E6%88%B7/"/>
    <id>http://yoursite.com/2021/10/21/262. è¡Œç¨‹å’Œç”¨æˆ·/</id>
    <published>2021-10-21T11:12:12.000Z</published>
    <updated>2021-10-21T12:16:04.136Z</updated>
    
    <content type="html"><![CDATA[<p>å†™ä¸€æ®µ SQL è¯­å¥æŸ¥å‡º â€œ2013-10-01â€ è‡³ â€œ2013-10-03â€ æœŸé—´éç¦æ­¢ç”¨æˆ·ï¼ˆä¹˜å®¢å’Œå¸æœºéƒ½å¿…é¡»æœªè¢«ç¦æ­¢ï¼‰çš„å–æ¶ˆç‡ã€‚éç¦æ­¢ç”¨æˆ·å³ Ban<br>ned ä¸º No çš„ç”¨æˆ·ï¼Œç¦æ­¢ç”¨æˆ·å³ Banned ä¸º Yes çš„ç”¨æˆ·ã€‚ </p><a id="more"></a><p>[TOC]</p><p>è¡¨ï¼šTrips</p><pre><code>+-------------+----------+| Column Name | Type     |+-------------+----------+| Id          | int      || Client_Id   | int      || Driver_Id   | int      || City_Id     | int      || Status      | enum     || Request_at  | date     |     +-------------+----------+</code></pre><p>Id æ˜¯è¿™å¼ è¡¨çš„ä¸»é”®ã€‚<br>è¿™å¼ è¡¨ä¸­å­˜æ‰€æœ‰å‡ºç§Ÿè½¦çš„è¡Œç¨‹ä¿¡æ¯ã€‚æ¯æ®µè¡Œç¨‹æœ‰å”¯ä¸€ Id ï¼Œå…¶ä¸­ Client_Id å’Œ Driver_Id æ˜¯ Users è¡¨ä¸­ Users_Id çš„å¤–é”®ã€‚<br>Status æ˜¯ä¸€ä¸ªè¡¨ç¤ºè¡Œç¨‹çŠ¶æ€çš„æšä¸¾ç±»å‹ï¼Œæšä¸¾æˆå‘˜ä¸º(â€˜completedâ€™, â€˜cancelled_by_driverâ€™, â€˜cancelled_by_<br>clientâ€™) ã€‚</p><p> è¡¨ï¼šUsers </p><pre><code>+-------------+----------+| Column Name | Type     |+-------------+----------+| Users_Id    | int      || Banned      | enum     || Role        | enum     |+-------------+----------+</code></pre><p>Users_Id æ˜¯è¿™å¼ è¡¨çš„ä¸»é”®ã€‚<br>è¿™å¼ è¡¨ä¸­å­˜æ‰€æœ‰ç”¨æˆ·ï¼Œæ¯ä¸ªç”¨æˆ·éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„ Users_Id ï¼ŒRole æ˜¯ä¸€ä¸ªè¡¨ç¤ºç”¨æˆ·èº«ä»½çš„æšä¸¾ç±»å‹ï¼Œæšä¸¾æˆå‘˜ä¸º (â€˜clientâ€™, â€˜driverâ€™,<br> â€˜partnerâ€™) ã€‚<br>Banned æ˜¯ä¸€ä¸ªè¡¨ç¤ºç”¨æˆ·æ˜¯å¦è¢«ç¦æ­¢çš„æšä¸¾ç±»å‹ï¼Œæšä¸¾æˆå‘˜ä¸º (â€˜Yesâ€™, â€˜Noâ€™) ã€‚</p><p> å†™ä¸€æ®µ SQL è¯­å¥æŸ¥å‡º â€œ2013-10-01â€ è‡³ â€œ2013-10-03â€ æœŸé—´éç¦æ­¢ç”¨æˆ·ï¼ˆä¹˜å®¢å’Œå¸æœºéƒ½å¿…é¡»æœªè¢«ç¦æ­¢ï¼‰çš„å–æ¶ˆç‡ã€‚éç¦æ­¢ç”¨æˆ·å³ Ban<br>ned ä¸º No çš„ç”¨æˆ·ï¼Œç¦æ­¢ç”¨æˆ·å³ Banned ä¸º Yes çš„ç”¨æˆ·ã€‚ </p><p> å–æ¶ˆç‡ çš„è®¡ç®—æ–¹å¼å¦‚ä¸‹ï¼š(è¢«å¸æœºæˆ–ä¹˜å®¢å–æ¶ˆçš„éç¦æ­¢ç”¨æˆ·ç”Ÿæˆçš„è®¢å•æ•°é‡) / (éç¦æ­¢ç”¨æˆ·ç”Ÿæˆçš„è®¢å•æ€»æ•°)ã€‚ </p><p> è¿”å›ç»“æœè¡¨ä¸­çš„æ•°æ®å¯ä»¥æŒ‰ä»»æ„é¡ºåºç»„ç»‡ã€‚å…¶ä¸­å–æ¶ˆç‡ Cancellation Rate éœ€è¦å››èˆäº”å…¥ä¿ç•™ ä¸¤ä½å°æ•° ã€‚ </p><p> æŸ¥è¯¢ç»“æœæ ¼å¼å¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼š </p><p>Trips è¡¨ï¼š</p><pre><code>+----+-----------+-----------+---------+---------------------+------------+| Id | Client_Id | Driver_Id | City_Id | Status              | Request_at |+----+-----------+-----------+---------+---------------------+------------+| 1  | 1         | 10        | 1       | completed           | 2013-10-01 || 2  | 2         | 11        | 1       | cancelled_by_driver | 2013-10-01 || 3  | 3         | 12        | 6       | completed           | 2013-10-01 || 4  | 4         | 13        | 6       | cancelled_by_client | 2013-10-01 || 5  | 1         | 10        | 1       | completed           | 2013-10-02 || 6  | 2         | 11        | 6       | completed           | 2013-10-02 || 7  | 3         | 12        | 6       | completed           | 2013-10-02 || 8  | 2         | 12        | 12      | completed           | 2013-10-03 || 9  | 3         | 10        | 12      | completed           | 2013-10-03 || 10 | 4         | 13        | 12      | cancelled_by_driver | 2013-10-03 |+----+-----------+-----------+---------+---------------------+------------+</code></pre><p>Users è¡¨ï¼š</p><pre><code>+----------+--------+--------+| Users_Id | Banned | Role   |+----------+--------+--------+| 1        | No     | client || 2        | Yes    | client || 3        | No     | client || 4        | No     | client || 10       | No     | driver || 11       | No     | driver || 12       | No     | driver || 13       | No     | driver |+----------+--------+--------+</code></pre><p>Result è¡¨ï¼š</p><pre><code>+------------+-------------------+| Day        | Cancellation Rate |+------------+-------------------+| 2013-10-01 | 0.33              || 2013-10-02 | 0.00              || 2013-10-03 | 0.50              |+------------+-------------------+</code></pre><p>2013-10-01ï¼š</p><ul><li>å…±æœ‰ 4 æ¡è¯·æ±‚ï¼Œå…¶ä¸­ 2 æ¡å–æ¶ˆã€‚</li><li>ç„¶è€Œï¼ŒId=2 çš„è¯·æ±‚æ˜¯ç”±ç¦æ­¢ç”¨æˆ·ï¼ˆUser_Id=2ï¼‰å‘å‡ºçš„ï¼Œæ‰€ä»¥è®¡ç®—æ—¶åº”å½“å¿½ç•¥å®ƒã€‚</li><li>å› æ­¤ï¼Œæ€»å…±æœ‰ 3 æ¡éç¦æ­¢è¯·æ±‚å‚ä¸è®¡ç®—ï¼Œå…¶ä¸­ 1 æ¡å–æ¶ˆã€‚</li><li>å–æ¶ˆç‡ä¸º (1 / 3) = 0.33<br>2013-10-02ï¼š</li><li>å…±æœ‰ 3 æ¡è¯·æ±‚ï¼Œå…¶ä¸­ 0 æ¡å–æ¶ˆã€‚</li><li>ç„¶è€Œï¼ŒId=6 çš„è¯·æ±‚æ˜¯ç”±ç¦æ­¢ç”¨æˆ·å‘å‡ºçš„ï¼Œæ‰€ä»¥è®¡ç®—æ—¶åº”å½“å¿½ç•¥å®ƒã€‚</li><li>å› æ­¤ï¼Œæ€»å…±æœ‰ 2 æ¡éç¦æ­¢è¯·æ±‚å‚ä¸è®¡ç®—ï¼Œå…¶ä¸­ 0 æ¡å–æ¶ˆã€‚</li><li>å–æ¶ˆç‡ä¸º (0 / 2) = 0.00<br>2013-10-03ï¼š</li><li>å…±æœ‰ 3 æ¡è¯·æ±‚ï¼Œå…¶ä¸­ 1 æ¡å–æ¶ˆã€‚</li><li>ç„¶è€Œï¼ŒId=8 çš„è¯·æ±‚æ˜¯ç”±ç¦æ­¢ç”¨æˆ·å‘å‡ºçš„ï¼Œæ‰€ä»¥è®¡ç®—æ—¶åº”å½“å¿½ç•¥å®ƒã€‚</li><li>å› æ­¤ï¼Œæ€»å…±æœ‰ 2 æ¡éç¦æ­¢è¯·æ±‚å‚ä¸è®¡ç®—ï¼Œå…¶ä¸­ 1 æ¡å–æ¶ˆã€‚</li><li>å–æ¶ˆç‡ä¸º (1 / 2) = 0.50</li></ul><p>ç»Ÿè®¡æ¯å¤©éç¦æ­¢ç”¨æˆ·çš„å–æ¶ˆç‡ï¼Œéœ€è¦çŸ¥é“éç¦æ­¢ç”¨æˆ·æœ‰å“ªäº›ï¼Œæ€»è¡Œç¨‹æ•°ï¼Œå–æ¶ˆçš„è¡Œç¨‹æ•°ã€‚</p><h1 id="è§£æ³•ä¸€"><a href="#è§£æ³•ä¸€" class="headerlink" title="è§£æ³•ä¸€"></a>è§£æ³•ä¸€</h1><p>é¦–å…ˆç¡®å®šè¢«ç¦æ­¢ç”¨æˆ·çš„è¡Œç¨‹è®°å½•ï¼Œå†å‰”é™¤è¿™äº›è¡Œç¨‹è®°å½•ã€‚</p><p>è¡Œç¨‹è¡¨ä¸­ï¼Œå­—æ®µ client_id å’Œ driver_idï¼Œéƒ½ä¸ç”¨æˆ·è¡¨ä¸­çš„ users_id å…³è”ã€‚å› æ­¤åªè¦ client_id å’Œ driver_id ä¸­æœ‰ä¸€ä¸ªè¢«ç¦æ­¢äº†ï¼Œæ­¤æ¡è¡Œç¨‹è®°å½•è¦è¢«å‰”é™¤ã€‚</p><p>å…ˆè¯´ä¸€ç§é”™è¯¯çš„æ‰¾å‡ºæ²¡è¢«ç¦æ­¢ç”¨æˆ·è¡Œç¨‹è®°å½•çš„æ–¹æ³•ã€‚æ­¤æ–¹æ³•å¾ˆæœ‰è¿·æƒ‘æ€§ã€‚</p><p>æ€è·¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if (client_id = users_id æˆ– driver_id = users_id) ä¸” users_idæ²¡æœ‰è¢«ç¦æ­¢</span><br><span class="line">&#123;</span><br><span class="line">    æ­¤æ¡è®°å½•æ²¡è¢«ç¦æ­¢ã€‚</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>SQL ä»£ç </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT *</span><br><span class="line">FROM Trips AS T JOIN Users AS U </span><br><span class="line">ON (T.client_id = U.users_id  OR T.driver_id = U.users_id )  AND U.banned =&apos;No&apos;</span><br></pre></td></tr></table></figure><p>ä¹ä¸€çœ‹ï¼Œæ€è·¯æ˜¯å¯¹ã€‚å…¶å®æ˜¯é”™è¯¯çš„ã€‚å› ä¸ºï¼Œæˆ‘ä»¬ä¸çŸ¥è§‰å¾—è‚¯å®šäº†ä¸€ä¸ªå‡è®¾â€”â€” client_id ä¸ driver_id æ˜¯ç›¸åŒçš„ã€‚åªæœ‰å½“ä¸¤è€…ç›¸åŒæ—¶ï¼Œæ‰èƒ½ç”¨æ­¤æ¡ä»¶æ’é™¤è¢«ç¦æ­¢ç”¨æˆ·çš„è¡Œç¨‹è®°å½•ã€‚</p><p>é”™è¯¯çš„ç»“æœï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">+------+-----------+-----------+---------+---------------------+------------+----------+--------+--------+</span><br><span class="line">| Id   | Client_Id | Driver_Id | City_Id | STATUS              | Request_at | Users_Id | Banned | Role   |</span><br><span class="line">+------+-----------+-----------+---------+---------------------+------------+----------+--------+--------+</span><br><span class="line">|    1 |         1 |        10 |       1 | completed           | 2013-10-01 |        1 | No     | client |</span><br><span class="line">|    1 |         1 |        10 |       1 | completed           | 2013-10-01 |       10 | No     | driver |</span><br><span class="line">|    2 |         2 |        11 |       1 | cancelled_by_driver | 2013-10-01 |       11 | No     | driver |</span><br><span class="line">|    3 |         3 |        12 |       6 | completed           | 2013-10-01 |        3 | No     | client |</span><br><span class="line">|    3 |         3 |        12 |       6 | completed           | 2013-10-01 |       12 | No     | driver |</span><br><span class="line">|    4 |         4 |        13 |       6 | cancelled_by_client | 2013-10-01 |        4 | No     | client |</span><br><span class="line">|    4 |         4 |        13 |       6 | cancelled_by_client | 2013-10-01 |       13 | No     | driver |</span><br><span class="line">|    5 |         1 |        10 |       1 | completed           | 2013-10-02 |        1 | No     | client |</span><br><span class="line">|    5 |         1 |        10 |       1 | completed           | 2013-10-02 |       10 | No     | driver |</span><br><span class="line">|    6 |         2 |        11 |       6 | completed           | 2013-10-02 |       11 | No     | driver |</span><br><span class="line">|    7 |         3 |        12 |       6 | completed           | 2013-10-02 |        3 | No     | client |</span><br><span class="line">|    7 |         3 |        12 |       6 | completed           | 2013-10-02 |       12 | No     | driver |</span><br><span class="line">|    8 |         2 |        12 |      12 | completed           | 2013-10-03 |       12 | No     | driver |</span><br><span class="line">|    9 |         3 |        10 |      12 | completed           | 2013-10-03 |        3 | No     | client |</span><br><span class="line">|    9 |         3 |        10 |      12 | completed           | 2013-10-03 |       10 | No     | driver |</span><br><span class="line">|   10 |         4 |        13 |      12 | cancelled_by_driver | 2013-10-03 |        4 | No     | client |</span><br><span class="line">|   10 |         4 |        13 |      12 | cancelled_by_driver | 2013-10-03 |       13 | No     | driver |</span><br><span class="line">+------+-----------+-----------+---------+---------------------+------------+----------+--------+--------+</span><br></pre></td></tr></table></figure><p>ç»“æœä¸­ï¼Œè¢«ç¦æ­¢çš„ users_id = 2ï¼Œå…¶è¡Œç¨‹è®°å½•æ²¡è¢«å‰”é™¤æ‰ã€‚</p><p>æ˜æ˜¾ï¼Œ client_id ä¸ driver_id ä¸ä¸€å®šç›¸åŒ ã€‚</p><p>æ­£ç¡®çš„åšæ³•æ˜¯å¯¹ client_id å’Œ driver_id å„è‡ªå…³è”çš„ users_idï¼ŒåŒæ—¶æ£€æµ‹æ˜¯å¦è¢«ç¦æ­¢ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if (client_id = users_id_1 ä¸” users_id_1æ²¡è¢«ç¦æ­¢ å¹¶ä¸” client_id = users_id_2 ä¸” users_id_2æ²¡è¢«ç¦æ­¢)&#123;</span><br><span class="line">    æ­¤æ¡è®°å½•æ²¡è¢«ç¦æ­¢ã€‚</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>SQL ä»£ç ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT *</span><br><span class="line">FROM Trips AS T</span><br><span class="line">JOIN Users AS U1 ON (T.client_id = U1.users_id AND U1.banned =&apos;No&apos;)</span><br><span class="line">JOIN Users AS U2 ON (T.driver_id = U2.users_id AND U2.banned =&apos;No&apos;)</span><br></pre></td></tr></table></figure><p>åœ¨æ­¤åŸºç¡€ä¸Šï¼ŒæŒ‰æ—¥æœŸåˆ†ç»„ï¼Œç»Ÿè®¡æ¯ç»„çš„ æ€»è¡Œç¨‹æ•°ï¼Œå–æ¶ˆçš„è¡Œç¨‹æ•° ã€‚</p><p>æ¯ç»„çš„æ€»è¡Œç¨‹æ•°ï¼šCOUNT(T.STATUS)ã€‚</p><p>æ¯ç»„çš„å–æ¶ˆçš„è¡Œç¨‹æ•°ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SUM(</span><br><span class="line">IF(T.STATUS = &apos;completed&apos;,0,1)</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>å–æ¶ˆç‡ = æ¯ç»„çš„å–æ¶ˆçš„è¡Œç¨‹æ•° / æ¯ç»„çš„æ€»è¡Œç¨‹æ•°</p><p>å®Œæ•´é€»è¾‘ä¸º:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">SELECT T.request_at AS `Day`, </span><br><span class="line">ROUND(</span><br><span class="line">SUM(</span><br><span class="line">IF(T.STATUS = &apos;completed&apos;,0,1)</span><br><span class="line">)</span><br><span class="line">/ </span><br><span class="line">COUNT(T.STATUS),</span><br><span class="line">2</span><br><span class="line">) AS `Cancellation Rate`</span><br><span class="line">FROM Trips AS T</span><br><span class="line">JOIN Users AS U1 ON (T.client_id = U1.users_id AND U1.banned =&apos;No&apos;)</span><br><span class="line">JOIN Users AS U2 ON (T.driver_id = U2.users_id AND U2.banned =&apos;No&apos;)</span><br><span class="line">WHERE T.request_at BETWEEN &apos;2013-10-01&apos; AND &apos;2013-10-03&apos;</span><br><span class="line">GROUP BY T.request_at</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ SUM æ±‚å’Œå‡½æ•°ï¼ŒCOUNT è®¡æ•°å‡½æ•°ï¼ŒROUND å››èˆäº”å…¥å‡½æ•°ã€‚</p><h1 id="è§£æ³•äºŒ"><a href="#è§£æ³•äºŒ" class="headerlink" title="è§£æ³•äºŒ"></a>è§£æ³•äºŒ</h1><p>æ€è·¯ä¸è§£æ³•ä¸€ç›¸åŒã€‚è€Œé‡‡ç”¨ä¸åŒçš„æ–¹æ³•æ’é™¤æ‰è¢«ç¦æ­¢ç”¨æˆ·çš„è¡Œç¨‹è®°å½•ã€‚æƒ³åˆ°æ’é™¤ï¼Œå°±è”æƒ³åˆ°é›†åˆå·®ã€‚</p><p>client_id å’Œ driver_id çš„å…¨éƒ¨ä¸ºé›†åˆ Uã€‚è¢«ç¦æ­¢çš„ users_id é›†åˆä¸º Aã€‚</p><p>U å‡å» A çš„ç»“æœä¸ºæ²¡è¢«ç¦æ­¢çš„ç”¨æˆ·ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(</span><br><span class="line">SELECT users_id</span><br><span class="line">FROM users</span><br><span class="line">WHERE banned = &apos;Yes&apos;</span><br><span class="line">) AS A</span><br></pre></td></tr></table></figure><p>å¥½äº†ï¼Œå…ˆæ¼”ç¤ºä¸€ä¸ªé”™è¯¯çš„è§£æ³•ï¼š</p><p>è¡Œç¨‹è¡¨è¿æ¥è¡¨ Aï¼Œæ’é™¤æ‰è¢«è¢«ç¦æ­¢çš„è¡Œç¨‹ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT *</span><br><span class="line">FROM trips AS T,</span><br><span class="line">(</span><br><span class="line">SELECT users_id</span><br><span class="line">FROM users</span><br><span class="line">WHERE banned = &apos;Yes&apos;</span><br><span class="line">) AS A</span><br><span class="line">WHERE (T.Client_Id != A.users_id AND T.Driver_Id != A.users_id)</span><br></pre></td></tr></table></figure><p>å‰©ä¸‹çš„é€»è¾‘ä¸è§£æ³•ä¸€åéƒ¨åˆ†ç›¸åŒï¼Œå®Œå–„åçš„é€»è¾‘ä¸ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">SELECT T.request_at AS `Day`, </span><br><span class="line">ROUND(</span><br><span class="line">SUM(</span><br><span class="line">IF(T.STATUS = &apos;completed&apos;,0,1)</span><br><span class="line">)</span><br><span class="line">/ </span><br><span class="line">COUNT(T.STATUS),</span><br><span class="line">2</span><br><span class="line">) AS `Cancellation Rate`</span><br><span class="line">FROM trips AS T,</span><br><span class="line">(</span><br><span class="line">SELECT users_id</span><br><span class="line">FROM users</span><br><span class="line">WHERE banned = &apos;Yes&apos;</span><br><span class="line">) AS A</span><br><span class="line">WHERE (T.Client_Id != A.users_id AND T.Driver_Id != A.users_id) AND T.request_at BETWEEN &apos;2013-10-01&apos; AND &apos;2013-10-03&apos;</span><br><span class="line">GROUP BY T.request_at</span><br></pre></td></tr></table></figure><p>å¾ˆå¯æƒœï¼Œå½“è¡¨ A ä¸ºç©ºæ—¶ï¼Œæ­¤æ–¹æ³•çš„ç»“æœæ˜¯ç©ºè¡¨ã€‚ä½†æ˜¯è¡¨ A ä¸ºç©ºï¼Œå¯èƒ½æ˜¯æœ‰ç”¨æˆ·ä½†æ˜¯æ²¡æœ‰è¢«ç¦æ­¢çš„ç”¨æˆ·ã€‚å› æ­¤æ–¹æ³•æ˜¯é”™è¯¯çš„ã€‚</p><p>æ­£ç¡®çš„è§£æ³•æ˜¯ï¼šè¡Œç¨‹è¡¨ left join è¡¨ A ä¸¤æ¬¡ï¼ŒA.users_id éƒ½ä¸º NULL çš„è¡Œéƒ½æ˜¯æ²¡è¢«æ’é™¤çš„è¡Œã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">SELECT *</span><br><span class="line">FROM trips AS T LEFT JOIN </span><br><span class="line">(</span><br><span class="line">SELECT users_id</span><br><span class="line">FROM users</span><br><span class="line">WHERE banned = &apos;Yes&apos;</span><br><span class="line">) AS A ON (T.Client_Id = A.users_id)</span><br><span class="line">LEFT JOIN (</span><br><span class="line">SELECT users_id</span><br><span class="line">FROM users</span><br><span class="line">WHERE banned = &apos;Yes&apos;</span><br><span class="line">) AS A1</span><br><span class="line">ON (T.Driver_Id = A1.users_id)</span><br><span class="line">WHERE A.users_id IS NULL AND A1.users_id IS NULL</span><br></pre></td></tr></table></figure><p>è¡¥ä¸Šå…¶å®ƒéƒ¨åˆ†çš„é€»è¾‘ä¸ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">SELECT T.request_at AS `Day`, </span><br><span class="line">ROUND(</span><br><span class="line">SUM(</span><br><span class="line">IF(T.STATUS = &apos;completed&apos;,0,1)</span><br><span class="line">)</span><br><span class="line">/ </span><br><span class="line">COUNT(T.STATUS),</span><br><span class="line">2</span><br><span class="line">) AS `Cancellation Rate`</span><br><span class="line">FROM trips AS T LEFT JOIN </span><br><span class="line">(</span><br><span class="line">SELECT users_id</span><br><span class="line">FROM users</span><br><span class="line">WHERE banned = &apos;Yes&apos;</span><br><span class="line">) AS A ON (T.Client_Id = A.users_id)</span><br><span class="line">LEFT JOIN (</span><br><span class="line">SELECT users_id</span><br><span class="line">FROM users</span><br><span class="line">WHERE banned = &apos;Yes&apos;</span><br><span class="line">) AS A1</span><br><span class="line">ON (T.Driver_Id = A1.users_id)</span><br><span class="line">WHERE A.users_id IS NULL AND A1.users_id IS NULL AND T.request_at BETWEEN &apos;2013-10-01&apos; AND &apos;2013-10-03&apos;</span><br><span class="line">GROUP BY T.request_at</span><br></pre></td></tr></table></figure><h1 id="è§£æ³•ä¸‰"><a href="#è§£æ³•ä¸‰" class="headerlink" title="è§£æ³•ä¸‰"></a>è§£æ³•ä¸‰</h1><p>ä¸è§£æ³•äºŒæ€è·¯ç›¸åŒã€‚æ‰¾å‡ºè¢«ç¦æ­¢çš„ç”¨æˆ·åï¼Œä¸å†è¿æ¥è¡Œç¨‹è¡¨å’Œç”¨æˆ·è¡¨ï¼Œç›´æ¥ä»è¡Œç¨‹è¡¨ä¸­æ’é™¤æ‰è¢«è¢«ç¦æ­¢ç”¨æˆ·çš„è¡Œç¨‹è®°å½•ã€‚</p><p>è¢«ç¦æ­¢çš„ç”¨æˆ·ç”¨å­æŸ¥è¯¢ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(</span><br><span class="line">SELECT users_id</span><br><span class="line">FROM users</span><br><span class="line">WHERE banned = &apos;Yes&apos;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>è¡Œç¨‹è¡¨ä¸­ client_id å’Œ driver_id éƒ½åœ¨æ­¤å­æŸ¥è¯¢ç»“æœä¸­çš„è¡Œè¦å‰”é™¤æ‰ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">SELECT *</span><br><span class="line">FROM trips AS T</span><br><span class="line">WHERE </span><br><span class="line">T.Client_Id NOT IN (</span><br><span class="line">SELECT users_id</span><br><span class="line">FROM users</span><br><span class="line">WHERE banned = &apos;Yes&apos;</span><br><span class="line">)</span><br><span class="line">AND</span><br><span class="line">T.Driver_Id NOT IN (</span><br><span class="line">SELECT users_id</span><br><span class="line">FROM users</span><br><span class="line">WHERE banned = &apos;Yes&apos;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>è¡¥ä¸Šå…¶å®ƒéƒ¨åˆ†ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">SELECT T.request_at AS `Day`, </span><br><span class="line">ROUND(</span><br><span class="line">SUM(</span><br><span class="line">IF(T.STATUS = &apos;completed&apos;,0,1)</span><br><span class="line">)</span><br><span class="line">/ </span><br><span class="line">COUNT(T.STATUS),</span><br><span class="line">2</span><br><span class="line">) AS `Cancellation Rate`</span><br><span class="line">FROM trips AS T</span><br><span class="line">WHERE </span><br><span class="line">T.Client_Id NOT IN (</span><br><span class="line">SELECT users_id</span><br><span class="line">FROM users</span><br><span class="line">WHERE banned = &apos;Yes&apos;</span><br><span class="line">)</span><br><span class="line">AND</span><br><span class="line">T.Driver_Id NOT IN (</span><br><span class="line">SELECT users_id</span><br><span class="line">FROM users</span><br><span class="line">WHERE banned = &apos;Yes&apos;</span><br><span class="line">)</span><br><span class="line">AND T.request_at BETWEEN &apos;2013-10-01&apos; AND &apos;2013-10-03&apos;</span><br><span class="line">GROUP BY T.request_at</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å†™ä¸€æ®µ SQL è¯­å¥æŸ¥å‡º â€œ2013-10-01â€ è‡³ â€œ2013-10-03â€ æœŸé—´éç¦æ­¢ç”¨æˆ·ï¼ˆä¹˜å®¢å’Œå¸æœºéƒ½å¿…é¡»æœªè¢«ç¦æ­¢ï¼‰çš„å–æ¶ˆç‡ã€‚éç¦æ­¢ç”¨æˆ·å³ Ban&lt;br&gt;ned ä¸º No çš„ç”¨æˆ·ï¼Œç¦æ­¢ç”¨æˆ·å³ Banned ä¸º Yes çš„ç”¨æˆ·ã€‚ &lt;/p&gt;
    
    </summary>
    
      <category term="2021å¹´10æœˆ" scheme="http://yoursite.com/categories/2021%E5%B9%B410%E6%9C%88/"/>
    
    
      <category term="LeetCode" scheme="http://yoursite.com/tags/LeetCode/"/>
    
      <category term="Database" scheme="http://yoursite.com/tags/Database/"/>
    
  </entry>
  
</feed>
